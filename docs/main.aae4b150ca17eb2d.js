"use strict";(self.webpackChunktask_managment=self.webpackChunktask_managment||[]).push([[179],{9058:(St,Pe,F)=>{F.d(Pe,{BH:()=>pe,G6:()=>_e,L:()=>De,LL:()=>ce,Pz:()=>ze,Sg:()=>et,UG:()=>Pt,ZB:()=>ue,ZR:()=>Qe,aH:()=>ge,b$:()=>On,eu:()=>$e,hl:()=>Ae,jU:()=>Oe,m9:()=>Ss,n2:()=>Xt,ne:()=>An,pd:()=>fn,r3:()=>Wn,ru:()=>Zn,tV:()=>X,uI:()=>dt,vZ:()=>Yr,w1:()=>rr,xO:()=>Kt,xb:()=>Ui,z$:()=>Ze,zd:()=>nn});const Z=function(G){const j=[];let V=0;for(let q=0;q<G.length;q++){let ee=G.charCodeAt(q);ee<128?j[V++]=ee:ee<2048?(j[V++]=ee>>6|192,j[V++]=63&ee|128):55296==(64512&ee)&&q+1<G.length&&56320==(64512&G.charCodeAt(q+1))?(ee=65536+((1023&ee)<<10)+(1023&G.charCodeAt(++q)),j[V++]=ee>>18|240,j[V++]=ee>>12&63|128,j[V++]=ee>>6&63|128,j[V++]=63&ee|128):(j[V++]=ee>>12|224,j[V++]=ee>>6&63|128,j[V++]=63&ee|128)}return j},ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,j){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let ee=0;ee<G.length;ee+=3){const je=G[ee],We=ee+1<G.length,Et=We?G[ee+1]:0,ln=ee+2<G.length,ft=ln?G[ee+2]:0;let Ht=(15&Et)<<2|ft>>6,Ki=63&ft;ln||(Ki=64,We||(Ht=64)),q.push(V[je>>2],V[(3&je)<<4|Et>>4],V[Ht],V[Ki])}return q.join("")},encodeString(G,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(G):this.encodeByteArray(Z(G),j)},decodeString(G,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(G):function(G){const j=[];let V=0,q=0;for(;V<G.length;){const ee=G[V++];if(ee<128)j[q++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const je=G[V++];j[q++]=String.fromCharCode((31&ee)<<6|63&je)}else if(ee>239&&ee<365){const ln=((7&ee)<<18|(63&G[V++])<<12|(63&G[V++])<<6|63&G[V++])-65536;j[q++]=String.fromCharCode(55296+(ln>>10)),j[q++]=String.fromCharCode(56320+(1023&ln))}else{const je=G[V++],We=G[V++];j[q++]=String.fromCharCode((15&ee)<<12|(63&je)<<6|63&We)}}return j.join("")}(this.decodeStringToByteArray(G,j))},decodeStringToByteArray(G,j){this.init_();const V=j?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let ee=0;ee<G.length;){const je=V[G.charAt(ee++)],Et=ee<G.length?V[G.charAt(ee)]:0;++ee;const ft=ee<G.length?V[G.charAt(ee)]:64;++ee;const Bt=ee<G.length?V[G.charAt(ee)]:64;if(++ee,null==je||null==Et||null==ft||null==Bt)throw new me;q.push(je<<2|Et>>4),64!==ft&&(q.push(Et<<4&240|ft>>2),64!==Bt&&q.push(ft<<6&192|Bt))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class me extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const De=function(G){return function(G){const j=Z(G);return ae.encodeByteArray(j,!0)}(G).replace(/\./g,"")},X=function(G){try{return ae.decodeString(G,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function ue(G,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return j}for(const V in j)!j.hasOwnProperty(V)||!Ue(V)||(G[V]=ue(G[V],j[V]));return G}function Ue(G){return"__proto__"!==G}const st=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const j=G&&X(G[1]);return j&&JSON.parse(j)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},ge=()=>{var G;return null===(G=st())||void 0===G?void 0:G.config},ze=G=>{var j;return null===(j=st())||void 0===j?void 0:j[`_${G}`]};class pe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,V)=>{this.resolve=j,this.reject=V})}wrapCallback(j){return(V,q)=>{V?this.reject(V):this.resolve(q),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(V):j(V,q))}}}function et(G,j){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=j||"demo-project",ee=G.iat||0,je=G.sub||G.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:ee,exp:ee+3600,auth_time:ee,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},G);return[De(JSON.stringify({alg:"none",type:"JWT"})),De(JSON.stringify(We)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function dt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Pt(){var G;const j=null===(G=st())||void 0===G?void 0:G.forceEnvironment;if("node"===j)return!0;if("browser"===j)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Oe(){return typeof window<"u"||Xt()}function Xt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Zn(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function On(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rr(){const G=Ze();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function _e(){return!Pt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function $e(){return new Promise((G,j)=>{try{let V=!0;const q="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(q);ee.onsuccess=()=>{ee.result.close(),V||self.indexedDB.deleteDatabase(q),G(!0)},ee.onupgradeneeded=()=>{V=!1},ee.onerror=()=>{var je;j((null===(je=ee.error)||void 0===je?void 0:je.message)||"")}}catch(V){j(V)}})}class Qe extends Error{constructor(j,V,q){super(V),this.code=j,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(j,V,q){this.service=j,this.serviceName=V,this.errors=q}create(j,...V){const q=V[0]||{},ee=`${this.service}/${j}`,je=this.errors[j],We=je?function yt(G,j){return G.replace(Lt,(V,q)=>{const ee=j[q];return null!=ee?String(ee):`<${q}?>`})}(je,q):"Error";return new Qe(ee,`${this.serviceName}: ${We} (${ee}).`,q)}}const Lt=/\{\$([^}]+)}/g;function Wn(G,j){return Object.prototype.hasOwnProperty.call(G,j)}function Ui(G){for(const j in G)if(Object.prototype.hasOwnProperty.call(G,j))return!1;return!0}function Yr(G,j){if(G===j)return!0;const V=Object.keys(G),q=Object.keys(j);for(const ee of V){if(!q.includes(ee))return!1;const je=G[ee],We=j[ee];if(Nr(je)&&Nr(We)){if(!Yr(je,We))return!1}else if(je!==We)return!1}for(const ee of q)if(!V.includes(ee))return!1;return!0}function Nr(G){return null!==G&&"object"==typeof G}function Kt(G){const j=[];for(const[V,q]of Object.entries(G))Array.isArray(q)?q.forEach(ee=>{j.push(encodeURIComponent(V)+"="+encodeURIComponent(ee))}):j.push(encodeURIComponent(V)+"="+encodeURIComponent(q));return j.length?"&"+j.join("&"):""}function nn(G){const j={};return G.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[ee,je]=q.split("=");j[decodeURIComponent(ee)]=decodeURIComponent(je)}}),j}function fn(G){const j=G.indexOf("?");if(!j)return"";const V=G.indexOf("#",j);return G.substring(j,V>0?V:void 0)}function An(G,j){const V=new Wt(G,j);return V.subscribe.bind(V)}class Wt{constructor(j,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{j(this)}).catch(q=>{this.error(q)})}next(j){this.forEachObserver(V=>{V.next(j)})}error(j){this.forEachObserver(V=>{V.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,V,q){let ee;if(void 0===j&&void 0===V&&void 0===q)throw new Error("Missing Observer.");ee=function Cr(G,j){if("object"!=typeof G||null===G)return!1;for(const V of j)if(V in G&&"function"==typeof G[V])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:V,complete:q},void 0===ee.next&&(ee.next=$r),void 0===ee.error&&(ee.error=$r),void 0===ee.complete&&(ee.complete=$r);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),je}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,j)}sendOne(j,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{V(this.observers[j])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $r(){}function Ss(G){return G&&G._delegate?G._delegate:G}},5148:(St,Pe,F)=>{F.d(Pe,{e:()=>De});var E=F(5619),Y=F(5592),Q=F(4664),Z=F(2459),he=F(7398),ae=F(6306),me=F(5879),Ne=F(891);let De=(()=>{class X{constructor(ue){this.firestore=ue,this.userSubject=new E.X(null),this.user$=this.userSubject.asObservable()}signUp(ue){const Ue={...ue,role:"user",managedUsers:[],hasManager:!1,tasks:[]};return new Y.y(Be=>{this.checkIfEmailExists(Ue.email).pipe((0,Q.w)(Xe=>{if(Xe)throw new Error("Email already exists");return(0,Z.D)(this.firestore.collection("users").add(Ue))}),(0,Q.w)(Xe=>{const Ke=Xe.id;return this.getDocumentData(Xe).pipe((0,he.U)(Ge=>({uuid:Ke,...Ge})))})).subscribe(Xe=>{Be.next(Xe),Be.complete(),this.userSubject.next(Xe)},Xe=>{Be.error(Xe.message)})})}signIn(ue,Ue){return new Y.y(Be=>{this.firestore.collection("users",Xe=>Xe.where("email","==",ue).where("password","==",Ue)).get().pipe((0,he.U)(Xe=>{if(Xe.empty)throw new Error("Invalid email or password");{const Ke=Xe.docs[0],Ge=Ke.data();console.log(Ke.data());const st=Ke.id;return this.userSubject.next({uuid:st,...Ge}),{uuid:st,...Ge}}}),(0,ae.K)(Xe=>{throw Be.error(Xe.message),Xe})).subscribe(Xe=>{Be.next(Xe),Be.complete()},Xe=>{Be.error(Xe.message)})})}checkIfEmailExists(ue){return this.firestore.collection("users",Ue=>Ue.where("email","==",ue)).get().pipe((0,he.U)(Ue=>!Ue.empty))}getDocumentData(ue){return new Y.y(Ue=>{ue.get().then(Be=>{Be.exists?Ue.next(Be.data()):Ue.error("Document not found"),Ue.complete()}).catch(Be=>{Ue.error(Be)})})}getUserRole(ue){return this.firestore.collection("users").doc(ue).valueChanges().pipe((0,he.U)(Ue=>{if(Ue)return Ue.role}))}isAuthenticated(){return this.user$.pipe((0,he.U)(ue=>!!ue))}static#e=this.\u0275fac=function(Ue){return new(Ue||X)(me.LFG(Ne.ST))};static#t=this.\u0275prov=me.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"})}return X})()},7908:(St,Pe,F)=>{var E=F(6593),Y=F(8948),Q=F(5879),Z=F(5148),he=F(6814);function ae(Ge,st){1&Ge&&(Q.TgZ(0,"a",12),Q._uU(1,"Manage Tasks"),Q.qZA())}function me(Ge,st){1&Ge&&(Q.TgZ(0,"a",13),Q._uU(1,"Manage Users"),Q.qZA())}let Ne=(()=>{class Ge{constructor(It,_t){this.authService=It,this.router=_t}ngOnInit(){this.getUserRole()}getUserRole(){const It=localStorage.getItem("userUUID");It&&this.authService.getUserRole(It).subscribe(_t=>{this.userRole=_t})}onLogout(){localStorage.removeItem("userUUID"),localStorage.removeItem("userRole"),this.router.navigate(["/auth/login"])}static#e=this.\u0275fac=function(_t){return new(_t||Ge)(Q.Y36(Z.e),Q.Y36(Y.F0))};static#t=this.\u0275cmp=Q.Xpm({type:Ge,selectors:[["app-header"]],decls:16,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["href","javascript:void(0)",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],["routerLinkActive","active",1,"nav-item"],["class","nav-link","routerLink","/manager/task-management",4,"ngIf"],["class","nav-link","routerLink","/admin/user-management",4,"ngIf"],[1,"navbar-nav","ms-auto"],[1,"nav-link",3,"click"],["routerLink","/manager/task-management",1,"nav-link"],["routerLink","/admin/user-management",1,"nav-link"]],template:function(_t,ge){1&_t&&(Q.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),Q._uU(3,"Task Management"),Q.qZA(),Q.TgZ(4,"button",3),Q._UZ(5,"span",4),Q.qZA(),Q.TgZ(6,"div",5)(7,"ul",6)(8,"li",7),Q.YNc(9,ae,2,0,"a",8),Q.qZA(),Q.TgZ(10,"li",7),Q.YNc(11,me,2,0,"a",9),Q.qZA()(),Q.TgZ(12,"ul",10)(13,"li",7)(14,"a",11),Q.NdJ("click",function(){return ge.onLogout()}),Q._uU(15,"Logout"),Q.qZA()()()()()()),2&_t&&(Q.xp6(9),Q.Q6J("ngIf","admin"===ge.userRole),Q.xp6(2),Q.Q6J("ngIf","admin"===ge.userRole))},dependencies:[he.O5,Y.rH,Y.Od],styles:[".navbar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{cursor:pointer}.nav-item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%], .active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#22aed6}"]})}return Ge})();const re=[{path:"",redirectTo:"/auth",pathMatch:"full"},{path:"",component:(()=>{class Ge{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(_t){return new(_t||Ge)};static#t=this.\u0275cmp=Q.Xpm({type:Ge,selectors:[["app-layout"]],decls:5,vars:0,consts:[[1,"main-content"],[1,"page-content"],[1,"container-fluid"]],template:function(_t,ge){1&_t&&(Q._UZ(0,"app-header"),Q.TgZ(1,"div",0)(2,"div",1)(3,"div",2),Q._UZ(4,"router-outlet"),Q.qZA()()())},dependencies:[Y.lC,Ne]})}return Ge})(),loadChildren:()=>Promise.all([F.e(208),F.e(243)]).then(F.bind(F,9243)).then(Ge=>Ge.LayoutModule)},{path:"auth",loadChildren:()=>Promise.all([F.e(354),F.e(208),F.e(592),F.e(444)]).then(F.bind(F,9444)).then(Ge=>Ge.AuthModule)},{path:"**",component:(()=>{class Ge{constructor(It){this.location=It}goBack(){console.log(this.location.back())}static#e=this.\u0275fac=function(_t){return new(_t||Ge)(Q.Y36(he.Ye))};static#t=this.\u0275cmp=Q.Xpm({type:Ge,selectors:[["app-not-found"]],decls:7,vars:0,consts:[[1,"not-found-container"],[1,"not-found-title"],[1,"not-found-message"],[1,"not-found-link",3,"click"]],template:function(_t,ge){1&_t&&(Q.TgZ(0,"div",0)(1,"h1",1),Q._uU(2,"404"),Q.qZA(),Q.TgZ(3,"p",2),Q._uU(4,"Oops! The page you're looking for doesn't exist."),Q.qZA(),Q.TgZ(5,"a",3),Q.NdJ("click",function(){return ge.goBack()}),Q._uU(6,"Go back to Home"),Q.qZA()())},styles:[".not-found-container[_ngcontent-%COMP%]{text-align:center;padding:50px;background-color:#f9f9f9}.not-found-title[_ngcontent-%COMP%]{font-size:100px;color:#ff6f61;margin:0}.not-found-message[_ngcontent-%COMP%]{font-size:20px;color:#333}.not-found-link[_ngcontent-%COMP%]{font-size:18px;color:#007bff;text-decoration:none}.not-found-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}return Ge})()}];let ue=(()=>{class Ge{static#e=this.\u0275fac=function(_t){return new(_t||Ge)};static#t=this.\u0275mod=Q.oAB({type:Ge});static#n=this.\u0275inj=Q.cJS({imports:[Y.Bz.forRoot(re),Y.Bz]})}return Ge})(),Ue=(()=>{class Ge{constructor(){this.title="task-managment"}ngOnInit(){}static#e=this.\u0275fac=function(_t){return new(_t||Ge)};static#t=this.\u0275cmp=Q.Xpm({type:Ge,selectors:[["app-root"]],decls:1,vars:0,template:function(_t,ge){1&_t&&Q._UZ(0,"router-outlet")},dependencies:[Y.lC]})}return Ge})();var Be=F(7217);const Xe_firebase={apiKey:"AIzaSyBIrhR7WsQqu2qEayZQjF7qv0upf2h49qI",authDomain:"task-management-36d42.firebaseapp.com",projectId:"task-management-36d42",storageBucket:"task-management-36d42.appspot.com",messagingSenderId:"307301341317",appId:"1:307301341317:web:f93f99529bba61b98971ec"};let Ke=(()=>{class Ge{static#e=this.\u0275fac=function(_t){return new(_t||Ge)};static#t=this.\u0275mod=Q.oAB({type:Ge,bootstrap:[Ue]});static#n=this.\u0275inj=Q.cJS({imports:[E.b2,ue,Be.hO.initializeApp(Xe_firebase)]})}return Ge})();E.q6().bootstrapModule(Ke).catch(Ge=>console.error(Ge))},5619:(St,Pe,F)=>{F.d(Pe,{X:()=>Y});var E=F(8645);class Y extends E.x{constructor(Z){super(),this._value=Z}get value(){return this.getValue()}_subscribe(Z){const he=super._subscribe(Z);return!he.closed&&Z.next(this._value),he}getValue(){const{hasError:Z,thrownError:he,_value:ae}=this;if(Z)throw he;return this._throwIfClosed(),ae}next(Z){super.next(this._value=Z)}}},5592:(St,Pe,F)=>{F.d(Pe,{y:()=>Ne});var E=F(305),Y=F(7394),Q=F(4850),Z=F(8407),he=F(2653),ae=F(4674),me=F(1441);let Ne=(()=>{class ue{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const Xe=new ue;return Xe.source=this,Xe.operator=Be,Xe}subscribe(Be,Xe,Ke){const Ge=function re(ue){return ue&&ue instanceof E.Lv||function X(ue){return ue&&(0,ae.m)(ue.next)&&(0,ae.m)(ue.error)&&(0,ae.m)(ue.complete)}(ue)&&(0,Y.Nn)(ue)}(Be)?Be:new E.Hp(Be,Xe,Ke);return(0,me.x)(()=>{const{operator:st,source:It}=this;Ge.add(st?st.call(Ge,It):It?this._subscribe(Ge):this._trySubscribe(Ge))}),Ge}_trySubscribe(Be){try{return this._subscribe(Be)}catch(Xe){Be.error(Xe)}}forEach(Be,Xe){return new(Xe=De(Xe))((Ke,Ge)=>{const st=new E.Hp({next:It=>{try{Be(It)}catch(_t){Ge(_t),st.unsubscribe()}},error:Ge,complete:Ke});this.subscribe(st)})}_subscribe(Be){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(Be)}[Q.L](){return this}pipe(...Be){return(0,Z.U)(Be)(this)}toPromise(Be){return new(Be=De(Be))((Xe,Ke)=>{let Ge;this.subscribe(st=>Ge=st,st=>Ke(st),()=>Xe(Ge))})}}return ue.create=Ue=>new ue(Ue),ue})();function De(ue){var Ue;return null!==(Ue=ue??he.config.Promise)&&void 0!==Ue?Ue:Promise}},8645:(St,Pe,F)=>{F.d(Pe,{x:()=>me});var E=F(5592),Y=F(7394);const Z=(0,F(2306).d)(De=>function(){De(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=F(9039),ae=F(1441);let me=(()=>{class De extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const ue=new Ne(this,this);return ue.operator=re,ue}_throwIfClosed(){if(this.closed)throw new Z}next(re){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ue of this.currentObservers)ue.next(re)}})}error(re){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:ue}=this;for(;ue.length;)ue.shift().error(re)}})}complete(){(0,ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:ue,isStopped:Ue,observers:Be}=this;return ue||Ue?Y.Lc:(this.currentObservers=null,Be.push(re),new Y.w0(()=>{this.currentObservers=null,(0,he.P)(Be,re)}))}_checkFinalizedStatuses(re){const{hasError:ue,thrownError:Ue,isStopped:Be}=this;ue?re.error(Ue):Be&&re.complete()}asObservable(){const re=new E.y;return re.source=this,re}}return De.create=(X,re)=>new Ne(X,re),De})();class Ne extends me{constructor(X,re){super(),this.destination=X,this.source=re}next(X){var re,ue;null===(ue=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===ue||ue.call(re,X)}error(X){var re,ue;null===(ue=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===ue||ue.call(re,X)}complete(){var X,re;null===(re=null===(X=this.destination)||void 0===X?void 0:X.complete)||void 0===re||re.call(X)}_subscribe(X){var re,ue;return null!==(ue=null===(re=this.source)||void 0===re?void 0:re.subscribe(X))&&void 0!==ue?ue:Y.Lc}}},305:(St,Pe,F)=>{F.d(Pe,{Hp:()=>Ke,Lv:()=>ue});var E=F(4674),Y=F(7394),Q=F(2653),Z=F(3894),he=F(2420);const ae=De("C",void 0,void 0);function De(ge,ze,pe){return{kind:ge,value:ze,error:pe}}var X=F(7599),re=F(1441);class ue extends Y.w0{constructor(ze){super(),this.isStopped=!1,ze?(this.destination=ze,(0,Y.Nn)(ze)&&ze.add(this)):this.destination=_t}static create(ze,pe,et){return new Ke(ze,pe,et)}next(ze){this.isStopped?It(function Ne(ge){return De("N",ge,void 0)}(ze),this):this._next(ze)}error(ze){this.isStopped?It(function me(ge){return De("E",void 0,ge)}(ze),this):(this.isStopped=!0,this._error(ze))}complete(){this.isStopped?It(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ze){this.destination.next(ze)}_error(ze){try{this.destination.error(ze)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Be(ge,ze){return Ue.call(ge,ze)}class Xe{constructor(ze){this.partialObserver=ze}next(ze){const{partialObserver:pe}=this;if(pe.next)try{pe.next(ze)}catch(et){Ge(et)}}error(ze){const{partialObserver:pe}=this;if(pe.error)try{pe.error(ze)}catch(et){Ge(et)}else Ge(ze)}complete(){const{partialObserver:ze}=this;if(ze.complete)try{ze.complete()}catch(pe){Ge(pe)}}}class Ke extends ue{constructor(ze,pe,et){let Ze;if(super(),(0,E.m)(ze)||!ze)Ze={next:ze??void 0,error:pe??void 0,complete:et??void 0};else{let dt;this&&Q.config.useDeprecatedNextContext?(dt=Object.create(ze),dt.unsubscribe=()=>this.unsubscribe(),Ze={next:ze.next&&Be(ze.next,dt),error:ze.error&&Be(ze.error,dt),complete:ze.complete&&Be(ze.complete,dt)}):Ze=ze}this.destination=new Xe(Ze)}}function Ge(ge){Q.config.useDeprecatedSynchronousErrorHandling?(0,re.O)(ge):(0,Z.h)(ge)}function It(ge,ze){const{onStoppedNotification:pe}=Q.config;pe&&X.z.setTimeout(()=>pe(ge,ze))}const _t={closed:!0,next:he.Z,error:function st(ge){throw ge},complete:he.Z}},7394:(St,Pe,F)=>{F.d(Pe,{Lc:()=>ae,w0:()=>he,Nn:()=>me});var E=F(4674);const Q=(0,F(2306).d)(De=>function(re){De(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((ue,Ue)=>`${Ue+1}) ${ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var Z=F(9039);class he{constructor(X){this.initialTeardown=X,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let X;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const Be of re)Be.remove(this);else re.remove(this);const{initialTeardown:ue}=this;if((0,E.m)(ue))try{ue()}catch(Be){X=Be instanceof Q?Be.errors:[Be]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Be of Ue)try{Ne(Be)}catch(Xe){X=X??[],Xe instanceof Q?X=[...X,...Xe.errors]:X.push(Xe)}}if(X)throw new Q(X)}}add(X){var re;if(X&&X!==this)if(this.closed)Ne(X);else{if(X instanceof he){if(X.closed||X._hasParent(this))return;X._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(X)}}_hasParent(X){const{_parentage:re}=this;return re===X||Array.isArray(re)&&re.includes(X)}_addParent(X){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(X),re):re?[re,X]:X}_removeParent(X){const{_parentage:re}=this;re===X?this._parentage=null:Array.isArray(re)&&(0,Z.P)(re,X)}remove(X){const{_finalizers:re}=this;re&&(0,Z.P)(re,X),X instanceof he&&X._removeParent(this)}}he.EMPTY=(()=>{const De=new he;return De.closed=!0,De})();const ae=he.EMPTY;function me(De){return De instanceof he||De&&"closed"in De&&(0,E.m)(De.remove)&&(0,E.m)(De.add)&&(0,E.m)(De.unsubscribe)}function Ne(De){(0,E.m)(De)?De():De.unsubscribe()}},2653:(St,Pe,F)=>{F.d(Pe,{config:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},2572:(St,Pe,F)=>{F.d(Pe,{a:()=>X});var E=F(5592),Y=F(7453),Q=F(2459),Z=F(2737),he=F(7400),ae=F(9940),me=F(2714),Ne=F(8251),De=F(7103);function X(...Ue){const Be=(0,ae.yG)(Ue),Xe=(0,ae.jO)(Ue),{args:Ke,keys:Ge}=(0,Y.D)(Ue);if(0===Ke.length)return(0,Q.D)([],Be);const st=new E.y(function re(Ue,Be,Xe=Z.y){return Ke=>{ue(Be,()=>{const{length:Ge}=Ue,st=new Array(Ge);let It=Ge,_t=Ge;for(let ge=0;ge<Ge;ge++)ue(Be,()=>{const ze=(0,Q.D)(Ue[ge],Be);let pe=!1;ze.subscribe((0,Ne.x)(Ke,et=>{st[ge]=et,pe||(pe=!0,_t--),_t||Ke.next(Xe(st.slice()))},()=>{--It||Ke.complete()}))},Ke)},Ke)}}(Ke,Be,Ge?It=>(0,me.n)(Ge,It):Z.y));return Xe?st.pipe((0,he.Z)(Xe)):st}function ue(Ue,Be,Xe){Ue?(0,De.f)(Xe,Ue,Be):Be()}},5211:(St,Pe,F)=>{F.d(Pe,{z:()=>he});var E=F(7537),Q=F(9940),Z=F(2459);function he(...ae){return function Y(){return(0,E.J)(1)}()((0,Z.D)(ae,(0,Q.yG)(ae)))}},6232:(St,Pe,F)=>{F.d(Pe,{E:()=>Y});const Y=new(F(5592).y)(he=>he.complete())},2459:(St,Pe,F)=>{F.d(Pe,{D:()=>ze});var E=F(4829),Y=F(3093),Q=F(5137),ae=F(5592),Ne=F(4971),De=F(4674),X=F(7103);function ue(pe,et){if(!pe)throw new Error("Iterable cannot be null");return new ae.y(Ze=>{(0,X.f)(Ze,et,()=>{const dt=pe[Symbol.asyncIterator]();(0,X.f)(Ze,et,()=>{dt.next().then(Pt=>{Pt.done?Ze.complete():Ze.next(Pt.value)})},0,!0)})})}var Ue=F(8382),Be=F(4026),Xe=F(4266),Ke=F(3664),Ge=F(5726),st=F(9853),It=F(541);function ze(pe,et){return et?function ge(pe,et){if(null!=pe){if((0,Ue.c)(pe))return function Z(pe,et){return(0,E.Xf)(pe).pipe((0,Q.R)(et),(0,Y.Q)(et))}(pe,et);if((0,Xe.z)(pe))return function me(pe,et){return new ae.y(Ze=>{let dt=0;return et.schedule(function(){dt===pe.length?Ze.complete():(Ze.next(pe[dt++]),Ze.closed||this.schedule())})})}(pe,et);if((0,Be.t)(pe))return function he(pe,et){return(0,E.Xf)(pe).pipe((0,Q.R)(et),(0,Y.Q)(et))}(pe,et);if((0,Ge.D)(pe))return ue(pe,et);if((0,Ke.T)(pe))return function re(pe,et){return new ae.y(Ze=>{let dt;return(0,X.f)(Ze,et,()=>{dt=pe[Ne.h](),(0,X.f)(Ze,et,()=>{let Pt,Oe;try{({value:Pt,done:Oe}=dt.next())}catch(Xt){return void Ze.error(Xt)}Oe?Ze.complete():Ze.next(Pt)},0,!0)}),()=>(0,De.m)(dt?.return)&&dt.return()})}(pe,et);if((0,It.L)(pe))return function _t(pe,et){return ue((0,It.Q)(pe),et)}(pe,et)}throw(0,st.z)(pe)}(pe,et):(0,E.Xf)(pe)}},4829:(St,Pe,F)=>{F.d(Pe,{Xf:()=>Ue});var E=F(7582),Y=F(4266),Q=F(4026),Z=F(5592),he=F(8382),ae=F(5726),me=F(9853),Ne=F(3664),De=F(541),X=F(4674),re=F(3894),ue=F(4850);function Ue(ge){if(ge instanceof Z.y)return ge;if(null!=ge){if((0,he.c)(ge))return function Be(ge){return new Z.y(ze=>{const pe=ge[ue.L]();if((0,X.m)(pe.subscribe))return pe.subscribe(ze);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ge);if((0,Y.z)(ge))return function Xe(ge){return new Z.y(ze=>{for(let pe=0;pe<ge.length&&!ze.closed;pe++)ze.next(ge[pe]);ze.complete()})}(ge);if((0,Q.t)(ge))return function Ke(ge){return new Z.y(ze=>{ge.then(pe=>{ze.closed||(ze.next(pe),ze.complete())},pe=>ze.error(pe)).then(null,re.h)})}(ge);if((0,ae.D)(ge))return st(ge);if((0,Ne.T)(ge))return function Ge(ge){return new Z.y(ze=>{for(const pe of ge)if(ze.next(pe),ze.closed)return;ze.complete()})}(ge);if((0,De.L)(ge))return function It(ge){return st((0,De.Q)(ge))}(ge)}throw(0,me.z)(ge)}function st(ge){return new Z.y(ze=>{(function _t(ge,ze){var pe,et,Ze,dt;return(0,E.mG)(this,void 0,void 0,function*(){try{for(pe=(0,E.KL)(ge);!(et=yield pe.next()).done;)if(ze.next(et.value),ze.closed)return}catch(Pt){Ze={error:Pt}}finally{try{et&&!et.done&&(dt=pe.return)&&(yield dt.call(pe))}finally{if(Ze)throw Ze.error}}ze.complete()})})(ge,ze).catch(pe=>ze.error(pe))})}},3019:(St,Pe,F)=>{F.d(Pe,{T:()=>ae});var E=F(7537),Y=F(4829),Q=F(6232),Z=F(9940),he=F(2459);function ae(...me){const Ne=(0,Z.yG)(me),De=(0,Z._6)(me,1/0),X=me;return X.length?1===X.length?(0,Y.Xf)(X[0]):(0,E.J)(De)((0,he.D)(X,Ne)):Q.E}},2096:(St,Pe,F)=>{F.d(Pe,{of:()=>Q});var E=F(9940),Y=F(2459);function Q(...Z){const he=(0,E.yG)(Z);return(0,Y.D)(Z,he)}},8251:(St,Pe,F)=>{F.d(Pe,{x:()=>Y});var E=F(305);function Y(Z,he,ae,me,Ne){return new Q(Z,he,ae,me,Ne)}class Q extends E.Lv{constructor(he,ae,me,Ne,De,X){super(he),this.onFinalize=De,this.shouldUnsubscribe=X,this._next=ae?function(re){try{ae(re)}catch(ue){he.error(ue)}}:super._next,this._error=Ne?function(re){try{Ne(re)}catch(ue){he.error(ue)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(re){he.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},6306:(St,Pe,F)=>{F.d(Pe,{K:()=>Z});var E=F(4829),Y=F(8251),Q=F(9360);function Z(he){return(0,Q.e)((ae,me)=>{let X,Ne=null,De=!1;Ne=ae.subscribe((0,Y.x)(me,void 0,void 0,re=>{X=(0,E.Xf)(he(re,Z(he)(ae))),Ne?(Ne.unsubscribe(),Ne=null,X.subscribe(me)):De=!0})),De&&(Ne.unsubscribe(),Ne=null,X.subscribe(me))})}},3572:(St,Pe,F)=>{F.d(Pe,{d:()=>Q});var E=F(9360),Y=F(8251);function Q(Z){return(0,E.e)((he,ae)=>{let me=!1;he.subscribe((0,Y.x)(ae,Ne=>{me=!0,ae.next(Ne)},()=>{me||ae.next(Z),ae.complete()}))})}},3997:(St,Pe,F)=>{F.d(Pe,{x:()=>Z});var E=F(2737),Y=F(9360),Q=F(8251);function Z(ae,me=E.y){return ae=ae??he,(0,Y.e)((Ne,De)=>{let X,re=!0;Ne.subscribe((0,Q.x)(De,ue=>{const Ue=me(ue);(re||!ae(X,Ue))&&(re=!1,X=Ue,De.next(ue))}))})}function he(ae,me){return ae===me}},2181:(St,Pe,F)=>{F.d(Pe,{h:()=>Q});var E=F(9360),Y=F(8251);function Q(Z,he){return(0,E.e)((ae,me)=>{let Ne=0;ae.subscribe((0,Y.x)(me,De=>Z.call(he,De,Ne++)&&me.next(De)))})}},1374:(St,Pe,F)=>{F.d(Pe,{P:()=>me});var E=F(6973),Y=F(2181),Q=F(8180),Z=F(3572),he=F(3026),ae=F(2737);function me(Ne,De){const X=arguments.length>=2;return re=>re.pipe(Ne?(0,Y.h)((ue,Ue)=>Ne(ue,Ue,re)):ae.y,(0,Q.q)(1),X?(0,Z.d)(De):(0,he.T)(()=>new E.K))}},7398:(St,Pe,F)=>{F.d(Pe,{U:()=>Q});var E=F(9360),Y=F(8251);function Q(Z,he){return(0,E.e)((ae,me)=>{let Ne=0;ae.subscribe((0,Y.x)(me,De=>{me.next(Z.call(he,De,Ne++))}))})}},975:(St,Pe,F)=>{F.d(Pe,{h:()=>Y});var E=F(7398);function Y(Q){return(0,E.U)(()=>Q)}},7537:(St,Pe,F)=>{F.d(Pe,{J:()=>Q});var E=F(1631),Y=F(2737);function Q(Z=1/0){return(0,E.z)(Y.y,Z)}},1631:(St,Pe,F)=>{F.d(Pe,{z:()=>Ne});var E=F(7398),Y=F(4829),Q=F(9360),Z=F(7103),he=F(8251),me=F(4674);function Ne(De,X,re=1/0){return(0,me.m)(X)?Ne((ue,Ue)=>(0,E.U)((Be,Xe)=>X(ue,Be,Ue,Xe))((0,Y.Xf)(De(ue,Ue))),re):("number"==typeof X&&(re=X),(0,Q.e)((ue,Ue)=>function ae(De,X,re,ue,Ue,Be,Xe,Ke){const Ge=[];let st=0,It=0,_t=!1;const ge=()=>{_t&&!Ge.length&&!st&&X.complete()},ze=et=>st<ue?pe(et):Ge.push(et),pe=et=>{Be&&X.next(et),st++;let Ze=!1;(0,Y.Xf)(re(et,It++)).subscribe((0,he.x)(X,dt=>{Ue?.(dt),Be?ze(dt):X.next(dt)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(st--;Ge.length&&st<ue;){const dt=Ge.shift();Xe?(0,Z.f)(X,Xe,()=>pe(dt)):pe(dt)}ge()}catch(dt){X.error(dt)}}))};return De.subscribe((0,he.x)(X,ze,()=>{_t=!0,ge()})),()=>{Ke?.()}}(ue,Ue,De,re)))}},3093:(St,Pe,F)=>{F.d(Pe,{Q:()=>Z});var E=F(7103),Y=F(9360),Q=F(8251);function Z(he,ae=0){return(0,Y.e)((me,Ne)=>{me.subscribe((0,Q.x)(Ne,De=>(0,E.f)(Ne,he,()=>Ne.next(De),ae),()=>(0,E.f)(Ne,he,()=>Ne.complete(),ae),De=>(0,E.f)(Ne,he,()=>Ne.error(De),ae)))})}},6699:(St,Pe,F)=>{F.d(Pe,{R:()=>Z});var E=F(9360),Y=F(8251);function Z(he,ae){return(0,E.e)(function Q(he,ae,me,Ne,De){return(X,re)=>{let ue=me,Ue=ae,Be=0;X.subscribe((0,Y.x)(re,Xe=>{const Ke=Be++;Ue=ue?he(Ue,Xe,Ke):(ue=!0,Xe),Ne&&re.next(Ue)},De&&(()=>{ue&&re.next(Ue),re.complete()})))}}(he,ae,arguments.length>=2,!0))}},3020:(St,Pe,F)=>{F.d(Pe,{B:()=>he});var E=F(4829),Y=F(8645),Q=F(305),Z=F(9360);function he(me={}){const{connector:Ne=(()=>new Y.x),resetOnError:De=!0,resetOnComplete:X=!0,resetOnRefCountZero:re=!0}=me;return ue=>{let Ue,Be,Xe,Ke=0,Ge=!1,st=!1;const It=()=>{Be?.unsubscribe(),Be=void 0},_t=()=>{It(),Ue=Xe=void 0,Ge=st=!1},ge=()=>{const ze=Ue;_t(),ze?.unsubscribe()};return(0,Z.e)((ze,pe)=>{Ke++,!st&&!Ge&&It();const et=Xe=Xe??Ne();pe.add(()=>{Ke--,0===Ke&&!st&&!Ge&&(Be=ae(ge,re))}),et.subscribe(pe),!Ue&&Ke>0&&(Ue=new Q.Hp({next:Ze=>et.next(Ze),error:Ze=>{st=!0,It(),Be=ae(_t,De,Ze),et.error(Ze)},complete:()=>{Ge=!0,It(),Be=ae(_t,X),et.complete()}}),(0,E.Xf)(ze).subscribe(Ue))})(ue)}}function ae(me,Ne,...De){if(!0===Ne)return void me();if(!1===Ne)return;const X=new Q.Hp({next:()=>{X.unsubscribe(),me()}});return(0,E.Xf)(Ne(...De)).subscribe(X)}},7921:(St,Pe,F)=>{F.d(Pe,{O:()=>Z});var E=F(5211),Y=F(9940),Q=F(9360);function Z(...he){const ae=(0,Y.yG)(he);return(0,Q.e)((me,Ne)=>{(ae?(0,E.z)(he,me,ae):(0,E.z)(he,me)).subscribe(Ne)})}},5137:(St,Pe,F)=>{F.d(Pe,{R:()=>Y});var E=F(9360);function Y(Q,Z=0){return(0,E.e)((he,ae)=>{ae.add(Q.schedule(()=>he.subscribe(ae),Z))})}},4664:(St,Pe,F)=>{F.d(Pe,{w:()=>Z});var E=F(4829),Y=F(9360),Q=F(8251);function Z(he,ae){return(0,Y.e)((me,Ne)=>{let De=null,X=0,re=!1;const ue=()=>re&&!De&&Ne.complete();me.subscribe((0,Q.x)(Ne,Ue=>{De?.unsubscribe();let Be=0;const Xe=X++;(0,E.Xf)(he(Ue,Xe)).subscribe(De=(0,Q.x)(Ne,Ke=>Ne.next(ae?ae(Ue,Ke,Xe,Be++):Ke),()=>{De=null,ue()}))},()=>{re=!0,ue()}))})}},8180:(St,Pe,F)=>{F.d(Pe,{q:()=>Z});var E=F(6232),Y=F(9360),Q=F(8251);function Z(he){return he<=0?()=>E.E:(0,Y.e)((ae,me)=>{let Ne=0;ae.subscribe((0,Q.x)(me,De=>{++Ne<=he&&(me.next(De),he<=Ne&&me.complete())}))})}},9773:(St,Pe,F)=>{F.d(Pe,{R:()=>he});var E=F(9360),Y=F(8251),Q=F(4829),Z=F(2420);function he(ae){return(0,E.e)((me,Ne)=>{(0,Q.Xf)(ae).subscribe((0,Y.x)(Ne,()=>Ne.complete(),Z.Z)),!Ne.closed&&me.subscribe(Ne)})}},9397:(St,Pe,F)=>{F.d(Pe,{b:()=>he});var E=F(4674),Y=F(9360),Q=F(8251),Z=F(2737);function he(ae,me,Ne){const De=(0,E.m)(ae)||me||Ne?{next:ae,error:me,complete:Ne}:ae;return De?(0,Y.e)((X,re)=>{var ue;null===(ue=De.subscribe)||void 0===ue||ue.call(De);let Ue=!0;X.subscribe((0,Q.x)(re,Be=>{var Xe;null===(Xe=De.next)||void 0===Xe||Xe.call(De,Be),re.next(Be)},()=>{var Be;Ue=!1,null===(Be=De.complete)||void 0===Be||Be.call(De),re.complete()},Be=>{var Xe;Ue=!1,null===(Xe=De.error)||void 0===Xe||Xe.call(De,Be),re.error(Be)},()=>{var Be,Xe;Ue&&(null===(Be=De.unsubscribe)||void 0===Be||Be.call(De)),null===(Xe=De.finalize)||void 0===Xe||Xe.call(De)}))}):Z.y}},3026:(St,Pe,F)=>{F.d(Pe,{T:()=>Z});var E=F(6973),Y=F(9360),Q=F(8251);function Z(ae=he){return(0,Y.e)((me,Ne)=>{let De=!1;me.subscribe((0,Q.x)(Ne,X=>{De=!0,Ne.next(X)},()=>De?Ne.complete():Ne.error(ae())))})}function he(){return new E.K}},1954:(St,Pe,F)=>{F.d(Pe,{o:()=>he});var E=F(7394);class Y extends E.w0{constructor(me,Ne){super()}schedule(me,Ne=0){return this}}const Q={setInterval(ae,me,...Ne){const{delegate:De}=Q;return De?.setInterval?De.setInterval(ae,me,...Ne):setInterval(ae,me,...Ne)},clearInterval(ae){const{delegate:me}=Q;return(me?.clearInterval||clearInterval)(ae)},delegate:void 0};var Z=F(9039);class he extends Y{constructor(me,Ne){super(me,Ne),this.scheduler=me,this.work=Ne,this.pending=!1}schedule(me,Ne=0){var De;if(this.closed)return this;this.state=me;const X=this.id,re=this.scheduler;return null!=X&&(this.id=this.recycleAsyncId(re,X,Ne)),this.pending=!0,this.delay=Ne,this.id=null!==(De=this.id)&&void 0!==De?De:this.requestAsyncId(re,this.id,Ne),this}requestAsyncId(me,Ne,De=0){return Q.setInterval(me.flush.bind(me,this),De)}recycleAsyncId(me,Ne,De=0){if(null!=De&&this.delay===De&&!1===this.pending)return Ne;null!=Ne&&Q.clearInterval(Ne)}execute(me,Ne){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const De=this._execute(me,Ne);if(De)return De;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,Ne){let X,De=!1;try{this.work(me)}catch(re){De=!0,X=re||new Error("Scheduled action threw falsy error")}if(De)return this.unsubscribe(),X}unsubscribe(){if(!this.closed){const{id:me,scheduler:Ne}=this,{actions:De}=Ne;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Z.P)(De,this),null!=me&&(this.id=this.recycleAsyncId(Ne,me,null)),this.delay=null,super.unsubscribe()}}}},2631:(St,Pe,F)=>{F.d(Pe,{v:()=>Q});var E=F(4552);class Y{constructor(he,ae=Y.now){this.schedulerActionCtor=he,this.now=ae}schedule(he,ae=0,me){return new this.schedulerActionCtor(this,he).schedule(me,ae)}}Y.now=E.l.now;class Q extends Y{constructor(he,ae=Y.now){super(he,ae),this.actions=[],this._active=!1}flush(he){const{actions:ae}=this;if(this._active)return void ae.push(he);let me;this._active=!0;do{if(me=he.execute(he.state,he.delay))break}while(he=ae.shift());if(this._active=!1,me){for(;he=ae.shift();)he.unsubscribe();throw me}}}},6321:(St,Pe,F)=>{F.d(Pe,{P:()=>Z,z:()=>Q});var E=F(1954);const Q=new(F(2631).v)(E.o),Z=Q},4552:(St,Pe,F)=>{F.d(Pe,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},7599:(St,Pe,F)=>{F.d(Pe,{z:()=>E});const E={setTimeout(Y,Q,...Z){const{delegate:he}=E;return he?.setTimeout?he.setTimeout(Y,Q,...Z):setTimeout(Y,Q,...Z)},clearTimeout(Y){const{delegate:Q}=E;return(Q?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},4971:(St,Pe,F)=>{F.d(Pe,{h:()=>Y});const Y=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(St,Pe,F)=>{F.d(Pe,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(St,Pe,F)=>{F.d(Pe,{K:()=>Y});const Y=(0,F(2306).d)(Q=>function(){Q(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(St,Pe,F)=>{F.d(Pe,{_6:()=>ae,jO:()=>Z,yG:()=>he});var E=F(4674),Y=F(671);function Q(me){return me[me.length-1]}function Z(me){return(0,E.m)(Q(me))?me.pop():void 0}function he(me){return(0,Y.K)(Q(me))?me.pop():void 0}function ae(me,Ne){return"number"==typeof Q(me)?me.pop():Ne}},7453:(St,Pe,F)=>{F.d(Pe,{D:()=>he});const{isArray:E}=Array,{getPrototypeOf:Y,prototype:Q,keys:Z}=Object;function he(me){if(1===me.length){const Ne=me[0];if(E(Ne))return{args:Ne,keys:null};if(function ae(me){return me&&"object"==typeof me&&Y(me)===Q}(Ne)){const De=Z(Ne);return{args:De.map(X=>Ne[X]),keys:De}}}return{args:me,keys:null}}},9039:(St,Pe,F)=>{function E(Y,Q){if(Y){const Z=Y.indexOf(Q);0<=Z&&Y.splice(Z,1)}}F.d(Pe,{P:()=>E})},2306:(St,Pe,F)=>{function E(Y){const Z=Y(he=>{Error.call(he),he.stack=(new Error).stack});return Z.prototype=Object.create(Error.prototype),Z.prototype.constructor=Z,Z}F.d(Pe,{d:()=>E})},2714:(St,Pe,F)=>{function E(Y,Q){return Y.reduce((Z,he,ae)=>(Z[he]=Q[ae],Z),{})}F.d(Pe,{n:()=>E})},1441:(St,Pe,F)=>{F.d(Pe,{O:()=>Z,x:()=>Q});var E=F(2653);let Y=null;function Q(he){if(E.config.useDeprecatedSynchronousErrorHandling){const ae=!Y;if(ae&&(Y={errorThrown:!1,error:null}),he(),ae){const{errorThrown:me,error:Ne}=Y;if(Y=null,me)throw Ne}}else he()}function Z(he){E.config.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=he)}},7103:(St,Pe,F)=>{function E(Y,Q,Z,he=0,ae=!1){const me=Q.schedule(function(){Z(),ae?Y.add(this.schedule(null,he)):this.unsubscribe()},he);if(Y.add(me),!ae)return me}F.d(Pe,{f:()=>E})},2737:(St,Pe,F)=>{function E(Y){return Y}F.d(Pe,{y:()=>E})},4266:(St,Pe,F)=>{F.d(Pe,{z:()=>E});const E=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},5726:(St,Pe,F)=>{F.d(Pe,{D:()=>Y});var E=F(4674);function Y(Q){return Symbol.asyncIterator&&(0,E.m)(Q?.[Symbol.asyncIterator])}},4674:(St,Pe,F)=>{function E(Y){return"function"==typeof Y}F.d(Pe,{m:()=>E})},8382:(St,Pe,F)=>{F.d(Pe,{c:()=>Q});var E=F(4850),Y=F(4674);function Q(Z){return(0,Y.m)(Z[E.L])}},3664:(St,Pe,F)=>{F.d(Pe,{T:()=>Q});var E=F(4971),Y=F(4674);function Q(Z){return(0,Y.m)(Z?.[E.h])}},4026:(St,Pe,F)=>{F.d(Pe,{t:()=>Y});var E=F(4674);function Y(Q){return(0,E.m)(Q?.then)}},541:(St,Pe,F)=>{F.d(Pe,{L:()=>Z,Q:()=>Q});var E=F(7582),Y=F(4674);function Q(he){return(0,E.FC)(this,arguments,function*(){const me=he.getReader();try{for(;;){const{value:Ne,done:De}=yield(0,E.qq)(me.read());if(De)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(Ne)}}finally{me.releaseLock()}})}function Z(he){return(0,Y.m)(he?.getReader)}},671:(St,Pe,F)=>{F.d(Pe,{K:()=>Y});var E=F(4674);function Y(Q){return Q&&(0,E.m)(Q.schedule)}},9360:(St,Pe,F)=>{F.d(Pe,{A:()=>Y,e:()=>Q});var E=F(4674);function Y(Z){return(0,E.m)(Z?.lift)}function Q(Z){return he=>{if(Y(he))return he.lift(function(ae){try{return Z(ae,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(St,Pe,F)=>{F.d(Pe,{Z:()=>Z});var E=F(7398);const{isArray:Y}=Array;function Z(he){return(0,E.U)(ae=>function Q(he,ae){return Y(ae)?he(...ae):he(ae)}(he,ae))}},2420:(St,Pe,F)=>{function E(){}F.d(Pe,{Z:()=>E})},8407:(St,Pe,F)=>{F.d(Pe,{U:()=>Q,z:()=>Y});var E=F(2737);function Y(...Z){return Q(Z)}function Q(Z){return 0===Z.length?E.y:1===Z.length?Z[0]:function(ae){return Z.reduce((me,Ne)=>Ne(me),ae)}}},3894:(St,Pe,F)=>{F.d(Pe,{h:()=>Q});var E=F(2653),Y=F(7599);function Q(Z){Y.z.setTimeout(()=>{const{onUnhandledError:he}=E.config;if(!he)throw Z;he(Z)})}},9853:(St,Pe,F)=>{function E(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Pe,{z:()=>E})},6814:(St,Pe,F)=>{F.d(Pe,{Do:()=>Ke,EM:()=>bs,HT:()=>Z,JF:()=>$s,K0:()=>ae,Mn:()=>_r,Mx:()=>Ot,O5:()=>_i,PM:()=>Gn,S$:()=>Ue,Tn:()=>dt,UT:()=>rr,V_:()=>Ne,Ye:()=>Ge,ax:()=>Hr,b0:()=>Xe,bD:()=>En,ez:()=>ji,mk:()=>qn,p6:()=>kn,q:()=>Q,sg:()=>Hr,tP:()=>cs,w_:()=>he,x:()=>Ze});var E=F(5879);let Y=null;function Q(){return Y}function Z(D){Y||(Y=D)}class he{}const ae=new E.OlP("DocumentToken");let me=(()=>{class D{historyGo(P){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||D)};static#t=this.\u0275prov=E.Yz7({token:D,factory:function(){return(0,E.f3M)(De)},providedIn:"platform"})}return D})();const Ne=new E.OlP("Location Initialized");let De=(()=>{class D extends me{constructor(){super(),this._doc=(0,E.f3M)(ae),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Q().getBaseHref(this._doc)}onPopState(P){const L=Q().getGlobalEventTarget(this._doc,"window");return L.addEventListener("popstate",P,!1),()=>L.removeEventListener("popstate",P)}onHashChange(P){const L=Q().getGlobalEventTarget(this._doc,"window");return L.addEventListener("hashchange",P,!1),()=>L.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,L,te){this._history.pushState(P,L,te)}replaceState(P,L,te){this._history.replaceState(P,L,te)}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}static#e=this.\u0275fac=function(L){return new(L||D)};static#t=this.\u0275prov=E.Yz7({token:D,factory:function(){return new D},providedIn:"platform"})}return D})();function X(D,U){if(0==D.length)return U;if(0==U.length)return D;let P=0;return D.endsWith("/")&&P++,U.startsWith("/")&&P++,2==P?D+U.substring(1):1==P?D+U:D+"/"+U}function re(D){const U=D.match(/#|\?|$/),P=U&&U.index||D.length;return D.slice(0,P-("/"===D[P-1]?1:0))+D.slice(P)}function ue(D){return D&&"?"!==D[0]?"?"+D:D}let Ue=(()=>{class D{historyGo(P){throw new Error("Not implemented")}static#e=this.\u0275fac=function(L){return new(L||D)};static#t=this.\u0275prov=E.Yz7({token:D,factory:function(){return(0,E.f3M)(Xe)},providedIn:"root"})}return D})();const Be=new E.OlP("appBaseHref");let Xe=(()=>{class D extends Ue{constructor(P,L){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=L??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return X(this._baseHref,P)}path(P=!1){const L=this._platformLocation.pathname+ue(this._platformLocation.search),te=this._platformLocation.hash;return te&&P?`${L}${te}`:L}pushState(P,L,te,Fe){const nt=this.prepareExternalUrl(te+ue(Fe));this._platformLocation.pushState(P,L,nt)}replaceState(P,L,te,Fe){const nt=this.prepareExternalUrl(te+ue(Fe));this._platformLocation.replaceState(P,L,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static#e=this.\u0275fac=function(L){return new(L||D)(E.LFG(me),E.LFG(Be,8))};static#t=this.\u0275prov=E.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),Ke=(()=>{class D extends Ue{constructor(P,L){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=L&&(this._baseHref=L)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let L=this._platformLocation.hash;return null==L&&(L="#"),L.length>0?L.substring(1):L}prepareExternalUrl(P){const L=X(this._baseHref,P);return L.length>0?"#"+L:L}pushState(P,L,te,Fe){let nt=this.prepareExternalUrl(te+ue(Fe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.pushState(P,L,nt)}replaceState(P,L,te,Fe){let nt=this.prepareExternalUrl(te+ue(Fe));0==nt.length&&(nt=this._platformLocation.pathname),this._platformLocation.replaceState(P,L,nt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static#e=this.\u0275fac=function(L){return new(L||D)(E.LFG(me),E.LFG(Be,8))};static#t=this.\u0275prov=E.Yz7({token:D,factory:D.\u0275fac})}return D})(),Ge=(()=>{class D{constructor(P){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const L=this._locationStrategy.getBaseHref();this._basePath=function ge(D){if(new RegExp("^(https?:)?//").test(D)){const[,P]=D.split(/\/\/[^\/]+/);return P}return D}(re(_t(L))),this._locationStrategy.onPopState(te=>{this._subject.emit({url:this.path(!0),pop:!0,state:te.state,type:te.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,L=""){return this.path()==this.normalize(P+ue(L))}normalize(P){return D.stripTrailingSlash(function It(D,U){if(!D||!U.startsWith(D))return U;const P=U.substring(D.length);return""===P||["/",";","?","#"].includes(P[0])?P:U}(this._basePath,_t(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,L="",te=null){this._locationStrategy.pushState(te,"",P,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+ue(L)),te)}replaceState(P,L="",te=null){this._locationStrategy.replaceState(te,"",P,L),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+ue(L)),te)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(L=>{this._notifyUrlChangeListeners(L.url,L.state)})),()=>{const L=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(L,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",L){this._urlChangeListeners.forEach(te=>te(P,L))}subscribe(P,L,te){return this._subject.subscribe({next:P,error:L,complete:te})}static#e=this.normalizeQueryParams=ue;static#t=this.joinWithSlash=X;static#n=this.stripTrailingSlash=re;static#r=this.\u0275fac=function(L){return new(L||D)(E.LFG(Ue))};static#i=this.\u0275prov=E.Yz7({token:D,factory:function(){return function st(){return new Ge((0,E.LFG)(Ue))}()},providedIn:"root"})}return D})();function _t(D){return D.replace(/\/index.html$/,"")}var Ze=function(D){return D[D.Format=0]="Format",D[D.Standalone=1]="Standalone",D}(Ze||{}),dt=function(D){return D[D.Narrow=0]="Narrow",D[D.Abbreviated=1]="Abbreviated",D[D.Wide=2]="Wide",D[D.Short=3]="Short",D}(dt||{}),Pt=function(D){return D[D.Short=0]="Short",D[D.Medium=1]="Medium",D[D.Long=2]="Long",D[D.Full=3]="Full",D}(Pt||{}),Oe=function(D){return D[D.Decimal=0]="Decimal",D[D.Group=1]="Group",D[D.List=2]="List",D[D.PercentSign=3]="PercentSign",D[D.PlusSign=4]="PlusSign",D[D.MinusSign=5]="MinusSign",D[D.Exponential=6]="Exponential",D[D.SuperscriptingExponent=7]="SuperscriptingExponent",D[D.PerMille=8]="PerMille",D[D.Infinity=9]="Infinity",D[D.NaN=10]="NaN",D[D.TimeSeparator=11]="TimeSeparator",D[D.CurrencyDecimal=12]="CurrencyDecimal",D[D.CurrencyGroup=13]="CurrencyGroup",D}(Oe||{});function _r(D,U,P){const L=(0,E.cg1)(D),Fe=bn([L[E.wAp.DaysFormat],L[E.wAp.DaysStandalone]],U);return bn(Fe,P)}function rr(D,U,P){const L=(0,E.cg1)(D),Fe=bn([L[E.wAp.MonthsFormat],L[E.wAp.MonthsStandalone]],U);return bn(Fe,P)}function Ae(D,U){return bn((0,E.cg1)(D)[E.wAp.DateFormat],U)}function $e(D,U){return bn((0,E.cg1)(D)[E.wAp.TimeFormat],U)}function He(D,U){return bn((0,E.cg1)(D)[E.wAp.DateTimeFormat],U)}function ot(D,U){const P=(0,E.cg1)(D),L=P[E.wAp.NumberSymbols][U];if(typeof L>"u"){if(U===Oe.CurrencyDecimal)return P[E.wAp.NumberSymbols][Oe.Decimal];if(U===Oe.CurrencyGroup)return P[E.wAp.NumberSymbols][Oe.Group]}return L}function Gt(D){if(!D[E.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${D[E.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bn(D,U){for(let P=U;P>-1;P--)if(typeof D[P]<"u")return D[P];throw new Error("Locale data API: locale data undefined")}function Wn(D){const[U,P]=D.split(":");return{hours:+U,minutes:+P}}const Yr=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Nr={},Or=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Kt=function(D){return D[D.Short=0]="Short",D[D.ShortGMT=1]="ShortGMT",D[D.Long=2]="Long",D[D.Extended=3]="Extended",D}(Kt||{}),nn=function(D){return D[D.FullYear=0]="FullYear",D[D.Month=1]="Month",D[D.Date=2]="Date",D[D.Hours=3]="Hours",D[D.Minutes=4]="Minutes",D[D.Seconds=5]="Seconds",D[D.FractionalSeconds=6]="FractionalSeconds",D[D.Day=7]="Day",D}(nn||{}),fn=function(D){return D[D.DayPeriods=0]="DayPeriods",D[D.Days=1]="Days",D[D.Months=2]="Months",D[D.Eras=3]="Eras",D}(fn||{});function kn(D,U,P,L){let te=function G(D){if(V(D))return D;if("number"==typeof D&&!isNaN(D))return new Date(D);if("string"==typeof D){if(D=D.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(D)){const[te,Fe=1,nt=1]=D.split("-").map(Ut=>+Ut);return An(te,Fe-1,nt)}const P=parseFloat(D);if(!isNaN(D-P))return new Date(P);let L;if(L=D.match(Yr))return function j(D){const U=new Date(0);let P=0,L=0;const te=D[8]?U.setUTCFullYear:U.setFullYear,Fe=D[8]?U.setUTCHours:U.setHours;D[9]&&(P=Number(D[9]+D[10]),L=Number(D[9]+D[11])),te.call(U,Number(D[1]),Number(D[2])-1,Number(D[3]));const nt=Number(D[4]||0)-P,Ut=Number(D[5]||0)-L,Cn=Number(D[6]||0),Xn=Math.floor(1e3*parseFloat("0."+(D[7]||0)));return Fe.call(U,nt,Ut,Cn,Xn),U}(L)}const U=new Date(D);if(!V(U))throw new Error(`Unable to convert "${D}" into a date`);return U}(D);U=Wt(P,U)||U;let Ut,nt=[];for(;U;){if(Ut=Or.exec(U),!Ut){nt.push(U);break}{nt=nt.concat(Ut.slice(1));const un=nt.pop();if(!un)break;U=un}}let Cn=te.getTimezoneOffset();L&&(Cn=Cs(L,Cn),te=function Ss(D,U,P){const L=P?-1:1,te=D.getTimezoneOffset();return function Bi(D,U){return(D=new Date(D.getTime())).setMinutes(D.getMinutes()+U),D}(D,L*(Cs(U,te)-te))}(te,L,!0));let Xn="";return nt.forEach(un=>{const mn=function xi(D){if(us[D])return us[D];let U;switch(D){case"G":case"GG":case"GGG":U=Zt(fn.Eras,dt.Abbreviated);break;case"GGGG":U=Zt(fn.Eras,dt.Wide);break;case"GGGGG":U=Zt(fn.Eras,dt.Narrow);break;case"y":U=be(nn.FullYear,1,0,!1,!0);break;case"yy":U=be(nn.FullYear,2,0,!0,!0);break;case"yyy":U=be(nn.FullYear,3,0,!1,!0);break;case"yyyy":U=be(nn.FullYear,4,0,!1,!0);break;case"Y":U=Un(1);break;case"YY":U=Un(2,!0);break;case"YYY":U=Un(3);break;case"YYYY":U=Un(4);break;case"M":case"L":U=be(nn.Month,1,1);break;case"MM":case"LL":U=be(nn.Month,2,1);break;case"MMM":U=Zt(fn.Months,dt.Abbreviated);break;case"MMMM":U=Zt(fn.Months,dt.Wide);break;case"MMMMM":U=Zt(fn.Months,dt.Narrow);break;case"LLL":U=Zt(fn.Months,dt.Abbreviated,Ze.Standalone);break;case"LLLL":U=Zt(fn.Months,dt.Wide,Ze.Standalone);break;case"LLLLL":U=Zt(fn.Months,dt.Narrow,Ze.Standalone);break;case"w":U=tt(1);break;case"ww":U=tt(2);break;case"W":U=tt(1,!0);break;case"d":U=be(nn.Date,1);break;case"dd":U=be(nn.Date,2);break;case"c":case"cc":U=be(nn.Day,1);break;case"ccc":U=Zt(fn.Days,dt.Abbreviated,Ze.Standalone);break;case"cccc":U=Zt(fn.Days,dt.Wide,Ze.Standalone);break;case"ccccc":U=Zt(fn.Days,dt.Narrow,Ze.Standalone);break;case"cccccc":U=Zt(fn.Days,dt.Short,Ze.Standalone);break;case"E":case"EE":case"EEE":U=Zt(fn.Days,dt.Abbreviated);break;case"EEEE":U=Zt(fn.Days,dt.Wide);break;case"EEEEE":U=Zt(fn.Days,dt.Narrow);break;case"EEEEEE":U=Zt(fn.Days,dt.Short);break;case"a":case"aa":case"aaa":U=Zt(fn.DayPeriods,dt.Abbreviated);break;case"aaaa":U=Zt(fn.DayPeriods,dt.Wide);break;case"aaaaa":U=Zt(fn.DayPeriods,dt.Narrow);break;case"b":case"bb":case"bbb":U=Zt(fn.DayPeriods,dt.Abbreviated,Ze.Standalone,!0);break;case"bbbb":U=Zt(fn.DayPeriods,dt.Wide,Ze.Standalone,!0);break;case"bbbbb":U=Zt(fn.DayPeriods,dt.Narrow,Ze.Standalone,!0);break;case"B":case"BB":case"BBB":U=Zt(fn.DayPeriods,dt.Abbreviated,Ze.Format,!0);break;case"BBBB":U=Zt(fn.DayPeriods,dt.Wide,Ze.Format,!0);break;case"BBBBB":U=Zt(fn.DayPeriods,dt.Narrow,Ze.Format,!0);break;case"h":U=be(nn.Hours,1,-12);break;case"hh":U=be(nn.Hours,2,-12);break;case"H":U=be(nn.Hours,1);break;case"HH":U=be(nn.Hours,2);break;case"m":U=be(nn.Minutes,1);break;case"mm":U=be(nn.Minutes,2);break;case"s":U=be(nn.Seconds,1);break;case"ss":U=be(nn.Seconds,2);break;case"S":U=be(nn.FractionalSeconds,1);break;case"SS":U=be(nn.FractionalSeconds,2);break;case"SSS":U=be(nn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":U=pt(Kt.Short);break;case"ZZZZZ":U=pt(Kt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":U=pt(Kt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":U=pt(Kt.Long);break;default:return null}return us[D]=U,U}(un);Xn+=mn?mn(te,P,Cn):"''"===un?"'":un.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Xn}function An(D,U,P){const L=new Date(0);return L.setFullYear(D,U,P),L.setHours(0,0,0),L}function Wt(D,U){const P=function Zn(D){return(0,E.cg1)(D)[E.wAp.LocaleId]}(D);if(Nr[P]=Nr[P]||{},Nr[P][U])return Nr[P][U];let L="";switch(U){case"shortDate":L=Ae(D,Pt.Short);break;case"mediumDate":L=Ae(D,Pt.Medium);break;case"longDate":L=Ae(D,Pt.Long);break;case"fullDate":L=Ae(D,Pt.Full);break;case"shortTime":L=$e(D,Pt.Short);break;case"mediumTime":L=$e(D,Pt.Medium);break;case"longTime":L=$e(D,Pt.Long);break;case"fullTime":L=$e(D,Pt.Full);break;case"short":const te=Wt(D,"shortTime"),Fe=Wt(D,"shortDate");L=cn(He(D,Pt.Short),[te,Fe]);break;case"medium":const nt=Wt(D,"mediumTime"),Ut=Wt(D,"mediumDate");L=cn(He(D,Pt.Medium),[nt,Ut]);break;case"long":const Cn=Wt(D,"longTime"),Xn=Wt(D,"longDate");L=cn(He(D,Pt.Long),[Cn,Xn]);break;case"full":const un=Wt(D,"fullTime"),mn=Wt(D,"fullDate");L=cn(He(D,Pt.Full),[un,mn])}return L&&(Nr[P][U]=L),L}function cn(D,U){return U&&(D=D.replace(/\{([^}]+)}/g,function(P,L){return null!=U&&L in U?U[L]:P})),D}function Cr(D,U,P="-",L,te){let Fe="";(D<0||te&&D<=0)&&(te?D=1-D:(D=-D,Fe=P));let nt=String(D);for(;nt.length<U;)nt="0"+nt;return L&&(nt=nt.slice(nt.length-U)),Fe+nt}function be(D,U,P=0,L=!1,te=!1){return function(Fe,nt){let Ut=function xn(D,U){switch(D){case nn.FullYear:return U.getFullYear();case nn.Month:return U.getMonth();case nn.Date:return U.getDate();case nn.Hours:return U.getHours();case nn.Minutes:return U.getMinutes();case nn.Seconds:return U.getSeconds();case nn.FractionalSeconds:return U.getMilliseconds();case nn.Day:return U.getDay();default:throw new Error(`Unknown DateType value "${D}".`)}}(D,Fe);if((P>0||Ut>-P)&&(Ut+=P),D===nn.Hours)0===Ut&&-12===P&&(Ut=12);else if(D===nn.FractionalSeconds)return function $r(D,U){return Cr(D,3).substring(0,U)}(Ut,U);const Cn=ot(nt,Oe.MinusSign);return Cr(Ut,U,Cn,L,te)}}function Zt(D,U,P=Ze.Format,L=!1){return function(te,Fe){return function as(D,U,P,L,te,Fe){switch(P){case fn.Months:return rr(U,te,L)[D.getMonth()];case fn.Days:return _r(U,te,L)[D.getDay()];case fn.DayPeriods:const nt=D.getHours(),Ut=D.getMinutes();if(Fe){const Xn=function mi(D){const U=(0,E.cg1)(D);return Gt(U),(U[E.wAp.ExtraData][2]||[]).map(L=>"string"==typeof L?Wn(L):[Wn(L[0]),Wn(L[1])])}(U),un=function gn(D,U,P){const L=(0,E.cg1)(D);Gt(L);const Fe=bn([L[E.wAp.ExtraData][0],L[E.wAp.ExtraData][1]],U)||[];return bn(Fe,P)||[]}(U,te,L),mn=Xn.findIndex(er=>{if(Array.isArray(er)){const[zn,Kn]=er,es=nt>=zn.hours&&Ut>=zn.minutes,pr=nt<Kn.hours||nt===Kn.hours&&Ut<Kn.minutes;if(zn.hours<Kn.hours){if(es&&pr)return!0}else if(es||pr)return!0}else if(er.hours===nt&&er.minutes===Ut)return!0;return!1});if(-1!==mn)return un[mn]}return function On(D,U,P){const L=(0,E.cg1)(D),Fe=bn([L[E.wAp.DayPeriodsFormat],L[E.wAp.DayPeriodsStandalone]],U);return bn(Fe,P)}(U,te,L)[nt<12?0:1];case fn.Eras:return function Yt(D,U){return bn((0,E.cg1)(D)[E.wAp.Eras],U)}(U,L)[D.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${P}`)}}(te,Fe,D,U,P,L)}}function pt(D){return function(U,P,L){const te=-1*L,Fe=ot(P,Oe.MinusSign),nt=te>0?Math.floor(te/60):Math.ceil(te/60);switch(D){case Kt.Short:return(te>=0?"+":"")+Cr(nt,2,Fe)+Cr(Math.abs(te%60),2,Fe);case Kt.ShortGMT:return"GMT"+(te>=0?"+":"")+Cr(nt,1,Fe);case Kt.Long:return"GMT"+(te>=0?"+":"")+Cr(nt,2,Fe)+":"+Cr(Math.abs(te%60),2,Fe);case Kt.Extended:return 0===L?"Z":(te>=0?"+":"")+Cr(nt,2,Fe)+":"+Cr(Math.abs(te%60),2,Fe);default:throw new Error(`Unknown zone width "${D}"`)}}}const bt=0,yr=4;function Me(D){return An(D.getFullYear(),D.getMonth(),D.getDate()+(yr-D.getDay()))}function tt(D,U=!1){return function(P,L){let te;if(U){const Fe=new Date(P.getFullYear(),P.getMonth(),1).getDay()-1,nt=P.getDate();te=1+Math.floor((nt+Fe)/7)}else{const Fe=Me(P),nt=function gt(D){const U=An(D,bt,1).getDay();return An(D,0,1+(U<=yr?yr:yr+7)-U)}(Fe.getFullYear()),Ut=Fe.getTime()-nt.getTime();te=1+Math.round(Ut/6048e5)}return Cr(te,D,ot(L,Oe.MinusSign))}}function Un(D,U=!1){return function(P,L){return Cr(Me(P).getFullYear(),D,ot(L,Oe.MinusSign),U)}}const us={};function Cs(D,U){D=D.replace(/:/g,"");const P=Date.parse("Jan 01, 1970 00:00:00 "+D)/6e4;return isNaN(P)?U:P}function V(D){return D instanceof Date&&!isNaN(D.valueOf())}function Ot(D,U){U=encodeURIComponent(U);for(const P of D.split(";")){const L=P.indexOf("="),[te,Fe]=-1==L?[P,""]:[P.slice(0,L),P.slice(L+1)];if(te.trim()===U)return decodeURIComponent(Fe)}return null}const $t=/\s+/,pn=[];let qn=(()=>{class D{constructor(P,L,te,Fe){this._iterableDiffers=P,this._keyValueDiffers=L,this._ngEl=te,this._renderer=Fe,this.initialClasses=pn,this.stateMap=new Map}set klass(P){this.initialClasses=null!=P?P.trim().split($t):pn}set ngClass(P){this.rawClass="string"==typeof P?P.trim().split($t):P}ngDoCheck(){for(const L of this.initialClasses)this._updateState(L,!0);const P=this.rawClass;if(Array.isArray(P)||P instanceof Set)for(const L of P)this._updateState(L,!0);else if(null!=P)for(const L of Object.keys(P))this._updateState(L,!!P[L]);this._applyStateDiff()}_updateState(P,L){const te=this.stateMap.get(P);void 0!==te?(te.enabled!==L&&(te.changed=!0,te.enabled=L),te.touched=!0):this.stateMap.set(P,{enabled:L,changed:!0,touched:!0})}_applyStateDiff(){for(const P of this.stateMap){const L=P[0],te=P[1];te.changed?(this._toggleClass(L,te.enabled),te.changed=!1):te.touched||(te.enabled&&this._toggleClass(L,!1),this.stateMap.delete(L)),te.touched=!1}}_toggleClass(P,L){(P=P.trim()).length>0&&P.split($t).forEach(te=>{L?this._renderer.addClass(this._ngEl.nativeElement,te):this._renderer.removeClass(this._ngEl.nativeElement,te)})}static#e=this.\u0275fac=function(L){return new(L||D)(E.Y36(E.ZZ4),E.Y36(E.aQg),E.Y36(E.SBq),E.Y36(E.Qsj))};static#t=this.\u0275dir=E.lG2({type:D,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return D})();class we{constructor(U,P,L,te){this.$implicit=U,this.ngForOf=P,this.index=L,this.count=te}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hr=(()=>{class D{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,L,te){this._viewContainer=P,this._template=L,this._differs=te,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const L=this._viewContainer;P.forEachOperation((te,Fe,nt)=>{if(null==te.previousIndex)L.createEmbeddedView(this._template,new we(te.item,this._ngForOf,-1,-1),null===nt?void 0:nt);else if(null==nt)L.remove(null===Fe?void 0:Fe);else if(null!==Fe){const Ut=L.get(Fe);L.move(Ut,nt),on(Ut,te)}});for(let te=0,Fe=L.length;te<Fe;te++){const Ut=L.get(te).context;Ut.index=te,Ut.count=Fe,Ut.ngForOf=this._ngForOf}P.forEachIdentityChange(te=>{on(L.get(te.currentIndex),te)})}static ngTemplateContextGuard(P,L){return!0}static#e=this.\u0275fac=function(L){return new(L||D)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))};static#t=this.\u0275dir=E.lG2({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return D})();function on(D,U){D.context.$implicit=U.item}let _i=(()=>{class D{constructor(P,L){this._viewContainer=P,this._context=new Zi,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=L}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){zr("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){zr("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,L){return!0}static#e=this.\u0275fac=function(L){return new(L||D)(E.Y36(E.s_b),E.Y36(E.Rgc))};static#t=this.\u0275dir=E.lG2({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class Zi{constructor(){this.$implicit=null,this.ngIf=null}}function zr(D,U){if(U&&!U.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,E.AaK)(U)}'.`)}let cs=(()=>{class D{constructor(P){this._viewContainerRef=P,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(P){if(P.ngTemplateOutlet||P.ngTemplateOutletInjector){const L=this._viewContainerRef;if(this._viewRef&&L.remove(L.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:te,ngTemplateOutletContext:Fe,ngTemplateOutletInjector:nt}=this;this._viewRef=L.createEmbeddedView(te,Fe,nt?{injector:nt}:void 0)}else this._viewRef=null}else this._viewRef&&P.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(L){return new(L||D)(E.Y36(E.s_b))};static#t=this.\u0275dir=E.lG2({type:D,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[E.TTD]})}return D})(),ji=(()=>{class D{static#e=this.\u0275fac=function(L){return new(L||D)};static#t=this.\u0275mod=E.oAB({type:D});static#n=this.\u0275inj=E.cJS({})}return D})();const En="browser",Xr="server";function Gn(D){return D===Xr}let bs=(()=>{class D{static#e=this.\u0275prov=(0,E.Yz7)({token:D,providedIn:"root",factory:()=>new or((0,E.LFG)(ae),window)})}return D})();class or{constructor(U,P){this.document=U,this.window=P,this.offset=()=>[0,0]}setOffset(U){this.offset=Array.isArray(U)?()=>U:U}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(U){this.supportsScrolling()&&this.window.scrollTo(U[0],U[1])}scrollToAnchor(U){if(!this.supportsScrolling())return;const P=function Ur(D,U){const P=D.getElementById(U)||D.getElementsByName(U)[0];if(P)return P;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const L=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let te=L.currentNode;for(;te;){const Fe=te.shadowRoot;if(Fe){const nt=Fe.getElementById(U)||Fe.querySelector(`[name="${U}"]`);if(nt)return nt}te=L.nextNode()}}return null}(this.document,U);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(U){this.supportsScrolling()&&(this.window.history.scrollRestoration=U)}scrollToElement(U){const P=U.getBoundingClientRect(),L=P.left+this.window.pageXOffset,te=P.top+this.window.pageYOffset,Fe=this.offset();this.window.scrollTo(L-Fe[0],te-Fe[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class $s{}},5879:(St,Pe,F)=>{F.d(Pe,{$8M:()=>Yc,$WT:()=>ds,$Z:()=>eE,AFp:()=>rm,AaK:()=>ue,CHM:()=>Zu,CRH:()=>sw,EJc:()=>NA,EpF:()=>Ly,F$t:()=>Ym,F4k:()=>qm,FYo:()=>Mc,FiY:()=>rh,Gf:()=>rw,GfV:()=>pp,Gpc:()=>Xe,HDt:()=>bw,Hsn:()=>By,Ikx:()=>NE,JOm:()=>Ro,KtG:()=>Qu,LFG:()=>Et,LMc:()=>WC,Lbi:()=>op,Lck:()=>vD,MAs:()=>Gm,MGl:()=>Oo,MMx:()=>R0,NdJ:()=>$p,Ojb:()=>ap,OlP:()=>be,Oqu:()=>Jp,P3R:()=>Kg,PXZ:()=>uC,Q6J:()=>ef,QGY:()=>jp,Qsj:()=>fp,R0b:()=>ii,RDi:()=>Ng,Rgc:()=>y_,SBq:()=>Pc,SDv:()=>T0,Sil:()=>LA,Suo:()=>iw,TTD:()=>mn,TgZ:()=>tf,Tol:()=>Ky,VKq:()=>F0,VuI:()=>zC,W1O:()=>cw,WLB:()=>V0,X6Q:()=>mC,XFs:()=>Kt,Xpm:()=>fo,Xq5:()=>ye,Xts:()=>Th,Y36:()=>yd,YKP:()=>S0,YNc:()=>xy,Yjl:()=>ls,Yz7:()=>Gt,Z0I:()=>bn,ZZ4:()=>fI,_Bn:()=>C0,_UZ:()=>rf,_c5:()=>xC,_uU:()=>u_,aQg:()=>pI,c2e:()=>Sw,cJS:()=>gn,cg1:()=>OE,dDg:()=>iC,dqk:()=>cn,eFA:()=>Vw,eJc:()=>YE,ekj:()=>Wp,eoX:()=>Ow,f3M:()=>ft,g9A:()=>sp,h0i:()=>yf,hGG:()=>NC,hij:()=>mf,iGM:()=>nw,ifc:()=>kr,ip1:()=>Cw,jDz:()=>P0,kEZ:()=>U0,kL8:()=>QI,lG2:()=>la,lqb:()=>za,lri:()=>xw,n5z:()=>fu,oAB:()=>jo,oxw:()=>Vy,q4F:()=>gp,qFp:()=>qC,qLn:()=>qa,qOj:()=>b,qZA:()=>nf,rWj:()=>Nw,rg0:()=>Fe,s9C:()=>Fu,sBO:()=>_C,s_b:()=>iv,soG:()=>ov,tb:()=>aI,tp0:()=>Vr,uIk:()=>bp,vHH:()=>ge,vpe:()=>Ru,wAp:()=>tg,xp6:()=>sy,z2F:()=>sg,zSh:()=>rp,zW0:()=>Vt,zs3:()=>ws});var E=F(8645),Y=F(7394),Q=F(5592),Z=F(3019),he=F(5619),ae=F(2096),me=F(3020),Ne=F(4664),De=F(3997);function X(t){for(let n in t)if(t[n]===X)return n;throw Error("Could not find renamed property on target object.")}function re(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function ue(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ue).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Ue(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Be=X({__forward_ref__:X});function Xe(t){return t.__forward_ref__=Xe,t.toString=function(){return ue(this())},t}function Ke(t){return Ge(t)?t():t}function Ge(t){return"function"==typeof t&&t.hasOwnProperty(Be)&&t.__forward_ref__===Xe}function st(t){return t&&!!t.\u0275providers}const _t="https://g.co/ng/security#xss";class ge extends Error{constructor(n,i){super(function ze(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function pe(t){return"string"==typeof t?t:null==t?"":String(t)}function Oe(t,n){throw new ge(-201,!1)}function yt(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}function Gt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function gn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Fn(t){return Wn(t,oi)||Wn(t,Nr)}function bn(t){return null!==Fn(t)}function Wn(t,n){return t.hasOwnProperty(n)?t[n]:null}function Ui(t){return t&&(t.hasOwnProperty(Yr)||t.hasOwnProperty(Or))?t[Yr]:null}const oi=X({\u0275prov:X}),Yr=X({\u0275inj:X}),Nr=X({ngInjectableDef:X}),Or=X({ngInjectorDef:X});var Kt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Kt||{});let nn;function kn(t){const n=nn;return nn=t,n}function An(t,n,i){const o=Fn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&Kt.Optional?null:void 0!==n?n:void Oe(ue(t))}const cn=globalThis;class be{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Gt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const xi={},Cs="__NG_DI_FLAG__",Bi="ngTempTokenPath",G=/\n/gm,V="__source";let q;function je(t){const n=q;return q=t,n}function We(t,n=Kt.Default){if(void 0===q)throw new ge(-203,!1);return null===q?An(t,void 0,n):q.get(t,n&Kt.Optional?null:void 0,n)}function Et(t,n=Kt.Default){return(function fn(){return nn}()||We)(Ke(t),n)}function ft(t,n=Kt.Default){return Et(t,mt(n))}function mt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Bt(t){const n=[];for(let i=0;i<t.length;i++){const o=Ke(t[i]);if(Array.isArray(o)){if(0===o.length)throw new ge(900,!1);let c,f=Kt.Default;for(let _=0;_<o.length;_++){const I=o[_],A=Ki(I);"number"==typeof A?-1===A?c=I.token:f|=A:c=I}n.push(Et(c,f))}else n.push(Et(o))}return n}function Ht(t,n){return t[Cs]=n,t.prototype[Cs]=n,t}function Ki(t){return t[Cs]}function ir(t){return{toString:t}.toString()}var ai=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(ai||{}),kr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(kr||{});const Jr={},rn=[],Le=X({\u0275cmp:X}),Ee=X({\u0275dir:X}),Je=X({\u0275pipe:X}),At=X({\u0275mod:X}),Ot=X({\u0275fac:X}),$t=X({__NG_ELEMENT_ID__:X}),pn=X({__NG_ENV_ID__:X});function qn(t,n,i){let o=t.length;for(;;){const c=t.indexOf(n,i);if(-1===c)return c;if(0===c||t.charCodeAt(c-1)<=32){const f=n.length;if(c+f===o||t.charCodeAt(c+f)<=32)return c}i=c+1}}function Nn(t,n,i){let o=0;for(;o<i.length;){const c=i[o];if("number"==typeof c){if(0!==c)break;o++;const f=i[o++],_=i[o++],I=i[o++];t.setAttribute(n,_,I,f)}else{const f=c,_=i[++o];we(f)?t.setProperty(n,f,_):t.setAttribute(n,f,_),o++}}return o}function Lr(t){return 3===t||4===t||6===t}function we(t){return 64===t.charCodeAt(0)}function Hr(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const c=n[o];"number"==typeof c?i=c:0===i||on(t,i,c,null,-1===i||2===i?n[++o]:null)}}return t}function on(t,n,i,o,c){let f=0,_=t.length;if(-1===n)_=-1;else for(;f<t.length;){const I=t[f++];if("number"==typeof I){if(I===n){_=-1;break}if(I>n){_=f-1;break}}}for(;f<t.length;){const I=t[f];if("number"==typeof I)break;if(I===i){if(null===o)return void(null!==c&&(t[f+1]=c));if(o===t[f+1])return void(t[f+2]=c)}f++,null!==o&&f++,null!==c&&f++}-1!==_&&(t.splice(_,0,n),f=_+1),t.splice(f++,0,i),null!==o&&t.splice(f++,0,o),null!==c&&t.splice(f++,0,c)}const co="ng-template";function _i(t,n,i){let o=0,c=!0;for(;o<t.length;){let f=t[o++];if("string"==typeof f&&c){const _=t[o++];if(i&&"class"===f&&-1!==qn(_.toLowerCase(),n,0))return!0}else{if(1===f){for(;o<t.length&&"string"==typeof(f=t[o++]);)if(f.toLowerCase()===n)return!0;return!1}"number"==typeof f&&(c=!1)}}return!1}function Zi(t){return 4===t.type&&t.value!==co}function zr(t,n,i){return n===(4!==t.type||i?t.value:co)}function lo(t,n,i){let o=4;const c=t.attrs||[],f=function Uu(t){for(let n=0;n<t.length;n++)if(Lr(t[n]))return n;return t.length}(c);let _=!1;for(let I=0;I<n.length;I++){const A=n[I];if("number"!=typeof A){if(!_)if(4&o){if(o=2|1&o,""!==A&&!zr(t,A,i)||""===A&&1===n.length){if(Sr(o))return!1;_=!0}}else{const x=8&o?A:n[++I];if(8&o&&null!==t.attrs){if(!_i(t.attrs,x,i)){if(Sr(o))return!1;_=!0}continue}const J=Vu(8&o?"class":A,c,Zi(t),i);if(-1===J){if(Sr(o))return!1;_=!0;continue}if(""!==x){let fe;fe=J>f?"":c[J+1].toLowerCase();const Te=8&o?fe:null;if(Te&&-1!==qn(Te,x,0)||2&o&&x!==fe){if(Sr(o))return!1;_=!0}}}}else{if(!_&&!Sr(o)&&!Sr(A))return!1;if(_&&Sr(A))continue;_=!1,o=A|1&o}}return Sr(o)||_}function Sr(t){return 0==(1&t)}function Vu(t,n,i,o){if(null===n)return-1;let c=0;if(o||!i){let f=!1;for(;c<n.length;){const _=n[c];if(_===t)return c;if(3===_||6===_)f=!0;else{if(1===_||2===_){let I=n[++c];for(;"string"==typeof I;)I=n[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=f?1:2}return-1}return function ui(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function Uo(t,n,i=!1){for(let o=0;o<n.length;o++)if(lo(t,n[o],i))return!0;return!1}function ho(t,n){e:for(let i=0;i<n.length;i++){const o=n[i];if(t.length===o.length){for(let c=0;c<t.length;c++)if(t[c]!==o[c])continue e;return!0}}return!1}function cs(t,n){return t?":not("+n.trim()+")":n}function Bo(t){let n=t[0],i=1,o=2,c="",f=!1;for(;i<t.length;){let _=t[i];if("string"==typeof _)if(2&o){const I=t[++i];c+="["+_+(I.length>0?'="'+I+'"':"")+"]"}else 8&o?c+="."+_:4&o&&(c+=" "+_);else""!==c&&!Sr(_)&&(n+=cs(f,c),c=""),o=_,f=f||!Sr(o);i++}return""!==c&&(n+=cs(f,c)),n}function fo(t){return ir(()=>{const n=Qi(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===ai.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||kr.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""};Xa(i);const o=t.dependencies;return i.directiveDefs=po(o,!1),i.pipeDefs=po(o,!0),i.id=function Ho(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function aa(t){return hn(t)||sr(t)}function ua(t){return null!==t}function jo(t){return ir(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ca(t,n){if(null==t)return Jr;const i={};for(const o in t)if(t.hasOwnProperty(o)){let c=t[o],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),i[c]=o,n&&(n[c]=f)}return i}function la(t){return ir(()=>{const n=Qi(t);return Xa(n),n})}function ls(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function hn(t){return t[Le]||null}function sr(t){return t[Ee]||null}function Gr(t){return t[Je]||null}function ds(t){const n=hn(t)||sr(t)||Gr(t);return null!==n&&n.standalone}function yi(t,n){const i=t[At]||null;if(!i&&!0===n)throw new Error(`Type ${ue(t)} does not have '\u0275mod' property.`);return i}function Qi(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Jr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ca(t.inputs,n),outputs:ca(t.outputs)}}function Xa(t){t.features?.forEach(n=>n(t))}function po(t,n){if(!t)return null;const i=n?Gr:aa;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter(ua)}const Yn=0,Dt=1,an=2,$n=3,Wr=4,Bs=5,Fr=6,ji=7,En=8,Xr=9,vi=10,en=11,js=12,Gn=13,Ei=14,dn=15,Ln=16,bs=17,or=18,Ur=19,eu=20,$s=21,Jn=22,Hs=23,Ii=24,jt=25,Yi=1,ar=2,ci=7,qr=9,Ir=11;function Hn(t){return Array.isArray(t)&&"object"==typeof t[Yi]}function ur(t){return Array.isArray(t)&&!0===t[Yi]}function Hi(t){return 0!=(4&t.flags)}function wi(t){return t.componentOffset>-1}function Ti(t){return 1==(1&t.flags)}function Di(t){return!!t.template}function zi(t){return 0!=(512&t[an])}function In(t,n){return t.hasOwnProperty(Ot)?t[Ot]:null}let fr=null,Xi=!1;function di(t){const n=fr;return fr=t,n}const va={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function mo(t){if(!Ai(t)||t.dirty){if(!t.producerMustRecompute(t)&&!ru(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function zo(t){t.dirty=!0,function Gs(t){if(void 0===t.liveConsumerNode)return;const n=Xi;Xi=!0;try{for(const i of t.liveConsumerNode)i.dirty||zo(i)}finally{Xi=n}}(t),t.consumerMarkedDirty?.(t)}function Go(t){return t&&(t.nextProducerIndex=0),di(t)}function Wo(t,n){if(di(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ai(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)qo(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ru(t){fs(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(mo(i),o!==i.version))return!0}return!1}function zc(t){if(fs(t),Ai(t))for(let n=0;n<t.producerNode.length;n++)qo(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function qo(t,n){if(function Ws(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),fs(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)qo(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],c=t.liveConsumerNode[n];fs(c),c.producerIndexOfThis[o]=n}}function Ai(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function fs(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Wu=null;function Fe(t){const n=di(null);try{return t()}finally{di(n)}}const Ut=()=>{},Cn=(()=>({...va,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Ut}))();class un{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function mn(){return er}function er(t){return t.type.prototype.ngOnChanges&&(t.setInput=Kn),zn}function zn(){const t=pr(this),n=t?.current;if(n){const i=t.previous;if(i===Jr)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Kn(t,n,i,o){const c=this.declaredInputs[i],f=pr(t)||function Ms(t,n){return t[es]=n}(t,{previous:Jr,current:null}),_=f.current||(f.current={}),I=f.previous,A=I[c];_[c]=new un(A&&A.currentValue,n,I===Jr),t[o]=n}mn.ngInherit=!0;const es="__ngSimpleChanges__";function pr(t){return t[es]||null}const Kr=function(t,n,i){};function cr(t){for(;Array.isArray(t);)t=t[Yn];return t}function Zs(t,n){return cr(n[t])}function ti(t,n){return cr(n[t.index])}function Ku(t,n){return t.data[n]}function ni(t,n){const i=n[t];return Hn(i)?i:i[Yn]}function ms(t,n){return null==n?null:t[n]}function wa(t){t[bs]=0}function hi(t){1024&t[an]||(t[an]|=1024,Bd(t,1))}function Io(t){1024&t[an]&&(t[an]&=-1025,Bd(t,-1))}function Bd(t,n){let i=t[$n];if(null===i)return;i[Bs]+=n;let o=i;for(i=i[$n];null!==i&&(1===n&&1===o[Bs]||-1===n&&0===o[Bs]);)i[Bs]+=n,o=i,i=i[$n]}const Jt={lFrame:ns(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Zo(){return Jt.bindingsEnabled}function ts(){return null!==Jt.skipHydrationRootTNode}function ut(){return Jt.lFrame.lView}function _n(){return Jt.lFrame.tView}function Zu(t){return Jt.lFrame.contextLView=t,t[En]}function Qu(t){return Jt.lFrame.contextLView=null,t}function Rr(){let t=jl();for(;null!==t&&64===t.type;)t=t.parent;return t}function jl(){return Jt.lFrame.currentTNode}function yn(){const t=Jt.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function vn(t,n){const i=Jt.lFrame;i.currentTNode=t,i.isParent=n}function Da(){return Jt.lFrame.isParent}function su(){Jt.lFrame.isParent=!1}function fi(){const t=Jt.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function xs(){return Jt.lFrame.bindingIndex++}function w(t){const n=Jt.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function v(t){Jt.lFrame.inI18n=t}function S(t,n){const i=Jt.lFrame;i.bindingIndex=i.bindingRootIndex=t,z(n)}function z(t){Jt.lFrame.currentDirectiveIndex=t}function Ve(){return Jt.lFrame.currentQueryIndex}function xe(t){Jt.lFrame.currentQueryIndex=t}function Rt(t){const n=t[Dt];return 2===n.type?n.declTNode:1===n.type?t[Fr]:null}function wn(t,n,i){if(i&Kt.SkipSelf){let c=n,f=t;for(;!(c=c.parent,null!==c||i&Kt.Host||(c=Rt(f),null===c||(f=f[Ei],10&c.type))););if(null===c)return!1;n=c,t=f}const o=Jt.lFrame=Pn();return o.currentTNode=n,o.lView=t,!0}function gr(t){const n=Pn(),i=t[Dt];Jt.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Pn(){const t=Jt.lFrame,n=null===t?null:t.child;return null===n?ns(t):n}function ns(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function _s(){const t=Jt.lFrame;return Jt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Qo=_s;function ou(){const t=_s();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bi(){return Jt.lFrame.selectedIndex}function ba(t){Jt.lFrame.selectedIndex=t}function mr(){const t=Jt.lFrame;return Ku(t.tView,t.selectedIndex)}let $l=!0;function Kc(){return $l}function Ra(t){$l=t}function Do(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const f=t.data[i].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:I,ngAfterViewInit:A,ngAfterViewChecked:x,ngOnDestroy:$}=f;_&&(t.contentHooks??=[]).push(-i,_),I&&((t.contentHooks??=[]).push(i,I),(t.contentCheckHooks??=[]).push(i,I)),A&&(t.viewHooks??=[]).push(-i,A),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=$&&(t.destroyHooks??=[]).push(i,$)}}function Yu(t,n,i){au(t,n,3,i)}function Ju(t,n,i,o){(3&t[an])===i&&au(t,n,i,o)}function Hl(t,n){let i=t[an];(3&i)===n&&(i&=8191,i+=1,t[an]=i)}function au(t,n,i,o){const f=o??-1,_=n.length-1;let I=0;for(let A=void 0!==o?65535&t[bs]:0;A<_;A++)if("number"==typeof n[A+1]){if(I=n[A],null!=o&&I>=o)break}else n[A]<0&&(t[bs]+=65536),(I<f||-1==f)&&(zl(t,i,n,A),t[bs]=(4294901760&t[bs])+A+2),A++}function Kd(t,n){Kr(4,t,n);const i=di(null);try{n.call(t)}finally{di(i),Kr(5,t,n)}}function zl(t,n,i,o){const c=i[o]<0,f=i[o+1],I=t[c?-i[o]:i[o]];c?t[an]>>13<t[bs]>>16&&(3&t[an])===n&&(t[an]+=8192,Kd(I,f)):Kd(I,f)}const Yo=-1;class Pa{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function vs(t){return t!==Yo}function cu(t){return 32767&t}function Xu(t,n){let i=function lg(t){return t>>16}(t),o=n;for(;i>0;)o=o[Ei],i--;return o}let xa=!0;function Ao(t){const n=xa;return xa=t,n}const Oa=255,ka=5;let Gl=0;const Os={};function Zc(t,n){const i=ql(t,n);if(-1!==i)return i;const o=n[Dt];o.firstCreatePass&&(t.injectorIndex=n.length,Wl(o.data,t),Wl(n,null),Wl(o.blueprint,null));const c=du(t,n),f=t.injectorIndex;if(vs(c)){const _=cu(c),I=Xu(c,n),A=I[Dt].data;for(let x=0;x<8;x++)n[f+x]=I[_+x]|A[_+x]}return n[f+8]=c,f}function Wl(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ql(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function du(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,c=n;for(;null!==c;){if(o=rc(c),null===o)return Yo;if(i++,c=c[Ei],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return Yo}function ec(t,n,i){!function lu(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty($t)&&(o=i[$t]),null==o&&(o=i[$t]=Gl++);const c=o&Oa;n.data[t+(c>>ka)]|=1<<c}(t,n,i)}function La(t,n,i){if(i&Kt.Optional||void 0!==t)return t;Oe()}function Jo(t,n,i,o){if(i&Kt.Optional&&void 0===o&&(o=null),!(i&(Kt.Self|Kt.Host))){const c=t[Xr],f=kn(void 0);try{return c?c.get(n,o,i&Kt.Optional):An(n,o,i&Kt.Optional)}finally{kn(f)}}return La(o,0,i)}function Zd(t,n,i,o=Kt.Default,c){if(null!==t){if(2048&n[an]&&!(o&Kt.Self)){const _=function Jd(t,n,i,o,c){let f=t,_=n;for(;null!==f&&null!==_&&2048&_[an]&&!(512&_[an]);){const I=Qd(f,_,i,o|Kt.Self,Os);if(I!==Os)return I;let A=f.parent;if(!A){const x=_[eu];if(x){const $=x.get(i,Os,o);if($!==Os)return $}A=rc(_),_=_[Ei]}f=A}return c}(t,n,i,o,Os);if(_!==Os)return _}const f=Qd(t,n,i,o,Os);if(f!==Os)return f}return Jo(n,i,o,c)}function Qd(t,n,i,o,c){const f=function Qc(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty($t)?t[$t]:void 0;return"number"==typeof n?n>=0?n&Oa:Yd:n}(i);if("function"==typeof f){if(!wn(n,t,o))return o&Kt.Host?La(c,0,o):Jo(n,i,o,c);try{let _;if(_=f(o),null!=_||o&Kt.Optional)return _;Oe()}finally{Qo()}}else if("number"==typeof f){let _=null,I=ql(t,n),A=Yo,x=o&Kt.Host?n[dn][Fr]:null;for((-1===I||o&Kt.SkipSelf)&&(A=-1===I?du(t,n):n[I+8],A!==Yo&&Xo(o,!1)?(_=n[Dt],I=cu(A),n=Xu(A,n)):I=-1);-1!==I;){const $=n[Dt];if(Co(f,I,$.data)){const J=dg(I,n,i,_,o,x);if(J!==Os)return J}A=n[I+8],A!==Yo&&Xo(o,n[Dt].data[I+8]===x)&&Co(f,I,n)?(_=$,I=cu(A),n=Xu(A,n)):I=-1}}return c}function dg(t,n,i,o,c,f){const _=n[Dt],I=_.data[t+8],$=tc(I,_,i,null==o?wi(I)&&xa:o!=_&&0!=(3&I.type),c&Kt.Host&&f===I);return null!==$?hu(n,_,$,I):Os}function tc(t,n,i,o,c){const f=t.providerIndexes,_=n.data,I=1048575&f,A=t.directiveStart,$=f>>20,fe=c?I+$:t.directiveEnd;for(let Te=o?I:I+$;Te<fe;Te++){const rt=_[Te];if(Te<A&&i===rt||Te>=A&&rt.type===i)return Te}if(c){const Te=_[A];if(Te&&Di(Te)&&Te.type===i)return A}return null}function hu(t,n,i,o){let c=t[i];const f=n.data;if(function ug(t){return t instanceof Pa}(c)){const _=c;_.resolving&&function Ze(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new ge(-200,`Circular dependency in DI detected for ${t}${i}`)}(function et(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():pe(t)}(f[i]));const I=Ao(_.canSeeViewProviders);_.resolving=!0;const x=_.injectImpl?kn(_.injectImpl):null;wn(t,o,Kt.Default);try{c=t[i]=_.factory(void 0,f,t,o),n.firstCreatePass&&i>=o.directiveStart&&function ag(t,n,i){const{ngOnChanges:o,ngOnInit:c,ngDoCheck:f}=n.type.prototype;if(o){const _=er(n);(i.preOrderHooks??=[]).push(t,_),(i.preOrderCheckHooks??=[]).push(t,_)}c&&(i.preOrderHooks??=[]).push(0-t,c),f&&((i.preOrderHooks??=[]).push(t,f),(i.preOrderCheckHooks??=[]).push(t,f))}(i,f[i],n)}finally{null!==x&&kn(x),Ao(I),_.resolving=!1,Qo()}}return c}function Co(t,n,i){return!!(i[n+(t>>ka)]&1<<t)}function Xo(t,n){return!(t&Kt.Self||t&Kt.Host&&n)}class Oi{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Zd(this._tNode,this._lView,n,mt(o),i)}}function Yd(){return new Oi(Rr(),ut())}function fu(t){return ir(()=>{const n=t.prototype.constructor,i=n[Ot]||pu(n),o=Object.prototype;let c=Object.getPrototypeOf(t.prototype).constructor;for(;c&&c!==o;){const f=c[Ot]||pu(c);if(f&&f!==i)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function pu(t){return Ge(t)?()=>{const n=pu(Ke(t));return n&&n()}:In(t)}function rc(t){const n=t[Dt],i=n.type;return 2===i?n.declTNode:1===i?t[Fr]:null}function Yc(t){return function Kl(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let c=0;for(;c<o;){const f=i[c];if(Lr(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<o&&"string"==typeof i[c];)c++;else{if(f===n)return i[c+1];c+=2}}}return null}(Rr(),t)}const So="__parameters__";function Va(t,n,i){return ir(()=>{const o=function mu(t){return function(...i){if(t){const o=t(...i);for(const c in o)this[c]=o[c]}}}(n);function c(...f){if(this instanceof c)return o.apply(this,f),this;const _=new c(...f);return I.annotation=_,I;function I(A,x,$){const J=A.hasOwnProperty(So)?A[So]:Object.defineProperty(A,So,{value:[]})[So];for(;J.length<=$;)J.push(null);return(J[$]=J[$]||[]).push(_),A}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=t,c.annotationCls=c,c})}function Js(t,n){t.forEach(i=>Array.isArray(i)?Js(i,n):n(i))}function Jc(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Xs(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function ac(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}function Es(t,n,i){let o=vu(t,n);return o>=0?t[1|o]=i:(o=~o,function yg(t,n,i,o){let c=t.length;if(c==n)t.push(i,o);else if(1===c)t.push(o,t[0]),t[0]=i;else{for(c--,t.push(t[c-1],t[c]);c>n;)t[c]=t[c-2],c--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function uc(t,n){const i=vu(t,n);if(i>=0)return t[1|i]}function vu(t,n){return function Xd(t,n,i){let o=0,c=t.length>>i;for(;c!==o;){const f=o+(c-o>>1),_=t[f<<i];if(n===_)return f<<i;_>n?c=f:o=f+1}return~(c<<i)}(t,n,1)}const rh=Ht(Va("Optional"),8),Vr=Ht(Va("SkipSelf"),4);function hc(t){return 128==(128&t.flags)}var Ro=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ro||{});const al=new Map;let Cg=0;const Du="__ngContext__";function Ri(t,n){Hn(n)?(t[Du]=n[Ur],function pi(t){al.set(t[Ur],t)}(n)):t[Du]=n}let gc;function gi(t,n){return gc(t,n)}function Ua(t){const n=t[$n];return ur(n)?n[$n]:n}function mc(t){return gh(t[js])}function fl(t){return gh(t[Wr])}function gh(t){for(;null!==t&&!ur(t);)t=t[Wr];return t}function Ba(t,n,i,o,c){if(null!=o){let f,_=!1;ur(o)?f=o:Hn(o)&&(_=!0,o=o[Yn]);const I=cr(o);0===t&&null!==i?null==c?Ec(n,i,I):ri(n,i,I,c||null,!0):1===t&&null!==i?ri(n,i,I,c||null,!0):2===t?function fd(t,n,i){const o=Mo(t,n);o&&function gl(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,I,_):3===t&&n.destroyNode(I),null!=f&&function T_(t,n,i,o,c){const f=i[ci];f!==cr(i)&&Ba(n,t,o,f,c);for(let I=Ir;I<i.length;I++){const A=i[I];yh(A[Dt],A,t,n,o,f)}}(n,t,f,i,c)}}function _c(t,n){return t.createText(n)}function vc(t,n,i){return t.createElement(n,i)}function B(t,n){const i=t[qr],o=i.indexOf(n);Io(n),i.splice(o,1)}function ie(t,n){if(t.length<=Ir)return;const i=Ir+n,o=t[i];if(o){const c=o[Ln];null!==c&&c!==t&&B(c,o),n>0&&(t[i-1][Wr]=o[Wr]);const f=Xs(t,Ir+n);!function jf(t,n){yh(t,n,n[en],2,null,null),n[Yn]=null,n[Fr]=null}(o[Dt],o);const _=f[or];null!==_&&_.detachView(f[Dt]),o[$n]=null,o[Wr]=null,o[an]&=-129}return o}function ve(t,n){if(!(256&n[an])){const i=n[en];n[Hs]&&zc(n[Hs]),n[Ii]&&zc(n[Ii]),i.destroyNode&&yh(t,n,i,3,null,null),function d(t){let n=t[js];if(!n)return Ye(t[Dt],t);for(;n;){let i=null;if(Hn(n))i=n[js];else{const o=n[Ir];o&&(i=o)}if(!i){for(;n&&!n[Wr]&&n!==t;)Hn(n)&&Ye(n[Dt],n),n=n[$n];null===n&&(n=t),Hn(n)&&Ye(n[Dt],n),i=n&&n[Wr]}n=i}}(n)}}function Ye(t,n){if(!(256&n[an])){n[an]&=-129,n[an]|=256,function Ft(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const c=n[i[o]];if(!(c instanceof Pa)){const f=i[o+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const I=c[f[_]],A=f[_+1];Kr(4,I,A);try{A.call(I)}finally{Kr(5,I,A)}}else{Kr(4,c,f);try{f.call(c)}finally{Kr(5,c,f)}}}}}(t,n),function Tt(t,n){const i=t.cleanup,o=n[ji];if(null!==i)for(let f=0;f<i.length-1;f+=2)if("string"==typeof i[f]){const _=i[f+3];_>=0?o[_]():o[-_].unsubscribe(),f+=2}else i[f].call(o[i[f+1]]);null!==o&&(n[ji]=null);const c=n[$s];if(null!==c){n[$s]=null;for(let f=0;f<c.length;f++)(0,c[f])()}}(t,n),1===n[Dt].type&&n[en].destroy();const i=n[Ln];if(null!==i&&ur(n[$n])){i!==n[$n]&&B(i,n);const o=n[or];null!==o&&o.detachView(t)}!function fh(t){al.delete(t[Ur])}(n)}}function xt(t,n,i){return Pr(t,n.parent,i)}function Pr(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[Yn];{const{componentOffset:c}=o;if(c>-1){const{encapsulation:f}=t.data[o.directiveStart+c];if(f===kr.None||f===kr.Emulated)return null}return ti(o,i)}}function ri(t,n,i,o,c){t.insertBefore(n,i,o,c)}function Ec(t,n,i){t.appendChild(n,i)}function pl(t,n,i,o,c){null!==o?ri(t,n,i,o,c):Ec(t,n,i)}function Mo(t,n){return t.parentNode(n)}function ml(t,n,i){return na(t,n,i)}function ja(t,n,i){return 40&t.type?ti(t,i):null}let _l,vh,xg,gd,na=ja;function Cu(t,n){na=t,_l=n}function Ic(t,n,i,o){const c=xt(t,o,n),f=n[en],I=ml(o.parent||n[Fr],o,n);if(null!=c)if(Array.isArray(i))for(let A=0;A<i.length;A++)pl(f,c,i[A],I,!1);else pl(f,c,i,I,!1);void 0!==_l&&_l(f,o,n,i,c)}function yl(t,n){if(null!==n){const i=n.type;if(3&i)return ti(n,t);if(4&i)return _h(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return yl(t,o);{const c=t[n.index];return ur(c)?_h(-1,c):cr(c)}}if(32&i)return gi(n,t)()||cr(t[n.index]);{const o=$f(t,n);return null!==o?Array.isArray(o)?o[0]:yl(Ua(t[dn]),o):yl(t,n.next)}}return null}function $f(t,n){return null!==n?t[dn][Fr].projection[n.projection]:null}function _h(t,n){const i=Ir+t+1;if(i<n.length){const o=n[i],c=o[Dt].firstChild;if(null!==c)return yl(o,c)}return n[ci]}function bg(t,n,i,o,c,f,_){for(;null!=i;){const I=o[i.index],A=i.type;if(_&&0===n&&(I&&Ri(cr(I),o),i.flags|=2),32!=(32&i.flags))if(8&A)bg(t,n,i.child,o,c,f,!1),Ba(n,t,c,I,f);else if(32&A){const x=gi(i,o);let $;for(;$=x();)Ba(n,t,c,$,f);Ba(n,t,c,I,f)}else 16&A?zf(t,n,o,i,c,f):Ba(n,t,c,I,f);i=_?i.projectionNext:i.next}}function yh(t,n,i,o,c,f){bg(i,o,t.firstChild,n,c,f,!1)}function zf(t,n,i,o,c,f){const _=i[dn],A=_[Fr].projection[o.projection];if(Array.isArray(A))for(let x=0;x<A.length;x++)Ba(n,t,c,A[x],f);else{let x=A;const $=_[$n];hc(o)&&(x.flags|=128),bg(t,n,x,$,c,f,!0)}}function Mg(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function D_(t,n,i){const{mergedAttrs:o,classes:c,styles:f}=i;null!==o&&Nn(t,n,o),null!==c&&Mg(t,n,c),null!==f&&function hv(t,n,i){t.setAttribute(n,"style",i)}(t,n,f)}function vl(t){return function Gf(){if(void 0===vh&&(vh=null,cn.trustedTypes))try{vh=cn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return vh}()?.createHTML(t)||t}function Ng(t){xg=t}function pd(){if(void 0!==xg)return xg;if(typeof document<"u")return document;throw new ge(210,!1)}function Zf(t){return function Wf(){if(void 0===gd&&(gd=null,cn.trustedTypes))try{gd=cn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return gd}()?.createScriptURL(t)||t}class C_{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_t})`}}function Su(t){return t instanceof C_?t.changingThisBreaksApplicationSecurity:t}function El(t,n){const i=function S_(t){return t instanceof C_&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${_t})`)}return i===n}class _v{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const i=(new window.DOMParser).parseFromString(vl(n),"text/html").body;return null===i?this.inertDocumentHelper.getInertBodyElement(n):(i.removeChild(i.firstChild),i)}catch{return null}}}class Fg{constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const i=this.inertDocument.createElement("template");return i.innerHTML=vl(n),i}}const Ug=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wc(t){return(t=String(t)).match(Ug)?t:"unsafe:"+t}function $a(t){const n={};for(const i of t.split(","))n[i]=!0;return n}function Il(...t){const n={};for(const i of t)for(const o in i)i.hasOwnProperty(o)&&(n[o]=!0);return n}const P_=$a("area,br,col,hr,img,wbr"),Yf=$a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ha=$a("rp,rt"),Bg=Il(P_,Il(Yf,$a("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Il(Ha,$a("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Il(Ha,Yf)),jg=$a("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jf=Il(jg,$a("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$a("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Tc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Tc||{});function Eh(t){const n=Dc();return n?n.sanitize(Tc.URL,t)||"":El(t,"URL")?Su(t):wc(pe(t))}function Xf(t){const n=Dc();if(n)return Zf(n.sanitize(Tc.RESOURCE_URL,t)||"");if(El(t,"ResourceURL"))return Zf(Su(t));throw new ge(904,!1)}function Kg(t,n,i){return function qg(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?Xf:Eh}(n,i)(t)}function Dc(){const t=ut();return t&&t[vi].sanitizer}const Th=new be("ENVIRONMENT_INITIALIZER"),k_=new be("INJECTOR",-1),L_=new be("INJECTOR_DEF_TYPES");class Zg{get(n,i=xi){if(i===xi){const o=new Error(`NullInjectorError: No provider for ${ue(n)}!`);throw o.name="NullInjectorError",o}return i}}function Qg(...t){return{\u0275providers:ep(0,t),\u0275fromNgModule:!0}}function ep(t,...n){const i=[],o=new Set;let c;const f=_=>{i.push(_)};return Js(n,_=>{const I=_;Ah(I,f,[],o)&&(c||=[],c.push(I))}),void 0!==c&&tp(c,f),i}function tp(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:c}=t[i];Ch(c,f=>{n(f,o)})}}function Ah(t,n,i,o){if(!(t=Ke(t)))return!1;let c=null,f=Ui(t);const _=!f&&hn(t);if(f||_){if(_&&!_.standalone)return!1;c=t}else{const A=t.ngModule;if(f=Ui(A),!f)return!1;c=A}const I=o.has(c);if(_){if(I)return!1;if(o.add(c),_.dependencies){const A="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const x of A)Ah(x,n,i,o)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let x;o.add(c);try{Js(f.imports,$=>{Ah($,n,i,o)&&(x||=[],x.push($))})}finally{}void 0!==x&&tp(x,n)}if(!I){const x=In(c)||(()=>new c);n({provide:c,useFactory:x,deps:rn},c),n({provide:L_,useValue:c,multi:!0},c),n({provide:Th,useValue:()=>Et(c),multi:!0},c)}const A=f.providers;if(null!=A&&!I){const x=t;Ch(A,$=>{n($,x)})}}}return c!==t&&void 0!==t.providers}function Ch(t,n){for(let i of t)st(i)&&(i=i.\u0275providers),Array.isArray(i)?Ch(i,n):n(i)}const np=X({provide:String,useValue:X});function Sh(t){return null!==t&&"object"==typeof t&&np in t}function Ac(t){return"function"==typeof t}const rp=new be("Set Injector scope."),bu={},Xg={};let em;function ip(){return void 0===em&&(em=new Zg),em}class za{}class Tl extends za{get destroyed(){return this._destroyed}constructor(n,i,o,c){super(),this.parent=i,this.source=o,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nm(n,_=>this.processProvider(_)),this.records.set(k_,_d(void 0,this)),c.has("environment")&&this.records.set(za,_d(void 0,this));const f=this.records.get(rp);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(L_.multi,rn,Kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=je(this),o=kn(void 0);try{return n()}finally{je(i),kn(o)}}get(n,i=xi,o=Kt.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(pn))return n[pn](this);o=mt(o);const f=je(this),_=kn(void 0);try{if(!(o&Kt.SkipSelf)){let A=this.records.get(n);if(void 0===A){const x=function bv(t){return"function"==typeof t||"object"==typeof t&&t instanceof be}(n)&&Fn(n);A=x&&this.injectableDefInScope(x)?_d(tm(n),bu):null,this.records.set(n,A)}if(null!=A)return this.hydrate(n,A)}return(o&Kt.Self?ip():this.parent).get(n,i=o&Kt.Optional&&i===xi?null:i)}catch(I){if("NullInjectorError"===I.name){if((I[Bi]=I[Bi]||[]).unshift(ue(n)),f)throw I;return function Bn(t,n,i,o){const c=t[Bi];throw n[V]&&c.unshift(n[V]),t.message=function vt(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let c=ue(n);if(Array.isArray(n))c=n.map(ue).join(" -> ");else if("object"==typeof n){let f=[];for(let _ in n)if(n.hasOwnProperty(_)){let I=n[_];f.push(_+":"+("string"==typeof I?JSON.stringify(I):ue(I)))}c=`{${f.join(", ")}}`}return`${i}${o?"("+o+")":""}[${c}]: ${t.replace(G,"\n  ")}`}("\n"+t.message,c,i,o),t.ngTokenPath=c,t[Bi]=null,t}(I,n,"R3InjectorError",this.source)}throw I}finally{kn(_),je(f)}}resolveInjectorInitializers(){const n=je(this),i=kn(void 0);try{const c=this.get(Th.multi,rn,Kt.Self);for(const f of c)f()}finally{je(n),kn(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(ue(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(n){let i=Ac(n=Ke(n))?n:Ke(n&&n.provide);const o=function Av(t){return Sh(t)?_d(void 0,t.useValue):_d(U_(t),bu)}(n);if(Ac(n)||!0!==n.multi)this.records.get(i);else{let c=this.records.get(i);c||(c=_d(void 0,bu,!0),c.factory=()=>Bt(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===bu&&(i.value=Xg,i.value=i.factory()),"object"==typeof i.value&&i.value&&function Sv(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Ke(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function tm(t){const n=Fn(t),i=null!==n?n.factory:In(t);if(null!==i)return i;if(t instanceof be)throw new ge(204,!1);if(t instanceof Function)return function V_(t){const n=t.length;if(n>0)throw ac(n,"?"),new ge(204,!1);const i=function hr(t){return t&&(t[oi]||t[Nr])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new ge(204,!1)}function U_(t,n,i){let o;if(Ac(t)){const c=Ke(t);return In(c)||tm(c)}if(Sh(t))o=()=>Ke(t.useValue);else if(function wl(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...Bt(t.deps||[]));else if(function Yg(t){return!(!t||!t.useExisting)}(t))o=()=>Et(Ke(t.useExisting));else{const c=Ke(t&&(t.useClass||t.provide));if(!function Cv(t){return!!t.deps}(t))return In(c)||tm(c);o=()=>new c(...Bt(t.deps))}return o}function _d(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function nm(t,n){for(const i of t)Array.isArray(i)?nm(i,n):i&&st(i)?nm(i.\u0275providers,n):n(i)}const rm=new be("AppId",{providedIn:"root",factory:()=>B_}),B_="ng",sp=new be("Platform Initializer"),op=new be("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ap=new be("CSP nonce",{providedIn:"root",factory:()=>pd().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let xr=(t,n,i)=>null;function om(t,n,i=!1){return xr(t,n,i)}class Ga{}class Wa{}class Vv{resolveComponentFactory(n){throw function CI(t){const n=Error(`No component factory found for ${ue(t)}.`);return n.ngComponent=t,n}(n)}}let hp=(()=>{class t{static#e=this.NULL=new Vv}return t})();function H_(){return Al(Rr(),ut())}function Al(t,n){return new Pc(ti(t,n))}let Pc=(()=>{class t{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=H_}return t})();function Uv(t){return t instanceof Pc?t.nativeElement:t}class Mc{}let fp=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ph(){const t=ut(),i=ni(Rr().index,t);return(Hn(i)?i:t)[en]}()}return t})(),z_=(()=>{class t{static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>null})}return t})();class pp{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const gp=new pp("16.2.12"),Mh={};function Oh(t,n=null,i=null,o){const c=pm(t,n,i,o);return c.resolveInjectorInitializers(),c}function pm(t,n=null,i=null,o,c=new Set){const f=[i||rn,Qg(t)];return o=o||("object"==typeof t?void 0:ue(t)),new Tl(f,n||ip(),o||null,c)}let ws=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=xi;static#t=this.NULL=new Zg;static create(i,o){if(Array.isArray(i))return Oh({name:""},o,i,"");{const c=i.name??"";return Oh({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=Gt({token:t,providedIn:"any",factory:()=>Et(k_)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function yp(t){return t.ngOriginalError}class qa{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&yp(n);for(;i&&yp(i);)i=yp(i);return i||null}}function Nc(t){return n=>{setTimeout(t,void 0,n)}}const Ru=class jv extends E.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let c=n,f=i||(()=>null),_=o;if(n&&"object"==typeof n){const A=n;c=A.next?.bind(A),f=A.error?.bind(A),_=A.complete?.bind(A)}this.__isAsync&&(f=Nc(f),c&&(c=Nc(c)),_&&(_=Nc(_)));const I=super.subscribe({next:c,error:f,complete:_});return n instanceof Y.w0&&n.add(I),I}};function $v(...t){}class ii{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ru(!1),this.onMicrotaskEmpty=new Ru(!1),this.onStable=new Ru(!1),this.onError=new Ru(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!o&&i,c.shouldCoalesceRunChangeDetection=o,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function mm(){const t="function"==typeof cn.requestAnimationFrame;let n=cn[t?"requestAnimationFrame":"setTimeout"],i=cn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function zv(t){const n=()=>{!function Ep(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(cn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ym(t),t.isCheckStableRunning=!0,_m(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ym(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,c,f,_,I)=>{if(function Q_(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(I))return i.invokeTask(c,f,_,I);try{return kh(t),i.invokeTask(c,f,_,I)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&n(),Z_(t)}},onInvoke:(i,o,c,f,_,I,A)=>{try{return kh(t),i.invoke(c,f,_,I,A)}finally{t.shouldCoalesceRunChangeDetection&&n(),Z_(t)}},onHasTask:(i,o,c,f)=>{i.hasTask(c,f),o===c&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,ym(t),_m(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(i,o,c,f)=>(i.handleError(c,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ii.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(ii.isInAngularZone())throw new ge(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,c){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+c,n,Hv,$v,$v);try{return f.runTask(_,i,o)}finally{f.cancelTask(_)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const Hv={};function _m(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ym(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function kh(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Z_(t){t._nesting--,_m(t)}class Gv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ru,this.onMicrotaskEmpty=new Ru,this.onStable=new Ru,this.onError=new Ru}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,c){return n.apply(i,o)}}const vm=new be("",{providedIn:"root",factory:Em});function Em(){const t=ft(ii);let n=!0;const i=new Q.y(c=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{c.next(n),c.complete()})}),o=new Q.y(c=>{let f;t.runOutsideAngular(()=>{f=t.onStable.subscribe(()=>{ii.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,c.next(!0))})})});const _=t.onUnstable.subscribe(()=>{ii.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{c.next(!1)}))});return()=>{f.unsubscribe(),_.unsubscribe()}});return(0,Z.T)(i,o.pipe((0,me.B)()))}function Mu(t){return t instanceof Function?t():t}let xu=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>new t})}return t})();function ro(t){for(;t;){t[an]|=64;const n=Ua(t);if(zi(t)&&!n)return t;t=n}return null}const X_=new be("",{providedIn:"root",factory:()=>!1});let Fh=null;function ry(t,n){return t[n]??iy()}function bl(t,n){const i=iy();i.producerNode?.length&&(t[n]=Fh,i.lView=t,Fh=Xv())}const wm={...va,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ro(t.lView)},lView:null};function Xv(){return Object.create(wm)}function iy(){return Fh??=Xv(),Fh}const Sn={};function sy(t){oy(_n(),ut(),bi()+t,!1)}function oy(t,n,i,o){if(!o)if(3==(3&n[an])){const f=t.preOrderCheckHooks;null!==f&&Yu(n,f,i)}else{const f=t.preOrderHooks;null!==f&&Ju(n,f,0,i)}ba(i)}function yd(t,n=Kt.Default){const i=ut();return null===i?Et(t,n):Zd(Rr(),i,Ke(t),n)}function eE(){throw new Error("invalid")}function Tm(t,n,i,o,c,f,_,I,A,x,$){const J=n.blueprint.slice();return J[Yn]=c,J[an]=140|o,(null!==x||t&&2048&t[an])&&(J[an]|=2048),wa(J),J[$n]=J[Ei]=t,J[En]=i,J[vi]=_||t&&t[vi],J[en]=I||t&&t[en],J[Xr]=A||t&&t[Xr]||null,J[Fr]=f,J[Ur]=function Uf(){return Cg++}(),J[Jn]=$,J[eu]=x,J[dn]=2==n.type?t[dn]:J,J}function Vh(t,n,i,o,c){let f=t.data[n];if(null===f)f=Dm(t,n,i,o,c),function C(){return Jt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=i,f.value=o,f.attrs=c;const _=yn();f.injectorIndex=null===_?-1:_.injectorIndex}return vn(f,!0),f}function Dm(t,n,i,o,c){const f=jl(),_=Da(),A=t.data[n]=function OI(t,n,i,o,c,f){let _=n?n.injectorIndex:-1,I=0;return ts()&&(I|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:_,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,i,n,o,c);return null===t.firstChild&&(t.firstChild=A),null!==f&&(_?null==f.child&&null!==A.parent&&(f.child=A):null===f.next&&(f.next=A,A.prev=f)),A}function Uh(t,n,i,o){if(0===i)return-1;const c=n.length;for(let f=0;f<i;f++)n.push(o),t.blueprint.push(o),t.data.push(null);return c}function ay(t,n,i,o,c){const f=ry(n,Hs),_=bi(),I=2&o;try{ba(-1),I&&n.length>jt&&oy(t,n,jt,!1),Kr(I?2:0,c);const x=I?f:null,$=Go(x);try{null!==x&&(x.dirty=!1),i(o,c)}finally{Wo(x,$)}}finally{I&&null===n[Hs]&&bl(n,Hs),ba(_),Kr(I?3:1,c)}}function uy(t,n,i){if(Hi(n)){const o=di(null);try{const f=n.directiveEnd;for(let _=n.directiveStart;_<f;_++){const I=t.data[_];I.contentQueries&&I.contentQueries(1,i[_],_)}}finally{di(o)}}}function Am(t,n,i){Zo()&&(function Tp(t,n,i,o){const c=i.directiveStart,f=i.directiveEnd;wi(i)&&function lE(t,n,i){const o=ti(n,t),c=Ou(i);let _=16;i.signals?_=4096:i.onPush&&(_=64);const I=Li(t,Tm(t,c,null,_,o,n,null,t[vi].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=I}(n,i,t.data[c+i.componentOffset]),t.firstCreatePass||Zc(i,n),Ri(o,n);const _=i.initialInputs;for(let I=c;I<f;I++){const A=t.data[I],x=hu(n,t,I,i);Ri(x,n),null!==_&&dE(0,I-c,x,A,0,_),Di(A)&&(ni(i.index,n)[En]=hu(n,t,I,i))}}(t,n,i,ti(i,n)),64==(64&i.flags)&&fy(t,n,i))}function wp(t,n,i=ti){const o=n.localNames;if(null!==o){let c=n.index+1;for(let f=0;f<o.length;f+=2){const _=o[f+1],I=-1===_?i(n,t):t[_];t[c++]=I}}}function Ou(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Cm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function Cm(t,n,i,o,c,f,_,I,A,x,$){const J=jt+o,fe=J+c,Te=function tE(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:Sn);return i}(J,fe),rt="function"==typeof x?x():x;return Te[Dt]={type:t,blueprint:Te,template:i,queries:null,viewQuery:I,declTNode:n,data:Te.slice().fill(null,J),bindingStartIndex:J,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:A,consts:rt,incompleteFirstPass:!1,ssrId:$}}let cy=t=>null;function Sm(t,n,i,o){for(let c in t)if(t.hasOwnProperty(c)){i=null===i?{}:i;const f=t[c];null===o?ly(i,n,c,f):o.hasOwnProperty(c)&&ly(i,n,o[c],f)}return i}function ly(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function No(t,n,i,o,c,f,_,I){const A=ti(n,i);let $,x=n.inputs;!I&&null!=x&&($=x[o])?(jh(t,i,$,o,c),wi(n)&&function FI(t,n){const i=ni(n,t);16&i[an]||(i[an]|=64)}(i,n.index)):3&n.type&&(o=function LI(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),c=null!=_?_(c,n.value||"",o):c,f.setProperty(A,o,c))}function hy(t,n,i,o){if(Zo()){const c=null===o?null:{"":-1},f=function Rm(t,n){const i=t.directiveRegistry;let o=null,c=null;if(i)for(let f=0;f<i.length;f++){const _=i[f];if(Uo(n,_.selectors,!1))if(o||(o=[]),Di(_))if(null!==_.findHostDirectiveDefs){const I=[];c=c||new Map,_.findHostDirectiveDefs(_,I,c),o.unshift(...I,_),Dp(t,n,I.length)}else o.unshift(_),Dp(t,n,0);else c=c||new Map,_.findHostDirectiveDefs?.(_,o,c),o.push(_)}return null===o?null:[o,c]}(t,i);let _,I;null===f?_=I=null:[_,I]=f,null!==_&&aE(t,n,i,_,c,I),c&&function py(t,n,i){if(n){const o=t.localNames=[];for(let c=0;c<n.length;c+=2){const f=i[n[c+1]];if(null==f)throw new ge(-301,!1);o.push(n[c],f)}}}(i,o,c)}i.mergedAttrs=Hr(i.mergedAttrs,i.attrs)}function aE(t,n,i,o,c,f){for(let x=0;x<o.length;x++)ec(Zc(i,n),t,o[x].type);!function Pm(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let x=0;x<o.length;x++){const $=o[x];$.providersResolver&&$.providersResolver($)}let _=!1,I=!1,A=Uh(t,n,o.length,null);for(let x=0;x<o.length;x++){const $=o[x];i.mergedAttrs=Hr(i.mergedAttrs,$.hostAttrs),cE(t,i,n,A,$),Bh(A,$,c),null!==$.contentQueries&&(i.flags|=4),(null!==$.hostBindings||null!==$.hostAttrs||0!==$.hostVars)&&(i.flags|=64);const J=$.type.prototype;!_&&(J.ngOnChanges||J.ngOnInit||J.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),_=!0),!I&&(J.ngOnChanges||J.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),I=!0),A++}!function kI(t,n,i){const c=n.directiveEnd,f=t.data,_=n.attrs,I=[];let A=null,x=null;for(let $=n.directiveStart;$<c;$++){const J=f[$],fe=i?i.get(J):null,rt=fe?fe.outputs:null;A=Sm(J.inputs,$,A,fe?fe.inputs:null),x=Sm(J.outputs,$,x,rt);const ht=null===A||null===_||Zi(n)?null:gy(A,$,_);I.push(ht)}null!==A&&(A.hasOwnProperty("class")&&(n.flags|=8),A.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=I,n.inputs=A,n.outputs=x}(t,i,f)}function fy(t,n,i){const o=i.directiveStart,c=i.directiveEnd,f=i.index,_=function N(){return Jt.lFrame.currentDirectiveIndex}();try{ba(f);for(let I=o;I<c;I++){const A=t.data[I],x=n[I];z(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&uE(A,x)}}finally{ba(-1),z(_)}}function uE(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Dp(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function Bh(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;Di(n)&&(i[""]=t)}}function cE(t,n,i,o,c){t.data[o]=c;const f=c.factory||(c.factory=In(c.type)),_=new Pa(f,Di(c),yd);t.blueprint[o]=_,i[o]=_,function VI(t,n,i,o,c){const f=c.hostBindings;if(f){let _=t.hostBindingOpCodes;null===_&&(_=t.hostBindingOpCodes=[]);const I=~n.index;(function bm(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(_)!=I&&_.push(I),_.push(i,o,f)}}(t,n,o,Uh(t,i,c.hostVars,Sn),c)}function ra(t,n,i,o,c,f){const _=ti(t,n);!function vd(t,n,i,o,c,f,_){if(null==f)t.removeAttribute(n,c,i);else{const I=null==_?pe(f):_(f,o||"",c);t.setAttribute(n,c,I,i)}}(n[en],_,f,t.value,i,o,c)}function dE(t,n,i,o,c,f){const _=f[n];if(null!==_)for(let I=0;I<_.length;)Mm(o,i,_[I++],_[I++],_[I++])}function Mm(t,n,i,o,c){const f=di(null);try{const _=t.inputTransforms;null!==_&&_.hasOwnProperty(o)&&(c=_[o].call(n,c)),null!==t.setInput?t.setInput(n,c,i,o):n[o]=c}finally{di(f)}}function gy(t,n,i){let o=null,c=0;for(;c<i.length;){const f=i[c];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===o&&(o=[]);const _=t[f];for(let I=0;I<_.length;I+=2)if(_[I]===n){o.push(f,_[I+1],i[c+1]);break}}c+=2}else c+=2;else c+=4}return o}function Lc(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function io(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const f=i[o+1];if(-1!==f){const _=t.data[f];xe(i[o]),_.contentQueries(2,n[f],f)}}}function Li(t,n){return t[js]?t[Gn][Wr]=n:t[js]=n,t[Gn]=n,n}function Ap(t,n,i){xe(0);const o=di(null);try{n(t,i)}finally{di(o)}}function Ed(t){return t[ji]||(t[ji]=[])}function Id(t){return t.cleanup||(t.cleanup=[])}function my(t,n){const i=t[Xr],o=i?i.get(qa,null):null;o&&o.handleError(n)}function jh(t,n,i,o,c){for(let f=0;f<i.length;){const _=i[f++],I=i[f++];Mm(t.data[_],n[_],o,I,c)}}function Rl(t,n){const i=ni(n,t),o=i[Dt];!function xm(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const c=i[Yn];null!==c&&null===i[Jn]&&(i[Jn]=om(c,i[Xr])),ku(o,i,i[En])}function ku(t,n,i){gr(n);try{const o=t.viewQuery;null!==o&&Ap(1,o,i);const c=t.template;null!==c&&ay(t,n,c,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&io(t,n),t.staticViewQueries&&Ap(2,t.viewQuery,i);const f=t.components;null!==f&&function fE(t,n){for(let i=0;i<n.length;i++)Rl(t,n[i])}(n,f)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[an]&=-5,ou()}}let _y=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,c){const f=typeof Zone>"u"?null:Zone.current,_=function nt(t,n,i){const o=Object.create(Cn);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const c=_=>{o.cleanupFn=_};return o.ref={notify:()=>zo(o),run:()=>{if(o.dirty=!1,o.hasRun&&!ru(o))return;o.hasRun=!0;const _=Go(o);try{o.cleanupFn(),o.cleanupFn=Ut,o.fn(c)}finally{Wo(o,_)}},cleanup:()=>o.cleanupFn()},o.ref}(i,x=>{this.all.has(x)&&this.queue.set(x,f)},c);let I;this.all.add(_),_.notify();const A=()=>{_.cleanup(),I?.(),this.all.delete(_),this.queue.delete(_)};return I=o?.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Cp(t,n,i){let o=i?t.styles:null,c=i?t.classes:null,f=0;if(null!==n)for(let _=0;_<n.length;_++){const I=n[_];"number"==typeof I?f=I:1==f?c=Ue(c,I):2==f&&(o=Ue(o,I+": "+n[++_]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=c:t.classesWithoutHost=c}function wd(t,n,i,o,c=!1){for(;null!==i;){const f=n[i.index];null!==f&&o.push(cr(f)),ur(f)&&yy(f,o);const _=i.type;if(8&_)wd(t,n,i.child,o);else if(32&_){const I=gi(i,n);let A;for(;A=I();)o.push(A)}else if(16&_){const I=$f(n,i);if(Array.isArray(I))o.push(...I);else{const A=Ua(n[dn]);wd(A[Dt],A,I,o,!0)}}i=c?i.projectionNext:i.next}return o}function yy(t,n){for(let i=Ir;i<t.length;i++){const o=t[i],c=o[Dt].firstChild;null!==c&&wd(o[Dt],o,c,n)}t[ci]!==t[Yn]&&n.push(t[ci])}function Td(t,n,i,o=!0){const c=n[vi],f=c.rendererFactory,_=c.afterRenderEventManager;f.begin?.(),_?.begin();try{Nm(t,n,t.template,i)}catch(A){throw o&&my(n,A),A}finally{f.end?.(),c.effectManager?.flush(),_?.end()}}function Nm(t,n,i,o){const c=n[an];if(256!=(256&c)){n[vi].effectManager?.flush(),gr(n);try{wa(n),function Ca(t){return Jt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&ay(t,n,i,2,o);const _=3==(3&c);if(_){const x=t.preOrderCheckHooks;null!==x&&Yu(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Ju(n,x,0,null),Hl(n,0)}if(function Om(t){for(let n=mc(t);null!==n;n=fl(n)){if(!n[ar])continue;const i=n[qr];for(let o=0;o<i.length;o++){hi(i[o])}}}(n),vy(n,2),null!==t.contentQueries&&io(t,n),_){const x=t.contentCheckHooks;null!==x&&Yu(n,x)}else{const x=t.contentHooks;null!==x&&Ju(n,x,1),Hl(n,1)}!function xI(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=ry(n,Ii);try{for(let c=0;c<i.length;c++){const f=i[c];if(f<0)ba(~f);else{const _=f,I=i[++c],A=i[++c];S(I,_),o.dirty=!1;const x=Go(o);try{A(2,n[_])}finally{Wo(o,x)}}}}finally{null===n[Ii]&&bl(n,Ii),ba(-1)}}(t,n);const I=t.components;null!==I&&Lm(n,I,0);const A=t.viewQuery;if(null!==A&&Ap(2,A,o),_){const x=t.viewCheckHooks;null!==x&&Yu(n,x)}else{const x=t.viewHooks;null!==x&&Ju(n,x,2),Hl(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[an]&=-73,Io(n)}finally{ou()}}}function vy(t,n){for(let i=mc(t);null!==i;i=fl(i))for(let o=Ir;o<i.length;o++)km(i[o],n)}function mE(t,n,i){km(ni(n,t),i)}function km(t,n){if(!function Eo(t){return 128==(128&t[an])}(t))return;const i=t[Dt],o=t[an];if(80&o&&0===n||1024&o||2===n)Nm(i,t,i.template,t[En]);else if(t[Bs]>0){vy(t,1);const c=i.components;null!==c&&Lm(t,c,1)}}function Lm(t,n,i){for(let o=0;o<n.length;o++)mE(t,n[o],i)}class $h{get rootNodes(){const n=this._lView,i=n[Dt];return wd(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(n){this._lView[En]=n}get destroyed(){return 256==(256&this._lView[an])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[$n];if(ur(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(ie(n,o),Xs(i,o))}this._attachedToViewContainer=!1}ve(this._lView[Dt],this._lView)}onDestroy(n){!function jd(t,n){if(256==(256&t[an]))throw new ge(911,!1);null===t[$s]&&(t[$s]=[]),t[$s].push(n)}(this._lView,n)}markForCheck(){ro(this._cdRefInjectingView||this._lView)}detach(){this._lView[an]&=-129}reattach(){this._lView[an]|=128}detectChanges(){Td(this._lView[Dt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function l(t,n){yh(t,n,n[en],2,null,null)}(this._lView[Dt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=n}}class _E extends $h{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;Td(n[Dt],n,n[En],!1)}checkNoChanges(){}get context(){return null}}class Ey extends hp{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=hn(n);return new Hh(i,this.ngModule)}}function Iy(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class wy{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=mt(o);const c=this.injector.get(n,Mh,o);return c!==Mh||i===Mh?c:this.parentInjector.get(n,i,o)}}class Hh extends Wa{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=Iy(n.inputs);if(null!==i)for(const c of o)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return o}get outputs(){return Iy(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Qn(t){return t.map(Bo).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,c){let f=(c=c||this.ngModule)instanceof za?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const _=f?new wy(n,f):n,I=_.get(Mc,null);if(null===I)throw new ge(407,!1);const J={rendererFactory:I,sanitizer:_.get(z_,null),effectManager:_.get(_y,null),afterRenderEventManager:_.get(xu,null)},fe=I.createRenderer(null,this.componentDef),Te=this.componentDef.selectors[0][0]||"div",rt=o?function nE(t,n,i,o){const f=o.get(X_,!1)||i===kr.ShadowDom,_=t.selectRootElement(n,f);return function rE(t){cy(t)}(_),_}(fe,o,this.componentDef.encapsulation,_):vc(fe,Te,function yE(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(Te)),Qt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ct=null;null!==rt&&(ct=om(rt,_,!0));const Dn=Cm(0,null,null,1,0,null,null,null,null,null,null),jn=Tm(null,Dn,null,Qt,null,null,J,fe,_,null,ct);let Ar,Vo;gr(jn);try{const Ll=this.componentDef;let og,mI=null;Ll.findHostDirectiveDefs?(og=[],mI=new Map,Ll.findHostDirectiveDefs(Ll,og,mI),og.push(Ll)):og=[Ll];const KC=function a(t,n){const i=t[Dt],o=jt;return t[o]=n,Vh(i,o,2,"#host",null)}(jn,rt),ZC=function e(t,n,i,o,c,f,_){const I=c[Dt];!function r(t,n,i,o){for(const c of t)n.mergedAttrs=Hr(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(Cp(n,n.mergedAttrs,!0),null!==i&&D_(o,i,n))}(o,t,n,_);let A=null;null!==n&&(A=om(n,c[Xr]));const x=f.rendererFactory.createRenderer(n,i);let $=16;i.signals?$=4096:i.onPush&&($=64);const J=Tm(c,Ou(i),null,$,c[t.index],t,f,x,null,null,A);return I.firstCreatePass&&Dp(I,t,o.length-1),Li(c,J),c[t.index]=J}(KC,rt,Ll,og,jn,J,fe);Vo=Ku(Dn,jt),rt&&function u(t,n,i,o){if(o)Nn(t,i,["ng-version",gp.full]);else{const{attrs:c,classes:f}=function $c(t){const n=[],i=[];let o=1,c=2;for(;o<t.length;){let f=t[o];if("string"==typeof f)2===c?""!==f&&n.push(f,t[++o]):8===c&&i.push(f);else{if(!Sr(c))break;c=f}o++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Nn(t,i,c),f&&f.length>0&&Mg(t,i,f.join(" "))}}(fe,Ll,rt,o),void 0!==i&&function h(t,n,i){const o=t.projection=[];for(let c=0;c<n.length;c++){const f=i[c];o.push(null!=f?Array.from(f):null)}}(Vo,this.ngContentSelectors,i),Ar=function s(t,n,i,o,c,f){const _=Rr(),I=c[Dt],A=ti(_,c);aE(I,c,_,i,null,o);for(let $=0;$<i.length;$++)Ri(hu(c,I,_.directiveStart+$,_),c);fy(I,c,_),A&&Ri(A,c);const x=hu(c,I,_.directiveStart+_.componentOffset,_);if(t[En]=c[En]=x,null!==f)for(const $ of f)$(x,n);return uy(I,_,t),x}(ZC,Ll,og,mI,jn,[g]),ku(Dn,jn,null)}finally{ou()}return new UI(this.componentType,Ar,Al(Vo,jn),jn,Vo)}}class UI extends Ga{constructor(n,i,o,c,f){super(),this.location=o,this._rootLView=c,this._tNode=f,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new _E(c),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let c;if(null!==o&&(c=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const f=this._rootLView;jh(f[Dt],f,c,n,i),this.previousInputValues.set(n,i),ro(ni(this._tNode.index,f))}}get injector(){return new Oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function g(){const t=Rr();Do(ut()[Dt],t)}function b(t){let n=function T(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let c;if(Di(t))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new ge(903,!1);c=n.\u0275dir}if(c){if(i){o.push(c);const _=t;_.inputs=H(t.inputs),_.inputTransforms=H(t.inputTransforms),_.declaredInputs=H(t.declaredInputs),_.outputs=H(t.outputs);const I=c.hostBindings;I&&Re(t,I);const A=c.viewQuery,x=c.contentQueries;if(A&&K(t,A),x&&oe(t,x),re(t.inputs,c.inputs),re(t.declaredInputs,c.declaredInputs),re(t.outputs,c.outputs),null!==c.inputTransforms&&(null===_.inputTransforms&&(_.inputTransforms={}),re(_.inputTransforms,c.inputTransforms)),Di(c)&&c.data.animation){const $=t.data;$.animation=($.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let _=0;_<f.length;_++){const I=f[_];I&&I.ngInherit&&I(t),I===b&&(i=!1)}}n=Object.getPrototypeOf(n)}!function O(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const c=t[o];c.hostVars=n+=c.hostVars,c.hostAttrs=Hr(c.hostAttrs,i=Hr(i,c.hostAttrs))}}(o)}function H(t){return t===Jr?{}:t===rn?[]:t}function K(t,n){const i=t.viewQuery;t.viewQuery=i?(o,c)=>{n(o,c),i(o,c)}:n}function oe(t,n){const i=t.contentQueries;t.contentQueries=i?(o,c,f)=>{n(o,c,f),i(o,c,f)}:n}function Re(t,n){const i=t.hostBindings;t.hostBindings=i?(o,c)=>{n(o,c),i(o,c)}:n}function Vt(t){return n=>{n.findHostDirectiveDefs=zt,n.hostDirectives=(Array.isArray(t)?t:t()).map(i=>"function"==typeof i?{directive:Ke(i),inputs:Jr,outputs:Jr}:{directive:Ke(i.directive),inputs:wt(i.inputs),outputs:wt(i.outputs)})}}function zt(t,n,i){if(null!==t.hostDirectives)for(const o of t.hostDirectives){const c=sr(o.directive);qt(c.declaredInputs,o.inputs),zt(c,n,i),i.set(c,o),n.push(c)}}function wt(t){if(void 0===t||0===t.length)return Jr;const n={};for(let i=0;i<t.length;i+=2)n[t[i]]=t[i+1];return n}function qt(t,n){for(const i in n)n.hasOwnProperty(i)&&(t[n[i]]=t[i])}function ye(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const c=n[o];Array.isArray(c)&&c[2]&&(i[o]=c[2])}t.inputTransforms=i}function de(t){return!!ke(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function ke(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fi(t,n,i){return t[n]=i}function is(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function ia(t,n,i,o){const c=is(t,n,i);return is(t,n+1,o)||c}function bp(t,n,i,o){const c=ut();return is(c,xs(),n)&&(_n(),ra(mr(),c,t,n,i,o)),bp}function so(t,n,i,o){return is(t,xs(),i)?n+pe(i)+o:Sn}function xy(t,n,i,o,c,f,_,I){const A=ut(),x=_n(),$=t+jt,J=x.firstCreatePass?function Xh(t,n,i,o,c,f,_,I,A){const x=n.consts,$=Vh(n,t,4,_||null,ms(x,I));hy(n,i,$,ms(x,A)),Do(n,$);const J=$.tView=Cm(2,$,o,c,f,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,$),J.queries=n.queries.embeddedTView($)),$}($,x,A,n,i,o,c,f,_):x.data[$];vn(J,!1);const fe=Ny(x,A,J,t);Kc()&&Ic(x,A,fe,J),Ri(fe,A),Li(A,A[$]=Lc(fe,A,fe,J)),Ti(J)&&Am(x,A,J),null!=_&&wp(A,J,I)}let Ny=function Nl(t,n,i,o){return Ra(!0),n[en].createComment("")};function Gm(t){return function Qs(t,n){return t[n]}(function Aa(){return Jt.lFrame.contextLView}(),jt+t)}function ef(t,n,i){const o=ut();return is(o,xs(),n)&&No(_n(),mr(),o,t,n,o[en],i,!1),ef}function Rd(t,n,i,o,c){const _=c?"class":"style";jh(t,i,n.inputs[_],_,o)}function tf(t,n,i,o){const c=ut(),f=_n(),_=jt+t,I=c[en],A=f.firstCreatePass?function Vc(t,n,i,o,c,f){const _=n.consts,A=Vh(n,t,2,o,ms(_,c));return hy(n,i,A,ms(_,f)),null!==A.attrs&&Cp(A,A.attrs,!1),null!==A.mergedAttrs&&Cp(A,A.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,A),A}(_,f,c,n,i,o):f.data[_],x=Vp(f,c,A,I,n,t);c[_]=x;const $=Ti(A);return vn(A,!0),D_(I,x,A),32!=(32&A.flags)&&Kc()&&Ic(f,c,x,A),0===function qc(){return Jt.lFrame.elementDepthCount}()&&Ri(x,c),function Ko(){Jt.lFrame.elementDepthCount++}(),$&&(Am(f,c,A),uy(f,A,c)),null!==o&&wp(c,A),tf}function nf(){let t=Rr();Da()?su():(t=t.parent,vn(t,!1));const n=t;(function wo(t){return Jt.skipHydrationRootTNode===t})(n)&&function To(){Jt.skipHydrationRootTNode=null}(),function Ef(){Jt.lFrame.elementDepthCount--}();const i=_n();return i.firstCreatePass&&(Do(i,t),Hi(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function Ma(t){return 0!=(8&t.flags)}(n)&&Rd(i,n,ut(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function Af(t){return 0!=(16&t.flags)}(n)&&Rd(i,n,ut(),n.stylesWithoutHost,!1),nf}function rf(t,n,i,o){return tf(t,n,i,o),nf(),rf}let Vp=(t,n,i,o,c,f)=>(Ra(!0),vc(o,c,function qd(){return Jt.lFrame.currentNamespace}()));function Ly(){return ut()}function jp(t){return!!t&&"function"==typeof t.then}function qm(t){return!!t&&"function"==typeof t.subscribe}function $p(t,n,i,o){const c=ut(),f=_n(),_=Rr();return function Zm(t,n,i,o,c,f,_){const I=Ti(o),x=t.firstCreatePass&&Id(t),$=n[En],J=Ed(n);let fe=!0;if(3&o.type||_){const ht=ti(o,n),Mt=_?_(ht):ht,Qt=J.length,ct=_?jn=>_(cr(jn[o.index])):o.index;let Dn=null;if(!_&&I&&(Dn=function Km(t,n,i,o){const c=t.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const _=c[f];if(_===i&&c[f+1]===o){const I=n[ji],A=c[f+2];return I.length>A?I[A]:null}"string"==typeof _&&(f+=2)}return null}(t,n,c,o.index)),null!==Dn)(Dn.__ngLastListenerFn__||Dn).__ngNextListenerFn__=f,Dn.__ngLastListenerFn__=f,fe=!1;else{f=Fy(o,n,$,f,!1);const jn=i.listen(Mt,c,f);J.push(f,jn),x&&x.push(c,ct,Qt,Qt+1)}}else f=Fy(o,n,$,f,!1);const Te=o.outputs;let rt;if(fe&&null!==Te&&(rt=Te[c])){const ht=rt.length;if(ht)for(let Mt=0;Mt<ht;Mt+=2){const Ar=n[rt[Mt]][rt[Mt+1]].subscribe(f),Vo=J.length;J.push(f,Ar),x&&x.push(c,o.index,Vo,-(Vo+1))}}}(f,c,c[en],_,t,n,o),$p}function Qm(t,n,i,o){try{return Kr(6,n,i),!1!==i(o)}catch(c){return my(t,c),!1}finally{Kr(7,n,i)}}function Fy(t,n,i,o,c){return function f(_){if(_===Function)return o;ro(t.componentOffset>-1?ni(t.index,n):n);let A=Qm(n,i,o,_),x=f.__ngNextListenerFn__;for(;x;)A=Qm(n,i,x,_)&&A,x=x.__ngNextListenerFn__;return c&&!1===A&&_.preventDefault(),A}}function Vy(t=1){return function lr(t){return(Jt.lFrame.contextLView=function Sa(t,n){for(;t>0;)n=n[Ei],t--;return n}(t,Jt.lFrame.contextLView))[En]}(t)}function Uy(t,n){let i=null;const o=function Fl(t){const n=t.attrs;if(null!=n){const i=n.indexOf(5);if(!(1&i))return n[i+1]}return null}(t);for(let c=0;c<n.length;c++){const f=n[c];if("*"!==f){if(null===o?Uo(t,f,!0):ho(o,f))return c}else i=c}return i}function Ym(t){const n=ut()[dn][Fr];if(!n.projection){const o=n.projection=ac(t?t.length:1,null),c=o.slice();let f=n.child;for(;null!==f;){const _=t?Uy(f,t):0;null!==_&&(c[_]?c[_].projectionNext=f:o[_]=f,c[_]=f),f=f.next}}}function By(t,n=0,i){const o=ut(),c=_n(),f=Vh(c,jt+t,16,null,i||null);null===f.projection&&(f.projection=n),su(),(!o[Jn]||ts())&&32!=(32&f.flags)&&function Rg(t,n,i){zf(n[en],0,n,i,xt(t,i,n),ml(i.parent||n[Fr],i,n))}(c,o,f)}function Fu(t,n,i){return Oo(t,"",n,"",i),Fu}function Oo(t,n,i,o,c){const f=ut(),_=so(f,n,i,o);return _!==Sn&&No(_n(),mr(),f,t,_,f[en],c,!1),Oo}function cf(t,n){return t<<17|n<<2}function Uc(t){return t>>17&32767}function Xm(t){return 2|t}function sa(t){return(131068&t)>>2}function Ya(t,n){return-131069&t|n<<2}function zp(t){return 1|t}function Hy(t,n,i,o,c){const f=t[i+1],_=null===n;let I=o?Uc(f):sa(f),A=!1;for(;0!==I&&(!1===A||_);){const $=t[I+1];Bc(t[I],n)&&(A=!0,t[I+1]=o?zp($):Xm($)),I=o?Uc($):sa($)}A&&(t[i+1]=o?Xm(f):zp(f))}function Bc(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&vu(t,n)>=0}const Mi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function zy(t){return t.substring(Mi.key,Mi.keyEnd)}function e_(t,n){const i=Mi.textEnd;return i===n?-1:(n=Mi.keyEnd=function Qr(t,n,i){for(;n<i&&t.charCodeAt(n)>32;)n++;return n}(t,Mi.key=n,i),jc(t,n,i))}function jc(t,n,i){for(;n<i&&t.charCodeAt(n)<=32;)n++;return n}function Wp(t,n){return function ko(t,n,i,o){const c=ut(),f=_n(),_=w(2);f.firstUpdatePass&&r_(f,t,_,o),n!==Sn&&is(c,_,n)&&s_(f,f.data[bi()],c,c[en],t,c[_+1]=function Yy(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=ue(Su(t)))),t}(n,i),o,_)}(t,n,null,!0),Wp}function Ky(t){!function oo(t,n,i,o){const c=_n(),f=w(2);c.firstUpdatePass&&r_(c,null,f,o);const _=ut();if(i!==Sn&&is(_,f,i)){const I=c.data[bi()];if(a_(I,o)&&!pf(c,f)){let A=o?I.classesWithoutHost:I.stylesWithoutHost;null!==A&&(i=Ue(A,i||"")),Rd(c,I,_,i,o)}else!function Qp(t,n,i,o,c,f,_,I){c===Sn&&(c=rn);let A=0,x=0,$=0<c.length?c[0]:null,J=0<f.length?f[0]:null;for(;null!==$||null!==J;){const fe=A<c.length?c[A+1]:void 0,Te=x<f.length?f[x+1]:void 0;let ht,rt=null;$===J?(A+=2,x+=2,fe!==Te&&(rt=J,ht=Te)):null===J||null!==$&&$<J?(A+=2,rt=$):(x+=2,rt=J,ht=Te),null!==rt&&s_(t,n,i,o,rt,ht,_,I),$=A<c.length?c[A]:null,J=x<f.length?f[x]:null}}(c,I,_,_[en],_[f+1],_[f+1]=function i_(t,n,i){if(null==i||""===i)return rn;const o=[],c=Su(i);if(Array.isArray(c))for(let f=0;f<c.length;f++)t(o,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&t(o,f,c[f]);else"string"==typeof c&&n(o,c);return o}(t,n,i),o,f)}}(Qy,Us,t,!0)}function Us(t,n){for(let i=function Gp(t){return function t_(t){Mi.key=0,Mi.keyEnd=0,Mi.value=0,Mi.valueEnd=0,Mi.textEnd=t.length}(t),e_(t,jc(t,0,Mi.textEnd))}(n);i>=0;i=e_(n,i))Es(t,zy(n),!0)}function pf(t,n){return n>=t.expandoStartIndex}function r_(t,n,i,o){const c=t.data;if(null===c[i+1]){const f=c[bi()],_=pf(t,i);a_(f,o)&&null===n&&!_&&(n=!1),n=function qp(t,n,i,o){const c=function ne(t){const n=Jt.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let f=o?n.residualClasses:n.residualStyles;if(null===c)0===(o?n.classBindings:n.styleBindings)&&(i=kd(i=Kp(null,t,n,i,o),n.attrs,o),f=null);else{const _=n.directiveStylingLast;if(-1===_||t[_]!==c)if(i=Kp(c,t,n,i,o),null===f){let A=function xE(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==sa(o))return t[Uc(o)]}(t,n,o);void 0!==A&&Array.isArray(A)&&(A=Kp(null,t,n,A[1],o),A=kd(A,n.attrs,o),function Zy(t,n,i,o){t[Uc(i?n.classBindings:n.styleBindings)]=o}(t,n,o,A))}else f=function gf(t,n,i){let o;const c=n.directiveEnd;for(let f=1+n.directiveStylingLast;f<c;f++)o=kd(o,t[f].hostAttrs,i);return kd(o,n.attrs,i)}(t,n,o)}return void 0!==f&&(o?n.residualClasses=f:n.residualStyles=f),i}(c,f,n,o),function bE(t,n,i,o,c,f){let _=f?n.classBindings:n.styleBindings,I=Uc(_),A=sa(_);t[o]=i;let $,x=!1;if(Array.isArray(i)?($=i[1],(null===$||vu(i,$)>0)&&(x=!0)):$=i,c)if(0!==A){const fe=Uc(t[I+1]);t[o+1]=cf(fe,I),0!==fe&&(t[fe+1]=Ya(t[fe+1],o)),t[I+1]=function CE(t,n){return 131071&t|n<<17}(t[I+1],o)}else t[o+1]=cf(I,0),0!==I&&(t[I+1]=Ya(t[I+1],o)),I=o;else t[o+1]=cf(A,0),0===I?I=o:t[A+1]=Ya(t[A+1],o),A=o;x&&(t[o+1]=Xm(t[o+1])),Hy(t,$,o,!0),Hy(t,$,o,!1),function RE(t,n,i,o,c){const f=c?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof n&&vu(f,n)>=0&&(i[o+1]=zp(i[o+1]))}(n,$,t,o,f),_=cf(I,A),f?n.classBindings=_:n.styleBindings=_}(c,f,n,i,_,o)}}function Kp(t,n,i,o,c){let f=null;const _=i.directiveEnd;let I=i.directiveStylingLast;for(-1===I?I=i.directiveStart:I++;I<_&&(f=n[I],o=kd(o,f.hostAttrs,c),f!==t);)I++;return null!==t&&(i.directiveStylingLast=I),o}function kd(t,n,i){const o=i?1:2;let c=-1;if(null!==n)for(let f=0;f<n.length;f++){const _=n[f];"number"==typeof _?c=_:c===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Es(t,_,!!i||n[++f]))}return void 0===t?null:t}function Qy(t,n,i){const o=String(n);""!==o&&!o.includes(" ")&&Es(t,o,i)}function s_(t,n,i,o,c,f,_,I){if(!(3&n.type))return;const A=t.data,x=A[I+1],$=function $y(t){return 1==(1&t)}(x)?o_(A,n,i,c,sa(x),_):void 0;Ja($)||(Ja(f)||function AE(t){return 2==(2&t)}(x)&&(f=o_(A,null,i,c,I,_)),function Pg(t,n,i,o,c){if(n)c?t.addClass(i,o):t.removeClass(i,o);else{let f=-1===o.indexOf("-")?void 0:Ro.DashCase;null==c?t.removeStyle(i,o,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=Ro.Important),t.setStyle(i,o,c,f))}}(o,_,Zs(bi(),i),c,f))}function o_(t,n,i,o,c,f){const _=null===n;let I;for(;c>0;){const A=t[c],x=Array.isArray(A),$=x?A[1]:A,J=null===$;let fe=i[c+1];fe===Sn&&(fe=J?rn:void 0);let Te=J?uc(fe,o):$===o?fe:void 0;if(x&&!Ja(Te)&&(Te=uc(A,o)),Ja(Te)&&(I=Te,_))return I;const rt=t[c+1];c=_?Uc(rt):sa(rt)}if(null!==n){let A=f?n.residualClasses:n.residualStyles;null!=A&&(I=uc(A,o))}return I}function Ja(t){return void 0!==t}function a_(t,n){return 0!=(t.flags&(n?8:16))}function u_(t,n=""){const i=ut(),o=_n(),c=t+jt,f=o.firstCreatePass?Vh(o,c,1,n,null):o.data[c],_=c_(o,i,f,n,t);i[c]=_,Kc()&&Ic(o,i,_,f),vn(f,!1)}let c_=(t,n,i,o,c)=>(Ra(!0),_c(n[en],o));function Jp(t){return mf("",t,""),Jp}function mf(t,n,i){const o=ut(),c=so(o,t,n,i);return c!==Sn&&function Fs(t,n,i){const o=Zs(n,t);!function hd(t,n,i){t.setValue(n,i)}(t[en],o,i)}(o,bi(),c),mf}function NE(t,n,i){const o=ut();return is(o,xs(),n)&&No(_n(),mr(),o,t,n,o[en],i,!0),NE}const _f=void 0;var ET=["en",[["a","p"],["AM","PM"],_f],[["AM","PM"],_f,_f],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_f,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_f,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_f,"{1} 'at' {0}",_f],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vT(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let eg={};function OE(t){const n=function IT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=YI(n);if(i)return i;const o=n.split("-")[0];if(i=YI(o),i)return i;if("en"===o)return ET;throw new ge(701,!1)}function QI(t){return OE(t)[tg.PluralCase]}function YI(t){return t in eg||(eg[t]=cn.ng&&cn.ng.common&&cn.ng.common.locales&&cn.ng.common.locales[t]),eg[t]}var tg=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(tg||{});const ng="en-US",Jy={marker:"element"},Xy={marker:"ICU"};var Lo=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}(Lo||{});let JI=ng;function XI(t){(function ce(t,n){null==t&&yt(n,t,null,"!=")})(t,"Expected localeId to be defined"),"string"==typeof t&&(JI=t.toLowerCase().replace(/_/g,"-"))}function e0(t,n,i){const o=n.insertBeforeIndex,c=Array.isArray(o)?o[0]:o;return null===c?ja(t,0,i):cr(i[c])}function t0(t,n,i,o,c){const f=n.insertBeforeIndex;if(Array.isArray(f)){let _=o,I=null;if(3&n.type||(I=_,_=c),null!==_&&-1===n.componentOffset)for(let A=1;A<f.length;A++)ri(t,_,i[f[A]],I,!1)}}function n0(t,n){if(t.push(n),t.length>1)for(let i=t.length-2;i>=0;i--){const o=t[i];r0(o)||CT(o,n)&&null===ST(o)&&bT(o,n.index)}}function r0(t){return!(64&t.type)}function CT(t,n){return r0(n)||t.index>n.index}function ST(t){const n=t.insertBeforeIndex;return Array.isArray(n)?n[0]:n}function bT(t,n){const i=t.insertBeforeIndex;Array.isArray(i)?i[0]=n:(Cu(e0,t0),t.insertBeforeIndex=n)}function MT(t,n,i){const o=Dm(t,i,64,null,null);return n0(n,o),o}function VT(){const t=[];let i,o,n=-1;function f(I,A){n=0;const x=function ev(t,n){const i=n[t.currentCaseLViewIndex];return null===i?i:i<0?~i:i}(I,A);o=null!==x?I.remove[x]:rn}function _(){if(n<o.length){const I=o[n++];return I>0?i[I]:(t.push(n,o),f(i[Dt].data[~I],i),_())}return 0===t.length?null:(o=t.pop(),n=t.pop(),_())}return function c(I,A){for(i=A;t.length;)t.pop();return f(I.value,A),_}}const tv=/\ufffd(\d+):?\d*\ufffd/gi,BT=/\ufffd(\d+)\ufffd/,f0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,p_="\ufffd",jT=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$T=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,HT=/\uE500/g;function p0(t,n,i,o,c,f,_){const I=Uh(t,o,1,null);let A=I<<Lo.SHIFT,x=yn();n===x&&(x=null),null===x&&(A|=Lo.APPEND_EAGERLY),_&&(A|=Lo.COMMENT,function Po(t){void 0===gc&&(gc=t())}(VT)),c.push(A,null===f?"":f);const $=Dm(t,I,_?32:1,null===f?"":f,null);n0(i,$);const J=$.index;return vn($,!1),null!==x&&n!==x&&function PT(t,n){let i=t.insertBeforeIndex;null===i?(Cu(e0,t0),i=t.insertBeforeIndex=[null,n]):(function rr(t,n,i){t!=n&&yt(i,t,n,"==")}(Array.isArray(i),!0,"Expecting array here"),i.push(n))}(x,J),$}function WT(t,n,i,o,c,f,_){const I=_.match(tv),A=p0(t,n,i,f,o,I?null:_,!1);I&&g_(c,_,A.index,null,0,null)}function g_(t,n,i,o,c,f){const _=t.length,I=_+1;t.push(null,null);const A=_+2,x=n.split(tv);let $=0;for(let J=0;J<x.length;J++){const fe=x[J];if(1&J){const Te=c+parseInt(fe,10);t.push(-1-Te),$|=g0(Te)}else""!==fe&&t.push(fe)}return t.push(i<<2|(o?1:0)),o&&t.push(o,f),t[_]=$,t[I]=t.length-A,$}function g0(t){return 1<<Math.min(t,31)}function m0(t){let n,f,i="",o=0,c=!1;for(;null!==(n=jT.exec(t));)c?n[0]===`${p_}/*${f}${p_}`&&(o=n.index,c=!1):(i+=t.substring(o,n.index+n[0].length),f=n[1],c=!0);return i+=t.slice(o),i}function _0(t,n,i,o,c,f){let _=0;const I={type:c.type,currentCaseLViewIndex:Uh(t,n,1,null),anchorIdx:f,cases:[],create:[],remove:[],update:[]};(function eD(t,n,i){t.push(g0(n.mainBinding),2,-1-n.mainBinding,i<<2|2)})(i,c,f),function RT(t,n,i){const o=t.data[n];null===o?t.data[n]=i:o.value=i}(t,f,I);const A=c.values;for(let x=0;x<A.length;x++){const $=A[x],J=[];for(let fe=0;fe<$.length;fe++){const Te=$[fe];if("string"!=typeof Te){const rt=J.push(Te)-1;$[fe]=`\x3c!--\ufffd${rt}\ufffd--\x3e`}}_=JT(t,I,n,i,o,c.cases[x],$.join(""),J)|_}_&&function tD(t,n,i){t.push(n,1,i<<2|3)}(i,_,f)}function YT(t){const n=[],i=[];let o=1,c=0;const f=kE(t=t.replace(f0,function(_,I,A){return o="select"===A?0:1,c=parseInt(I.slice(1),10),""}));for(let _=0;_<f.length;){let I=f[_++].trim();1===o&&(I=I.replace(/\s*(?:=)?(\w+)\s*/,"$1")),I.length&&n.push(I);const A=kE(f[_++]);n.length>i.length&&i.push(A)}return{type:o,mainBinding:c,cases:n,values:i}}function kE(t){if(!t)return[];let n=0;const i=[],o=[],c=/[{}]/g;let f;for(c.lastIndex=0;f=c.exec(t);){const I=f.index;if("}"==f[0]){if(i.pop(),0==i.length){const A=t.substring(n,I);f0.test(A)?o.push(YT(A)):o.push(A),n=I+1}}else{if(0==i.length){const A=t.substring(n,I);o.push(A),n=I+1}i.push("{")}}const _=t.substring(n);return o.push(_),o}function JT(t,n,i,o,c,f,_,I){const A=[],x=[],$=[];n.cases.push(f),n.create.push(A),n.remove.push(x),n.update.push($);const fe=function Qf(t){const n=new Fg(t);return function Vg(){try{return!!(new window.DOMParser).parseFromString(vl(""),"text/html")}catch{return!1}}()?new _v(n):n}(pd()).getInertBodyElement(_),Te=function Gg(t){return"content"in t&&function Ev(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}(fe)||fe;return Te?y0(t,n,i,o,A,x,$,Te,c,I,0):0}function y0(t,n,i,o,c,f,_,I,A,x,$){let J=0,fe=I.firstChild;for(;fe;){const Te=Uh(t,i,1,null);switch(fe.nodeType){case Node.ELEMENT_NODE:const rt=fe,ht=rt.tagName.toLowerCase();if(Bg.hasOwnProperty(ht)){LE(c,Jy,ht,A,Te),t.data[Te]=ht;const Dn=rt.attributes;for(let jn=0;jn<Dn.length;jn++){const Ar=Dn.item(jn),Vo=Ar.name.toLowerCase();Ar.value.match(tv)?Jf.hasOwnProperty(Vo)&&g_(_,Ar.value,Te,Ar.name,0,jg[Vo]?wc:null):nD(c,Te,Ar)}J=y0(t,n,i,o,c,f,_,fe,Te,x,$+1)|J,v0(f,Te,$)}break;case Node.TEXT_NODE:const Mt=fe.textContent||"",Qt=Mt.match(tv);LE(c,null,Qt?"":Mt,A,Te),v0(f,Te,$),Qt&&(J=g_(_,Mt,Te,null,0,null)|J);break;case Node.COMMENT_NODE:const ct=BT.exec(fe.textContent||"");if(ct){const jn=x[parseInt(ct[1],10)];LE(c,Xy,"",A,Te),_0(t,i,o,A,jn,Te),XT(f,Te,$)}}fe=fe.nextSibling}return J}function v0(t,n,i){0===i&&t.push(n)}function XT(t,n,i){0===i&&(t.push(~n),t.push(n))}function LE(t,n,i,o,c){null!==n&&t.push(n),t.push(i,c,function xT(t,n,i){return t|n<<17|i<<1}(0,o,c))}function nD(t,n,i){t.push(n<<1|1,i.name,i.value)}function I0(t,n,i=-1){const o=_n(),c=ut(),f=jt+t,_=ms(o.consts,n),I=yn();o.firstCreatePass&&function GT(t,n,i,o,c,f){const _=yn(),I=[],A=[],x=[[]];c=function QT(t,n){if(function ZT(t){return-1===t}(n))return m0(t);{const i=t.indexOf(`:${n}${p_}`)+2+n.toString().length,o=t.search(new RegExp(`${p_}\\/\\*\\d+:${n}${p_}`));return m0(t.substring(i,o))}}(c,f);const $=function zT(t){return t.replace(HT," ")}(c).split($T);for(let J=0;J<$.length;J++){let fe=$[J];if(1&J){const Te=47===fe.charCodeAt(0),ht=(fe.charCodeAt(Te?1:0),jt+Number.parseInt(fe.substring(Te?2:1)));if(Te)x.shift(),vn(yn(),!1);else{const Mt=MT(t,x[0],ht);x.unshift([]),vn(Mt,!0)}}else{const Te=kE(fe);for(let rt=0;rt<Te.length;rt++){let ht=Te[rt];if(1&rt){const Mt=ht;if("object"!=typeof Mt)throw new Error(`Unable to parse ICU expression in "${c}" message.`);_0(t,i,A,n,Mt,p0(t,_,x[0],i,I,"",!0).index)}else""!==ht&&WT(t,_,x[0],I,A,i,ht)}}}t.data[o]={create:I,update:A}}(o,null===I?0:I.index,c,f,_,i),2===o.type?c[dn][an]|=32:c[an]|=32;const A=o.data[f],$=Pr(o,I===c[Fr]?null:I,c);(function kT(t,n,i,o){const c=t[en];for(let f=0;f<n.length;f++){const _=n[f++],I=n[f],x=(_&Lo.APPEND_EAGERLY)===Lo.APPEND_EAGERLY,$=_>>>Lo.SHIFT;let J=t[$];null===J&&(J=t[$]=(_&Lo.COMMENT)===Lo.COMMENT?c.createComment(I):_c(c,I)),x&&null!==i&&ri(c,i,J,o,!1)}})(c,A.create,$,I&&8&I.type?c[I.index]:null),v(!0)}function T0(t,n,i){I0(t,n,i),function w0(){v(!1)}()}function FE(t,n,i,o,c){if(t=Ke(t),Array.isArray(t))for(let f=0;f<t.length;f++)FE(t[f],n,i,o,c);else{const f=_n(),_=ut(),I=Rr();let A=Ac(t)?t:Ke(t.provide);const x=U_(t),$=1048575&I.providerIndexes,J=I.directiveStart,fe=I.providerIndexes>>20;if(Ac(t)||!t.multi){const Te=new Pa(x,c,yd),rt=UE(A,n,c?$:$+fe,J);-1===rt?(ec(Zc(I,_),f,A),VE(f,t,n.length),n.push(A),I.directiveStart++,I.directiveEnd++,c&&(I.providerIndexes+=1048576),i.push(Te),_.push(Te)):(i[rt]=Te,_[rt]=Te)}else{const Te=UE(A,n,$+fe,J),rt=UE(A,n,$,$+fe),Mt=rt>=0&&i[rt];if(c&&!Mt||!c&&!(Te>=0&&i[Te])){ec(Zc(I,_),f,A);const Qt=function yD(t,n,i,o,c){const f=new Pa(t,i,yd);return f.multi=[],f.index=n,f.componentProviders=0,A0(f,c,o&&!i),f}(c?_D:mD,i.length,c,o,x);!c&&Mt&&(i[rt].providerFactory=Qt),VE(f,t,n.length,0),n.push(A),I.directiveStart++,I.directiveEnd++,c&&(I.providerIndexes+=1048576),i.push(Qt),_.push(Qt)}else VE(f,t,Te>-1?Te:rt,A0(i[c?rt:Te],x,!c&&o));!c&&o&&Mt&&i[rt].componentProviders++}}}function VE(t,n,i,o){const c=Ac(n),f=function Jg(t){return!!t.useClass}(n);if(c||f){const A=(f?Ke(n.useClass):n).prototype.ngOnDestroy;if(A){const x=t.destroyHooks||(t.destroyHooks=[]);if(!c&&n.multi){const $=x.indexOf(i);-1===$?x.push(i,[o,A]):x[$+1].push(o,A)}else x.push(i,A)}}}function A0(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function UE(t,n,i,o){for(let c=i;c<o;c++)if(n[c]===t)return c;return-1}function mD(t,n,i,o){return BE(this.multi,[])}function _D(t,n,i,o){const c=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,I=hu(i,i[Dt],this.providerFactory.index,o);f=I.slice(0,_),BE(c,f);for(let A=_;A<I.length;A++)f.push(I[A])}else f=[],BE(c,f);return f}function BE(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function C0(t,n=[]){return i=>{i.providersResolver=(o,c)=>function gD(t,n,i){const o=_n();if(o.firstCreatePass){const c=Di(t);FE(i,o.data,o.blueprint,c,!0),FE(n,o.data,o.blueprint,c,!1)}}(o,c?c(t):t,n)}}class yf{}class S0{}function vD(t,n){return new jE(t,n??null,[])}class jE extends yf{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ey(this);const c=yi(n);this._bootstrapComponents=Mu(c.bootstrap),this._r3Injector=pm(n,i,[{provide:yf,useValue:this},{provide:hp,useValue:this.componentFactoryResolver},...o],ue(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class $E extends S0{constructor(n){super(),this.moduleType=n}create(n){return new jE(this.moduleType,n,[])}}class b0 extends yf{constructor(n){super(),this.componentFactoryResolver=new Ey(this),this.instance=null;const i=new Tl([...n.providers,{provide:yf,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],n.parent||ip(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function R0(t,n,i=null){return new b0({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let ID=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=ep(0,i.type),c=o.length>0?R0([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Gt({token:t,providedIn:"environment",factory:()=>new t(Et(za))})}return t})();function P0(t){t.getStandaloneInjector=n=>n.get(ID).getOrCreateStandaloneInjector(t)}function F0(t,n,i,o){return function B0(t,n,i,o,c,f){const _=n+i;return is(t,_,c)?Fi(t,_+1,f?o.call(f,c):o(c)):m_(t,_+1)}(ut(),fi(),t,n,i,o)}function V0(t,n,i,o,c){return function j0(t,n,i,o,c,f,_){const I=n+i;return ia(t,I,c,f)?Fi(t,I+2,_?o.call(_,c,f):o(c,f)):m_(t,I+2)}(ut(),fi(),t,n,i,o,c)}function U0(t,n,i,o,c,f){return function $0(t,n,i,o,c,f,_,I){const A=n+i;return function Fc(t,n,i,o,c){const f=ia(t,n,i,o);return is(t,n+2,c)||f}(t,A,c,f,_)?Fi(t,A+3,I?o.call(I,c,f,_):o(c,f,_)):m_(t,A+3)}(ut(),fi(),t,n,i,o,c,f)}function m_(t,n){const i=t[n];return i===Sn?void 0:i}function zD(){return this._results[Symbol.iterator]()}class zE{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Ru)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=zE.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=zD)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const c=function Ls(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function yu(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let c=t[o],f=n[o];if(i&&(c=i(c),f=i(f)),f!==c)return!1}return!0}(o._results,c,i))&&(o._results=c,o.length=c.length,o.last=c[this.length-1],o.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WD(t,n,i,o=!0){const c=n[Dt];if(function y(t,n,i,o){const c=Ir+o,f=i.length;o>0&&(i[c-1][Wr]=n),o<f-Ir?(n[Wr]=i[c],Jc(i,Ir+o,n)):(i.push(n),n[Wr]=null),n[$n]=i;const _=n[Ln];null!==_&&i!==_&&function M(t,n){const i=t[qr];n[dn]!==n[$n][$n][dn]&&(t[ar]=!0),null===i?t[qr]=[n]:i.push(n)}(_,n);const I=n[or];null!==I&&I.insertView(t),n[an]|=128}(c,n,t,i),o){const f=_h(i,t),_=n[en],I=Mo(_,t[ci]);null!==I&&function m(t,n,i,o,c,f){o[Yn]=c,o[Fr]=n,yh(t,o,i,1,c,f)}(c,t[Fr],_,n,I,f)}}let y_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZD}return t})();const qD=y_,KD=class extends qD{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const c=function GD(t,n,i,o){const c=n.tView,I=Tm(t,c,i,4096&t[an]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);I[Ln]=t[n.index];const x=t[or];return null!==x&&(I[or]=x.createEmbeddedView(c)),ku(c,I,i),I}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new $h(c)}};function ZD(){return nv(Rr(),ut())}function nv(t,n){return 4&t.type?new KD(n,t,Al(t,n)):null}let iv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tA}return t})();function tA(){return Y0(Rr(),ut())}const nA=iv,Z0=class extends nA{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new Oi(this._hostTNode,this._hostLView)}get parentInjector(){const n=du(this._hostTNode,this._hostLView);if(vs(n)){const i=Xu(n,this._hostLView),o=cu(n);return new Oi(i[Dt].data[o+8],i)}return new Oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Q0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Ir}createEmbeddedView(n,i,o){let c,f;"number"==typeof o?c=o:null!=o&&(c=o.index,f=o.injector);const I=n.createEmbeddedViewImpl(i||{},f,null);return this.insertImpl(I,c,false),I}createComponent(n,i,o,c,f){const _=n&&!function oc(t){return"function"==typeof t}(n);let I;if(_)I=i;else{const ht=i||{};I=ht.index,o=ht.injector,c=ht.projectableNodes,f=ht.environmentInjector||ht.ngModuleRef}const A=_?n:new Hh(hn(n)),x=o||this.parentInjector;if(!f&&null==A.ngModule){const Mt=(_?x:this.parentInjector).get(za,null);Mt&&(f=Mt)}hn(A.componentType??{});const Te=A.create(x,c,null,f);return this.insertImpl(Te.hostView,I,false),Te}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const c=n._lView;if(function Bl(t){return ur(t[$n])}(c)){const A=this.indexOf(n);if(-1!==A)this.detach(A);else{const x=c[$n],$=new Z0(x,x[Fr],x[$n]);$.detach($.indexOf(n))}}const _=this._adjustIndex(i),I=this._lContainer;return WD(I,c,_,!o),n.attachToViewContainerRef(),Jc(GE(I),_,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Q0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=ie(this._lContainer,i);o&&(Xs(GE(this._lContainer),i),ve(o[Dt],o))}detach(n){const i=this._adjustIndex(n,-1),o=ie(this._lContainer,i);return o&&null!=Xs(GE(this._lContainer),i)?new $h(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function Q0(t){return t[8]}function GE(t){return t[8]||(t[8]=[])}function Y0(t,n){let i;const o=n[t.index];return ur(o)?i=o:(i=Lc(o,n,null,t),n[t.index]=i,Li(n,i)),J0(i,n,t,o),new Z0(i,t,n)}let J0=function X0(t,n,i,o){if(t[ci])return;let c;c=8&i.type?cr(o):function rA(t,n){const i=t[en],o=i.createComment(""),c=ti(n,t);return ri(i,Mo(i,c),o,function xo(t,n){return t.nextSibling(n)}(i,c),!1),o}(n,i),t[ci]=c};class WE{constructor(n){this.queryList=n,this.matches=null}clone(){return new WE(this.queryList)}setDirty(){this.queryList.setDirty()}}class qE{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let f=0;f<o;f++){const _=i.getByIndex(f);c.push(this.queries[_.indexInDeclarationView].clone())}return new qE(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==uw(n,i).matches&&this.queries[i].setDirty()}}class ew{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class KE{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const c=null!==i?i.length:0,f=this.getByIndex(o).embeddedTView(n,c);f&&(f.indexInDeclarationView=o,null!==i?i.push(f):i=[f])}return null!==i?new KE(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class ZE{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new ZE(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let c=0;c<o.length;c++){const f=o[c];this.matchTNodeWithReadOption(n,i,oA(i,f)),this.matchTNodeWithReadOption(n,i,tc(i,n,f,!1,!1))}else o===y_?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,tc(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const c=this.metadata.read;if(null!==c)if(c===Pc||c===iv||c===y_&&4&i.type)this.addMatch(i.index,-2);else{const f=tc(i,n,c,!1,!1);null!==f&&this.addMatch(i.index,f)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function oA(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function uA(t,n,i,o){return-1===i?function aA(t,n){return 11&t.type?Al(t,n):4&t.type?nv(t,n):null}(n,t):-2===i?function cA(t,n,i){return i===Pc?Al(n,t):i===y_?nv(n,t):i===iv?Y0(n,t):void 0}(t,n,o):hu(t,t[Dt],i,n)}function tw(t,n,i,o){const c=n[or].queries[o];if(null===c.matches){const f=t.data,_=i.matches,I=[];for(let A=0;A<_.length;A+=2){const x=_[A];I.push(x<0?null:uA(n,f[x],_[A+1],i.metadata.read))}c.matches=I}return c.matches}function QE(t,n,i,o){const c=t.queries.getByIndex(i),f=c.matches;if(null!==f){const _=tw(t,n,c,i);for(let I=0;I<f.length;I+=2){const A=f[I];if(A>0)o.push(_[I/2]);else{const x=f[I+1],$=n[-A];for(let J=Ir;J<$.length;J++){const fe=$[J];fe[Ln]===fe[$n]&&QE(fe[Dt],fe,x,o)}if(null!==$[qr]){const J=$[qr];for(let fe=0;fe<J.length;fe++){const Te=J[fe];QE(Te[Dt],Te,x,o)}}}}}return o}function nw(t){const n=ut(),i=_n(),o=Ve();xe(o+1);const c=uw(i,o);if(t.dirty&&function Ud(t){return 4==(4&t[an])}(n)===(2==(2&c.metadata.flags))){if(null===c.matches)t.reset([]);else{const f=c.crossesNgTemplate?QE(i,n,o,[]):tw(i,n,c,o);t.reset(f,Uv),t.notifyOnChanges()}return!0}return!1}function rw(t,n,i){const o=_n();o.firstCreatePass&&(aw(o,new ew(t,n,i),-1),2==(2&n)&&(o.staticViewQueries=!0)),ow(o,ut(),n)}function iw(t,n,i,o){const c=_n();if(c.firstCreatePass){const f=Rr();aw(c,new ew(n,i,o),f.index),function dA(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(c,t),2==(2&i)&&(c.staticContentQueries=!0)}ow(c,ut(),i)}function sw(){return function lA(t,n){return t[or].queries[n].queryList}(ut(),Ve())}function ow(t,n,i){const o=new zE(4==(4&i));(function NI(t,n,i,o){const c=Ed(n);c.push(i),t.firstCreatePass&&Id(t).push(o,c.length-1)})(t,n,o,o.destroy),null===n[or]&&(n[or]=new qE),n[or].queries.push(new WE(o))}function aw(t,n,i){null===t.queries&&(t.queries=new KE),t.queries.track(new ZE(n,i))}function uw(t,n){return t.queries.getByIndex(n)}function cw(t,n){return nv(t,n)}function YE(t){return!!yi(t)}const Cw=new be("Application Initializer");let nI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=ft(Cw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const f=c();if(jp(f))i.push(f);else if(qm(f)){const _=new Promise((I,A)=>{f.subscribe({complete:I,error:A})});i.push(_)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(c=>{this.reject(c)}),0===i.length&&o(),this.initialized=!0}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sw=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const ov=new be("LocaleId",{providedIn:"root",factory:()=>ft(ov,Kt.Optional|Kt.SkipSelf)||function xA(){return typeof $localize<"u"&&$localize.locale||ng}()}),NA=new be("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let bw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new he.X(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kA{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let LA=(()=>{class t{compileModuleSync(i){return new $E(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),f=Mu(yi(i).declarations).reduce((_,I)=>{const A=hn(I);return A&&_.push(new Hh(A)),_},[]);return new kA(o,f)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const xw=new be(""),Nw=new be("");let sI,iC=(()=>{class t{constructor(i,o,c){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sI||(function sC(t){sI=t}(c),c.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ii.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,c){let f=-1;o&&o>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:f,updateCb:c})}whenStable(i,o,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,c){return[]}static#e=this.\u0275fac=function(o){return new(o||t)(Et(ii),Et(Ow),Et(Nw))};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac})}return t})(),Ow=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return sI?.findTestabilityInTree(this,i,o)??null}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Fd=null;const kw=new be("AllowMultipleToken"),oI=new be("PlatformDestroyListeners"),aI=new be("appBootstrapListener");class uC{constructor(n,i){this.name=n,this.token=i}}function Vw(t,n,i=[]){const o=`Platform: ${n}`,c=new be(o);return(f=[])=>{let _=uI();if(!_||_.injector.get(kw,!1)){const I=[...i,...f,{provide:c,useValue:!0}];t?t(I):function cC(t){if(Fd&&!Fd.get(kw,!1))throw new ge(400,!1);(function Lw(){!function Ks(t){Wu=t}(()=>{throw new ge(600,!1)})})(),Fd=t;const n=t.get(Bw);(function Fw(t){t.get(sp,null)?.forEach(i=>i())})(t)}(function Uw(t=[],n){return ws.create({name:n,providers:[{provide:rp,useValue:"platform"},{provide:oI,useValue:new Set([()=>Fd=null])},...t]})}(I,o))}return function dC(t){const n=uI();if(!n)throw new ge(401,!1);return n}()}}function uI(){return Fd?.get(Bw)??null}let Bw=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const c=function hC(t="zone.js",n){return"noop"===t?new Gv:"zone.js"===t?new ii(n):t}(o?.ngZone,function jw(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return c.run(()=>{const f=function ED(t,n,i){return new jE(t,n,i)}(i.moduleType,this.injector,function Ww(t){return[{provide:ii,useFactory:t},{provide:Th,multi:!0,useFactory:()=>{const n=ft(pC,{optional:!0});return()=>n.initialize()}},{provide:Gw,useFactory:fC},{provide:vm,useFactory:Em}]}(()=>c)),_=f.injector.get(qa,null);return c.runOutsideAngular(()=>{const I=c.onError.subscribe({next:A=>{_.handleError(A)}});f.onDestroy(()=>{uv(this._modules,f),I.unsubscribe()})}),function $w(t,n,i){try{const o=i();return jp(o)?o.catch(c=>{throw n.runOutsideAngular(()=>t.handleError(c)),c}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(_,c,()=>{const I=f.injector.get(nI);return I.runInitializers(),I.donePromise.then(()=>(XI(f.injector.get(ov,ng)||ng),this._moduleDoBootstrap(f),f))})})}bootstrapModule(i,o=[]){const c=Hw({},o);return function oC(t,n,i){const o=new $E(i);return Promise.resolve(o)}(0,0,i).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(i){const o=i.injector.get(sg);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>o.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new ge(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(oI,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(o){return new(o||t)(Et(ws))};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Hw(t,n){return Array.isArray(n)?n.reduce(Hw,t):{...t,...n}}let sg=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ft(Gw),this.zoneIsStable=ft(vm),this.componentTypes=[],this.components=[],this.isStable=ft(bw).hasPendingTasks.pipe((0,Ne.w)(i=>i?(0,ae.of)(!1):this.zoneIsStable),(0,De.x)(),(0,me.B)()),this._injector=ft(za)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const c=i instanceof Wa;if(!this._injector.get(nI).done)throw!c&&ds(i),new ge(405,!1);let _;_=c?i:this._injector.get(hp).resolveComponentFactory(i),this.componentTypes.push(_.componentType);const I=function aC(t){return t.isBoundToModule}(_)?void 0:this._injector.get(yf),x=_.create(ws.NULL,[],o||_.selector,I),$=x.location.nativeElement,J=x.injector.get(xw,null);return J?.registerApplication($),x.onDestroy(()=>{this.detachView(x.hostView),uv(this.components,x),J?.unregisterApplication($)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;uv(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(aI,[]);o.push(...this._bootstrapListeners),o.forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>uv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ge(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uv(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const Gw=new be("",{providedIn:"root",factory:()=>ft(qa).handleError.bind(void 0)});function fC(){const t=ft(ii),n=ft(qa);return i=>t.runOutsideAngular(()=>n.handleError(i))}let pC=(()=>{class t{constructor(){this.zone=ft(ii),this.applicationRef=ft(sg)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mC(){return!1}let _C=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yC}return t})();function yC(t){return function vC(t,n,i){if(wi(t)&&!i){const o=ni(t.index,n);return new $h(o,o)}return 47&t.type?new $h(n[dn],n):null}(Rr(),ut(),16==(16&t))}class Qw{constructor(){}supports(n){return de(n)}create(n){return new AC(n)}}const DC=(t,n)=>n;class AC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||DC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,c=0,f=null;for(;i||o;){const _=!o||i&&i.currentIndex<Jw(o,c,f)?i:o,I=Jw(_,c,f),A=_.currentIndex;if(_===o)c--,o=o._nextRemoved;else if(i=i._next,null==_.previousIndex)c++;else{f||(f=[]);const x=I-c,$=A-c;if(x!=$){for(let fe=0;fe<x;fe++){const Te=fe<f.length?f[fe]:f[fe]=0,rt=Te+fe;$<=rt&&rt<x&&(f[fe]=Te+1)}f[_.previousIndex]=$-x}}I!==A&&n(_,I,A)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!de(n))throw new ge(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,f,_,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let I=0;I<this.length;I++)f=n[I],_=this._trackByFn(I,f),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,f,_,I)),Object.is(i.item,f)||this._addIdentityChange(i,f)):(i=this._mismatch(i,f,_,I),o=!0),i=i._next}else c=0,function Ce(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,I=>{_=this._trackByFn(c,I),null!==i&&Object.is(i.trackById,_)?(o&&(i=this._verifyReinsertion(i,I,_,c)),Object.is(i.item,I)||this._addIdentityChange(i,I)):(i=this._mismatch(i,I,_,c),o=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,c){let f;return null===n?f=this._itTail:(f=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,f,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,f,c)):n=this._addAfter(new CC(i,o),f,c),n}_verifyReinsertion(n,i,o,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==f?n=this._reinsertAfter(f,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,f=n._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new Yw),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yw),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class CC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class Yw{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new SC,this.map.set(i,o)),o.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jw(t,n,i){const o=t.previousIndex;if(null===o)return o;let c=0;return i&&o<i.length&&(c=i[o]),o+n+c}class Xw{constructor(){}supports(n){return n instanceof Map||ke(n)}create(){return new bC}}class bC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||ke(n)))throw new ge(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const f=this._getOrCreateRecordForKey(c,o);i=this._insertBeforeOrAppend(i,f)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const f=c._prev,_=c._next;return f&&(f._next=_),_&&(_._prev=f),c._next=null,c._prev=null,c}const o=new RC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class RC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eT(){return new fI([new Qw])}let fI=(()=>{class t{static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:eT});constructor(i){this.factories=i}static create(i,o){if(null!=o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||eT()),deps:[[t,new Vr,new rh]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(null!=o)return o;throw new ge(901,!1)}}return t})();function tT(){return new pI([new Xw])}let pI=(()=>{class t{static#e=this.\u0275prov=Gt({token:t,providedIn:"root",factory:tT});constructor(i){this.factories=i}static create(i,o){if(o){const c=o.factories.slice();i=i.concat(c)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||tT()),deps:[[t,new Vr,new rh]]}}find(i){const o=this.factories.find(c=>c.supports(i));if(o)return o;throw new ge(901,!1)}}return t})();const xC=Vw(null,"core",[]);let NC=(()=>{class t{constructor(i){}static#e=this.\u0275fac=function(o){return new(o||t)(Et(sg))};static#t=this.\u0275mod=jo({type:t});static#n=this.\u0275inj=gn({})}return t})();function zC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WC(t,n){const i=hn(t),o=n.elementInjector||ip();return new Hh(i).create(o,n.projectableNodes,n.hostElement,n.environmentInjector)}function qC(t){const n=hn(t);if(!n)return null;const i=new Hh(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},891:(St,Pe,F)=>{F.d(Pe,{ST:()=>Hh});var E=F(6814),Y=F(5879),Q=F(8326),Z=F(7217),ae=(F(4325),F(8645)),me=F(2096),Ne=F(5592),De=F(2459),X=F(3019),re=F(3093),ue=F(4664),Ue=F(7398),Be=F(4552);class Xe extends ae.x{constructor(e=1/0,r=1/0,s=Be.l){super(),this._bufferSize=e,this._windowTime=r,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=r===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,r)}next(e){const{isStopped:r,_buffer:s,_infiniteTimeWindow:u,_timestampProvider:h,_windowTime:g}=this;r||(s.push(e),!u&&s.push(h.now()+g)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const r=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:u}=this,h=u.slice();for(let g=0;g<h.length&&!e.closed;g+=s?1:2)e.next(h[g]);return this._checkFinalizedStatuses(e),r}_trimBuffer(){const{_bufferSize:e,_timestampProvider:r,_buffer:s,_infiniteTimeWindow:u}=this,h=(u?1:2)*e;if(e<1/0&&h<s.length&&s.splice(0,s.length-h),!u){const g=r.now();let T=0;for(let b=1;b<s.length&&s[b]<=g;b+=2)T=b;T&&s.splice(0,T+1)}}}var Ke=F(3020);function Ge(a,e,r){let s,u=!1;return a&&"object"==typeof a?({bufferSize:s=1/0,windowTime:e=1/0,refCount:u=!1,scheduler:r}=a):s=a??1/0,(0,Ke.B)({connector:()=>new Xe(s,e,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}var st=F(1374),It=F(4674);function _t(a,e){return(0,It.m)(e)?(0,ue.w)(()=>a,e):(0,ue.w)(()=>a)}var ge=F(5137),ze=F(2181);F(7142);const Ze=new Y.OlP("angularfire2.auth.use-emulator"),dt=new Y.OlP("angularfire2.auth.settings"),Pt=new Y.OlP("angularfire2.auth.tenant-id"),Oe=new Y.OlP("angularfire2.auth.langugage-code"),Xt=new Y.OlP("angularfire2.auth.use-device-language"),Zn=new Y.OlP("angularfire.auth.persistence"),On=(a,e,r,s,u,h,g,T)=>(0,Z.cc)(`${a.name}.auth`,"AngularFireAuth",a.name,()=>{const b=e.runOutsideAngular(()=>a.auth());if(r&&b.useEmulator(...r),s&&(b.tenantId=s),b.languageCode=u,h&&b.useDeviceLanguage(),g)for(const[O,H]of Object.entries(g))b.settings[O]=H;return T&&b.setPersistence(T),b},[r,s,u,h,g,T]);let _r=(()=>{class a{authState;idToken;user;idTokenResult;credential;constructor(r,s,u,h,g,T,b,O,H,K,oe,Re){const it=new ae.x,lt=(0,me.of)(void 0).pipe((0,re.Q)(g.outsideAngular),(0,ue.w)(()=>h.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,4325)))),(0,Ue.U)(()=>(0,Z.on)(r,h,s)),(0,Ue.U)(at=>On(at,h,T,O,H,K,b,oe)),Ge({bufferSize:1,refCount:!1}));if((0,E.PM)(u))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,me.of)(null);else{lt.pipe((0,st.P)()).subscribe();const at=lt.pipe((0,ue.w)(wt=>wt.getRedirectResult().then(qt=>qt,()=>null)),Q.iC,Ge({bufferSize:1,refCount:!1})),Vt=lt.pipe((0,ue.w)(wt=>new Ne.y(qt=>({unsubscribe:h.runOutsideAngular(()=>wt.onAuthStateChanged(Tn=>qt.next(Tn),Tn=>qt.error(Tn),()=>qt.complete()))})))),zt=lt.pipe((0,ue.w)(wt=>new Ne.y(qt=>({unsubscribe:h.runOutsideAngular(()=>wt.onIdTokenChanged(Tn=>qt.next(Tn),Tn=>qt.error(Tn),()=>qt.complete()))}))));this.authState=at.pipe(_t(Vt),(0,ge.R)(g.outsideAngular),(0,re.Q)(g.insideAngular)),this.user=at.pipe(_t(zt),(0,ge.R)(g.outsideAngular),(0,re.Q)(g.insideAngular)),this.idToken=this.user.pipe((0,ue.w)(wt=>wt?(0,De.D)(wt.getIdToken()):(0,me.of)(null))),this.idTokenResult=this.user.pipe((0,ue.w)(wt=>wt?(0,De.D)(wt.getIdTokenResult()):(0,me.of)(null))),this.credential=(0,X.T)(at,it,this.authState.pipe((0,ze.h)(wt=>!wt))).pipe((0,Ue.U)(wt=>wt?.user?wt:null),(0,ge.R)(g.outsideAngular),(0,re.Q)(g.insideAngular))}return(0,Z.pX)(this,lt,h,{spy:{apply:(at,Vt,zt)=>{(at.startsWith("signIn")||at.startsWith("createUser"))&&zt.then(wt=>it.next(wt))}}})}static \u0275fac=function(s){return new(s||a)(Y.LFG(Z.Dh),Y.LFG(Z.xv,8),Y.LFG(Y.Lbi),Y.LFG(Y.R0b),Y.LFG(Q.HU),Y.LFG(Ze,8),Y.LFG(dt,8),Y.LFG(Pt,8),Y.LFG(Oe,8),Y.LFG(Xt,8),Y.LFG(Zn,8),Y.LFG(Q.Rf,8))};static \u0275prov=Y.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})();var Yt=F(6321),sn=F(7921),_e=F(9360),Ae=F(8251);function $e(){return(0,_e.e)((a,e)=>{let r,s=!1;a.subscribe((0,Ae.x)(e,u=>{const h=r;r=u,s&&e.next([h,u]),s=!0}))})}var gn,Fn,He=F(6699),ot=F(3997),Qe=F(3106),ce=F(5861),yt=F(534),Lt=F(4537),kt=F(7879),Nt=F(9058),Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mi={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(ye,se,de){de||(de=0);var Ie=Array(16);if("string"==typeof se)for(var Ce=0;16>Ce;++Ce)Ie[Ce]=se.charCodeAt(de++)|se.charCodeAt(de++)<<8|se.charCodeAt(de++)<<16|se.charCodeAt(de++)<<24;else for(Ce=0;16>Ce;++Ce)Ie[Ce]=se[de++]|se[de++]<<8|se[de++]<<16|se[de++]<<24;var ke=ye.g[3],le=(se=ye.g[0])+(ke^(de=ye.g[1])&((Ce=ye.g[2])^ke))+Ie[0]+3614090360&4294967295;le=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=(de=(Ce=(ke=(se=de+(le<<7&4294967295|le>>>25))+((le=ke+(Ce^se&(de^Ce))+Ie[1]+3905402710&4294967295)<<12&4294967295|le>>>20))+((le=Ce+(de^ke&(se^de))+Ie[2]+606105819&4294967295)<<17&4294967295|le>>>15))+((le=de+(se^Ce&(ke^se))+Ie[3]+3250441966&4294967295)<<22&4294967295|le>>>10))+((le=se+(ke^de&(Ce^ke))+Ie[4]+4118548399&4294967295)<<7&4294967295|le>>>25))+((le=ke+(Ce^se&(de^Ce))+Ie[5]+1200080426&4294967295)<<12&4294967295|le>>>20))+((le=Ce+(de^ke&(se^de))+Ie[6]+2821735955&4294967295)<<17&4294967295|le>>>15))+((le=de+(se^Ce&(ke^se))+Ie[7]+4249261313&4294967295)<<22&4294967295|le>>>10))+((le=se+(ke^de&(Ce^ke))+Ie[8]+1770035416&4294967295)<<7&4294967295|le>>>25))+((le=ke+(Ce^se&(de^Ce))+Ie[9]+2336552879&4294967295)<<12&4294967295|le>>>20))+((le=Ce+(de^ke&(se^de))+Ie[10]+4294925233&4294967295)<<17&4294967295|le>>>15))+((le=de+(se^Ce&(ke^se))+Ie[11]+2304563134&4294967295)<<22&4294967295|le>>>10))+((le=se+(ke^de&(Ce^ke))+Ie[12]+1804603682&4294967295)<<7&4294967295|le>>>25))+((le=ke+(Ce^se&(de^Ce))+Ie[13]+4254626195&4294967295)<<12&4294967295|le>>>20))+((le=Ce+(de^ke&(se^de))+Ie[14]+2792965006&4294967295)<<17&4294967295|le>>>15))+((le=de+(se^Ce&(ke^se))+Ie[15]+1236535329&4294967295)<<22&4294967295|le>>>10))+((le=se+(Ce^ke&(de^Ce))+Ie[1]+4129170786&4294967295)<<5&4294967295|le>>>27))+((le=ke+(de^Ce&(se^de))+Ie[6]+3225465664&4294967295)<<9&4294967295|le>>>23))+((le=Ce+(se^de&(ke^se))+Ie[11]+643717713&4294967295)<<14&4294967295|le>>>18))+((le=de+(ke^se&(Ce^ke))+Ie[0]+3921069994&4294967295)<<20&4294967295|le>>>12))+((le=se+(Ce^ke&(de^Ce))+Ie[5]+3593408605&4294967295)<<5&4294967295|le>>>27))+((le=ke+(de^Ce&(se^de))+Ie[10]+38016083&4294967295)<<9&4294967295|le>>>23))+((le=Ce+(se^de&(ke^se))+Ie[15]+3634488961&4294967295)<<14&4294967295|le>>>18))+((le=de+(ke^se&(Ce^ke))+Ie[4]+3889429448&4294967295)<<20&4294967295|le>>>12))+((le=se+(Ce^ke&(de^Ce))+Ie[9]+568446438&4294967295)<<5&4294967295|le>>>27))+((le=ke+(de^Ce&(se^de))+Ie[14]+3275163606&4294967295)<<9&4294967295|le>>>23))+((le=Ce+(se^de&(ke^se))+Ie[3]+4107603335&4294967295)<<14&4294967295|le>>>18))+((le=de+(ke^se&(Ce^ke))+Ie[8]+1163531501&4294967295)<<20&4294967295|le>>>12))+((le=se+(Ce^ke&(de^Ce))+Ie[13]+2850285829&4294967295)<<5&4294967295|le>>>27))+((le=ke+(de^Ce&(se^de))+Ie[2]+4243563512&4294967295)<<9&4294967295|le>>>23))+((le=Ce+(se^de&(ke^se))+Ie[7]+1735328473&4294967295)<<14&4294967295|le>>>18))+((le=de+(ke^se&(Ce^ke))+Ie[12]+2368359562&4294967295)<<20&4294967295|le>>>12))+((le=se+(de^Ce^ke)+Ie[5]+4294588738&4294967295)<<4&4294967295|le>>>28))+((le=ke+(se^de^Ce)+Ie[8]+2272392833&4294967295)<<11&4294967295|le>>>21))+((le=Ce+(ke^se^de)+Ie[11]+1839030562&4294967295)<<16&4294967295|le>>>16))+((le=de+(Ce^ke^se)+Ie[14]+4259657740&4294967295)<<23&4294967295|le>>>9))+((le=se+(de^Ce^ke)+Ie[1]+2763975236&4294967295)<<4&4294967295|le>>>28))+((le=ke+(se^de^Ce)+Ie[4]+1272893353&4294967295)<<11&4294967295|le>>>21))+((le=Ce+(ke^se^de)+Ie[7]+4139469664&4294967295)<<16&4294967295|le>>>16))+((le=de+(Ce^ke^se)+Ie[10]+3200236656&4294967295)<<23&4294967295|le>>>9))+((le=se+(de^Ce^ke)+Ie[13]+681279174&4294967295)<<4&4294967295|le>>>28))+((le=ke+(se^de^Ce)+Ie[0]+3936430074&4294967295)<<11&4294967295|le>>>21))+((le=Ce+(ke^se^de)+Ie[3]+3572445317&4294967295)<<16&4294967295|le>>>16))+((le=de+(Ce^ke^se)+Ie[6]+76029189&4294967295)<<23&4294967295|le>>>9))+((le=se+(de^Ce^ke)+Ie[9]+3654602809&4294967295)<<4&4294967295|le>>>28))+((le=ke+(se^de^Ce)+Ie[12]+3873151461&4294967295)<<11&4294967295|le>>>21))+((le=Ce+(ke^se^de)+Ie[15]+530742520&4294967295)<<16&4294967295|le>>>16))+((le=de+(Ce^ke^se)+Ie[2]+3299628645&4294967295)<<23&4294967295|le>>>9))+((le=se+(Ce^(de|~ke))+Ie[0]+4096336452&4294967295)<<6&4294967295|le>>>26))+((le=ke+(de^(se|~Ce))+Ie[7]+1126891415&4294967295)<<10&4294967295|le>>>22))+((le=Ce+(se^(ke|~de))+Ie[14]+2878612391&4294967295)<<15&4294967295|le>>>17))+((le=de+(ke^(Ce|~se))+Ie[5]+4237533241&4294967295)<<21&4294967295|le>>>11))+((le=se+(Ce^(de|~ke))+Ie[12]+1700485571&4294967295)<<6&4294967295|le>>>26))+((le=ke+(de^(se|~Ce))+Ie[3]+2399980690&4294967295)<<10&4294967295|le>>>22))+((le=Ce+(se^(ke|~de))+Ie[10]+4293915773&4294967295)<<15&4294967295|le>>>17))+((le=de+(ke^(Ce|~se))+Ie[1]+2240044497&4294967295)<<21&4294967295|le>>>11))+((le=se+(Ce^(de|~ke))+Ie[8]+1873313359&4294967295)<<6&4294967295|le>>>26))+((le=ke+(de^(se|~Ce))+Ie[15]+4264355552&4294967295)<<10&4294967295|le>>>22))+((le=Ce+(se^(ke|~de))+Ie[6]+2734768916&4294967295)<<15&4294967295|le>>>17))+((le=de+(ke^(Ce|~se))+Ie[13]+1309151649&4294967295)<<21&4294967295|le>>>11))+((ke=(se=de+((le=se+(Ce^(de|~ke))+Ie[4]+4149444226&4294967295)<<6&4294967295|le>>>26))+((le=ke+(de^(se|~Ce))+Ie[11]+3174756917&4294967295)<<10&4294967295|le>>>22))^((Ce=ke+((le=Ce+(se^(ke|~de))+Ie[2]+718787259&4294967295)<<15&4294967295|le>>>17))|~se))+Ie[9]+3951481745&4294967295,ye.g[0]=ye.g[0]+se&4294967295,ye.g[1]=ye.g[1]+(Ce+(le<<21&4294967295|le>>>11))&4294967295,ye.g[2]=ye.g[2]+Ce&4294967295,ye.g[3]=ye.g[3]+ke&4294967295}function g(ye,se){this.h=se;for(var de=[],Ie=!0,Ce=ye.length-1;0<=Ce;Ce--){var ke=0|ye[Ce];Ie&&ke==se||(de[Ce]=ke,Ie=!1)}this.g=de}(function e(ye,se){function de(){}de.prototype=se.prototype,ye.D=se.prototype,ye.prototype=new de,ye.prototype.constructor=ye,ye.C=function(Ie,Ce,ke){for(var le=Array(arguments.length-2),Fi=2;Fi<arguments.length;Fi++)le[Fi-2]=arguments[Fi];return se.prototype[Ce].apply(Ie,le)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(ye,se){void 0===se&&(se=ye.length);for(var de=se-this.blockSize,Ie=this.B,Ce=this.h,ke=0;ke<se;){if(0==Ce)for(;ke<=de;)u(this,ye,ke),ke+=this.blockSize;if("string"==typeof ye){for(;ke<se;)if(Ie[Ce++]=ye.charCodeAt(ke++),Ce==this.blockSize){u(this,Ie),Ce=0;break}}else for(;ke<se;)if(Ie[Ce++]=ye[ke++],Ce==this.blockSize){u(this,Ie),Ce=0;break}}this.h=Ce,this.o+=se},s.prototype.v=function(){var ye=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ye[0]=128;for(var se=1;se<ye.length-8;++se)ye[se]=0;var de=8*this.o;for(se=ye.length-8;se<ye.length;++se)ye[se]=255&de,de/=256;for(this.u(ye),ye=Array(16),se=de=0;4>se;++se)for(var Ie=0;32>Ie;Ie+=8)ye[de++]=this.g[se]>>>Ie&255;return ye};var T={};function b(ye){return-128<=ye&&128>ye?function h(ye,se){var de=T;return Object.prototype.hasOwnProperty.call(de,ye)?de[ye]:de[ye]=se(ye)}(ye,function(se){return new g([0|se],0>se?-1:0)}):new g([0|ye],0>ye?-1:0)}function O(ye){if(isNaN(ye)||!isFinite(ye))return K;if(0>ye)return at(O(-ye));for(var se=[],de=1,Ie=0;ye>=de;Ie++)se[Ie]=ye/de|0,de*=4294967296;return new g(se,0)}var K=b(0),oe=b(1),Re=b(16777216);function it(ye){if(0!=ye.h)return!1;for(var se=0;se<ye.g.length;se++)if(0!=ye.g[se])return!1;return!0}function lt(ye){return-1==ye.h}function at(ye){for(var se=ye.g.length,de=[],Ie=0;Ie<se;Ie++)de[Ie]=~ye.g[Ie];return new g(de,~ye.h).add(oe)}function Vt(ye,se){return ye.add(at(se))}function zt(ye,se){for(;(65535&ye[se])!=ye[se];)ye[se+1]+=ye[se]>>>16,ye[se]&=65535,se++}function wt(ye,se){this.g=ye,this.h=se}function qt(ye,se){if(it(se))throw Error("division by zero");if(it(ye))return new wt(K,K);if(lt(ye))return se=qt(at(ye),se),new wt(at(se.g),at(se.h));if(lt(se))return se=qt(ye,at(se)),new wt(at(se.g),se.h);if(30<ye.g.length){if(lt(ye)||lt(se))throw Error("slowDivide_ only works with positive integers.");for(var de=oe,Ie=se;0>=Ie.l(ye);)de=Tn(de),Ie=Tn(Ie);var Ce=Mn(de,1),ke=Mn(Ie,1);for(Ie=Mn(Ie,2),de=Mn(de,2);!it(Ie);){var le=ke.add(Ie);0>=le.l(ye)&&(Ce=Ce.add(de),ke=le),Ie=Mn(Ie,1),de=Mn(de,1)}return se=Vt(ye,Ce.j(se)),new wt(Ce,se)}for(Ce=K;0<=ye.l(se);){for(de=Math.max(1,Math.floor(ye.m()/se.m())),Ie=48>=(Ie=Math.ceil(Math.log(de)/Math.LN2))?1:Math.pow(2,Ie-48),le=(ke=O(de)).j(se);lt(le)||0<le.l(ye);)le=(ke=O(de-=Ie)).j(se);it(ke)&&(ke=oe),Ce=Ce.add(ke),ye=Vt(ye,le)}return new wt(Ce,ye)}function Tn(ye){for(var se=ye.g.length+1,de=[],Ie=0;Ie<se;Ie++)de[Ie]=ye.i(Ie)<<1|ye.i(Ie-1)>>>31;return new g(de,ye.h)}function Mn(ye,se){var de=se>>5;se%=32;for(var Ie=ye.g.length-de,Ce=[],ke=0;ke<Ie;ke++)Ce[ke]=0<se?ye.i(ke+de)>>>se|ye.i(ke+de+1)<<32-se:ye.i(ke+de);return new g(Ce,ye.h)}(a=g.prototype).m=function(){if(lt(this))return-at(this).m();for(var ye=0,se=1,de=0;de<this.g.length;de++){var Ie=this.i(de);ye+=(0<=Ie?Ie:4294967296+Ie)*se,se*=4294967296}return ye},a.toString=function(ye){if(2>(ye=ye||10)||36<ye)throw Error("radix out of range: "+ye);if(it(this))return"0";if(lt(this))return"-"+at(this).toString(ye);for(var se=O(Math.pow(ye,6)),de=this,Ie="";;){var Ce=qt(de,se).g,ke=((0<(de=Vt(de,Ce.j(se))).g.length?de.g[0]:de.h)>>>0).toString(ye);if(it(de=Ce))return ke+Ie;for(;6>ke.length;)ke="0"+ke;Ie=ke+Ie}},a.i=function(ye){return 0>ye?0:ye<this.g.length?this.g[ye]:this.h},a.l=function(ye){return lt(ye=Vt(this,ye))?-1:it(ye)?0:1},a.abs=function(){return lt(this)?at(this):this},a.add=function(ye){for(var se=Math.max(this.g.length,ye.g.length),de=[],Ie=0,Ce=0;Ce<=se;Ce++){var ke=Ie+(65535&this.i(Ce))+(65535&ye.i(Ce)),le=(ke>>>16)+(this.i(Ce)>>>16)+(ye.i(Ce)>>>16);Ie=le>>>16,de[Ce]=(le&=65535)<<16|(ke&=65535)}return new g(de,-2147483648&de[de.length-1]?-1:0)},a.j=function(ye){if(it(this)||it(ye))return K;if(lt(this))return lt(ye)?at(this).j(at(ye)):at(at(this).j(ye));if(lt(ye))return at(this.j(at(ye)));if(0>this.l(Re)&&0>ye.l(Re))return O(this.m()*ye.m());for(var se=this.g.length+ye.g.length,de=[],Ie=0;Ie<2*se;Ie++)de[Ie]=0;for(Ie=0;Ie<this.g.length;Ie++)for(var Ce=0;Ce<ye.g.length;Ce++){var ke=this.i(Ie)>>>16,le=65535&this.i(Ie),Fi=ye.i(Ce)>>>16,Lu=65535&ye.i(Ce);de[2*Ie+2*Ce]+=le*Lu,zt(de,2*Ie+2*Ce),de[2*Ie+2*Ce+1]+=ke*Lu,zt(de,2*Ie+2*Ce+1),de[2*Ie+2*Ce+1]+=le*Fi,zt(de,2*Ie+2*Ce+1),de[2*Ie+2*Ce+2]+=ke*Fi,zt(de,2*Ie+2*Ce+2)}for(Ie=0;Ie<se;Ie++)de[Ie]=de[2*Ie+1]<<16|de[2*Ie];for(Ie=se;Ie<2*se;Ie++)de[Ie]=0;return new g(de,0)},a.A=function(ye){return qt(this,ye).h},a.and=function(ye){for(var se=Math.max(this.g.length,ye.g.length),de=[],Ie=0;Ie<se;Ie++)de[Ie]=this.i(Ie)&ye.i(Ie);return new g(de,this.h&ye.h)},a.or=function(ye){for(var se=Math.max(this.g.length,ye.g.length),de=[],Ie=0;Ie<se;Ie++)de[Ie]=this.i(Ie)|ye.i(Ie);return new g(de,this.h|ye.h)},a.xor=function(ye){for(var se=Math.max(this.g.length,ye.g.length),de=[],Ie=0;Ie<se;Ie++)de[Ie]=this.i(Ie)^ye.i(Ie);return new g(de,this.h^ye.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Fn=mi.Md5=s,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=O,g.fromString=function H(ye,se){if(0==ye.length)throw Error("number format error: empty string");if(2>(se=se||10)||36<se)throw Error("radix out of range: "+se);if("-"==ye.charAt(0))return at(H(ye.substring(1),se));if(0<=ye.indexOf("-"))throw Error('number format error: interior "-" character');for(var de=O(Math.pow(se,8)),Ie=K,Ce=0;Ce<ye.length;Ce+=8){var ke=Math.min(8,ye.length-Ce),le=parseInt(ye.substring(Ce,Ce+ke),se);8>ke?(ke=O(Math.pow(se,ke)),Ie=Ie.j(ke).add(O(le))):Ie=(Ie=Ie.j(de)).add(O(le))}return Ie},gn=mi.Integer=g}).apply(typeof Gt<"u"?Gt:typeof self<"u"?self:typeof window<"u"?window:{});var hr,Ui,oi,Yr,Nr,Or,Kt,nn,fn,bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wn={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,R,k){return p==Array.prototype||p==Object.prototype||(p[R]=k.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof bn&&bn];for(var R=0;R<p.length;++R){var k=p[R];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}(this);!function u(p,R){if(R)e:{var k=s;p=p.split(".");for(var W=0;W<p.length-1;W++){var Se=p[W];if(!(Se in k))break e;k=k[Se]}(R=R(W=k[p=p[p.length-1]]))!=W&&null!=R&&e(k,p,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(p){return p||function(){return function h(p,R){p instanceof String&&(p+="");var k=0,W=!1,Se={next:function(){if(!W&&k<p.length){var qe=k++;return{value:R(qe,p[qe]),done:!1}}return W=!0,{done:!0,value:void 0}}};return Se[Symbol.iterator]=function(){return Se},Se}(this,function(R,k){return k})}});var g=g||{},T=this||self;function b(p){var R=typeof p;return"array"==(R="object"!=R?R:p?Array.isArray(p)?"array":R:"null")||"object"==R&&"number"==typeof p.length}function O(p){var R=typeof p;return"object"==R&&null!=p||"function"==R}function H(p,R,k){return p.call.apply(p.bind,arguments)}function K(p,R,k){if(!p)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var Se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Se,W),p.apply(R,Se)}}return function(){return p.apply(R,arguments)}}function oe(p,R,k){return(oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?H:K).apply(null,arguments)}function Re(p,R){var k=Array.prototype.slice.call(arguments,1);return function(){var W=k.slice();return W.push.apply(W,arguments),p.apply(this,W)}}function it(p,R){function k(){}k.prototype=R.prototype,p.aa=R.prototype,p.prototype=new k,p.prototype.constructor=p,p.Qb=function(W,Se,qe){for(var Ct=Array(arguments.length-2),Dr=2;Dr<arguments.length;Dr++)Ct[Dr-2]=arguments[Dr];return R.prototype[Se].apply(W,Ct)}}function lt(p){const R=p.length;if(0<R){const k=Array(R);for(let W=0;W<R;W++)k[W]=p[W];return k}return[]}function at(p,R){for(let k=1;k<arguments.length;k++){const W=arguments[k];if(b(W)){const Se=p.length||0,qe=W.length||0;p.length=Se+qe;for(let Ct=0;Ct<qe;Ct++)p[Se+Ct]=W[Ct]}else p.push(W)}}function zt(p){return/^[\s\xa0]*$/.test(p)}function wt(){var p=T.navigator;return p&&(p=p.userAgent)?p:""}function qt(p){return qt[" "](p),p}qt[" "]=function(){};var Tn=!(-1==wt().indexOf("Gecko")||-1!=wt().toLowerCase().indexOf("webkit")&&-1==wt().indexOf("Edge")||-1!=wt().indexOf("Trident")||-1!=wt().indexOf("MSIE")||-1!=wt().indexOf("Edge"));function Mn(p,R,k){for(const W in p)R.call(k,p[W],W,p)}function se(p){const R={};for(const k in p)R[k]=p[k];return R}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(p,R){let k,W;for(let Se=1;Se<arguments.length;Se++){for(k in W=arguments[Se],W)p[k]=W[k];for(let qe=0;qe<de.length;qe++)k=de[qe],Object.prototype.hasOwnProperty.call(W,k)&&(p[k]=W[k])}}function Ce(p){var R=1;p=p.split(":");const k=[];for(;0<R&&p.length;)k.push(p.shift()),R--;return p.length&&k.push(p.join(":")),k}function ke(p){T.setTimeout(()=>{throw p},0)}function le(){var p=Vs;let R=null;return p.g&&(R=p.g,p.g=p.g.next,p.g||(p.h=null),R.next=null),R}var Lu=new class Vt{constructor(R,k){this.i=R,this.j=k,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new is,p=>p.reset());class is{constructor(){this.next=this.g=this.h=null}set(R,k){this.h=R,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let ia,Fc=!1,Vs=new class Fi{constructor(){this.h=this.g=null}add(R,k){const W=Lu.get();W.set(R,k),this.h?this.h.next=W:this.g=W,this.h=W}},bp=()=>{const p=T.Promise.resolve(void 0);ia=()=>{p.then(Dd)}};var Dd=()=>{for(var p;p=le();){try{p.h.call(p.g)}catch(k){ke(k)}var R=Lu;R.j(p),100>R.h&&(R.h++,p.next=R.g,R.g=p)}Fc=!1};function so(){this.s=this.s,this.C=this.C}function si(p,R){this.type=p,this.g=this.target=R,this.defaultPrevented=!1}so.prototype.s=!1,so.prototype.ma=function(){this.s||(this.s=!0,this.N())},so.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},si.prototype.h=function(){this.defaultPrevented=!0};var Ad=function(){if(!T.addEventListener||!Object.defineProperty)return!1;var p=!1,R=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const k=()=>{};T.addEventListener("test",k,R),T.removeEventListener("test",k,R)}catch{}return p}();function Ka(p,R){if(si.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var k=this.type=p.type,W=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=R,R=p.relatedTarget){if(Tn){e:{try{qt(R.nodeName);var Se=!0;break e}catch{}Se=!1}Se||(R=null)}}else"mouseover"==k?R=p.fromElement:"mouseout"==k&&(R=p.toElement);this.relatedTarget=R,W?(this.clientX=void 0!==W.clientX?W.clientX:W.pageX,this.clientY=void 0!==W.clientY?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:Cd[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ka.aa.h.call(this)}}it(Ka,si);var Cd={2:"touch",3:"pen",4:"mouse"};Ka.prototype.h=function(){Ka.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Za="closure_listenable_"+(1e6*Math.random()|0),Sd=0;function bd(p,R,k,W,Se){this.listener=p,this.proxy=null,this.src=R,this.type=k,this.capture=!!W,this.ha=Se,this.key=++Sd,this.da=this.fa=!1}function zh(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Gh(p){this.src=p,this.g={},this.h=0}function Rp(p,R){var k=R.type;if(k in p.g){var qe,W=p.g[k],Se=Array.prototype.indexOf.call(W,R,void 0);(qe=0<=Se)&&Array.prototype.splice.call(W,Se,1),qe&&(zh(R),0==p.g[k].length&&(delete p.g[k],p.h--))}}function Pp(p,R,k,W){for(var Se=0;Se<p.length;++Se){var qe=p[Se];if(!qe.da&&qe.listener==R&&qe.capture==!!k&&qe.ha==W)return Se}return-1}Gh.prototype.add=function(p,R,k,W,Se){var qe=p.toString();(p=this.g[qe])||(p=this.g[qe]=[],this.h++);var Ct=Pp(p,R,W,Se);return-1<Ct?(R=p[Ct],k||(R.fa=!1)):((R=new bd(R,this.src,qe,!!W,Se)).fa=k,p.push(R)),R};var Mp="closure_lm_"+(1e6*Math.random()|0),xp={};function Fm(p,R,k,W,Se){if(W&&W.once)return Np(p,R,k,W,Se);if(Array.isArray(R)){for(var qe=0;qe<R.length;qe++)Fm(p,R[qe],k,W,Se);return null}return k=Bm(k),p&&p[Za]?p.K(R,k,O(W)?!!W.capture:!!W,Se):Vm(p,R,k,!1,W,Se)}function Vm(p,R,k,W,Se,qe){if(!R)throw Error("Invalid event type");var Ct=O(Se)?!!Se.capture:!!Se,Dr=Um(p);if(Dr||(p[Mp]=Dr=new Gh(p)),(k=Dr.add(R,k,W,Ct,qe)).proxy)return k;if(W=function Ty(){const R=EE;return function p(k){return R.call(p.src,p.listener,k)}}(),k.proxy=W,W.src=p,W.listener=k,p.addEventListener)Ad||(Se=Ct),void 0===Se&&(Se=!1),p.addEventListener(R.toString(),W,Se);else if(p.attachEvent)p.attachEvent(vE(R.toString()),W);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(W)}return k}function Np(p,R,k,W,Se){if(Array.isArray(R)){for(var qe=0;qe<R.length;qe++)Np(p,R[qe],k,W,Se);return null}return k=Bm(k),p&&p[Za]?p.L(R,k,O(W)?!!W.capture:!!W,Se):Vm(p,R,k,!0,W,Se)}function Dy(p,R,k,W,Se){if(Array.isArray(R))for(var qe=0;qe<R.length;qe++)Dy(p,R[qe],k,W,Se);else W=O(W)?!!W.capture:!!W,k=Bm(k),p&&p[Za]?(p=p.i,(R=String(R).toString())in p.g&&-1<(k=Pp(qe=p.g[R],k,W,Se))&&(zh(qe[k]),Array.prototype.splice.call(qe,k,1),0==qe.length&&(delete p.g[R],p.h--))):p&&(p=Um(p))&&(R=p.g[R.toString()],p=-1,R&&(p=Pp(R,k,W,Se)),(k=-1<p?R[p]:null)&&Ay(k))}function Ay(p){if("number"!=typeof p&&p&&!p.da){var R=p.src;if(R&&R[Za])Rp(R.i,p);else{var k=p.type,W=p.proxy;R.removeEventListener?R.removeEventListener(k,W,p.capture):R.detachEvent?R.detachEvent(vE(k),W):R.addListener&&R.removeListener&&R.removeListener(W),(k=Um(R))?(Rp(k,p),0==k.h&&(k.src=null,R[Mp]=null)):zh(p)}}}function vE(p){return p in xp?xp[p]:xp[p]="on"+p}function EE(p,R){if(p.da)p=!0;else{R=new Ka(R,this);var k=p.listener,W=p.ha||p.src;p.fa&&Ay(p),p=k.call(W,R)}return p}function Um(p){return(p=p[Mp])instanceof Gh?p:null}var Cy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bm(p){return"function"==typeof p?p:(p[Cy]||(p[Cy]=function(R){return p.handleEvent(R)}),p[Cy])}function Ts(){so.call(this),this.i=new Gh(this),this.M=this,this.F=null}function Ds(p,R){var k,W=p.F;if(W)for(k=[];W;W=W.F)k.push(W);if(p=p.M,W=R.type||R,"string"==typeof R)R=new si(R,p);else if(R instanceof si)R.target=R.target||p;else{var Se=R;Ie(R=new si(W,p),Se)}if(Se=!0,k)for(var qe=k.length-1;0<=qe;qe--){var Ct=R.g=k[qe];Se=Op(Ct,W,!0,R)&&Se}if(Se=Op(Ct=R.g=p,W,!0,R)&&Se,Se=Op(Ct,W,!1,R)&&Se,k)for(qe=0;qe<k.length;qe++)Se=Op(Ct=R.g=k[qe],W,!1,R)&&Se}function Op(p,R,k,W){if(!(R=p.i.g[String(R)]))return!0;R=R.concat();for(var Se=!0,qe=0;qe<R.length;++qe){var Ct=R[qe];if(Ct&&!Ct.da&&Ct.capture==k){var Dr=Ct.listener,qi=Ct.ha||Ct.src;Ct.fa&&Rp(p.i,Ct),Se=!1!==Dr.call(qi,W)&&Se}}return Se&&!W.defaultPrevented}function Sy(p,R,k){if("function"==typeof p)k&&(p=oe(p,k));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=oe(p.handleEvent,p)}return 2147483647<Number(R)?-1:T.setTimeout(p,R||0)}function kp(p){p.g=Sy(()=>{p.g=null,p.i&&(p.i=!1,kp(p))},p.l);const R=p.h;p.h=null,p.m.apply(null,R)}it(Ts,so),Ts.prototype[Za]=!0,Ts.prototype.removeEventListener=function(p,R,k,W){Dy(this,p,R,k,W)},Ts.prototype.N=function(){if(Ts.aa.N.call(this),this.i){var R,p=this.i;for(R in p.g){for(var k=p.g[R],W=0;W<k.length;W++)zh(k[W]);delete p.g[R],p.h--}}this.F=null},Ts.prototype.K=function(p,R,k,W){return this.i.add(String(p),R,!1,k,W)},Ts.prototype.L=function(p,R,k,W){return this.i.add(String(p),R,!0,k,W)};class Wh extends so{constructor(R,k){super(),this.m=R,this.l=k,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:kp(this)}N(){super.N(),this.g&&(T.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pl(p){so.call(this),this.h=p,this.g={}}it(Pl,so);var qh=[];function jm(p){Mn(p.g,function(R,k){this.g.hasOwnProperty(k)&&Ay(R)},p),p.g={}}Pl.prototype.N=function(){Pl.aa.N.call(this),jm(this)},Pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ml=T.JSON.stringify,by=T.JSON.parse,IE=class{stringify(p){return T.JSON.stringify(p,void 0)}parse(p){return T.JSON.parse(p,void 0)}};function xl(){}function Py(){}xl.prototype.h=null;var Kh={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $m(){si.call(this,"d")}function Zh(){si.call(this,"c")}it($m,si),it(Zh,si);var Qa={},Qh=null;function Hm(){return Qh=Qh||new Ts}function My(p){si.call(this,Qa.La,p)}function Yh(p){const R=Hm();Ds(R,new My(R))}function Lp(p,R){si.call(this,Qa.STAT_EVENT,p),this.stat=R}function As(p){const R=Hm();Ds(R,new Lp(R,p))}function zm(p,R){si.call(this,Qa.Ma,p),this.size=R}function Jh(p,R){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return T.setTimeout(function(){p()},R)}function Xh(){this.g=!0}function Nl(p,R,k,W){p.info(function(){return"XMLHTTP TEXT ("+R+"): "+function TE(p,R){if(!p.g)return R;if(!R)return null;try{var k=JSON.parse(R);if(k)for(p=0;p<k.length;p++)if(Array.isArray(k[p])){var W=k[p];if(!(2>W.length)){var Se=W[1];if(Array.isArray(Se)&&!(1>Se.length)){var qe=Se[0];if("noop"!=qe&&"stop"!=qe&&"close"!=qe)for(var Ct=1;Ct<Se.length;Ct++)Se[Ct]=""}}}return Ml(k)}catch{return R}}(p,k)+(W?" "+W:"")})}Qa.La="serverreachability",it(My,si),Qa.STAT_EVENT="statevent",it(Lp,si),Qa.Ma="timingevent",it(zm,si),Xh.prototype.xa=function(){this.g=!1},Xh.prototype.info=function(){};var ef,Fp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Rd(){}function Vc(p,R,k,W){this.j=p,this.i=R,this.l=k,this.R=W||1,this.U=new Pl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tf}function tf(){this.i=null,this.g="",this.h=!1}it(Rd,xl),Rd.prototype.g=function(){return new XMLHttpRequest},Rd.prototype.i=function(){return{}},ef=new Rd;var nf={},rf={};function Vp(p,R,k){p.L=1,p.v=uf(Oo(R)),p.m=k,p.P=!0,Oy(p,null)}function Oy(p,R){p.F=Date.now(),Pd(p),p.A=Oo(p.v);var k=p.A,W=p.R;Array.isArray(W)||(W=[String(W)]),SE(k.i,"t",W),p.C=0,k=p.j.J,p.h=new tf,p.g=u_(p.j,k?R:null,!p.m),0<p.O&&(p.M=new Wh(oe(p.Y,p,p.g),p.O)),R=p.U,k=p.g,W=p.ca;var Se="readystatechange";Array.isArray(Se)||(Se&&(qh[0]=Se.toString()),Se=qh);for(var qe=0;qe<Se.length;qe++){var Ct=Fm(k,Se[qe],W||R.handleEvent,!1,R.h||R);if(!Ct)break;R.g[Ct.key]=Ct}R=p.H?se(p.H):{},p.m?(p.u||(p.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,R)):(p.u="GET",p.g.ea(p.A,p.u,null,R)),Yh(),function xy(p,R,k,W,Se,qe){p.info(function(){if(p.g)if(qe)for(var Ct="",Dr=qe.split("&"),qi=0;qi<Dr.length;qi++){var tr=Dr[qi].split("=");if(1<tr.length){var ss=tr[0];tr=tr[1];var os=ss.split("_");Ct=2<=os.length&&"type"==os[1]?Ct+(ss+"=")+tr+"&":Ct+(ss+"=redacted&")}}else Ct=null;else Ct=qe;return"XMLHTTP REQ ("+W+") [attempt "+Se+"]: "+R+"\n"+k+"\n"+Ct})}(p.i,p.u,p.A,p.l,p.R,p.m)}function ky(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function DE(p,R){var k=p.C,W=R.indexOf("\n",k);return-1==W?rf:(k=Number(R.substring(k,W)),isNaN(k)?nf:(W+=1)+k>R.length?rf:(R=R.slice(W,W+k),p.C=W+k,R))}function Pd(p){p.S=Date.now()+p.I,Up(p,p.I)}function Up(p,R){if(null!=p.B)throw Error("WatchDog timer not null");p.B=Jh(oe(p.ba,p),R)}function Bp(p){p.B&&(T.clearTimeout(p.B),p.B=null)}function Md(p){0==p.j.G||p.J||s_(p.j,p)}function Ol(p){Bp(p);var R=p.M;R&&"function"==typeof R.ma&&R.ma(),p.M=null,jm(p.U),p.g&&(R=p.g,p.g=null,R.abort(),R.ma())}function Wm(p,R){try{var k=p.j;if(0!=k.G&&(k.g==p||Hp(k.h,p)))if(!p.K&&Hp(k.h,p)&&3==k.G){try{var W=k.Da.g.parse(R)}catch{W=null}if(Array.isArray(W)&&3==W.length){var Se=W;if(0==Se[0]){e:if(!k.u){if(k.g){if(!(k.g.F+3e3<p.F))break e;Qp(k),pf(k)}i_(k),As(18)}}else k.za=Se[1],0<k.za-k.T&&37500>Se[2]&&k.F&&0==k.v&&!k.C&&(k.C=Jh(oe(k.Za,k),6e3));if(1>=$p(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Ja(k,11)}else if((p.K||k.g==p)&&Qp(k),!zt(R))for(Se=k.Da.g.parse(R),R=0;R<Se.length;R++){let tr=Se[R];if(k.T=tr[0],tr=tr[1],2==k.G)if("c"==tr[0]){k.K=tr[1],k.ia=tr[2];const ss=tr[3];null!=ss&&(k.la=ss,k.j.info("VER="+k.la));const os=tr[4];null!=os&&(k.Aa=os,k.j.info("SVER="+k.Aa));const Ld=tr[5];null!=Ld&&"number"==typeof Ld&&0<Ld&&(k.L=W=1.5*Ld,k.j.info("backChannelRequestTimeoutMs_="+W)),W=k;const oa=p.g;if(oa){const Xp=oa.g?oa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xp){var qe=W.h;qe.g||-1==Xp.indexOf("spdy")&&-1==Xp.indexOf("quic")&&-1==Xp.indexOf("h2")||(qe.j=qe.l,qe.g=new Set,qe.h&&(Km(qe,qe.h),qe.h=null))}if(W.D){const l_=oa.g?oa.g.getResponseHeader("X-HTTP-Session-Id"):null;l_&&(W.ya=l_,Mr(W.I,W.D,l_))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-p.F,k.j.info("Handshake RTT: "+k.R+"ms"));var Ct=p;if((W=k).qa=a_(W,W.J?W.ia:null,W.W),Ct.K){Zm(W.h,Ct);var Dr=Ct,qi=W.L;qi&&(Dr.I=qi),Dr.B&&(Bp(Dr),Pd(Dr)),W.g=Ct}else kd(W);0<k.i.length&&qp(k)}else"stop"!=tr[0]&&"close"!=tr[0]||Ja(k,7);else 3==k.G&&("stop"==tr[0]||"close"==tr[0]?"stop"==tr[0]?Ja(k,7):oo(k):"noop"!=tr[0]&&k.l&&k.l.ta(tr),k.v=0)}Yh()}catch{}}function jp(p){this.l=p||10,p=T.PerformanceNavigationTiming?0<(p=T.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(T.chrome&&T.chrome.loadTimes&&T.chrome.loadTimes()&&T.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qm(p){return!!p.h||!!p.g&&p.g.size>=p.j}function $p(p){return p.h?1:p.g?p.g.size:0}function Hp(p,R){return p.h?p.h==R:!!p.g&&p.g.has(R)}function Km(p,R){p.g?p.g.add(R):p.h=R}function Zm(p,R){p.h&&p.h==R?p.h=null:p.g&&p.g.has(R)&&p.g.delete(R)}function Qm(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let R=p.i;for(const k of p.g.values())R=R.concat(k.D);return R}return lt(p.i)}function Uy(p,R){if(p.forEach&&"function"==typeof p.forEach)p.forEach(R,void 0);else if(b(p)||"string"==typeof p)Array.prototype.forEach.call(p,R,void 0);else for(var k=function Vy(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(b(p)||"string"==typeof p){var R=[];p=p.length;for(var k=0;k<p;k++)R.push(k);return R}R=[],k=0;for(const W in p)R[k++]=W;return R}}}(p),W=function Fy(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(b(p)){for(var R=[],k=p.length,W=0;W<k;W++)R.push(p[W]);return R}for(W in R=[],k=0,p)R[k++]=p[W];return R}(p),Se=W.length,qe=0;qe<Se;qe++)R.call(void 0,W[qe],k&&k[qe],p)}Vc.prototype.ca=function(p){p=p.target;const R=this.M;R&&3==Vi(p)?R.j():this.Y(p)},Vc.prototype.Y=function(p){try{if(p==this.g)e:{const os=Vi(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>os)&&(3!=os||this.g&&(this.h.h||this.g.oa()||qy(this.g)))){this.J||4!=os||7==R||Yh(),Bp(this);var k=this.g.Z();this.X=k;t:if(ky(this)){var W=qy(this.g);p="";var Se=W.length,qe=4==Vi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Ol(this),Md(this);var Ct="";break t}this.h.i=new T.TextDecoder}for(R=0;R<Se;R++)this.h.h=!0,p+=this.h.i.decode(W[R],{stream:!(qe&&R==Se-1)});W.length=0,this.h.g+=p,this.C=0,Ct=this.h.g}else Ct=this.g.oa();if(this.o=200==k,function Ny(p,R,k,W,Se,qe,Ct){p.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+Se+"]: "+R+"\n"+k+"\n"+qe+" "+Ct})}(this.i,this.u,this.A,this.l,this.R,os,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Dr,qi=this.g;if((Dr=qi.g?qi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zt(Dr)){var tr=Dr;break t}}tr=null}if(!(k=tr)){this.o=!1,this.s=3,As(12),Ol(this),Md(this);break e}Nl(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wm(this,k)}if(this.P){let oa;for(k=!0;!this.J&&this.C<Ct.length;){if(oa=DE(this,Ct),oa==rf){4==os&&(this.s=4,As(14),k=!1),Nl(this.i,this.l,null,"[Incomplete Response]");break}if(oa==nf){this.s=4,As(15),Nl(this.i,this.l,Ct,"[Invalid Chunk]"),k=!1;break}Nl(this.i,this.l,oa,null),Wm(this,oa)}if(ky(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=os||0!=Ct.length||this.h.h||(this.s=1,As(16),k=!1),this.o=this.o&&k,k){if(0<Ct.length&&!this.W){this.W=!0;var ss=this.j;ss.g==this&&ss.ba&&!ss.M&&(ss.j.info("Great, no buffering proxy detected. Bytes received: "+Ct.length),Zp(ss),ss.M=!0,As(11))}}else Nl(this.i,this.l,Ct,"[Invalid Chunked Response]"),Ol(this),Md(this)}else Nl(this.i,this.l,Ct,null),Wm(this,Ct);4==os&&Ol(this),this.o&&!this.J&&(4==os?s_(this.j,this):(this.o=!1,Pd(this)))}else(function Ky(p){const R={};p=(p.g&&2<=Vi(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let W=0;W<p.length;W++){if(zt(p[W]))continue;var k=Ce(p[W]);const Se=k[0];if("string"!=typeof(k=k[1]))continue;k=k.trim();const qe=R[Se]||[];R[Se]=qe,qe.push(k)}!function ye(p,R){for(const k in p)R.call(void 0,p[k],k,p)}(R,function(W){return W.join(", ")})})(this.g),400==k&&0<Ct.indexOf("Unknown SID")?(this.s=3,As(12)):(this.s=0,As(13)),Ol(this),Md(this)}}}catch{}},Vc.prototype.cancel=function(){this.J=!0,Ol(this)},Vc.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function wE(p,R){p.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&(Yh(),As(17)),Ol(this),this.s=2,Md(this)):Up(this,this.S-p)},jp.prototype.cancel=function(){if(this.i=Qm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Ym=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fu(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Fu){this.h=p.h,sf(this,p.j),this.o=p.o,this.g=p.g,af(this,p.s),this.l=p.l;var R=p.i,k=new sa;k.i=R.i,R.g&&(k.g=new Map(R.g),k.h=R.h),Jm(this,k),this.m=p.m}else p&&(R=String(p).match(Ym))?(this.h=!1,sf(this,R[1]||"",!0),this.o=xd(R[2]||""),this.g=xd(R[3]||"",!0),af(this,R[4]),this.l=xd(R[5]||"",!0),Jm(this,R[6]||"",!0),this.m=xd(R[7]||"")):(this.h=!1,this.i=new sa(null,this.h))}function Oo(p){return new Fu(p)}function sf(p,R,k){p.j=k?xd(R,!0):R,p.j&&(p.j=p.j.replace(/:$/,""))}function af(p,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);p.s=R}else p.s=null}function Jm(p,R,k){R instanceof sa?(p.i=R,function bE(p,R){R&&!p.j&&(Ya(p),p.i=null,p.g.forEach(function(k,W){var Se=W.toLowerCase();W!=Se&&($y(this,W),SE(this,Se,k))},p)),p.j=R}(p.i,p.h)):(k||(R=Nd(R,CE)),p.i=new sa(R,p.h))}function Mr(p,R,k){p.i.set(R,k)}function uf(p){return Mr(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function xd(p,R){return p?R?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Nd(p,R,k){return"string"==typeof p?(p=encodeURI(p).replace(R,jy),k&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function jy(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}Fu.prototype.toString=function(){var p=[],R=this.j;R&&p.push(Nd(R,cf,!0),":");var k=this.g;return(k||"file"==R)&&(p.push("//"),(R=this.o)&&p.push(Nd(R,cf,!0),"@"),p.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(k=this.s)&&p.push(":",String(k))),(k=this.l)&&(this.g&&"/"!=k.charAt(0)&&p.push("/"),p.push(Nd(k,"/"==k.charAt(0)?AE:Uc,!0))),(k=this.i.toString())&&p.push("?",k),(k=this.m)&&p.push("#",Nd(k,Xm)),p.join("")};var p,cf=/[#\/\?@]/g,Uc=/[#\?:]/g,AE=/[#\?]/g,CE=/[#\?@]/g,Xm=/#/g;function sa(p,R){this.h=this.g=null,this.i=p||null,this.j=!!R}function Ya(p){p.g||(p.g=new Map,p.h=0,p.i&&function By(p,R){if(p){p=p.split("&");for(var k=0;k<p.length;k++){var W=p[k].indexOf("="),Se=null;if(0<=W){var qe=p[k].substring(0,W);Se=p[k].substring(W+1)}else qe=p[k];R(qe,Se?decodeURIComponent(Se.replace(/\+/g," ")):"")}}}(p.i,function(R,k){p.add(decodeURIComponent(R.replace(/\+/g," ")),k)}))}function $y(p,R){Ya(p),R=lf(p,R),p.g.has(R)&&(p.i=null,p.h-=p.g.get(R).length,p.g.delete(R))}function zp(p,R){return Ya(p),R=lf(p,R),p.g.has(R)}function SE(p,R,k){$y(p,R),0<k.length&&(p.i=null,p.g.set(lf(p,R),lt(k)),p.h+=k.length)}function lf(p,R){return R=String(R),p.j&&(R=R.toLowerCase()),R}function Bc(p,R,k,W,Se){try{Se&&(Se.onload=null,Se.onerror=null,Se.onabort=null,Se.ontimeout=null),W(k)}catch{}}function Mi(){this.g=new IE}function zy(p,R,k){const W=k||"";try{Uy(p,function(Se,qe){let Ct=Se;O(Se)&&(Ct=Ml(Se)),R.push(W+qe+"="+encodeURIComponent(Ct))})}catch(Se){throw R.push(W+"type="+encodeURIComponent("_badmap")),Se}}function df(p){this.l=p.Ub||null,this.j=p.eb||!1}function Gp(p,R){Ts.call(this),this.D=p,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function e_(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function hf(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Od(p)}function Od(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function t_(p){let R="";return Mn(p,function(k,W){R+=W,R+=":",R+=k,R+="\r\n"}),R}function jc(p,R,k){e:{for(W in k){var W=!1;break e}W=!0}W||(k=t_(k),"string"==typeof p?null!=k&&encodeURIComponent(String(k)):Mr(p,R,k))}function Qr(p){Ts.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=sa.prototype).add=function(p,R){Ya(this),this.i=null,p=lf(this,p);var k=this.g.get(p);return k||this.g.set(p,k=[]),k.push(R),this.h+=1,this},a.forEach=function(p,R){Ya(this),this.g.forEach(function(k,W){k.forEach(function(Se){p.call(R,Se,W,this)},this)},this)},a.na=function(){Ya(this);const p=Array.from(this.g.values()),R=Array.from(this.g.keys()),k=[];for(let W=0;W<R.length;W++){const Se=p[W];for(let qe=0;qe<Se.length;qe++)k.push(R[W])}return k},a.V=function(p){Ya(this);let R=[];if("string"==typeof p)zp(this,p)&&(R=R.concat(this.g.get(lf(this,p))));else{p=Array.from(this.g.values());for(let k=0;k<p.length;k++)R=R.concat(p[k])}return R},a.set=function(p,R){return Ya(this),this.i=null,zp(this,p=lf(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[R]),this.h+=1,this},a.get=function(p,R){return p&&0<(p=this.V(p)).length?String(p[0]):R},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],R=Array.from(this.g.keys());for(var k=0;k<R.length;k++){var W=R[k];const qe=encodeURIComponent(String(W)),Ct=this.V(W);for(W=0;W<Ct.length;W++){var Se=qe;""!==Ct[W]&&(Se+="="+encodeURIComponent(String(Ct[W]))),p.push(Se)}}return this.i=p.join("&")},it(df,xl),df.prototype.g=function(){return new Gp(this.l,this.j)},df.prototype.i=(p={},function(){return p}),it(Gp,Ts),(a=Gp.prototype).open=function(p,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=R,this.readyState=1,Od(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(R.body=p),(this.D||T).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hf(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Od(this)),this.g&&(this.readyState=3,Od(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof T.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;e_(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var R=p.value?p.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!p.done}))&&(this.response=this.responseText+=R)}p.done?hf(this):Od(this),3==this.readyState&&e_(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,hf(this))},a.Qa=function(p){this.g&&(this.response=p,hf(this))},a.ga=function(){this.g&&hf(this)},a.setRequestHeader=function(p,R){this.u.append(p,R)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],R=this.h.entries();for(var k=R.next();!k.done;)p.push((k=k.value)[0]+": "+k[1]),k=R.next();return p.join("\r\n")},Object.defineProperty(Gp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),it(Qr,Ts);var PE=/^https?$/i,Gy=["POST","PUT"];function Wy(p,R){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=R,p.m=5,n_(p),ff(p)}function n_(p){p.A||(p.A=!0,Ds(p,"complete"),Ds(p,"error"))}function ME(p){if(p.h&&typeof g<"u"&&(!p.v[1]||4!=Vi(p)||2!=p.Z()))if(p.u&&4==Vi(p))Sy(p.Ea,0,p);else if(Ds(p,"readystatechange"),4==Vi(p)){p.h=!1;try{const Ct=p.Z();e:switch(Ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var k;if(!(k=R)){var W;if(W=0===Ct){var Se=String(p.D).match(Ym)[1]||null;!Se&&T.self&&T.self.location&&(Se=T.self.location.protocol.slice(0,-1)),W=!PE.test(Se?Se.toLowerCase():"")}k=W}if(k)Ds(p,"complete"),Ds(p,"success");else{p.m=6;try{var qe=2<Vi(p)?p.g.statusText:""}catch{qe=""}p.l=qe+" ["+p.Z()+"]",n_(p)}}finally{ff(p)}}}function ff(p,R){if(p.g){Wp(p);const k=p.g,W=p.v[0]?()=>{}:null;p.g=null,p.v=null,R||Ds(p,"ready");try{k.onreadystatechange=W}catch{}}}function Wp(p){p.I&&(T.clearTimeout(p.I),p.I=null)}function Vi(p){return p.g?p.g.readyState:0}function qy(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function Us(p,R,k){return k&&k.internalChannelParams&&k.internalChannelParams[p]||R}function ko(p){this.Aa=0,this.i=[],this.j=new Xh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Us("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Us("baseRetryDelayMs",5e3,p),this.cb=Us("retryDelaySeedMs",1e4,p),this.Wa=Us("forwardChannelMaxRetries",2,p),this.wa=Us("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new jp(p&&p.concurrentRequestLimit),this.Da=new Mi,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function oo(p){if(r_(p),3==p.G){var R=p.U++,k=Oo(p.I);if(Mr(k,"SID",p.K),Mr(k,"RID",R),Mr(k,"TYPE","terminate"),gf(p,k),(R=new Vc(p,p.j,R)).L=2,R.v=uf(Oo(k)),k=!1,T.navigator&&T.navigator.sendBeacon)try{k=T.navigator.sendBeacon(R.v.toString(),"")}catch{}!k&&T.Image&&((new Image).src=R.v,k=!0),k||(R.g=u_(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Pd(R)}Yy(p)}function pf(p){p.g&&(Zp(p),p.g.cancel(),p.g=null)}function r_(p){pf(p),p.u&&(T.clearTimeout(p.u),p.u=null),Qp(p),p.h.cancel(),p.s&&("number"==typeof p.s&&T.clearTimeout(p.s),p.s=null)}function qp(p){if(!qm(p.h)&&!p.s){p.s=!0;var R=p.Ga;ia||bp(),Fc||(ia(),Fc=!0),Vs.add(R,p),p.B=0}}function Zy(p,R){var k;k=R?R.l:p.U++;const W=Oo(p.I);Mr(W,"SID",p.K),Mr(W,"RID",k),Mr(W,"AID",p.T),gf(p,W),p.m&&p.o&&jc(W,p.m,p.o),k=new Vc(p,p.j,k,p.B+1),null===p.m&&(k.H=p.o),R&&(p.i=R.D.concat(p.i)),R=Kp(p,k,1e3),k.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Km(p.h,k),Vp(k,W,R)}function gf(p,R){p.H&&Mn(p.H,function(k,W){Mr(R,W,k)}),p.l&&Uy({},function(k,W){Mr(R,W,k)})}function Kp(p,R,k){k=Math.min(p.i.length,k);var W=p.l?oe(p.l.Na,p.l,p):null;e:{var Se=p.i;let qe=-1;for(;;){const Ct=["count="+k];-1==qe?0<k?(qe=Se[0].g,Ct.push("ofs="+qe)):qe=0:Ct.push("ofs="+qe);let Dr=!0;for(let qi=0;qi<k;qi++){let tr=Se[qi].g;const ss=Se[qi].map;if(tr-=qe,0>tr)qe=Math.max(0,Se[qi].g-100),Dr=!1;else try{zy(ss,Ct,"req"+tr+"_")}catch{W&&W(ss)}}if(Dr){W=Ct.join("&");break e}}}return p=p.i.splice(0,k),R.D=p,W}function kd(p){if(!p.g&&!p.u){p.Y=1;var R=p.Fa;ia||bp(),Fc||(ia(),Fc=!0),Vs.add(R,p),p.v=0}}function i_(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=Jh(oe(p.Fa,p),o_(p,p.v)),p.v++,0))}function Zp(p){null!=p.A&&(T.clearTimeout(p.A),p.A=null)}function Qy(p){p.g=new Vc(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var R=Oo(p.qa);Mr(R,"RID","rpc"),Mr(R,"SID",p.K),Mr(R,"AID",p.T),Mr(R,"CI",p.F?"0":"1"),!p.F&&p.ja&&Mr(R,"TO",p.ja),Mr(R,"TYPE","xmlhttp"),gf(p,R),p.m&&p.o&&jc(R,p.m,p.o),p.L&&(p.g.I=p.L);var k=p.g;p=p.ia,k.L=1,k.v=uf(Oo(R)),k.m=null,k.P=!0,Oy(k,p)}function Qp(p){null!=p.C&&(T.clearTimeout(p.C),p.C=null)}function s_(p,R){var k=null;if(p.g==R){Qp(p),Zp(p),p.g=null;var W=2}else{if(!Hp(p.h,R))return;k=R.D,Zm(p.h,R),W=1}if(0!=p.G)if(R.o)if(1==W){k=R.m?R.m.length:0,R=Date.now()-R.F;var Se=p.B;Ds(W=Hm(),new zm(W,k)),qp(p)}else kd(p);else if(3==(Se=R.s)||0==Se&&0<R.X||!(1==W&&function xE(p,R){return!($p(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=R.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=Jh(oe(p.Ga,p,R),o_(p,p.B)),p.B++,0)))}(p,R)||2==W&&i_(p)))switch(k&&0<k.length&&(R=p.h,R.i=R.i.concat(k)),Se){case 1:Ja(p,5);break;case 4:Ja(p,10);break;case 3:Ja(p,6);break;default:Ja(p,2)}}function o_(p,R){let k=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(k*=2),k*R}function Ja(p,R){if(p.j.info("Error code "+R),2==R){var k=oe(p.fb,p),W=p.Xa;const Se=!W;W=new Fu(W||"//www.google.com/images/cleardot.gif"),T.location&&"http"==T.location.protocol||sf(W,"https"),uf(W),Se?function RE(p,R){const k=new Xh;if(T.Image){const W=new Image;W.onload=Re(Bc,k,"TestLoadImage: loaded",!0,R,W),W.onerror=Re(Bc,k,"TestLoadImage: error",!1,R,W),W.onabort=Re(Bc,k,"TestLoadImage: abort",!1,R,W),W.ontimeout=Re(Bc,k,"TestLoadImage: timeout",!1,R,W),T.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=p}else R(!1)}(W.toString(),k):function Hy(p,R){new Xh;const W=new AbortController,Se=setTimeout(()=>{W.abort(),Bc(0,0,!1,R)},1e4);fetch(p,{signal:W.signal}).then(qe=>{clearTimeout(Se),Bc(0,0,!!qe.ok,R)}).catch(()=>{clearTimeout(Se),Bc(0,0,!1,R)})}(W.toString(),k)}else As(2);p.G=0,p.l&&p.l.sa(R),Yy(p),r_(p)}function Yy(p){if(p.G=0,p.ka=[],p.l){const R=Qm(p.h);(0!=R.length||0!=p.i.length)&&(at(p.ka,R),at(p.ka,p.i),p.h.i.length=0,lt(p.i),p.i.length=0),p.l.ra()}}function a_(p,R,k){var W=k instanceof Fu?Oo(k):new Fu(k);if(""!=W.g)R&&(W.g=R+"."+W.g),af(W,W.s);else{var Se=T.location;W=Se.protocol,R=R?R+"."+Se.hostname:Se.hostname,Se=+Se.port;var qe=new Fu(null);W&&sf(qe,W),R&&(qe.g=R),Se&&af(qe,Se),k&&(qe.l=k),W=qe}return R=p.ya,(k=p.D)&&R&&Mr(W,k,R),Mr(W,"VER",p.la),gf(p,W),W}function u_(p,R,k){if(R&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new Qr(p.Ca&&!p.pa?new df({eb:k}):p.pa)).Ha(p.J),R}function c_(){}function Yp(){}function ao(p,R){Ts.call(this),this.g=new ko(R),this.l=p,this.h=R&&R.messageUrlParams||null,p=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(p?p["X-WebChannel-Content-Type"]=R.messageContentType:p={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(p?p["X-WebChannel-Client-Profile"]=R.va:p={"X-WebChannel-Client-Profile":R.va}),this.g.S=p,(p=R&&R.Sb)&&!zt(p)&&(this.g.m=p),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!zt(R)&&(this.g.D=R,null!==(p=this.h)&&R in p&&R in(p=this.h)&&delete p[R]),this.j=new kl(this)}function Jp(p){$m.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var R=p.__sm__;if(R){e:{for(const k in R){p=k;break e}p=void 0}(this.i=p)&&(p=this.i,R=null!==R&&p in R?R[p]:void 0),this.data=R}else this.data=p}function mf(){Zh.call(this),this.status=1}function kl(p){this.g=p}(a=Qr.prototype).Ha=function(p){this.J=p},a.ea=function(p,R,k,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);R=R?R.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ef.g(),this.v=function Ry(p){return p.h||(p.h=p.i())}(this.o?this.o:ef),this.g.onreadystatechange=oe(this.Ea,this);try{this.B=!0,this.g.open(R,String(p),!0),this.B=!1}catch(qe){return void Wy(this,qe)}if(p=k||"",k=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var Se in W)k.set(Se,W[Se]);else{if("function"!=typeof W.keys||"function"!=typeof W.get)throw Error("Unknown input type for opt_headers: "+String(W));for(const qe of W.keys())k.set(qe,W.get(qe))}W=Array.from(k.keys()).find(qe=>"content-type"==qe.toLowerCase()),Se=T.FormData&&p instanceof T.FormData,!(0<=Array.prototype.indexOf.call(Gy,R,void 0))||W||Se||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[qe,Ct]of k)this.g.setRequestHeader(qe,Ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wp(this),this.u=!0,this.g.send(p),this.u=!1}catch(qe){Wy(this,qe)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ds(this,"complete"),Ds(this,"abort"),ff(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ff(this,!0)),Qr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?ME(this):this.bb())},a.bb=function(){ME(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Vi(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var R=this.g.responseText;return p&&0==R.indexOf(p)&&(R=R.substring(p.length)),by(R)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=ko.prototype).la=8,a.G=1,a.connect=function(p,R,k,W){As(0),this.W=p,this.H=R||{},k&&void 0!==W&&(this.H.OSID=k,this.H.OAID=W),this.F=this.X,this.I=a_(this,null,this.W),qp(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Se=new Vc(this,this.j,p);let qe=this.o;if(this.S&&(qe?(qe=se(qe),Ie(qe,this.S)):qe=this.S),null!==this.m||this.O||(Se.H=qe,qe=null),this.P)e:{for(var R=0,k=0;k<this.i.length;k++){var W=this.i[k];if(void 0===(W="__data__"in W.map&&"string"==typeof(W=W.map.__data__)?W.length:void 0))break;if(4096<(R+=W)){R=k;break e}if(4096===R||k===this.i.length-1){R=k+1;break e}}R=1e3}else R=1e3;R=Kp(this,Se,R),Mr(k=Oo(this.I),"RID",p),Mr(k,"CVER",22),this.D&&Mr(k,"X-HTTP-Session-Id",this.D),gf(this,k),qe&&(this.O?R="headers="+encodeURIComponent(String(t_(qe)))+"&"+R:this.m&&jc(k,this.m,qe)),Km(this.h,Se),this.Ua&&Mr(k,"TYPE","init"),this.P?(Mr(k,"$req",R),Mr(k,"SID","null"),Se.T=!0,Vp(Se,k,null)):Vp(Se,k,R),this.G=2}}else 3==this.G&&(p?Zy(this,p):0==this.i.length||qm(this.h)||Zy(this))},a.Fa=function(){if(this.u=null,Qy(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Jh(oe(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,As(10),pf(this),Qy(this))},a.Za=function(){null!=this.C&&(this.C=null,pf(this),i_(this),As(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),As(2)):(this.j.info("Failed to ping google.com"),As(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=c_.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},Yp.prototype.g=function(p,R){return new ao(p,R)},it(ao,Ts),ao.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ao.prototype.close=function(){oo(this.g)},ao.prototype.o=function(p){var R=this.g;if("string"==typeof p){var k={};k.__data__=p,p=k}else this.u&&((k={}).__data__=Ml(p),p=k);R.i.push(new class{constructor(p,R){this.g=p,this.map=R}}(R.Ya++,p)),3==R.G&&qp(R)},ao.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,ao.aa.N.call(this)},it(Jp,$m),it(mf,Zh),it(kl,c_),kl.prototype.ua=function(){Ds(this.g,"a")},kl.prototype.ta=function(p){Ds(this.g,new Jp(p))},kl.prototype.sa=function(p){Ds(this.g,new mf)},kl.prototype.ra=function(){Ds(this.g,"b")},Yp.prototype.createWebChannel=Yp.prototype.g,ao.prototype.send=ao.prototype.o,ao.prototype.open=ao.prototype.m,ao.prototype.close=ao.prototype.close,fn=Wn.createWebChannelTransport=function(){return new Yp},nn=Wn.getStatEventTarget=function(){return Hm()},Kt=Wn.Event=Qa,Or=Wn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fp.NO_ERROR=0,Fp.TIMEOUT=8,Fp.HTTP_ERROR=6,Nr=Wn.ErrorCode=Fp,Gm.COMPLETE="complete",Yr=Wn.EventType=Gm,Py.EventType=Kh,Kh.OPEN="a",Kh.CLOSE="b",Kh.ERROR="c",Kh.MESSAGE="d",Ts.prototype.listen=Ts.prototype.K,oi=Wn.WebChannel=Py,Ui=Wn.FetchXmlHttpFactory=df,Qr.prototype.listenOnce=Qr.prototype.L,Qr.prototype.getLastError=Qr.prototype.Ka,Qr.prototype.getLastErrorCode=Qr.prototype.Ba,Qr.prototype.getStatus=Qr.prototype.Z,Qr.prototype.getResponseJson=Qr.prototype.Oa,Qr.prototype.getResponseText=Qr.prototype.oa,Qr.prototype.send=Qr.prototype.ea,Qr.prototype.setWithCredentials=Qr.prototype.Ha,hr=Wn.XhrIo=Qr}).apply(typeof bn<"u"?bn:typeof self<"u"?self:typeof window<"u"?window:{});const kn="@firebase/firestore";class An{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");let Wt="10.12.3";const cn=new kt.Yd("@firebase/firestore");function Cr(){return cn.logLevel}function be(a,...e){if(cn.logLevel<=kt.in.DEBUG){const r=e.map(as);cn.debug(`Firestore (${Wt}): ${a}`,...r)}}function xn(a,...e){if(cn.logLevel<=kt.in.ERROR){const r=e.map(as);cn.error(`Firestore (${Wt}): ${a}`,...r)}}function Zt(a,...e){if(cn.logLevel<=kt.in.WARN){const r=e.map(as);cn.warn(`Firestore (${Wt}): ${a}`,...r)}}function as(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function pt(a="Unexpected state"){const e=`FIRESTORE (${Wt}) INTERNAL ASSERTION FAILED: `+a;throw xn(e),new Error(e)}function bt(a,e){a||pt()}function gt(a,e){return a}const Me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tt extends Nt.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Un{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class us{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(An.UNAUTHENTICATED))}shutdown(){}}class Cs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Bi{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;let u=this.i;const h=O=>this.i!==u?(u=this.i,r(O)):Promise.resolve();let g=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Un,e.enqueueRetryable(()=>h(this.currentUser))};const T=()=>{const O=g;e.enqueueRetryable((0,ce.Z)(function*(){yield O.promise,yield h(s.currentUser)}))},b=O=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=O,this.auth.addAuthTokenListener(this.o),T()};this.t.onInit(O=>b(O)),setTimeout(()=>{if(!this.auth){const O=this.t.getImmediate({optional:!0});O?b(O):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Un)}},0),T()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt("string"==typeof s.accessToken),new us(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return bt(null===e||"string"==typeof e),new An(e)}}class Ss{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=An.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class G{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Ss(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(An.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const s=h=>{null!=h.error&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const g=h.token!==this.R;return this.R=h.token,be("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?r(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const u=h=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>u(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?u(h):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(bt("string"==typeof r.token),this.R=r.token,new j(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ee(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class je{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const u=ee(40);for(let h=0;h<u.length;++h)s.length<20&&u[h]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[h]%62))}return s}}function We(a,e){return a<e?-1:a>e?1:0}function Et(a,e,r){return a.length===e.length&&a.every((s,u)=>r(s,e[u]))}function ln(a){return a+"\0"}class ft{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new tt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new tt(Me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new tt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new tt(Me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ft.fromMillis(Date.now())}static fromDate(e){return ft.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new ft(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new ft(0,0))}static max(){return new mt(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Bt{constructor(e,r,s){void 0===r?r=0:r>e.length&&pt(),void 0===s?s=e.length-r:s>e.length-r&&pt(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Bt.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Bt?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let u=0;u<s;u++){const h=e.get(u),g=r.get(u);if(h<g)return-1;if(h>g)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Ht extends Bt{construct(e,r,s){return new Ht(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new tt(Me.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new Ht(r)}static emptyPath(){return new Ht([])}}const Ki=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends Bt{construct(e,r,s){return new Bn(e,r,s)}static isValidIdentifier(e){return Ki.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const r=[];let s="",u=0;const h=()=>{if(0===s.length)throw new tt(Me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let g=!1;for(;u<e.length;){const T=e[u];if("\\"===T){if(u+1===e.length)throw new tt(Me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[u+1];if("\\"!==b&&"."!==b&&"`"!==b)throw new tt(Me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=b,u+=2}else"`"===T?(g=!g,u++):"."!==T||g?(s+=T,u++):(h(),u++)}if(h(),g)throw new tt(Me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(r)}static emptyPath(){return new Bn([])}}class vt{constructor(e){this.path=e}static fromPath(e){return new vt(Ht.fromString(e))}static fromName(e){return new vt(Ht.fromString(e).popFirst(5))}static empty(){return new vt(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ht.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Ht.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vt(new Ht(e.slice()))}}class ir{constructor(e,r,s,u){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=u}}function ai(a){return a.fields.find(e=>2===e.kind)}function kr(a){return a.fields.filter(e=>2!==e.kind)}ir.UNKNOWN_ID=-1;class rn{constructor(e,r){this.fieldPath=e,this.kind=r}}class Ee{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Ee(0,Ot.min())}}function Je(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,u=mt.fromTimestamp(1e9===s?new ft(r+1,0):new ft(r,s));return new Ot(u,vt.empty(),e)}function At(a){return new Ot(a.readTime,a.key,-1)}class Ot{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new Ot(mt.min(),vt.empty(),-1)}static max(){return new Ot(mt.max(),vt.empty(),-1)}}function $t(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=vt.comparator(a.documentKey,e.documentKey),0!==r?r:We(a.largestBatchId,e.largestBatchId))}const pn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nn(a){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,ce.Z)(function*(a){if(a.code!==Me.FAILED_PRECONDITION||a.message!==pn)throw a;be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new we((s,u)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,u)},this.catchCallback=h=>{this.wrapFailure(r,h).next(s,u)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof we?r:we.resolve(r)}catch(r){return we.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):we.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):we.reject(r)}static resolve(e){return new we((r,s)=>{r(e)})}static reject(e){return new we((r,s)=>{s(e)})}static waitFor(e){return new we((r,s)=>{let u=0,h=0,g=!1;e.forEach(T=>{++u,T.next(()=>{++h,g&&h===u&&r()},b=>s(b))}),g=!0,h===u&&r()})}static or(e){let r=we.resolve(!1);for(const s of e)r=r.next(u=>u?we.resolve(u):s());return r}static forEach(e,r){const s=[];return e.forEach((u,h)=>{s.push(r.call(this,u,h))}),this.waitFor(s)}static mapArray(e,r){return new we((s,u)=>{const h=e.length,g=new Array(h);let T=0;for(let b=0;b<h;b++){const O=b;r(e[O]).next(H=>{g[O]=H,++T,T===h&&s(g)},H=>u(H))}})}static doWhile(e,r){return new we((s,u)=>{const h=()=>{!0===e()?r().next(()=>{h()},u):s()};h()})}}class Hr{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new Un,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Zi(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const u=Uo(s.target.error);this.V.reject(new Zi(e,u))}}static open(e,r,s,u){try{return new Hr(r,e.transaction(u,s))}catch(h){throw new Zi(r,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new lo(r)}}class on{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===on.S((0,Nt.z$)())&&xn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return be("SimpleDb","Removing database:",e),Sr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Nt.hl)())return!1;if(on.C())return!0;const e=(0,Nt.z$)(),r=on.S(e),s=0<r&&r<10,u=co(e),h=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,ce.Z)(function*(){return r.db||(be("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,u)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=g=>{s(g.target.result)},h.onblocked=()=>{u(new Zi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=g=>{const T=g.target.error;u("VersionError"===T.name?new tt(Me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===T.name?new tt(Me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+T):new Zi(e,T))},h.onupgradeneeded=g=>{be("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.p.O(g.target.result,h.transaction,g.oldVersion,r.version).next(()=>{be("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,u){var h=this;return(0,ce.Z)(function*(){const g="readonly"===r;let T=0;for(;;){++T;try{h.db=yield h.M(e);const b=Hr.open(h.db,e,g?"readonly":"readwrite",s),O=u(b).next(H=>(b.g(),H)).catch(H=>(b.abort(H),we.reject(H))).toPromise();return O.catch(()=>{}),yield b.m,O}catch(b){const O=b,H="FirebaseError"!==O.name&&T<3;if(be("SimpleDb","Transaction failed with error:",O.message,"Retrying:",H),h.close(),!H)return Promise.reject(O)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function co(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class _i{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Sr(this.B.delete())}}class Zi extends tt{constructor(e,r){super(Me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function zr(a){return"IndexedDbTransactionError"===a.name}class lo{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(be("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Sr(s)}add(e){return be("SimpleDb","ADD",this.store.name,e,e),Sr(this.store.add(e))}get(e){return Sr(this.store.get(e)).next(r=>(void 0===r&&(r=null),be("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return be("SimpleDb","DELETE",this.store.name,e),Sr(this.store.delete(e))}count(){return be("SimpleDb","COUNT",this.store.name),Sr(this.store.count())}U(e,r){const s=this.options(e,r),u=s.index?this.store.index(s.index):this.store;if("function"==typeof u.getAll){const h=u.getAll(s.range);return new we((g,T)=>{h.onerror=b=>{T(b.target.error)},h.onsuccess=b=>{g(b.target.result)}})}{const h=this.cursor(s),g=[];return this.W(h,(T,b)=>{g.push(b)}).next(()=>g)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new we((u,h)=>{s.onerror=g=>{h(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}j(e,r){be("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const u=this.cursor(s);return this.W(u,(h,g,T)=>T.delete())}J(e,r){let s;r?s=e:(s={},r=e);const u=this.cursor(s);return this.W(u,r)}Y(e){const r=this.cursor({});return new we((s,u)=>{r.onerror=h=>{const g=Uo(h.target.error);u(g)},r.onsuccess=h=>{const g=h.target.result;g?e(g.primaryKey,g.value).next(T=>{T?g.continue():s()}):s()}})}W(e,r){const s=[];return new we((u,h)=>{e.onerror=g=>{h(g.target.error)},e.onsuccess=g=>{const T=g.target.result;if(!T)return void u();const b=new _i(T),O=r(T.primaryKey,T.value,b);if(O instanceof we){const H=O.catch(K=>(b.done(),we.reject(K)));s.push(H)}b.isDone?u():null===b.K?T.continue():T.continue(b.K)}}).next(()=>we.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Sr(a){return new we((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const u=Uo(s.target.error);r(u)}})}let Vu=!1;function Uo(a){const e=on.S((0,Nt.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vu||(Vu=!0,setTimeout(()=>{throw s},0)),s}}return a}class Fl{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;be("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ce.Z)(function*(){r.task=null;try{be("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){zr(s)?be("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Nn(s)}yield r.X(6e4)}))}}class Uu{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,ce.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let u=r,h=!0;return we.doWhile(()=>!0===h&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return be("IndexBackfiller",`Processing collection: ${g}`),this.ne(e,g,u).next(T=>{u-=T,s.add(g)});h=!1})).next(()=>r-u)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(u=>this.localStore.localDocuments.getNextDocuments(e,r,u,s).next(h=>{const g=h.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.re(u,h)).next(T=>(be("IndexBackfiller",`Updating offset: ${T}`),this.localStore.indexManager.updateCollectionGroup(e,r,T))).next(()=>g.size)}))}re(e,r){let s=e;return r.changes.forEach((u,h)=>{const g=At(h);$t(g,s)>0&&(s=g)}),new Ot(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let ui=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=u=>this.ie(u),this.se=u=>s.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ho(a){return null==a}function cs(a){return 0===a&&1/a==-1/0}function Bo(a){return"number"==typeof a&&Number.isInteger(a)&&!cs(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Qn(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=fo(e)),e=$c(a.get(r),e);return fo(e)}function $c(a,e){let r=e;const s=a.length;for(let u=0;u<s;u++){const h=a.charAt(u);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function fo(a){return a+"\x01\x01"}function Ni(a){const e=a.length;if(bt(e>=2),2===e)return bt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Ht.emptyPath();const r=e-2,s=[];let u="";for(let h=0;h<e;){const g=a.indexOf("\x01",h);switch((g<0||g>r)&&pt(),a.charAt(g+1)){case"\x01":const T=a.substring(h,g);let b;0===u.length?b=T:(u+=T,b=u,u=""),s.push(b);break;case"\x10":u+=a.substring(h,g),u+="\0";break;case"\x11":u+=a.substring(h,g+1);break;default:pt()}h=g+2}return new Ht(s)}const aa=["userId","batchId"];function ua(a,e){return[a,Qn(e)]}function jo(a,e,r){return[a,Qn(e),r]}const $o={},ca=["prefixPath","collectionGroup","readTime","documentId"],la=["prefixPath","collectionGroup","documentId"],ls=["collectionGroup","readTime","prefixPath","documentId"],hn=["canonicalId","targetId"],sr=["targetId","path"],Gr=["path","targetId"],ds=["collectionId","parent"],yi=["indexId","uid"],Qi=["uid","sequenceNumber"],Xa=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],po=["indexId","uid","orderedDocumentKey"],da=["userId","collectionPath","documentId"],Ho=["userId","collectionPath","largestBatchId"],Yn=["userId","collectionGroup","largestBatchId"],Dt=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],an=[...Dt,"documentOverlays"],$n=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wr=$n,Bs=[...Wr,"indexConfiguration","indexState","indexEntries"],Fr=Bs;class ji extends qn{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function En(a,e){const r=gt(a);return on.F(r._e,e)}function Xr(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function vi(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function js(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Gn{constructor(e,r){this.comparator=e,this.root=r||dn.EMPTY}insert(e,r){return new Gn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new Gn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ei(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ei(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ei(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ei(this.root,e,this.comparator,!0)}}class Ei{constructor(e,r,s,u){this.isReverse=u,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=r?s(e.key,r):1,r&&u&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,r,s,u,h){this.key=e,this.value=r,this.color=s??dn.RED,this.left=u??dn.EMPTY,this.right=h??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,u,h){return new dn(e??this.key,r??this.value,s??this.color,u??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let u=this;const h=s(e,u.key);return u=h<0?u.copy(null,null,null,u.left.insert(e,r,s),null):0===h?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(e,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,u=this;if(r(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(e,u.key)){if(u.right.isEmpty())return dn.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();const e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1,dn.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,r,s,u,h){return this}insert(e,r,s){return new dn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new Gn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;r(u.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new bs(this.data.getIterator())}getIteratorFrom(e){return new bs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,h=s.getNext().key;if(0!==this.comparator(u,h))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ln(this.comparator);return r.data=e,r}}class bs{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function or(a){return a.hasNext()?a.getNext():void 0}class Ur{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Ur([])}unionWith(e){let r=new Ln(Bn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new Ur(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Et(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class eu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Jn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(u){try{return atob(u)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new eu("Invalid base64 string: "+h):h}}(e);return new Jn(r)}static fromUint8Array(e){const r=function(u){let h="";for(let g=0;g<u.length;++g)h+=String.fromCharCode(u[g]);return h}(e);return new Jn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const Hs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(a){if(bt(!!a),"string"==typeof a){let e=0;const r=Hs.exec(a);if(bt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:jt(a.seconds),nanos:jt(a.nanos)}}function jt(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Rs(a){return"string"==typeof a?Jn.fromBase64String(a):Jn.fromUint8Array(a)}function Yi(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ar(a){const e=a.mapValue.fields.__previous_value__;return Yi(e)?ar(e):e}function ci(a){const e=Ii(a.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}class zs{constructor(e,r,s,u,h,g,T,b,O){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=T,this.longPollingOptions=b,this.useFetchStreams=O}}class qr{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new qr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qr&&e.projectId===this.projectId&&e.database===this.database}}const $i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ir={nullValue:"NULL_VALUE"};function ei(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Yi(a)?4:Vl(a)?9007199254740991:10:pt()}function Hn(a,e){if(a===e)return!0;const r=ei(a);if(r!==ei(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return ci(a).isEqual(ci(e));case 3:return function(u,h){if("string"==typeof u.timestampValue&&"string"==typeof h.timestampValue&&u.timestampValue.length===h.timestampValue.length)return u.timestampValue===h.timestampValue;const g=Ii(u.timestampValue),T=Ii(h.timestampValue);return g.seconds===T.seconds&&g.nanos===T.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return h=e,Rs(a.bytesValue).isEqual(Rs(h.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(u,h){return jt(u.geoPointValue.latitude)===jt(h.geoPointValue.latitude)&&jt(u.geoPointValue.longitude)===jt(h.geoPointValue.longitude)}(a,e);case 2:return function(u,h){if("integerValue"in u&&"integerValue"in h)return jt(u.integerValue)===jt(h.integerValue);if("doubleValue"in u&&"doubleValue"in h){const g=jt(u.doubleValue),T=jt(h.doubleValue);return g===T?cs(g)===cs(T):isNaN(g)&&isNaN(T)}return!1}(a,e);case 9:return Et(a.arrayValue.values||[],e.arrayValue.values||[],Hn);case 10:return function(u,h){const g=u.mapValue.fields||{},T=h.mapValue.fields||{};if(Xr(g)!==Xr(T))return!1;for(const b in g)if(g.hasOwnProperty(b)&&(void 0===T[b]||!Hn(g[b],T[b])))return!1;return!0}(a,e);default:return pt()}var h}function ur(a,e){return void 0!==(a.values||[]).find(r=>Hn(r,e))}function Hi(a,e){if(a===e)return 0;const r=ei(a),s=ei(e);if(r!==s)return We(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return We(a.booleanValue,e.booleanValue);case 2:return function(h,g){const T=jt(h.integerValue||h.doubleValue),b=jt(g.integerValue||g.doubleValue);return T<b?-1:T>b?1:T===b?0:isNaN(T)?isNaN(b)?0:-1:1}(a,e);case 3:return wi(a.timestampValue,e.timestampValue);case 4:return wi(ci(a),ci(e));case 5:return We(a.stringValue,e.stringValue);case 6:return function(h,g){const T=Rs(h),b=Rs(g);return T.compareTo(b)}(a.bytesValue,e.bytesValue);case 7:return function(h,g){const T=h.split("/"),b=g.split("/");for(let O=0;O<T.length&&O<b.length;O++){const H=We(T[O],b[O]);if(0!==H)return H}return We(T.length,b.length)}(a.referenceValue,e.referenceValue);case 8:return function(h,g){const T=We(jt(h.latitude),jt(g.latitude));return 0!==T?T:We(jt(h.longitude),jt(g.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return function(h,g){const T=h.values||[],b=g.values||[];for(let O=0;O<T.length&&O<b.length;++O){const H=Hi(T[O],b[O]);if(H)return H}return We(T.length,b.length)}(a.arrayValue,e.arrayValue);case 10:return function(h,g){if(h===$i.mapValue&&g===$i.mapValue)return 0;if(h===$i.mapValue)return 1;if(g===$i.mapValue)return-1;const T=h.fields||{},b=Object.keys(T),O=g.fields||{},H=Object.keys(O);b.sort(),H.sort();for(let K=0;K<b.length&&K<H.length;++K){const oe=We(b[K],H[K]);if(0!==oe)return oe;const Re=Hi(T[b[K]],O[H[K]]);if(0!==Re)return Re}return We(b.length,H.length)}(a.mapValue,e.mapValue);default:throw pt()}}function wi(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return We(a,e);const r=Ii(a),s=Ii(e),u=We(r.seconds,s.seconds);return 0!==u?u:We(r.nanos,s.nanos)}function Ti(a){return Di(a)}function Di(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=Ii(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Rs(a.bytesValue).toBase64():"referenceValue"in a?vt.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",u=!0;for(const h of r.values||[])u?u=!1:s+=",",s+=Di(h);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const g of s)h?h=!1:u+=",",u+=`${g}:${Di(r.fields[g])}`;return u+"}"}(a.mapValue):pt()}function Gi(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function hs(a){return!!a&&"integerValue"in a}function ha(a){return!!a&&"arrayValue"in a}function tu(a){return!!a&&"nullValue"in a}function fa(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function li(a){return!!a&&"mapValue"in a}function pa(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return vi(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=pa(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=pa(a.arrayValue.values[r]);return e}return Object.assign({},a)}function Vl(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}function vr(a){return"nullValue"in a?Ir:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Gi(qr.empty(),vt.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?{mapValue:{}}:pt()}function Bu(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Gi(qr.empty(),vt.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?{mapValue:{}}:"mapValue"in a?$i:pt()}function ju(a,e){const r=Hi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function ga(a,e){const r=Hi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!li(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=pa(r)}setAll(e){let r=Bn.emptyPath(),s={},u=[];e.forEach((g,T)=>{if(!r.isImmediateParentOf(T)){const b=this.getFieldsMap(r);this.applyChanges(b,s,u),s={},u=[],r=T.popLast()}g?s[T.lastSegment()]=pa(g):u.push(T.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,s,u)}delete(e){const r=this.field(e.popLast());li(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Hn(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=r.mapValue.fields[e.get(s)];li(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(e,r,s){vi(r,(u,h)=>e[u]=h);for(const u of s)delete e[u]}clone(){return new br(pa(this.value))}}function $u(a){const e=[];return vi(a.fields,(r,s)=>{const u=new Bn([r]);if(li(s)){const h=$u(s.mapValue).fields;if(0===h.length)e.push(u);else for(const g of h)e.push(u.child(g))}else e.push(u)}),new Ur(e)}class nr{constructor(e,r,s,u,h,g,T){this.key=e,this.documentType=r,this.version=s,this.readTime=u,this.createTime=h,this.data=g,this.documentState=T}static newInvalidDocument(e){return new nr(e,0,mt.min(),mt.min(),mt.min(),br.empty(),0)}static newFoundDocument(e,r,s,u){return new nr(e,1,r,mt.min(),s,u,0)}static newNoDocument(e,r){return new nr(e,2,r,mt.min(),mt.min(),br.empty(),0)}static newUnknownDocument(e,r){return new nr(e,3,r,mt.min(),mt.min(),br.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof nr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ps{constructor(e,r){this.position=e,this.inclusive=r}}function ma(a,e,r){let s=0;for(let u=0;u<a.position.length;u++){const h=e[u],g=a.position[u];if(s=h.field.isKeyField()?vt.comparator(vt.fromName(g.referenceValue),r.key):Hi(g,r.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function _a(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!Hn(a.position[r],e.position[r]))return!1;return!0}class go{constructor(e,r="asc"){this.field=e,this.dir=r}}function Hc(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class nu{}class Rn extends nu{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new mo(e,r,s):"array-contains"===r?new Go(e,s):"in"===r?new Wo(e,s):"not-in"===r?new ru(e,s):"array-contains-any"===r?new zc(e,s):new Rn(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new Gs(e,s):new _o(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(Hi(r,this.value)):null!==r&&ei(this.value)===ei(r)&&this.matchesComparison(Hi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends nu{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new In(e,r)}matches(e){return Br(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Br(a){return"and"===a.op}function Ji(a){return"or"===a.op}function ya(a){return fr(a)&&Br(a)}function fr(a){for(const e of a.filters)if(e instanceof In)return!1;return!0}function Xi(a){if(a instanceof Rn)return a.field.canonicalString()+a.op.toString()+Ti(a.value);if(ya(a))return a.filters.map(e=>Xi(e)).join(",");{const e=a.filters.map(r=>Xi(r)).join(",");return`${a.op}(${e})`}}function di(a,e){return a instanceof Rn?(s=a,(u=e)instanceof Rn&&s.op===u.op&&s.field.isEqual(u.field)&&Hn(s.value,u.value)):a instanceof In?function(s,u){return u instanceof In&&s.op===u.op&&s.filters.length===u.filters.length&&s.filters.reduce((h,g,T)=>h&&di(g,u.filters[T]),!0)}(a,e):void pt();var s,u}function va(a,e){const r=a.filters.concat(e);return In.create(r,a.op)}function Hu(a){return a instanceof Rn?`${(r=a).field.canonicalString()} ${r.op} ${Ti(r.value)}`:a instanceof In?function(r){return r.op.toString()+" {"+r.getFilters().map(Hu).join(" ,")+"}"}(a):"Filter";var r}class mo extends Rn{constructor(e,r,s){super(e,r,s),this.key=vt.fromName(s.referenceValue)}matches(e){const r=vt.comparator(e.key,this.key);return this.matchesComparison(r)}}class Gs extends Rn{constructor(e,r){super(e,"in",r),this.keys=zo(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class _o extends Rn{constructor(e,r){super(e,"not-in",r),this.keys=zo(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function zo(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>vt.fromName(s.referenceValue))}class Go extends Rn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ha(r)&&ur(r.arrayValue,this.value)}}class Wo extends Rn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&ur(this.value.arrayValue,r)}}class ru extends Rn{constructor(e,r){super(e,"not-in",r)}matches(e){if(ur(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!ur(this.value.arrayValue,r)}}class zc extends Rn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ha(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>ur(this.value.arrayValue,s))}}class yo{constructor(e,r=null,s=[],u=[],h=null,g=null,T=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=h,this.startAt=g,this.endAt=T,this.ue=null}}function qo(a,e=null,r=[],s=[],u=null,h=null,g=null){return new yo(a,e,r,s,u,h,g)}function Ai(a){const e=gt(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>Xi(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(h=s).field.canonicalString()+h.dir;var h}).join(","),ho(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>Ti(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>Ti(s)).join(",")),e.ue=r}return e.ue}function fs(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Hc(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!di(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!_a(a.startAt,e.startAt)&&_a(a.endAt,e.endAt)}function Ws(a){return vt.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Ea(a,e){return a.filters.filter(r=>r instanceof Rn&&r.field.isEqual(e))}function zu(a,e,r){let s=Ir,u=!0;for(const h of Ea(a,e)){let g=Ir,T=!0;switch(h.op){case"<":case"<=":g=vr(h.value);break;case"==":case"in":case">=":g=h.value;break;case">":g=h.value,T=!1;break;case"!=":case"not-in":g=Ir}ju({value:s,inclusive:u},{value:g,inclusive:T})<0&&(s=g,u=T)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const g=r.position[h];ju({value:s,inclusive:u},{value:g,inclusive:r.inclusive})<0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}function Gc(a,e,r){let s=$i,u=!0;for(const h of Ea(a,e)){let g=$i,T=!0;switch(h.op){case">=":case">":g=Bu(h.value),T=!1;break;case"==":case"in":case"<=":g=h.value;break;case"<":g=h.value,T=!1;break;case"!=":case"not-in":g=$i}ga({value:s,inclusive:u},{value:g,inclusive:T})>0&&(s=g,u=T)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const g=r.position[h];ga({value:s,inclusive:u},{value:g,inclusive:r.inclusive})>0&&(s=g,u=r.inclusive);break}return{value:s,inclusive:u}}class ps{constructor(e,r=null,s=[],u=[],h=null,g="F",T=null,b=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=h,this.limitType=g,this.startAt=T,this.endAt=b,this.ce=null,this.le=null,this.he=null}}function Gu(a,e,r,s,u,h,g,T){return new ps(a,e,r,s,u,h,g,T)}function qs(a){return new ps(a)}function Wu(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function Ia(a){return null!==a.collectionGroup}function Ks(a){const e=gt(a);if(null===e.ce){e.ce=[];const r=new Set;for(const h of e.explicitOrderBy)e.ce.push(h),r.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let T=new Ln(Bn.comparator);return g.filters.forEach(b=>{b.getFlattenedFilters().forEach(O=>{O.isInequality()&&(T=T.add(O.field))})}),T})(e).forEach(h=>{r.has(h.canonicalString())||h.isKeyField()||e.ce.push(new go(h,s))}),r.has(Bn.keyField().canonicalString())||e.ce.push(new go(Bn.keyField(),s))}return e.ce}function jr(a){const e=gt(a);return e.le||(e.le=function vo(a,e){if("F"===a.limitType)return qo(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(u=>new go(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new Ps(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Ps(a.startAt.position,a.startAt.inclusive):null;return qo(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,Ks(a))),e.le}function iu(a,e){const r=a.filters.concat([e]);return new ps(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function D(a,e,r){return new ps(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function U(a,e){return fs(jr(a),jr(e))&&a.limitType===e.limitType}function P(a){return`${Ai(jr(a))}|lt:${a.limitType}`}function L(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>Hu(u)).join(", ")}]`),ho(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>{return`${(g=u).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>Ti(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>Ti(u)).join(",")),`Target(${s})`}(jr(a))}; limitType=${a.limitType})`}function te(a,e){return e.isFoundDocument()&&function(s,u){const h=u.key.path;return null!==s.collectionGroup?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):vt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(a,e)&&function(s,u){for(const h of Ks(s))if(!h.field.isKeyField()&&null===u.data.field(h.field))return!1;return!0}(a,e)&&function(s,u){for(const h of s.filters)if(!h.matches(u))return!1;return!0}(a,e)&&(u=e,!((s=a).startAt&&!function(g,T,b){const O=ma(g,T,b);return g.inclusive?O<=0:O<0}(s.startAt,Ks(s),u)||s.endAt&&!function(g,T,b){const O=ma(g,T,b);return g.inclusive?O>=0:O>0}(s.endAt,Ks(s),u)));var s,u}function Fe(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function nt(a){return(e,r)=>{let s=!1;for(const u of Ks(a)){const h=Ut(u,e,r);if(0!==h)return h;s=s||u.field.isKeyField()}return 0}}function Ut(a,e,r){const s=a.field.isKeyField()?vt.comparator(e.key,r.key):function(h,g,T){const b=g.data.field(h),O=T.data.field(h);return null!==b&&null!==O?Hi(b,O):pt()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return pt()}}class Cn{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[u,h]of s)if(this.equalsFn(u,e))return h}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,r]],void this.innerSize++;for(let h=0;h<u.length;h++)if(this.equalsFn(u[h][0],e))return void(u[h]=[e,r]);u.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,(r,s)=>{for(const[u,h]of s)e(u,h)})}isEmpty(){return js(this.inner)}size(){return this.innerSize}}const Xn=new Gn(vt.comparator);function un(){return Xn}const mn=new Gn(vt.comparator);function er(...a){let e=mn;for(const r of a)e=e.insert(r.key,r);return e}function zn(a){let e=mn;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function Kn(){return pr()}function es(){return pr()}function pr(){return new Cn(a=>a.toString(),(a,e)=>a.isEqual(e))}const Ms=new Gn(vt.comparator),Ci=new Ln(vt.comparator);function tn(...a){let e=Ci;for(const r of a)e=e.add(r);return e}const Kr=new Ln(We);function gs(){return Kr}function Si(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cs(e)?"-0":e}}function cr(a){return{integerValue:""+a}}function qu(a,e){return Bo(e)?cr(e):Si(a,e)}class Zs{constructor(){this._=void 0}}function ti(a,e,r){return a instanceof Qs?function(u,h){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return h&&Yi(h)&&(h=ar(h)),h&&(g.fields.__previous_value__=h),{mapValue:g}}(r,e):a instanceof ni?Ud(a,e):a instanceof Eo?Bl(a,e):function(u,h){const g=Ku(u,h),T=wa(g)+wa(u.Pe);return hs(g)&&hs(u.Pe)?cr(T):Si(u.serializer,T)}(a,e)}function Vd(a,e,r){return a instanceof ni?Ud(a,e):a instanceof Eo?Bl(a,e):r}function Ku(a,e){return a instanceof ms?hs(s=e)||(h=s)&&"doubleValue"in h?e:{integerValue:0}:null;var s,h}class Qs extends Zs{}class ni extends Zs{constructor(e){super(),this.elements=e}}function Ud(a,e){const r=hi(e);for(const s of a.elements)r.some(u=>Hn(u,s))||r.push(s);return{arrayValue:{values:r}}}class Eo extends Zs{constructor(e){super(),this.elements=e}}function Bl(a,e){let r=hi(e);for(const s of a.elements)r=r.filter(u=>!Hn(u,s));return{arrayValue:{values:r}}}class ms extends Zs{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function wa(a){return jt(a.integerValue||a.doubleValue)}function hi(a){return ha(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Io{constructor(e,r){this.field=e,this.transform=r}}class jd{constructor(e,r){this.version=e,this.transformResults=r}}class wr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jt(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class Ta{}function Wc(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new To(a.key,wr.none()):new ts(a.key,a.data,wr.none());{const r=a.data,s=br.empty();let u=new Ln(Bn.comparator);for(let h of e.fields)if(!u.has(h)){let g=r.field(h);null===g&&h.length>1&&(h=h.popLast(),g=r.field(h)),null===g?s.delete(h):s.set(h,g),u=u.add(h)}return new wo(a.key,s,new Ur(u.toArray()),wr.none())}}function qc(a,e,r){a instanceof ts?function(u,h,g){const T=u.value.clone(),b=Hd(u.fieldTransforms,h,g.transformResults);T.setAll(b),h.convertToFoundDocument(g.version,T).setHasCommittedMutations()}(a,e,r):a instanceof wo?function(u,h,g){if(!Jt(u.precondition,h))return void h.convertToUnknownDocument(g.version);const T=Hd(u.fieldTransforms,h,g.transformResults),b=h.data;b.setAll($d(u)),b.setAll(T),h.convertToFoundDocument(g.version,b).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Ko(a,e,r,s){return a instanceof ts?function(h,g,T,b){if(!Jt(h.precondition,g))return T;const O=h.value.clone(),H=zd(h.fieldTransforms,b,g);return O.setAll(H),g.convertToFoundDocument(g.version,O).setHasLocalMutations(),null}(a,e,r,s):a instanceof wo?function(h,g,T,b){if(!Jt(h.precondition,g))return T;const O=zd(h.fieldTransforms,b,g),H=g.data;return H.setAll($d(h)),H.setAll(O),g.convertToFoundDocument(g.version,H).setHasLocalMutations(),null===T?null:T.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(K=>K.field))}(a,e,r,s):(T=r,Jt(a.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):T);var g,T}function Ef(a,e){let r=null;for(const s of a.fieldTransforms){const u=e.data.field(s.field),h=Ku(s.transform,u||null);null!=h&&(null===r&&(r=br.empty()),r.set(s.field,h))}return r||null}function Zo(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===u||s&&u&&Et(s,u,(h,g)=>function Bd(a,e){return a.field.isEqual(e.field)&&(u=e.transform,(s=a.transform)instanceof ni&&u instanceof ni||s instanceof Eo&&u instanceof Eo?Et(s.elements,u.elements,Hn):s instanceof ms&&u instanceof ms?Hn(s.Pe,u.Pe):s instanceof Qs&&u instanceof Qs);var s,u}(h,g))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,u}class ts extends Ta{constructor(e,r,s,u=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class wo extends Ta{constructor(e,r,s,u,h=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function $d(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function Hd(a,e,r){const s=new Map;bt(a.length===r.length);for(let u=0;u<r.length;u++){const h=a[u],g=h.transform,T=e.data.field(h.field);s.set(h.field,Vd(g,T,r[u]))}return s}function zd(a,e,r){const s=new Map;for(const u of a){const h=u.transform,g=r.data.field(u.field);s.set(u.field,ti(h,g,e))}return s}class To extends Ta{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ut extends Ta{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _n{constructor(e,r,s,u){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const h=this.mutations[u];h.key.isEqual(e.key)&&qc(h,e,s[u])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Ko(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Ko(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=es();return this.mutations.forEach(u=>{const h=e.get(u.key),g=h.overlayedDocument;let T=this.applyToLocalView(g,h.mutatedFields);T=r.has(u.key)?null:T;const b=Wc(g,T);null!==b&&s.set(u.key,b),g.isValidDocument()||g.convertToNoDocument(mt.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),tn())}isEqual(e){return this.batchId===e.batchId&&Et(this.mutations,e.mutations,(r,s)=>Zo(r,s))&&Et(this.baseMutations,e.baseMutations,(r,s)=>Zo(r,s))}}class Zu{constructor(e,r,s,u){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(e,r,s){bt(e.mutations.length===s.length);let u=Ms;const h=e.mutations;for(let g=0;g<h.length;g++)u=u.insert(h[g].key,s[g].version);return new Zu(e,r,s,u)}}class Qu{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jl{constructor(e,r){this.count=e,this.unchangedNames=r}}var yn,vn;function Da(a){switch(a){default:return pt();case Me.CANCELLED:case Me.UNKNOWN:case Me.DEADLINE_EXCEEDED:case Me.RESOURCE_EXHAUSTED:case Me.INTERNAL:case Me.UNAVAILABLE:case Me.UNAUTHENTICATED:return!1;case Me.INVALID_ARGUMENT:case Me.NOT_FOUND:case Me.ALREADY_EXISTS:case Me.PERMISSION_DENIED:case Me.FAILED_PRECONDITION:case Me.ABORTED:case Me.OUT_OF_RANGE:case Me.UNIMPLEMENTED:case Me.DATA_LOSS:return!0}}function su(a){if(void 0===a)return xn("GRPC error has no .code"),Me.UNKNOWN;switch(a){case yn.OK:return Me.OK;case yn.CANCELLED:return Me.CANCELLED;case yn.UNKNOWN:return Me.UNKNOWN;case yn.DEADLINE_EXCEEDED:return Me.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return Me.RESOURCE_EXHAUSTED;case yn.INTERNAL:return Me.INTERNAL;case yn.UNAVAILABLE:return Me.UNAVAILABLE;case yn.UNAUTHENTICATED:return Me.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return Me.INVALID_ARGUMENT;case yn.NOT_FOUND:return Me.NOT_FOUND;case yn.ALREADY_EXISTS:return Me.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return Me.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return Me.FAILED_PRECONDITION;case yn.ABORTED:return Me.ABORTED;case yn.OUT_OF_RANGE:return Me.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return Me.UNIMPLEMENTED;case yn.DATA_LOSS:return Me.DATA_LOSS;default:return pt()}}(vn=yn||(yn={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";function If(){return new TextEncoder}const Gd=new gn([4294967295,4294967295],0);function fi(a){const e=If().encode(a),r=new Fn;return r.update(e),new Uint8Array(r.digest())}function Ys(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),u=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new gn([r,s],0),new gn([u,h],0)]}class Ca{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new xs(`Invalid padding: ${r}`);if(s<0)throw new xs(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new xs(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new xs(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=gn.fromNumber(this.Ie)}Ee(e,r,s){let u=e.add(r.multiply(gn.fromNumber(s)));return 1===u.compare(Gd)&&(u=new gn([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=fi(e),[s,u]=Ys(r);for(let h=0;h<this.hashCount;h++){const g=this.Ee(s,u,h);if(!this.de(g))return!1}return!0}static create(e,r,s){const u=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),g=new Ca(h,u,r);return s.forEach(T=>g.insert(T)),g}insert(e){if(0===this.Ie)return;const r=fi(e),[s,u]=Ys(r);for(let h=0;h<this.hashCount;h++){const g=this.Ee(s,u,h);this.Ae(g)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class xs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class w{constructor(e,r,s,u,h){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const u=new Map;return u.set(e,C.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new w(mt.min(),u,new Gn(We),un(),tn())}}class C{constructor(e,r,s,u,h){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new C(s,r,tn(),tn(),tn())}}class v{constructor(e,r,s,u){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=u}}class S{constructor(e,r){this.targetId=e,this.me=r}}class N{constructor(e,r,s=Jn.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=u}}class z{constructor(){this.fe=0,this.ge=xe(),this.pe=Jn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=tn(),r=tn(),s=tn();return this.ge.forEach((u,h)=>{switch(h){case 0:e=e.add(u);break;case 2:r=r.add(u);break;case 1:s=s.add(u);break;default:pt()}}),new C(this.pe,this.ye,e,r,s)}ve(){this.we=!1,this.ge=xe()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ne{constructor(e){this.Le=e,this.Be=new Map,this.ke=un(),this.qe=Ve(),this.Qe=new Gn(We)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.ve(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:pt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,u)=>{this.ze(u)&&r(u)})}He(e){const r=e.targetId,s=e.me.count,u=this.Je(r);if(u){const h=u.target;if(Ws(h))if(0===s){const g=new vt(h.path);this.Ue(r,g,nr.newNoDocument(g,mt.min()))}else bt(1===s);else{const g=this.Ye(r);if(g!==s){const T=this.Ze(e),b=T?this.Xe(T,e,g):1;0!==b&&(this.je(r),this.Qe=this.Qe.insert(r,2===b?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:u=0},hashCount:h=0}=r;let g,T;try{g=Rs(s).toUint8Array()}catch(b){if(b instanceof eu)return Zt("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{T=new Ca(g,u,h)}catch(b){return Zt(b instanceof xs?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return 0===T.Ie?null:T}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let u=0;return s.forEach(h=>{const g=this.Le.tt(),T=`projects/${g.projectId}/databases/${g.database}/documents/${h.path.canonicalString()}`;e.mightContain(T)||(this.Ue(r,h,null),u++)}),u}rt(e){const r=new Map;this.Be.forEach((h,g)=>{const T=this.Je(g);if(T){if(h.current&&Ws(T.target)){const b=new vt(T.target.path);null!==this.ke.get(b)||this.it(g,b)||this.Ue(g,b,nr.newNoDocument(b,e))}h.be&&(r.set(g,h.Ce()),h.ve())}});let s=tn();this.qe.forEach((h,g)=>{let T=!0;g.forEachWhile(b=>{const O=this.Je(b);return!O||"TargetPurposeLimboResolution"===O.purpose||(T=!1,!1)}),T&&(s=s.add(h))}),this.ke.forEach((h,g)=>g.setReadTime(e));const u=new w(e,r,this.Qe,this.ke,s);return this.ke=un(),this.qe=Ve(),this.Qe=new Gn(We),u}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const u=this.Ge(e);this.it(e,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new z,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Ln(We),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||be("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Ve(){return new Gn(vt.comparator)}function xe(){return new Gn(vt.comparator)}const Rt={asc:"ASCENDING",desc:"DESCENDING"},wn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gr={and:"AND",or:"OR"};class Pn{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function ns(a,e){return a.useProto3Json||ho(e)?e:{value:e}}function _s(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qo(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function ou(a,e){return _s(a,e.toTimestamp())}function lr(a){return bt(!!a),mt.fromTimestamp(function(r){const s=Ii(r);return new ft(s.seconds,s.nanos)}(a))}function Sa(a,e){return bi(a,e).canonicalString()}function bi(a,e){const r=(u=a,new Ht(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?r:r.child(e)}function ba(a){const e=Ht.fromString(a);return bt(cg(e)),e}function mr(a,e){return Sa(a.databaseId,e.path)}function Ns(a,e){const r=ba(e);if(r.get(1)!==a.databaseId.projectId)throw new tt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new tt(Me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new vt(qd(r))}function wf(a,e){return Sa(a.databaseId,e)}function Tf(a){const e=ba(a);return 4===e.length?Ht.emptyPath():qd(e)}function Wd(a){return new Ht(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function qd(a){return bt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function $l(a,e,r){return{name:mr(a,e),fields:r.value.mapValue.fields}}function Kc(a,e,r){const s=Ns(a,e.name),u=lr(e.updateTime),h=e.createTime?lr(e.createTime):mt.min(),g=new br({mapValue:{fields:e.fields}}),T=nr.newFoundDocument(s,u,h,g);return r&&T.setHasCommittedMutations(),r?T.setHasCommittedMutations():T}function Do(a,e){let r;if(e instanceof ts)r={update:$l(a,e.key,e.value)};else if(e instanceof To)r={delete:mr(a,e.key)};else if(e instanceof wo)r={update:$l(a,e.key,e.data),updateMask:I_(e.fieldMask)};else{if(!(e instanceof ut))return pt();r={verify:mr(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(h,g){const T=g.transform;if(T instanceof Qs)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(T instanceof ni)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:T.elements}};if(T instanceof Eo)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:T.elements}};if(T instanceof ms)return{fieldPath:g.field.canonicalString(),increment:T.Pe};throw pt()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:ou(a,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:pt()),r;var h}function Yu(a,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?wr.updateTime(lr(h.updateTime)):void 0!==h.exists?wr.exists(h.exists):wr.none():wr.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(g,T){let b=null;"setToServerValue"in T?(bt("REQUEST_TIME"===T.setToServerValue),b=new Qs):"appendMissingElements"in T?b=new ni(T.appendMissingElements.values||[]):"removeAllFromArray"in T?b=new Eo(T.removeAllFromArray.values||[]):"increment"in T?b=new ms(g,T.increment):pt();const O=Bn.fromServerFormat(T.fieldPath);return new Io(O,b)}(a,u)):[];var h;if(e.update){const u=Ns(a,e.update.name),h=new br({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new Ur((e.updateMask.fieldPaths||[]).map(H=>Bn.fromServerFormat(H)));return new wo(u,h,g,r,s)}return new ts(u,h,r,s)}if(e.delete){const u=Ns(a,e.delete);return new To(u,r)}if(e.verify){const u=Ns(a,e.verify);return new ut(u,r)}return pt()}function Hl(a,e){return{documents:[wf(a,e.path)]}}function au(a,e){const r={structuredQuery:{}},s=e.path;let u;null!==e.collectionGroup?(u=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=wf(a,u);const h=function(O){if(0!==O.length)return Af(In.create(O,"and"))}(e.filters);h&&(r.structuredQuery.where=h);const g=function(O){if(0!==O.length)return O.map(H=>{return{field:ys((oe=H).field),direction:ug(oe.dir)};var oe})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const T=ns(a,e.limit);return null!==T&&(r.structuredQuery.limit=T),e.startAt&&(r.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(r.structuredQuery.endAt=function(O){return{before:!O.inclusive,values:O.position}}(e.endAt)),{_t:r,parent:u};var O}function zl(a){let e=Tf(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){bt(1===s);const H=r.from[0];H.allDescendants?u=H.collectionId:e=e.child(H.collectionId)}let h=[];r.where&&(h=function(K){const oe=Pa(K);return oe instanceof In&&ya(oe)?oe.getFilters():[oe]}(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(oe=>{return new go(Ma((it=oe).field),function(at){switch(at){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(it.direction));var it}));let T=null;r.limit&&(T=function(K){let oe;return oe="object"==typeof K?K.value:K,ho(oe)?null:oe}(r.limit));let b=null;var K;r.startAt&&(b=new Ps((K=r.startAt).values||[],!!K.before));let O=null;return r.endAt&&(O=function(K){return new Ps(K.values||[],!K.before)}(r.endAt)),Gu(e,u,g,h,T,"F",b,O)}function Pa(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Ma(r.unaryFilter.field);return Rn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=Ma(r.unaryFilter.field);return Rn.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Ma(r.unaryFilter.field);return Rn.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Ma(r.unaryFilter.field);return Rn.create(g,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(a):void 0!==a.fieldFilter?Rn.create(Ma((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return In.create(r.compositeFilter.filters.map(s=>Pa(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return pt()}}(r.compositeFilter.op))}(a):pt();var r}function ug(a){return Rt[a]}function Df(a){return wn[a]}function uu(a){return gr[a]}function ys(a){return{fieldPath:a.canonicalString()}}function Ma(a){return Bn.fromServerFormat(a.fieldPath)}function Af(a){return a instanceof Rn?function(r){if("=="===r.op){if(fa(r.value))return{unaryFilter:{field:ys(r.field),op:"IS_NAN"}};if(tu(r.value))return{unaryFilter:{field:ys(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(fa(r.value))return{unaryFilter:{field:ys(r.field),op:"IS_NOT_NAN"}};if(tu(r.value))return{unaryFilter:{field:ys(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(r.field),op:Df(r.op),value:r.value}}}(a):a instanceof In?function(r){const s=r.getFilters().map(u=>Af(u));return 1===s.length?s[0]:{compositeFilter:{op:uu(r.op),filters:s}}}(a):pt()}function I_(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function cg(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class vs{constructor(e,r,s,u,h=mt.min(),g=mt.min(),T=Jn.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=T,this.expectedCount=b}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cu{constructor(e){this.ct=e}}function Xu(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:xa(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:mr(h=a.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:_s(h,g.version.toTimestamp()),createTime:_s(h,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:Ao(e.version)};else{if(!e.isUnknownDocument())return pt();s.unknownDocument={path:r.path.toArray(),version:Ao(e.version)}}var h,g;return s}function xa(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function Ao(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Na(a){const e=new ft(a.seconds,a.nanoseconds);return mt.fromTimestamp(e)}function Oa(a,e){const r=(e.baseMutations||[]).map(h=>Yu(a.ct,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const s=e.mutations.map(h=>Yu(a.ct,h)),u=ft.fromMillis(e.localWriteTimeMs);return new _n(e.batchId,u,r,s)}function ka(a){const e=Na(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Na(a.lastLimboFreeSnapshotVersion):mt.min();let s;return s=void 0!==a.query.documents?(bt(1===(h=a.query).documents.length),jr(qs(Tf(h.documents[0])))):function(h){return jr(zl(h))}(a.query),new vs(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,Jn.fromBase64String(a.resumeToken));var h}function Gl(a,e){const r=Ao(e.snapshotVersion),s=Ao(e.lastLimboFreeSnapshotVersion);let u;u=Ws(e.target)?Hl(a.ct,e.target):au(a.ct,e.target)._t;const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ai(e.target),readTime:r,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function Os(a){const e=zl({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?D(e,e.limit,"L"):e}function lu(a,e){return new Qu(e.largestBatchId,Yu(a.ct,e.overlayMutation))}function Zc(a,e){const r=e.path.lastSegment();return[a,Qn(e.path.popLast()),r]}function Wl(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:Ao(s.readTime),documentKey:Qn(s.documentKey.path),largestBatchId:s.largestBatchId}}class ql{getBundleMetadata(e,r){return du(e).get(r).next(s=>{if(s)return{id:(h=s).bundleId,createTime:Na(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return du(e).put({bundleId:(u=r).id,createTime:Ao(lr(u.createTime)),version:u.version});var u}getNamedQuery(e,r){return ec(e).get(r).next(s=>{if(s)return{name:(h=s).name,query:Os(h.bundledQuery),readTime:Na(h.readTime)};var h})}saveNamedQuery(e,r){return ec(e).put({name:(u=r).name,readTime:Ao(lr(u.readTime)),bundledQuery:u.bundledQuery});var u}}function du(a){return En(a,"bundles")}function ec(a){return En(a,"namedQueries")}class Kl{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new Kl(e,r.uid||"")}getOverlay(e,r){return La(e).get(Zc(this.userId,r)).next(s=>s?lu(this.serializer,s):null)}getOverlays(e,r){const s=Kn();return we.forEach(r,u=>this.getOverlay(e,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(e,r,s){const u=[];return s.forEach((h,g)=>{const T=new Qu(r,g);u.push(this.ht(e,T))}),we.waitFor(u)}removeOverlaysForBatchId(e,r,s){const u=new Set;r.forEach(g=>u.add(Qn(g.getCollectionPath())));const h=[];return u.forEach(g=>{const T=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);h.push(La(e).j("collectionPathOverlayIndex",T))}),we.waitFor(h)}getOverlaysForCollection(e,r,s){const u=Kn(),h=Qn(r),g=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,Number.POSITIVE_INFINITY],!0);return La(e).U("collectionPathOverlayIndex",g).next(T=>{for(const b of T){const O=lu(this.serializer,b);u.set(O.getKey(),O)}return u})}getOverlaysForCollectionGroup(e,r,s,u){const h=Kn();let g;const T=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return La(e).J({index:"collectionGroupOverlayIndex",range:T},(b,O,H)=>{const K=lu(this.serializer,O);h.size()<u||K.largestBatchId===g?(h.set(K.getKey(),K),g=K.largestBatchId):H.done()}).next(()=>h)}ht(e,r){return La(e).put(function(u,h,g){const[T,b,O]=Zc(h,g.mutation.key);return{userId:h,collectionPath:b,documentId:O,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Do(u.ct,g.mutation)}}(this.serializer,this.userId,r))}}function La(a){return En(a,"documentOverlays")}class Jo{constructor(){}Pt(e,r){this.It(e,r),r.Tt()}It(e,r){if("nullValue"in e)this.Et(r,5);else if("booleanValue"in e)this.Et(r,10),r.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(r,15),r.dt(jt(e.integerValue));else if("doubleValue"in e){const s=jt(e.doubleValue);isNaN(s)?this.Et(r,13):(this.Et(r,15),cs(s)?r.dt(0):r.dt(s))}else if("timestampValue"in e){let s=e.timestampValue;this.Et(r,20),"string"==typeof s&&(s=Ii(s)),r.At(`${s.seconds||""}`),r.dt(s.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,r),this.Vt(r);else if("bytesValue"in e)this.Et(r,30),r.ft(Rs(e.bytesValue)),this.Vt(r);else if("referenceValue"in e)this.gt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.Et(r,45),r.dt(s.latitude||0),r.dt(s.longitude||0)}else"mapValue"in e?Vl(e)?this.Et(r,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,r),this.Vt(r)):"arrayValue"in e?(this.wt(e.arrayValue,r),this.Vt(r)):pt()}Rt(e,r){this.Et(r,25),this.St(e,r)}St(e,r){r.At(e)}yt(e,r){const s=e.fields||{};this.Et(r,55);for(const u of Object.keys(s))this.Rt(u,r),this.It(s[u],r)}wt(e,r){const s=e.values||[];this.Et(r,50);for(const u of s)this.It(u,r)}gt(e,r){this.Et(r,37),vt.fromName(e).path.forEach(s=>{this.Et(r,60),this.St(s,r)})}Et(e,r){e.dt(r)}Vt(e){e.dt(2)}}function Zd(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function Qd(a){const e=64-function(s){let u=0;for(let h=0;h<8;++h){const g=Zd(255&s[h]);if(u+=g,8!==g)break}return u}(a);return Math.ceil(e/8)}Jo.bt=new Jo;class dg{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Ct(s.value),s=r.next();this.vt()}Ft(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.Mt(s.value),s=r.next();this.xt()}Ot(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Ct(s);else if(s<2048)this.Ct(960|s>>>6),this.Ct(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Ct(480|s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s);else{const u=r.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.Mt(s);else if(s<2048)this.Mt(960|s>>>6),this.Mt(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.Mt(480|s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s);else{const u=r.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Lt(e){const r=this.Bt(e),s=Qd(r);this.kt(1+s),this.buffer[this.position++]=255&s;for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=255&r[u]}qt(e){const r=this.Bt(e),s=Qd(r);this.kt(1+s),this.buffer[this.position++]=~(255&s);for(let u=r.length-s;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const r=function(h){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,h,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let u=1;u<r.length;++u)r[u]^=s?255:0;return r}Ct(e){const r=255&e;0===r?(this.Kt(0),this.Kt(255)):255===r?(this.Kt(255),this.Kt(0)):this.Kt(r)}Mt(e){const r=255&e;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class tc{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class hu{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Qc{constructor(){this.Gt=new dg,this.zt=new tc(this.Gt),this.jt=new hu(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Co{constructor(e,r,s,u){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=u}Jt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Co(this.indexId,this.documentKey,this.arrayValue,s)}}function Xo(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=nc(a.arrayValue,e.arrayValue),0!==r?r:(r=nc(a.directionalValue,e.directionalValue),0!==r?r:vt.comparator(a.documentKey,e.documentKey)))}function nc(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class Zl{constructor(e){this.Yt=new Ln((r,s)=>Bn.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const r of e.filters){const s=r;s.isInequality()?this.Yt=this.Yt.add(s):this.Xt.push(s)}}get en(){return this.Yt.size>1}tn(e){if(bt(e.collectionGroup===this.collectionId),this.en)return!1;const r=ai(e);if(void 0!==r&&!this.nn(r))return!1;const s=kr(e);let u=new Set,h=0,g=0;for(;h<s.length&&this.nn(s[h]);++h)u=u.add(s[h].fieldPath.canonicalString());if(h===s.length)return!0;if(this.Yt.size>0){const T=this.Yt.getIterator().getNext();if(!u.has(T.field.canonicalString())){const b=s[h];if(!this.rn(T,b)||!this.sn(this.Zt[g++],b))return!1}++h}for(;h<s.length;++h)if(g>=this.Zt.length||!this.sn(this.Zt[g++],s[h]))return!1;return!0}on(){if(this.en)return null;let e=new Ln(Bn.comparator);const r=[];for(const s of this.Xt)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new rn(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new rn(s.field,0))}for(const s of this.Zt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new rn(s.field,"asc"===s.dir?0:1)));return new ir(ir.UNKNOWN_ID,this.collectionId,r,Ee.empty())}nn(e){for(const r of this.Xt)if(this.rn(r,e))return!0;return!1}rn(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function Oi(a){var e,r;if(bt(a instanceof Rn||a instanceof In),a instanceof Rn){if(a instanceof Wo){const u=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(h=>Rn.create(a.field,"==",h)))||[];return In.create(u,"or")}return a}const s=a.filters.map(u=>Oi(u));return In.create(s,a.op)}function Yd(a){if(0===a.getFilters().length)return[];const e=rc(Oi(a));return bt(Jd(e)),fu(e)||pu(e)?[e]:e.getFilters()}function fu(a){return a instanceof Rn}function pu(a){return a instanceof In&&ya(a)}function Jd(a){return fu(a)||pu(a)||function(r){if(r instanceof In&&Ji(r)){for(const s of r.getFilters())if(!fu(s)&&!pu(s))return!1;return!0}return!1}(a)}function rc(a){if(bt(a instanceof Rn||a instanceof In),a instanceof Rn)return a;if(1===a.filters.length)return rc(a.filters[0]);const e=a.filters.map(s=>rc(s));let r=In.create(e,a.op);return r=So(r),Jd(r)?r:(bt(r instanceof In),bt(Br(r)),bt(r.filters.length>1),r.filters.reduce((s,u)=>Yc(s,u)))}function Yc(a,e){let r;return bt(a instanceof Rn||a instanceof In),bt(e instanceof Rn||e instanceof In),r=a instanceof Rn?e instanceof Rn?In.create([a,e],"and"):Fa(a,e):e instanceof Rn?Fa(e,a):function(u,h){if(bt(u.filters.length>0&&h.filters.length>0),Br(u)&&Br(h))return va(u,h.getFilters());const g=Ji(u)?u:h,T=Ji(u)?h:u,b=g.filters.map(O=>Yc(O,T));return In.create(b,"or")}(a,e),So(r)}function Fa(a,e){if(Br(e))return va(e,a.getFilters());{const r=e.filters.map(s=>Yc(a,s));return In.create(r,"or")}}function So(a){if(bt(a instanceof Rn||a instanceof In),a instanceof Rn)return a;const e=a.getFilters();if(1===e.length)return So(e[0]);if(fr(a))return a;const r=e.map(u=>So(u)),s=[];return r.forEach(u=>{u instanceof Rn?s.push(u):u instanceof In&&(u.op===a.op?s.push(...u.filters):s.push(u))}),1===s.length?s[0]:In.create(s,a.op)}class gu{constructor(){this._n=new Ql}addToCollectionParentIndex(e,r){return this._n.add(r),we.resolve()}getCollectionParents(e,r){return we.resolve(this._n.getEntries(r))}addFieldIndex(e,r){return we.resolve()}deleteFieldIndex(e,r){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,r){return we.resolve()}getDocumentsMatchingTarget(e,r){return we.resolve(null)}getIndexType(e,r){return we.resolve(0)}getFieldIndexes(e,r){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,r){return we.resolve(Ot.min())}getMinOffsetFromCollectionGroup(e,r){return we.resolve(Ot.min())}updateCollectionGroup(e,r,s){return we.resolve()}updateIndexEntries(e,r){return we.resolve()}}class Ql{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r]||new Ln(Ht.comparator),h=!u.has(s);return this.index[r]=u.add(s),h}has(e){const r=e.lastSegment(),s=e.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(e){return(this.index[e]||new Ln(Ht.comparator)).toArray()}}const mu=new Uint8Array(0);class Va{constructor(e,r){this.databaseId=r,this.an=new Ql,this.un=new Cn(s=>Ai(s),(s,u)=>fs(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.an.has(r)){const s=r.lastSegment(),u=r.popLast();e.addOnCommittedListener(()=>{this.an.add(r)});const h={collectionId:s,parent:Qn(u)};return hg(e).put(h)}return we.resolve()}getCollectionParents(e,r){const s=[],u=IDBKeyRange.bound([r,""],[ln(r),""],!1,!0);return hg(e).U(u).next(h=>{for(const g of h){if(g.collectionId!==r)break;s.push(Ni(g.parent))}return s})}addFieldIndex(e,r){const s=Yl(e),u={indexId:(T=r).indexId,collectionGroup:T.collectionGroup,fields:T.fields.map(b=>[b.fieldPath.canonicalString(),b.kind])};var T;delete u.indexId;const h=s.add(u);if(r.indexState){const g=_u(e);return h.next(T=>{g.put(Wl(T,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return h.next()}deleteFieldIndex(e,r){const s=Yl(e),u=_u(e),h=ic(e);return s.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Yl(e),s=ic(e),u=_u(e);return r.j().next(()=>s.j()).next(()=>u.j())}createTargetIndexes(e,r){return we.forEach(this.cn(r),s=>this.getIndexType(e,s).next(u=>{if(0===u||1===u){const h=new Zl(s).on();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,r){const s=ic(e);let u=!0;const h=new Map;return we.forEach(this.cn(r),g=>this.ln(e,g).next(T=>{u&&(u=!!T),h.set(g,T)})).next(()=>{if(u){let g=tn();const T=[];return we.forEach(h,(b,O)=>{var wt;be("IndexedDbIndexManager",`Using index ${wt=b,`id=${wt.indexId}|cg=${wt.collectionGroup}|f=${wt.fields.map(qt=>`${qt.fieldPath}:${qt.kind}`).join(",")}`} to execute ${Ai(r)}`);const H=function(wt,qt){const Tn=ai(qt);if(void 0===Tn)return null;for(const Mn of Ea(wt,Tn.fieldPath))switch(Mn.op){case"array-contains-any":return Mn.value.arrayValue.values||[];case"array-contains":return[Mn.value]}return null}(O,b),K=function(wt,qt){const Tn=new Map;for(const Mn of kr(qt))for(const ye of Ea(wt,Mn.fieldPath))switch(ye.op){case"==":case"in":Tn.set(Mn.fieldPath.canonicalString(),ye.value);break;case"not-in":case"!=":return Tn.set(Mn.fieldPath.canonicalString(),ye.value),Array.from(Tn.values())}return null}(O,b),oe=function(wt,qt){const Tn=[];let Mn=!0;for(const ye of kr(qt)){const se=0===ye.kind?zu(wt,ye.fieldPath,wt.startAt):Gc(wt,ye.fieldPath,wt.startAt);Tn.push(se.value),Mn&&(Mn=se.inclusive)}return new Ps(Tn,Mn)}(O,b),Re=function(wt,qt){const Tn=[];let Mn=!0;for(const ye of kr(qt)){const se=0===ye.kind?Gc(wt,ye.fieldPath,wt.endAt):zu(wt,ye.fieldPath,wt.endAt);Tn.push(se.value),Mn&&(Mn=se.inclusive)}return new Ps(Tn,Mn)}(O,b),it=this.hn(b,O,oe),lt=this.hn(b,O,Re),at=this.Pn(b,O,K),Vt=this.In(b.indexId,H,it,oe.inclusive,lt,Re.inclusive,at);return we.forEach(Vt,zt=>s.G(zt,r.limit).next(wt=>{wt.forEach(qt=>{const Tn=vt.fromSegments(qt.documentKey);g.has(Tn)||(g=g.add(Tn),T.push(Tn))})}))}).next(()=>T)}return we.resolve(null)})}cn(e){let r=this.un.get(e);return r||(r=0===e.filters.length?[e]:Yd(In.create(e.filters,"and")).map(s=>qo(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,r),r)}In(e,r,s,u,h,g,T){const b=(null!=r?r.length:1)*Math.max(s.length,h.length),O=b/(null!=r?r.length:1),H=[];for(let K=0;K<b;++K){const oe=r?this.Tn(r[K/O]):mu,Re=this.En(e,oe,s[K%O],u),it=this.dn(e,oe,h[K%O],g),lt=T.map(at=>this.En(e,oe,at,!0));H.push(...this.createRange(Re,it,lt))}return H}En(e,r,s,u){const h=new Co(e,vt.empty(),r,s);return u?h:h.Jt()}dn(e,r,s,u){const h=new Co(e,vt.empty(),r,s);return u?h.Jt():h}ln(e,r){const s=new Zl(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,u).next(h=>{let g=null;for(const T of h)s.tn(T)&&(!g||T.fields.length>g.fields.length)&&(g=T);return g})}getIndexType(e,r){let s=2;const u=this.cn(r);return we.forEach(u,h=>this.ln(e,h).next(g=>{g?0!==s&&g.fields.length<function(b){let O=new Ln(Bn.comparator),H=!1;for(const K of b.filters)for(const oe of K.getFlattenedFilters())oe.field.isKeyField()||("array-contains"===oe.op||"array-contains-any"===oe.op?H=!0:O=O.add(oe.field));for(const K of b.orderBy)K.field.isKeyField()||(O=O.add(K.field));return O.size+(H?1:0)}(h)&&(s=1):s=0})).next(()=>null!==r.limit&&u.length>1&&2===s?1:s)}An(e,r){const s=new Qc;for(const u of kr(e)){const h=r.data.field(u.fieldPath);if(null==h)return null;const g=s.Ht(u.kind);Jo.bt.Pt(h,g)}return s.Wt()}Tn(e){const r=new Qc;return Jo.bt.Pt(e,r.Ht(0)),r.Wt()}Rn(e,r){const s=new Qc;return Jo.bt.Pt(Gi(this.databaseId,r),s.Ht(function(h){const g=kr(h);return 0===g.length?0:g[g.length-1].kind}(e))),s.Wt()}Pn(e,r,s){if(null===s)return[];let u=[];u.push(new Qc);let h=0;for(const g of kr(e)){const T=s[h++];for(const b of u)if(this.Vn(r,g.fieldPath)&&ha(T))u=this.mn(u,g,T);else{const O=b.Ht(g.kind);Jo.bt.Pt(T,O)}}return this.fn(u)}hn(e,r,s){return this.Pn(e,r,s.position)}fn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].Wt();return r}mn(e,r,s){const u=[...e],h=[];for(const g of s.arrayValue.values||[])for(const T of u){const b=new Qc;b.seed(T.Wt()),Jo.bt.Pt(g,b.Ht(r.kind)),h.push(b)}return h}Vn(e,r){return!!e.filters.find(s=>s instanceof Rn&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=Yl(e),u=_u(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(h=>{const g=[];return we.forEach(h,T=>u.get([T.indexId,this.uid]).next(b=>{g.push(function(H,K){const oe=K?new Ee(K.sequenceNumber,new Ot(Na(K.readTime),new vt(Ni(K.documentKey)),K.largestBatchId)):Ee.empty(),Re=H.fields.map(([it,lt])=>new rn(Bn.fromServerFormat(it),lt));return new ir(H.indexId,H.collectionGroup,Re,oe)}(T,b))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,u)=>{const h=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==h?h:We(s.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const u=Yl(e),h=_u(e);return this.gn(e).next(g=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(T=>we.forEach(T,b=>h.put(Wl(b.indexId,this.uid,g,s)))))}updateIndexEntries(e,r){const s=new Map;return we.forEach(r,(u,h)=>{const g=s.get(u.collectionGroup);return(g?we.resolve(g):this.getFieldIndexes(e,u.collectionGroup)).next(T=>(s.set(u.collectionGroup,T),we.forEach(T,b=>this.pn(e,u,b).next(O=>{const H=this.yn(h,b);return O.isEqual(H)?we.resolve():this.wn(e,h,b,O,H)}))))})}Sn(e,r,s,u){return ic(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(s,r.key),documentKey:r.key.path.toArray()})}bn(e,r,s,u){return ic(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(s,r.key),r.key.path.toArray()])}pn(e,r,s){const u=ic(e);let h=new Ln(Xo);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Rn(s,r)])},(g,T)=>{h=h.add(new Co(s.indexId,r,T.arrayValue,T.directionalValue))}).next(()=>h)}yn(e,r){let s=new Ln(Xo);const u=this.An(r,e);if(null==u)return s;const h=ai(r);if(null!=h){const g=e.data.field(h.fieldPath);if(ha(g))for(const T of g.arrayValue.values||[])s=s.add(new Co(r.indexId,e.key,this.Tn(T),u))}else s=s.add(new Co(r.indexId,e.key,mu,u));return s}wn(e,r,s,u,h){be("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const g=[];return function(b,O,H,K,oe){const Re=b.getIterator(),it=O.getIterator();let lt=or(Re),at=or(it);for(;lt||at;){let Vt=!1,zt=!1;if(lt&&at){const wt=H(lt,at);wt<0?zt=!0:wt>0&&(Vt=!0)}else null!=lt?zt=!0:Vt=!0;Vt?(K(at),at=or(it)):zt?(oe(lt),lt=or(Re)):(lt=or(Re),at=or(it))}}(u,h,Xo,T=>{g.push(this.Sn(e,r,s,T))},T=>{g.push(this.bn(e,r,s,T))}),we.waitFor(g)}gn(e){let r=1;return _u(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,h)=>{h.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((g,T)=>Xo(g,T)).filter((g,T,b)=>!T||0!==Xo(g,b[T-1]));const u=[];u.push(e);for(const g of s){const T=Xo(g,e),b=Xo(g,r);if(0===T)u[0]=e.Jt();else if(T>0&&b<0)u.push(g),u.push(g.Jt());else if(b>0)break}u.push(r);const h=[];for(let g=0;g<u.length;g+=2){if(this.Dn(u[g],u[g+1]))return[];h.push(IDBKeyRange.bound([u[g].indexId,this.uid,u[g].arrayValue,u[g].directionalValue,mu,[]],[u[g+1].indexId,this.uid,u[g+1].arrayValue,u[g+1].directionalValue,mu,[]]))}return h}Dn(e,r){return Xo(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(fg)}getMinOffset(e,r){return we.mapArray(this.cn(r),s=>this.ln(e,s).next(u=>u||pt())).next(fg)}}function hg(a){return En(a,"collectionParents")}function ic(a){return En(a,"indexEntries")}function Yl(a){return En(a,"indexConfiguration")}function _u(a){return En(a,"indexState")}function fg(a){bt(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const u=a[s].indexState.offset;$t(u,e)<0&&(e=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Ot(e.readTime,e.documentKey,r)}const pg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gg(a,e,r){const s=a.store("mutations"),u=a.store("documentMutations"),h=[],g=IDBKeyRange.only(r.batchId);let T=0;const b=s.J({range:g},(H,K,oe)=>(T++,oe.delete()));h.push(b.next(()=>{bt(1===T)}));const O=[];for(const H of r.mutations){const K=jo(e,H.key.path,r.batchId);h.push(u.delete(K)),O.push(H.key)}return we.waitFor(h).next(()=>O)}function ks(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw pt();e=a.noDocument}return JSON.stringify(e).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class Jl{constructor(e,r,s,u){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=u,this.Cn={}}static lt(e,r,s,u){bt(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Jl(h,r,s,u)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Er(e).J({index:"userMutationsIndex",range:s},(u,h,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(e,r,s,u){const h=sc(e),g=Er(e);return g.add({}).next(T=>{bt("number"==typeof T);const b=new _n(T,r,s,u),O=function(Re,it,lt){const at=lt.baseMutations.map(zt=>Do(Re.ct,zt)),Vt=lt.mutations.map(zt=>Do(Re.ct,zt));return{userId:it,batchId:lt.batchId,localWriteTimeMs:lt.localWriteTime.toMillis(),baseMutations:at,mutations:Vt}}(this.serializer,this.userId,b),H=[];let K=new Ln((oe,Re)=>We(oe.canonicalString(),Re.canonicalString()));for(const oe of u){const Re=jo(this.userId,oe.key.path,T);K=K.add(oe.key.path.popLast()),H.push(g.put(O)),H.push(h.put(Re,$o))}return K.forEach(oe=>{H.push(this.indexManager.addToCollectionParentIndex(e,oe))}),e.addOnCommittedListener(()=>{this.Cn[T]=b.keys()}),we.waitFor(H).next(()=>b)})}lookupMutationBatch(e,r){return Er(e).get(r).next(s=>s?(bt(s.userId===this.userId),Oa(this.serializer,s)):null)}vn(e,r){return this.Cn[r]?we.resolve(this.Cn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const u=s.keys();return this.Cn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,u=IDBKeyRange.lowerBound([this.userId,s]);let h=null;return Er(e).J({index:"userMutationsIndex",range:u},(g,T,b)=>{T.userId===this.userId&&(bt(T.batchId>=s),h=Oa(this.serializer,T)),b.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Er(e).J({index:"userMutationsIndex",range:r,reverse:!0},(u,h,g)=>{s=h.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Er(e).U("userMutationsIndex",r).next(s=>s.map(u=>Oa(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=ua(this.userId,r.path),u=IDBKeyRange.lowerBound(s),h=[];return sc(e).J({range:u},(g,T,b)=>{const[O,H,K]=g,oe=Ni(H);if(O===this.userId&&r.path.isEqual(oe))return Er(e).get(K).next(Re=>{if(!Re)throw pt();bt(Re.userId===this.userId),h.push(Oa(this.serializer,Re))});b.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Ln(We);const u=[];return r.forEach(h=>{const g=ua(this.userId,h.path),T=IDBKeyRange.lowerBound(g),b=sc(e).J({range:T},(O,H,K)=>{const[oe,Re,it]=O,lt=Ni(Re);oe===this.userId&&h.path.isEqual(lt)?s=s.add(it):K.done()});u.push(b)}),we.waitFor(u).next(()=>this.Fn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1,h=ua(this.userId,s),g=IDBKeyRange.lowerBound(h);let T=new Ln(We);return sc(e).J({range:g},(b,O,H)=>{const[K,oe,Re]=b,it=Ni(oe);K===this.userId&&s.isPrefixOf(it)?it.length===u&&(T=T.add(Re)):H.done()}).next(()=>this.Fn(e,T))}Fn(e,r){const s=[],u=[];return r.forEach(h=>{u.push(Er(e).get(h).next(g=>{if(null===g)throw pt();bt(g.userId===this.userId),s.push(Oa(this.serializer,g))}))}),we.waitFor(u).next(()=>s)}removeMutationBatch(e,r){return gg(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.Mn(r.batchId)}),we.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return we.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return sc(e).J({range:s},(h,g,T)=>{if(h[0]===this.userId){const b=Ni(h[1]);u.push(b)}else T.done()}).next(()=>{bt(0===u.length)})})}containsKey(e,r){return Cf(e,this.userId,r)}xn(e){return oc(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cf(a,e,r){const s=ua(e,r.path),u=s[1],h=IDBKeyRange.lowerBound(s);let g=!1;return sc(a).J({range:h,H:!0},(T,b,O)=>{const[H,K,oe]=T;H===e&&K===u&&(g=!0),O.done()}).next(()=>g)}function Er(a){return En(a,"mutations")}function sc(a){return En(a,"documentMutations")}function oc(a){return En(a,"mutationQueues")}class yu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new yu(0)}static Ln(){return new yu(-1)}}class Ls{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.Bn(e).next(r=>{const s=new yu(r.highestTargetId);return r.highestTargetId=s.next(),this.kn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(r=>mt.fromTimestamp(new ft(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=r,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.kn(e,u)))}addTargetData(e,r){return this.qn(e,r).next(()=>this.Bn(e).next(s=>(s.targetCount+=1,this.Qn(r,s),this.kn(e,s))))}updateTargetData(e,r){return this.qn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Js(e).delete(r.targetId)).next(()=>this.Bn(e)).next(s=>(bt(s.targetCount>0),s.targetCount-=1,this.kn(e,s)))}removeTargets(e,r,s){let u=0;const h=[];return Js(e).J((g,T)=>{const b=ka(T);b.sequenceNumber<=r&&null===s.get(b.targetId)&&(u++,h.push(this.removeTargetData(e,b)))}).next(()=>we.waitFor(h)).next(()=>u)}forEachTarget(e,r){return Js(e).J((s,u)=>{const h=ka(u);r(h)})}Bn(e){return Jc(e).get("targetGlobalKey").next(r=>(bt(null!==r),r))}kn(e,r){return Jc(e).put("targetGlobalKey",r)}qn(e,r){return Js(e).put(Gl(this.serializer,r))}Qn(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Bn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=Ai(r),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let h=null;return Js(e).J({range:u,index:"queryTargetsIndex"},(g,T,b)=>{const O=ka(T);fs(r,O.target)&&(h=O,b.done())}).next(()=>h)}addMatchingKeys(e,r,s){const u=[],h=Xs(e);return r.forEach(g=>{const T=Qn(g.path);u.push(h.put({targetId:s,path:T})),u.push(this.referenceDelegate.addReference(e,s,g))}),we.waitFor(u)}removeMatchingKeys(e,r,s){const u=Xs(e);return we.forEach(r,h=>{const g=Qn(h.path);return we.waitFor([u.delete([s,g]),this.referenceDelegate.removeReference(e,s,h)])})}removeMatchingKeysForTargetId(e,r){const s=Xs(e),u=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),u=Xs(e);let h=tn();return u.J({range:s,H:!0},(g,T,b)=>{const O=Ni(g[1]),H=new vt(O);h=h.add(H)}).next(()=>h)}containsKey(e,r){const s=Qn(r.path),u=IDBKeyRange.bound([s],[ln(s)],!1,!0);let h=0;return Xs(e).J({index:"documentTargetsIndex",H:!0,range:u},([g,T],b,O)=>{0!==g&&(h++,O.done())}).next(()=>h>0)}ot(e,r){return Js(e).get(r).next(s=>s?ka(s):null)}}function Js(a){return En(a,"targets")}function Jc(a){return En(a,"targetGlobal")}function Xs(a){return En(a,"targetDocuments")}function ac([a,e],[r,s]){const u=We(a,r);return 0===u?We(e,s):u}class mg{constructor(e){this.Kn=e,this.buffer=new Ln(ac),this.$n=0}Un(){return++this.$n}Wn(e){const r=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();ac(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class _g{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var r=this;be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ce.Z)(function*(){r.Gn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){zr(s)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Nn(s)}yield r.zn(3e5)}))}}class yg{constructor(e,r){this.jn=e,this.params=r}calculateTargetCount(e,r){return this.jn.Hn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return we.resolve(ui.oe);const s=new mg(r);return this.jn.forEachTarget(e,u=>s.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>s.Wn(u))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.jn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.jn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(pg)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pg):this.Yn(e,r))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,r){let s,u,h,g,T,b,O;const H=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(K=>(K>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${K}`),u=this.params.maximumSequenceNumbersToCollect):u=K,g=Date.now(),this.nthSequenceNumber(e,u))).next(K=>(s=K,T=Date.now(),this.removeTargets(e,s,r))).next(K=>(h=K,b=Date.now(),this.removeOrphanedDocuments(e,s))).next(K=>(O=Date.now(),Cr()<=kt.in.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-H}ms\n\tDetermined least recently used ${u} in `+(T-g)+`ms\n\tRemoved ${h} targets in `+(b-T)+`ms\n\tRemoved ${K} documents in `+(O-b)+`ms\nTotal Duration: ${O-H}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:h,documentsRemoved:K})))}}class Es{constructor(e,r){this.db=e,this.garbageCollector=function Sf(a,e){return new yg(a,e)}(this,r)}Hn(e){const r=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(u=>s+u))}Zn(e){let r=0;return this.Jn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Jn(e,r){return this.Xn(e,(s,u)=>r(u))}addReference(e,r,s){return uc(e,s)}removeReference(e,r,s){return uc(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return uc(e,r)}er(e,r){return function(u,h){let g=!1;return oc(u).Y(T=>Cf(u,T,h).next(b=>(b&&(g=!0),we.resolve(!b)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let h=0;return this.Xn(e,(g,T)=>{if(T<=r){const b=this.er(e,g).next(O=>{if(!O)return h++,s.getEntry(e,g).next(()=>(s.removeEntry(g,mt.min()),Xs(e).delete([0,Qn(g.path)])))});u.push(b)}}).next(()=>we.waitFor(u)).next(()=>s.apply(e)).next(()=>h)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return uc(e,r)}Xn(e,r){const s=Xs(e);let u,h=ui.oe;return s.J({index:"documentTargetsIndex"},([g,T],{path:b,sequenceNumber:O})=>{0===g?(h!==ui.oe&&r(new vt(Ni(u)),h),h=O,u=b):h=ui.oe}).next(()=>{h!==ui.oe&&r(new vt(Ni(u)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uc(a,e){return Xs(a).put((u=a.currentSequenceNumber,{targetId:0,path:Qn(e.path),sequenceNumber:u}));var u}class vu{constructor(){this.changes=new Cn(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,nr.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?we.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class w_{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return Eu(e).put(s)}removeEntry(e,r,s){return Eu(e).delete(function(h,g){const T=h.path.toArray();return[T.slice(0,T.length-2),T[T.length-2],xa(g),T[T.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.tr(e,s)))}getEntry(e,r){let s=nr.newInvalidDocument(r);return Eu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Iu(r))},(u,h)=>{s=this.nr(r,h)}).next(()=>s)}rr(e,r){let s={size:0,document:nr.newInvalidDocument(r)};return Eu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Iu(r))},(u,h)=>{s={document:this.nr(r,h),size:ks(h)}}).next(()=>s)}getEntries(e,r){let s=un();return this.ir(e,r,(u,h)=>{const g=this.nr(u,h);s=s.insert(u,g)}).next(()=>s)}sr(e,r){let s=un(),u=new Gn(vt.comparator);return this.ir(e,r,(h,g)=>{const T=this.nr(h,g);s=s.insert(h,T),u=u.insert(h,ks(g))}).next(()=>({documents:s,_r:u}))}ir(e,r,s){if(r.isEmpty())return we.resolve();let u=new Ln(th);r.forEach(b=>u=u.add(b));const h=IDBKeyRange.bound(Iu(u.first()),Iu(u.last())),g=u.getIterator();let T=g.getNext();return Eu(e).J({index:"documentKeyIndex",range:h},(b,O,H)=>{const K=vt.fromSegments([...O.prefixPath,O.collectionGroup,O.documentId]);for(;T&&th(T,K)<0;)s(T,null),T=g.getNext();T&&T.isEqual(K)&&(s(T,O),T=g.hasNext()?g.getNext():null),T?H.$(Iu(T)):H.done()}).next(()=>{for(;T;)s(T,null),T=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,r,s,u,h){const g=r.path,T=[g.popLast().toArray(),g.lastSegment(),xa(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],b=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eu(e).U(IDBKeyRange.bound(T,b,!0)).next(O=>{h?.incrementDocumentReadCount(O.length);let H=un();for(const K of O){const oe=this.nr(vt.fromSegments(K.prefixPath.concat(K.collectionGroup,K.documentId)),K);oe.isFoundDocument()&&(te(r,oe)||u.has(oe.key))&&(H=H.insert(oe.key,oe))}return H})}getAllFromCollectionGroup(e,r,s,u){let h=un();const g=bf(r,s),T=bf(r,Ot.max());return Eu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,T,!0)},(b,O,H)=>{const K=this.nr(vt.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);h=h.insert(K.key,K),h.size===u&&H.done()}).next(()=>h)}newChangeBuffer(e){return new eh(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return Xl(e).get("remoteDocumentGlobalKey").next(r=>(bt(!!r),r))}tr(e,r){return Xl(e).put("remoteDocumentGlobalKey",r)}nr(e,r){if(r){const s=function lg(a,e){let r;if(e.document)r=Kc(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=vt.fromSegments(e.noDocument.path),u=Na(e.noDocument.readTime);r=nr.newNoDocument(s,u),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return pt();{const s=vt.fromSegments(e.unknownDocument.path),u=Na(e.unknownDocument.version);r=nr.newUnknownDocument(s,u)}}return e.readTime&&r.setReadTime(function(u){const h=new ft(u[0],u[1]);return mt.fromTimestamp(h)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(mt.min()))return s}return nr.newInvalidDocument(e)}}function Xd(a){return new w_(a)}class eh extends vu{constructor(e,r){super(),this.ar=e,this.trackRemovals=r,this.ur=new Cn(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const r=[];let s=0,u=new Ln((h,g)=>We(h.canonicalString(),g.canonicalString()));return this.changes.forEach((h,g)=>{const T=this.ur.get(h);if(r.push(this.ar.removeEntry(e,h,T.readTime)),g.isValidDocument()){const b=Xu(this.ar.serializer,g);u=u.add(h.path.popLast());const O=ks(b);s+=O-T.size,r.push(this.ar.addEntry(e,h,b))}else if(s-=T.size,this.trackRemovals){const b=Xu(this.ar.serializer,g.convertToNoDocument(mt.min()));r.push(this.ar.addEntry(e,h,b))}}),u.forEach(h=>{r.push(this.ar.indexManager.addToCollectionParentIndex(e,h))}),r.push(this.ar.updateMetadata(e,s)),we.waitFor(r)}getFromCache(e,r){return this.ar.rr(e,r).next(s=>(this.ur.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.ar.sr(e,r).next(({documents:s,_r:u})=>(u.forEach((h,g)=>{this.ur.set(h,{size:g,readTime:s.get(h).readTime})}),s))}}function Xl(a){return En(a,"remoteDocumentGlobal")}function Eu(a){return En(a,"remoteDocumentsV14")}function Iu(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bf(a,e){const r=e.documentKey.path.toArray();return[a,xa(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function th(a,e){const r=a.path.toArray(),s=e.path.toArray();let u=0;for(let h=0;h<r.length-2&&h<s.length-2;++h)if(u=We(r[h],s[h]),u)return u;return u=We(r.length,s.length),u||(u=We(r[r.length-2],s[s.length-2]),u||We(r[r.length-1],s[s.length-1]))}class nh{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class wu{constructor(e,r,s,u){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(e,r))).next(u=>(null!==s&&Ko(s.mutation,u,Ur.empty(),ft.now()),u))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,tn()).next(()=>s))}getLocalViewOfDocuments(e,r,s=tn()){const u=Kn();return this.populateOverlays(e,u,r).next(()=>this.computeViews(e,r,u,s).next(h=>{let g=er();return h.forEach((T,b)=>{g=g.insert(T,b.overlayedDocument)}),g}))}getOverlayedDocuments(e,r){const s=Kn();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,tn()))}populateOverlays(e,r,s){const u=[];return s.forEach(h=>{r.has(h)||u.push(h)}),this.documentOverlayCache.getOverlays(e,u).next(h=>{h.forEach((g,T)=>{r.set(g,T)})})}computeViews(e,r,s,u){let h=un();const g=pr(),T=pr();return r.forEach((b,O)=>{const H=s.get(O.key);u.has(O.key)&&(void 0===H||H.mutation instanceof wo)?h=h.insert(O.key,O):void 0!==H?(g.set(O.key,H.mutation.getFieldMask()),Ko(H.mutation,O,H.mutation.getFieldMask(),ft.now())):g.set(O.key,Ur.empty())}),this.recalculateAndSaveOverlays(e,h).next(b=>(b.forEach((O,H)=>g.set(O,H)),r.forEach((O,H)=>{var K;return T.set(O,new nh(H,null!==(K=g.get(O))&&void 0!==K?K:null))}),T))}recalculateAndSaveOverlays(e,r){const s=pr();let u=new Gn((g,T)=>g-T),h=tn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(g=>{for(const T of g)T.keys().forEach(b=>{const O=r.get(b);if(null===O)return;let H=s.get(b)||Ur.empty();H=T.applyToLocalView(O,H),s.set(b,H);const K=(u.get(T.batchId)||tn()).add(b);u=u.insert(T.batchId,K)})}).next(()=>{const g=[],T=u.getReverseIterator();for(;T.hasNext();){const b=T.getNext(),O=b.key,H=b.value,K=es();H.forEach(oe=>{if(!h.has(oe)){const Re=Wc(r.get(oe),s.get(oe));null!==Re&&K.set(oe,Re),h=h.add(oe)}}),g.push(this.documentOverlayCache.saveOverlays(e,O,K))}return we.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,u){return vt.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):Ia(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,u):this.getDocumentsMatchingCollectionQuery(e,r,s,u);var g}getNextDocuments(e,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,u).next(h=>{const g=u-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,u-h.size):we.resolve(Kn());let T=-1,b=h;return g.next(O=>we.forEach(O,(H,K)=>(T<K.largestBatchId&&(T=K.largestBatchId),h.get(H)?we.resolve():this.remoteDocumentCache.getEntry(e,H).next(oe=>{b=b.insert(H,oe)}))).next(()=>this.populateOverlays(e,O,h)).next(()=>this.computeViews(e,b,O,tn())).next(H=>({batchId:T,changes:zn(H)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new vt(r)).next(s=>{let u=er();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,r,s,u){const h=r.collectionGroup;let g=er();return this.indexManager.getCollectionParents(e,h).next(T=>we.forEach(T,b=>{const O=(K=r,oe=b.child(h),new ps(oe,null,K.explicitOrderBy.slice(),K.filters.slice(),K.limit,K.limitType,K.startAt,K.endAt));var K,oe;return this.getDocumentsMatchingCollectionQuery(e,O,s,u).next(H=>{H.forEach((K,oe)=>{g=g.insert(K,oe)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,s,u){let h;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(g=>(h=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,h,u))).next(g=>{h.forEach((b,O)=>{const H=O.getKey();null===g.get(H)&&(g=g.insert(H,nr.newInvalidDocument(H)))});let T=er();return g.forEach((b,O)=>{const H=h.get(b);void 0!==H&&Ko(H.mutation,O,Ur.empty(),ft.now()),te(r,O)&&(T=T.insert(b,O))}),T})}}class vg{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,r){return we.resolve(this.cr.get(r))}saveBundleMetadata(e,r){return this.cr.set(r.id,{id:(u=r).id,version:u.version,createTime:lr(u.createTime)}),we.resolve();var u}getNamedQuery(e,r){return we.resolve(this.lr.get(r))}saveNamedQuery(e,r){return this.lr.set(r.name,{name:(u=r).name,query:Os(u.bundledQuery),readTime:lr(u.readTime)}),we.resolve();var u}}class rh{constructor(){this.overlays=new Gn(vt.comparator),this.hr=new Map}getOverlay(e,r){return we.resolve(this.overlays.get(r))}getOverlays(e,r){const s=Kn();return we.forEach(r,u=>this.getOverlay(e,u).next(h=>{null!==h&&s.set(u,h)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((u,h)=>{this.ht(e,r,h)}),we.resolve()}removeOverlaysForBatchId(e,r,s){const u=this.hr.get(s);return void 0!==u&&(u.forEach(h=>this.overlays=this.overlays.remove(h)),this.hr.delete(s)),we.resolve()}getOverlaysForCollection(e,r,s){const u=Kn(),h=r.length+1,g=new vt(r.child("")),T=this.overlays.getIteratorFrom(g);for(;T.hasNext();){const b=T.getNext().value,O=b.getKey();if(!r.isPrefixOf(O.path))break;O.path.length===h&&b.largestBatchId>s&&u.set(b.getKey(),b)}return we.resolve(u)}getOverlaysForCollectionGroup(e,r,s,u){let h=new Gn((O,H)=>O-H);const g=this.overlays.getIterator();for(;g.hasNext();){const O=g.getNext().value;if(O.getKey().getCollectionGroup()===r&&O.largestBatchId>s){let H=h.get(O.largestBatchId);null===H&&(H=Kn(),h=h.insert(O.largestBatchId,H)),H.set(O.getKey(),O)}}const T=Kn(),b=h.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach((O,H)=>T.set(O,H)),!(T.size()>=u)););return we.resolve(T)}ht(e,r,s){const u=this.overlays.get(s.key);if(null!==u){const g=this.hr.get(u.largestBatchId).delete(s.key);this.hr.set(u.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new Qu(r,s));let h=this.hr.get(r);void 0===h&&(h=tn(),this.hr.set(r,h)),this.hr.set(r,h.add(s.key))}}class Xc{constructor(){this.Pr=new Ln(Vr.Ir),this.Tr=new Ln(Vr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,r){const s=new Vr(e,r);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Ar(new Vr(e,r))}Rr(e,r){e.forEach(s=>this.removeReference(s,r))}Vr(e){const r=new vt(new Ht([])),s=new Vr(r,e),u=new Vr(r,e+1),h=[];return this.Tr.forEachInRange([s,u],g=>{this.Ar(g),h.push(g.key)}),h}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const r=new vt(new Ht([])),s=new Vr(r,e),u=new Vr(r,e+1);let h=tn();return this.Tr.forEachInRange([s,u],g=>{h=h.add(g.key)}),h}containsKey(e){const r=new Vr(e,0),s=this.Pr.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class Vr{constructor(e,r){this.key=e,this.pr=r}static Ir(e,r){return vt.comparator(e.key,r.key)||We(e.pr,r.pr)}static Er(e,r){return We(e.pr,r.pr)||vt.comparator(e.key,r.key)}}class ed{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.yr=1,this.wr=new Ln(Vr.Ir)}checkEmpty(e){return we.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,u){const h=this.yr;this.yr++;const g=new _n(h,r,s,u);this.mutationQueue.push(g);for(const T of u)this.wr=this.wr.add(new Vr(T.key,h)),this.indexManager.addToCollectionParentIndex(e,T.key.path.popLast());return we.resolve(g)}lookupMutationBatch(e,r){return we.resolve(this.Sr(r))}getNextMutationBatchAfterBatchId(e,r){const u=this.br(r+1),h=u<0?0:u;return we.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new Vr(r,0),u=new Vr(r,Number.POSITIVE_INFINITY),h=[];return this.wr.forEachInRange([s,u],g=>{const T=this.Sr(g.pr);h.push(T)}),we.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Ln(We);return r.forEach(u=>{const h=new Vr(u,0),g=new Vr(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([h,g],T=>{s=s.add(T.pr)})}),we.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,u=s.length+1;let h=s;vt.isDocumentKey(h)||(h=h.child(""));const g=new Vr(new vt(h),0);let T=new Ln(We);return this.wr.forEachWhile(b=>{const O=b.key.path;return!!s.isPrefixOf(O)&&(O.length===u&&(T=T.add(b.pr)),!0)},g),we.resolve(this.Dr(T))}Dr(e){const r=[];return e.forEach(s=>{const u=this.Sr(s);null!==u&&r.push(u)}),r}removeMutationBatch(e,r){bt(0===this.Cr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.wr;return we.forEach(r.mutations,u=>{const h=new Vr(u.key,r.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=s})}Mn(e){}containsKey(e,r){const s=new Vr(r,0),u=this.wr.firstAfterOrEqual(s);return we.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(e){return we.resolve()}Cr(e,r){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const r=this.br(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class ih{constructor(e){this.vr=e,this.docs=new Gn(vt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,u=this.docs.get(s),h=u?u.size:0,g=this.vr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:g}),this.size+=g-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return we.resolve(s?s.document.mutableCopy():nr.newInvalidDocument(r))}getEntries(e,r){let s=un();return r.forEach(u=>{const h=this.docs.get(u);s=s.insert(u,h?h.document.mutableCopy():nr.newInvalidDocument(u))}),we.resolve(s)}getDocumentsMatchingQuery(e,r,s,u){let h=un();const g=r.path,T=new vt(g.child("")),b=this.docs.getIteratorFrom(T);for(;b.hasNext();){const{key:O,value:{document:H}}=b.getNext();if(!g.isPrefixOf(O.path))break;O.path.length>g.length+1||$t(At(H),s)<=0||(u.has(H.key)||te(r,H))&&(h=h.insert(H.key,H.mutableCopy()))}return we.resolve(h)}getAllFromCollectionGroup(e,r,s,u){pt()}Fr(e,r){return we.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new td(this)}getSize(e){return we.resolve(this.size)}}class td extends vu{constructor(e){super(),this.ar=e}applyChanges(e){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.ar.addEntry(e,u)):this.ar.removeEntry(s)}),we.waitFor(r)}getFromCache(e,r){return this.ar.getEntry(e,r)}getAllFromCache(e,r){return this.ar.getEntries(e,r)}}class nd{constructor(e){this.persistence=e,this.Mr=new Cn(r=>Ai(r),fs),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Xc,this.targetCount=0,this.Lr=yu.Nn()}forEachTarget(e,r){return this.Mr.forEach((s,u)=>r(u)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Or&&(this.Or=r),we.resolve()}qn(e){this.Mr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Lr=new yu(r),this.highestTargetId=r),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,r){return this.qn(r),this.targetCount+=1,we.resolve()}updateTargetData(e,r){return this.qn(r),we.resolve()}removeTargetData(e,r){return this.Mr.delete(r.target),this.Nr.Vr(r.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,r,s){let u=0;const h=[];return this.Mr.forEach((g,T)=>{T.sequenceNumber<=r&&null===s.get(T.targetId)&&(this.Mr.delete(g),h.push(this.removeMatchingKeysForTargetId(e,T.targetId)),u++)}),we.waitFor(h).next(()=>u)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,r){const s=this.Mr.get(r)||null;return we.resolve(s)}addMatchingKeys(e,r,s){return this.Nr.dr(r,s),we.resolve()}removeMatchingKeys(e,r,s){this.Nr.Rr(r,s);const u=this.persistence.referenceDelegate,h=[];return u&&r.forEach(g=>{h.push(u.markPotentiallyOrphaned(e,g))}),we.waitFor(h)}removeMatchingKeysForTargetId(e,r){return this.Nr.Vr(r),we.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Nr.gr(r);return we.resolve(s)}containsKey(e,r){return we.resolve(this.Nr.containsKey(r))}}class rd{constructor(e,r){this.Br={},this.overlays={},this.kr=new ui(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new nd(this),this.indexManager=new gu,this.remoteDocumentCache=new ih(s=>this.referenceDelegate.Kr(s)),this.serializer=new cu(r),this.$r=new vg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new rh,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.Br[e.toKey()];return s||(s=new ed(r,this.referenceDelegate),this.Br[e.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,r,s){be("MemoryPersistence","Starting transaction:",e);const u=new Eg(this.kr.next());return this.referenceDelegate.Ur(),s(u).next(h=>this.referenceDelegate.Wr(u).next(()=>h)).toPromise().then(h=>(u.raiseOnCommittedEvent(),h))}Gr(e,r){return we.or(Object.values(this.Br).map(s=>()=>s.containsKey(e,r)))}}class Eg extends qn{constructor(e){super(),this.currentSequenceNumber=e}}class id{constructor(e){this.persistence=e,this.zr=new Xc,this.jr=null}static Hr(e){return new id(e)}get Jr(){if(this.jr)return this.jr;throw pt()}addReference(e,r,s){return this.zr.addReference(s,r),this.Jr.delete(s.toString()),we.resolve()}removeReference(e,r,s){return this.zr.removeReference(s,r),this.Jr.add(s.toString()),we.resolve()}markPotentiallyOrphaned(e,r){return this.Jr.add(r.toString()),we.resolve()}removeTarget(e,r){this.zr.Vr(r.targetId).forEach(u=>this.Jr.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(u=>{u.forEach(h=>this.Jr.add(h.toString()))}).next(()=>s.removeTargetData(e,r))}Ur(){this.jr=new Set}Wr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.Jr,s=>{const u=vt.fromPath(s);return this.Yr(e,u).next(h=>{h||r.removeEntry(u,mt.min())})}).next(()=>(this.jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Yr(e,r).next(s=>{s?this.Jr.delete(r.toString()):this.Jr.add(r.toString())})}Kr(e){return 0}Yr(e,r){return we.or([()=>we.resolve(this.zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Gr(e,r)])}}class cc{constructor(e){this.serializer=e}O(e,r,s,u){const h=new Hr("createOrUpgrade",r);var b;s<1&&u>=1&&(e.createObjectStore("owner"),(b=e).createObjectStore("mutationQueues",{keyPath:"userId"}),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aa,{unique:!0}),b.createObjectStore("documentMutations"),Rf(e),function(b){b.createObjectStore("remoteDocuments")}(e));let g=we.resolve();return s<3&&u>=3&&(0!==s&&(function(b){b.deleteObjectStore("targetDocuments"),b.deleteObjectStore("targets"),b.deleteObjectStore("targetGlobal")}(e),Rf(e)),g=g.next(()=>function(b){const O=b.store("targetGlobal"),H={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return O.put("targetGlobalKey",H)}(h))),s<4&&u>=4&&(0!==s&&(g=g.next(()=>function(b,O){return O.store("mutations").U().next(H=>{b.deleteObjectStore("mutations"),b.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aa,{unique:!0});const K=O.store("mutations"),oe=H.map(Re=>K.put(Re));return we.waitFor(oe)})}(e,h))),g=g.next(()=>{!function(b){b.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(g=g.next(()=>this.Xr(h))),s<6&&u>=6&&(g=g.next(()=>(function(b){b.createObjectStore("remoteDocumentGlobal")}(e),this.ei(h)))),s<7&&u>=7&&(g=g.next(()=>this.ti(h))),s<8&&u>=8&&(g=g.next(()=>this.ni(e,h))),s<9&&u>=9&&(g=g.next(()=>{!function(b){b.objectStoreNames.contains("remoteDocumentChanges")&&b.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(g=g.next(()=>this.ri(h))),s<11&&u>=11&&(g=g.next(()=>{(function(b){b.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(b){b.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(g=g.next(()=>{!function(b){const O=b.createObjectStore("documentOverlays",{keyPath:da});O.createIndex("collectionPathOverlayIndex",Ho,{unique:!1}),O.createIndex("collectionGroupOverlayIndex",Yn,{unique:!1})}(e)})),s<13&&u>=13&&(g=g.next(()=>function(b){const O=b.createObjectStore("remoteDocumentsV14",{keyPath:ca});O.createIndex("documentKeyIndex",la),O.createIndex("collectionGroupIndex",ls)}(e)).next(()=>this.ii(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(g=g.next(()=>this.si(e,h))),s<15&&u>=15&&(g=g.next(()=>function(b){b.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),b.createObjectStore("indexState",{keyPath:yi}).createIndex("sequenceNumberIndex",Qi,{unique:!1}),b.createObjectStore("indexEntries",{keyPath:Xa}).createIndex("documentKeyIndex",po,{unique:!1})}(e))),s<16&&u>=16&&(g=g.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),g}ei(e){let r=0;return e.store("remoteDocuments").J((s,u)=>{r+=ks(u)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Xr(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(u=>we.forEach(u,h=>{const g=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",g).next(T=>we.forEach(T,b=>{bt(b.userId===h.userId);const O=Oa(this.serializer,b);return gg(e,h.userId,O).next(()=>{})}))}))}ti(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const h=[];return s.J((g,T)=>{const b=new Ht(g),O=[0,Qn(b)];h.push(r.get(O).next(H=>H?we.resolve():r.put({targetId:0,path:Qn(b),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>we.waitFor(h))})}ni(e,r){e.createObjectStore("collectionParents",{keyPath:ds});const s=r.store("collectionParents"),u=new Ql,h=g=>{if(u.add(g)){const T=g.lastSegment(),b=g.popLast();return s.put({collectionId:T,parent:Qn(b)})}};return r.store("remoteDocuments").J({H:!0},(g,T)=>{const b=new Ht(g);return h(b.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([g,T,b],O)=>{const H=Ni(T);return h(H.popLast())}))}ri(e){const r=e.store("targets");return r.J((s,u)=>{const h=ka(u),g=Gl(this.serializer,h);return r.put(g)})}ii(e,r){const s=r.store("remoteDocuments"),u=[];return s.J((h,g)=>{const T=r.store("remoteDocumentsV14"),b=(K=g,K.document?new vt(Ht.fromString(K.document.name).popFirst(5)):K.noDocument?vt.fromSegments(K.noDocument.path):K.unknownDocument?vt.fromSegments(K.unknownDocument.path):pt()).path.toArray(),O={prefixPath:b.slice(0,b.length-2),collectionGroup:b[b.length-2],documentId:b[b.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var K;u.push(T.put(O))}).next(()=>we.waitFor(u))}si(e,r){const s=r.store("mutations"),u=Xd(this.serializer),h=new rd(id.Hr,this.serializer.ct);return s.U().next(g=>{const T=new Map;return g.forEach(b=>{var O;let H=null!==(O=T.get(b.userId))&&void 0!==O?O:tn();Oa(this.serializer,b).keys().forEach(K=>H=H.add(K)),T.set(b.userId,H)}),we.forEach(T,(b,O)=>{const H=new An(O),K=Kl.lt(this.serializer,H),oe=h.getIndexManager(H),Re=Jl.lt(H,this.serializer,oe,h.referenceDelegate);return new wu(u,Re,K,oe).recalculateAndSaveOverlaysForDocumentKeys(new ji(r,ui.oe),b).next()})})}}function Rf(a){a.createObjectStore("targetDocuments",{keyPath:sr}).createIndex("documentTargetsIndex",Gr,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hn,{unique:!0}),a.createObjectStore("targetGlobal")}const Ig="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sd{constructor(e,r,s,u,h,g,T,b,O,H,K=16){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.oi=h,this.window=g,this.document=T,this._i=O,this.ai=H,this.ui=K,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=oe=>Promise.resolve(),!sd.D())throw new tt(Me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Es(this,u),this.Ti=r+"main",this.serializer=new cu(b),this.Ei=new on(this.Ti,this.ui,new cc(this.serializer)),this.Qr=new Ls(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Xd(this.serializer),this.$r=new ql,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===H&&xn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tt(Me.FAILED_PRECONDITION,Ig);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ui(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var r=this;return this.Ii=function(){var s=(0,ce.Z)(function*(u){if(r.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var r=(0,ce.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ce.Z)(function*(){r.started&&(yield r.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(r=>{r||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(r=>this.isPrimary&&!r?this.yi(e).next(()=>!1):!!r&&this.wi(e).next(()=>!0))).catch(e=>{if(zr(e))return be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return eo(e).get("owner").next(r=>we.resolve(this.Si(r)))}bi(e){return sh(e).delete(this.clientId)}Di(){var e=this;return(0,ce.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=En(s,"clientMetadata");return u.U().next(h=>{const g=e.vi(h,18e5),T=h.filter(b=>-1===g.indexOf(b));return we.forEach(T,b=>u.delete(b.clientId)).next(()=>T)})}).catch(()=>[]);if(e.di)for(const s of r)e.di.removeItem(e.Fi(s.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?we.resolve(!0):eo(e).get("owner").next(r=>{if(null!==r&&this.Ci(r.leaseTimestampMs,5e3)&&!this.Mi(r.ownerId)){if(this.Si(r)&&this.networkEnabled)return!0;if(!this.Si(r)){if(!r.allowTabSynchronization)throw new tt(Me.FAILED_PRECONDITION,Ig);return!1}}return!(!this.networkEnabled||!this.inForeground)||sh(e).U().next(s=>void 0===this.vi(s,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&be("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,ce.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new ji(r,ui.oe);return e.yi(s).next(()=>e.bi(s))}),e.Ei.close(),e.Li()})()}vi(e,r){return e.filter(s=>this.Ci(s.updateTimeMs,r)&&!this.Mi(s.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>sh(e).U().next(r=>this.vi(r,18e5).map(s=>s.clientId)))}get started(){return this.qr}getMutationQueue(e,r){return Jl.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Va(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Kl.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,r,s){be("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===r?"readonly":"readwrite",h=16===(b=this.ui)?Fr:15===b?Bs:14===b?Wr:13===b?$n:12===b?an:11===b?Dt:void pt();var b;let g;return this.Ei.runTransaction(e,u,h,T=>(g=new ji(T,this.kr?this.kr.next():ui.oe),"readwrite-primary"===r?this.gi(g).next(b=>!!b||this.pi(g)).next(b=>{if(!b)throw xn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new tt(Me.FAILED_PRECONDITION,pn);return s(g)}).next(b=>this.wi(g).next(()=>b)):this.ki(g).next(()=>s(g)))).then(T=>(g.raiseOnCommittedEvent(),T))}ki(e){return eo(e).get("owner").next(r=>{if(null!==r&&this.Ci(r.leaseTimestampMs,5e3)&&!this.Mi(r.ownerId)&&!this.Si(r)&&!(this.ai||this.allowTabSynchronization&&r.allowTabSynchronization))throw new tt(Me.FAILED_PRECONDITION,Ig)})}wi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return eo(e).put("owner",r)}static D(){return on.D()}yi(e){const r=eo(e);return r.get("owner").next(s=>this.Si(s)?(be("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):we.resolve())}Ci(e,r){const s=Date.now();return!(e<s-r||e>s&&(xn(`Detected an update time that is in the future: ${e} > ${s}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const r=/(?:Version|Mobile)\/1[456]/;(0,Nt.G6)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var r;try{const s=null!==(null===(r=this.di)||void 0===r?void 0:r.getItem(this.Fi(e)));return be("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return xn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xn("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function eo(a){return En(a,"owner")}function sh(a){return En(a,"clientMetadata")}function oh(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class el{constructor(e,r,s,u){this.targetId=e,this.fromCache=r,this.qi=s,this.Qi=u}static Ki(e,r){let s=tn(),u=tn();for(const h of r.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:u=u.add(h.doc.key)}return new el(e,r.fromCache,s,u)}}class wg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Tu{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Nt.G6)()?8:co((0,Nt.z$)())>0?6:4}initialize(e,r){this.zi=e,this.indexManager=r,this.$i=!0}getDocumentsMatchingQuery(e,r,s,u){const h={result:null};return this.ji(e,r).next(g=>{h.result=g}).next(()=>{if(!h.result)return this.Hi(e,r,u,s).next(g=>{h.result=g})}).next(()=>{if(h.result)return;const g=new wg;return this.Ji(e,r,g).next(T=>{if(h.result=T,this.Ui)return this.Yi(e,r,g,T.size)})}).next(()=>h.result)}Yi(e,r,s,u){return s.documentReadCount<this.Wi?(Cr()<=kt.in.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",L(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),we.resolve()):(Cr()<=kt.in.DEBUG&&be("QueryEngine","Query:",L(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Gi*u?(Cr()<=kt.in.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",L(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(r))):we.resolve())}ji(e,r){if(Wu(r))return we.resolve(null);let s=jr(r);return this.indexManager.getIndexType(e,s).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=D(r,null,"F"),s=jr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const g=tn(...h);return this.zi.getDocuments(e,g).next(T=>this.indexManager.getMinOffset(e,s).next(b=>{const O=this.Zi(r,T);return this.Xi(r,O,g,b.readTime)?this.ji(e,D(r,null,"F")):this.es(e,O,r,b)}))})))}Hi(e,r,s,u){return Wu(r)||u.isEqual(mt.min())?we.resolve(null):this.zi.getDocuments(e,s).next(h=>{const g=this.Zi(r,h);return this.Xi(r,g,s,u)?we.resolve(null):(Cr()<=kt.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),L(r)),this.es(e,g,r,Je(u,-1)).next(T=>T))})}Zi(e,r){let s=new Ln(nt(e));return r.forEach((u,h)=>{te(e,h)&&(s=s.add(h))}),s}Xi(e,r,s,u){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const h="F"===e.limitType?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(u)>0)}Ji(e,r,s){return Cr()<=kt.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",L(r)),this.zi.getDocumentsMatchingQuery(e,r,Ot.min(),s)}es(e,r,s,u){return this.zi.getDocumentsMatchingQuery(e,s,u).next(h=>(r.forEach(g=>{h=h.insert(g.key,g)}),h))}}class Pf{constructor(e,r,s,u){this.persistence=e,this.ts=r,this.serializer=u,this.ns=new Gn(We),this.rs=new Cn(h=>Ai(h),fs),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(s)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wu(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ns))}}function Mf(a,e,r,s){return new Pf(a,e,r,s)}function tl(a,e){return xf.apply(this,arguments)}function xf(){return(xf=(0,ce.Z)(function*(a,e){const r=gt(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(h=>(u=h,r._s(e),r.mutationQueue.getAllMutationBatches(s))).next(h=>{const g=[],T=[];let b=tn();for(const O of u){g.push(O.batchId);for(const H of O.mutations)b=b.add(H.key)}for(const O of h){T.push(O.batchId);for(const H of O.mutations)b=b.add(H.key)}return r.localDocuments.getDocuments(s,b).next(O=>({us:O,removedBatchIds:g,addedBatchIds:T}))})})})).apply(this,arguments)}function ah(a){const e=gt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Qr.getLastRemoteSnapshotVersion(r))}function Of(a,e,r){let s=tn(),u=tn();return r.forEach(h=>s=s.add(h)),e.getEntries(a,s).next(h=>{let g=un();return r.forEach((T,b)=>{const O=h.get(T);b.isFoundDocument()!==O.isFoundDocument()&&(u=u.add(T)),b.isNoDocument()&&b.version.isEqual(mt.min())?(e.removeEntry(T,b.readTime),g=g.insert(T,b)):!O.isValidDocument()||b.version.compareTo(O.version)>0||0===b.version.compareTo(O.version)&&O.hasPendingWrites?(e.addEntry(b),g=g.insert(T,b)):be("LocalStore","Ignoring outdated watch update for ",T,". Current version:",O.version," Watch version:",b.version)}),{cs:g,ls:u}})}function uh(a,e){const r=gt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nl(a,e){const r=gt(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return r.Qr.getTargetData(s,e).next(h=>h?(u=h,we.resolve(u)):r.Qr.allocateTargetId(s).next(g=>(u=new vs(e,g,"TargetPurposeListen",s.currentSequenceNumber),r.Qr.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=r.ns.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.ns=r.ns.insert(s.targetId,s),r.rs.set(e,s.targetId)),s})}function rl(a,e,r){return lc.apply(this,arguments)}function lc(){return(lc=(0,ce.Z)(function*(a,e,r){const s=gt(a),u=s.ns.get(e),h=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",h,g=>s.persistence.referenceDelegate.removeTarget(g,u)))}catch(g){if(!zr(g))throw g;be("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.ns=s.ns.remove(e),s.rs.delete(u.target)})).apply(this,arguments)}function il(a,e,r){const s=gt(a);let u=mt.min(),h=tn();return s.persistence.runTransaction("Execute query","readwrite",g=>function(b,O,H){const K=gt(b),oe=K.rs.get(H);return void 0!==oe?we.resolve(K.ns.get(oe)):K.Qr.getTargetData(O,H)}(s,g,jr(e)).next(T=>{if(T)return u=T.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(g,T.targetId).next(b=>{h=b})}).next(()=>s.ts.getDocumentsMatchingQuery(g,e,r?u:mt.min(),r?h:tn())).next(T=>(ch(s,Fe(e),T),{documents:T,hs:h})))}function Dg(a,e){const r=gt(a),s=gt(r.Qr),u=r.ns.get(e);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",h=>s.ot(h,e).next(g=>g?g.target:null))}function Ag(a,e){const r=gt(a),s=r.ss.get(e)||mt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.os.getAllFromCollectionGroup(u,e,Je(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(ch(r,e,u),u))}function ch(a,e,r){let s=a.ss.get(e)||mt.min();r.forEach((u,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),a.ss.set(e,s)}function lh(){return(lh=(0,ce.Z)(function*(a,e,r,s){const u=gt(a);let h=tn(),g=un();for(const O of r){const H=e.Ps(O.metadata.name);O.document&&(h=h.add(H));const K=e.Is(O);K.setReadTime(e.Ts(O.metadata.readTime)),g=g.insert(H,K)}const T=u.os.newChangeBuffer({trackRemovals:!0}),b=yield nl(u,(H=s,jr(qs(Ht.fromString(`__bundle__/docs/${H}`)))));var H;return u.persistence.runTransaction("Apply bundle documents","readwrite",O=>Of(O,T,g).next(H=>(T.apply(O),H)).next(H=>u.Qr.removeMatchingKeysForTargetId(O,b.targetId).next(()=>u.Qr.addMatchingKeys(O,h,b.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(O,H.cs,H.ls)).next(()=>H.cs)))})).apply(this,arguments)}function od(a,e){return ta.apply(this,arguments)}function ta(){return(ta=(0,ce.Z)(function*(a,e,r=tn()){const s=yield nl(a,jr(Os(e.bundledQuery))),u=gt(a);return u.persistence.runTransaction("Save named query","readwrite",h=>{const g=lr(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return u.$r.saveNamedQuery(h,e);const T=s.withResumeToken(Jn.EMPTY_BYTE_STRING,g);return u.ns=u.ns.insert(T.targetId,T),u.Qr.updateTargetData(h,T).next(()=>u.Qr.removeMatchingKeysForTargetId(h,s.targetId)).next(()=>u.Qr.addMatchingKeys(h,r,s.targetId)).next(()=>u.$r.saveNamedQuery(h,e))})})).apply(this,arguments)}function dh(a,e){return`firestore_clients_${a}_${e}`}function hh(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function ad(a,e){return`firestore_targets_${a}_${e}`}class bo{constructor(e,r,s,u){this.user=e,this.batchId=r,this.state=s,this.error=u}static Es(e,r,s){const u=JSON.parse(s);let h,g="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return g&&u.error&&(g="string"==typeof u.error.message&&"string"==typeof u.error.code,g&&(h=new tt(u.error.code,u.error.message))),g?new bo(e,r,u.state,h):(xn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class dc{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static Es(e,r){const s=JSON.parse(r);let u,h="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(u=new tt(s.error.code,s.error.message))),h?new dc(e,s.state,u):(xn("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sl{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Es(e,r){const s=JSON.parse(r);let u="object"==typeof s&&s.activeTargetIds instanceof Array,h=gs();for(let g=0;u&&g<s.activeTargetIds.length;++g)u=Bo(s.activeTargetIds[g]),h=h.add(s.activeTargetIds[g]);return u?new sl(e,h):(xn("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class hc{constructor(e,r){this.clientId=e,this.onlineState=r}static Es(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new hc(r.clientId,r.onlineState):(xn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class fc{constructor(){this.activeTargetIds=gs()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ro{constructor(e,r,s,u,h){this.window=e,this.oi=r,this.persistenceKey=s,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Gn(We),this.started=!1,this.ys=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ws=dh(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new fc),this.bs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(b){return`firestore_bundle_loaded_v2_${b}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ce.Z)(function*(){const r=yield e.syncEngine.Bi();for(const u of r){if(u===e.Vs)continue;const h=e.getItem(dh(e.persistenceKey,u));if(h){const g=sl.Es(u,h);g&&(e.ps=e.ps.insert(g.clientId,g))}}e.Ms();const s=e.storage.getItem(e.vs);if(s){const u=e.xs(s);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let r=!1;return this.ps.forEach((s,u)=>{u.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,r,s){this.Ls(e,r,s),this.Bs(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(ad(this.persistenceKey,e));if(s){const u=dc.Es(e,s);u&&(r=u.state)}}return this.ks.As(e),this.Ms(),r}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ad(this.persistenceKey,e))}updateQueryState(e,r,s){this.qs(e,r,s)}handleUserChange(e,r,s){r.forEach(u=>{this.Bs(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return be("SharedClientState","READ",e,r),r}setItem(e,r){be("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var r=this;const s=e;if(s.storageArea===this.storage){if(be("SharedClientState","EVENT",s.key,s.newValue),s.key===this.ws)return void xn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ce.Z)(function*(){if(r.started){if(null!==s.key)if(r.bs.test(s.key)){if(null==s.newValue){const u=r.$s(s.key);return r.Us(u,null)}{const u=r.Ws(s.key,s.newValue);if(u)return r.Us(u.clientId,u)}}else if(r.Ds.test(s.key)){if(null!==s.newValue){const u=r.Gs(s.key,s.newValue);if(u)return r.zs(u)}}else if(r.Cs.test(s.key)){if(null!==s.newValue){const u=r.js(s.key,s.newValue);if(u)return r.Hs(u)}}else if(s.key===r.vs){if(null!==s.newValue){const u=r.xs(s.newValue);if(u)return r.Os(u)}}else if(s.key===r.Ss){const u=function(g){let T=ui.oe;if(null!=g)try{const b=JSON.parse(g);bt("number"==typeof b),T=b}catch(b){xn("SharedClientState","Failed to read sequence number from WebStorage",b)}return T}(s.newValue);u!==ui.oe&&r.sequenceNumberHandler(u)}else if(s.key===r.Fs){const u=r.Js(s.newValue);yield Promise.all(u.map(h=>r.syncEngine.Ys(h)))}}else r.ys.push(s)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,r,s){const u=new bo(this.currentUser,e,r,s),h=hh(this.persistenceKey,this.currentUser,e);this.setItem(h,u.ds())}Bs(e){const r=hh(this.persistenceKey,this.currentUser,e);this.removeItem(r)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,r,s){const u=ad(this.persistenceKey,e),h=new dc(e,r,s);this.setItem(u,h.ds())}Ks(e){const r=JSON.stringify(Array.from(e));this.setItem(this.Fs,r)}$s(e){const r=this.bs.exec(e);return r?r[1]:null}Ws(e,r){const s=this.$s(e);return sl.Es(s,r)}Gs(e,r){const s=this.Ds.exec(e),u=Number(s[1]);return bo.Es(new An(void 0!==s[2]?s[2]:null),u,r)}js(e,r){const s=this.Cs.exec(e),u=Number(s[1]);return dc.Es(u,r)}xs(e){return hc.Es(e)}Js(e){return JSON.parse(e)}zs(e){var r=this;return(0,ce.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.Zs(e.batchId,e.state,e.error);be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,r){const s=r?this.ps.insert(e,r):this.ps.remove(e),u=this.Ns(this.ps),h=this.Ns(s),g=[],T=[];return h.forEach(b=>{u.has(b)||g.push(b)}),u.forEach(b=>{h.has(b)||T.push(b)}),this.syncEngine.eo(g,T).then(()=>{this.ps=s})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let r=gs();return e.forEach((s,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class Lf{constructor(){this.no=new fc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,r,s){this.ro[e]=r}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new fc,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ff{io(e){}shutdown(){}}class Vf{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ol=null;function al(){return null===ol?ol=268435456+Math.round(2147483648*Math.random()):ol++,"0x"+ol.toString(16)}const Cg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uf{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const pi="WebChannelConnection";class ud extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.wo=s+"://"+r.host,this.So=`projects/${u}/databases/${h}`,this.bo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${h}`}get Do(){return!1}Co(r,s,u,h,g){const T=al(),b=this.vo(r,s.toUriEncodedString());be("RestConnection",`Sending RPC '${r}' ${T}:`,b,u);const O={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(O,h,g),this.Mo(r,b,O,u).then(H=>(be("RestConnection",`Received RPC '${r}' ${T}: `,H),H),H=>{throw Zt("RestConnection",`RPC '${r}' ${T} failed with error: `,H,"url: ",b,"request:",u),H})}xo(r,s,u,h,g,T){return this.Co(r,s,u,h,g)}Fo(r,s,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+Wt,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((h,g)=>r[g]=h),u&&u.headers.forEach((h,g)=>r[g]=h)}vo(r,s){return`${this.wo}/v1/${s}:${Cg[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,r,s,u){const h=al();return new Promise((g,T)=>{const b=new hr;b.setWithCredentials(!0),b.listenOnce(Yr.COMPLETE,()=>{try{switch(b.getLastErrorCode()){case Nr.NO_ERROR:const H=b.getResponseJson();be(pi,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(H)),g(H);break;case Nr.TIMEOUT:be(pi,`RPC '${e}' ${h} timed out`),T(new tt(Me.DEADLINE_EXCEEDED,"Request time out"));break;case Nr.HTTP_ERROR:const K=b.getStatus();if(be(pi,`RPC '${e}' ${h} failed with status:`,K,"response text:",b.getResponseText()),K>0){let oe=b.getResponseJson();Array.isArray(oe)&&(oe=oe[0]);const Re=oe?.error;if(Re&&Re.status&&Re.message){const it=function(at){const Vt=at.toLowerCase().replace(/_/g,"-");return Object.values(Me).indexOf(Vt)>=0?Vt:Me.UNKNOWN}(Re.status);T(new tt(it,Re.message))}else T(new tt(Me.UNKNOWN,"Server responded with status "+b.getStatus()))}else T(new tt(Me.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{be(pi,`RPC '${e}' ${h} completed.`)}});const O=JSON.stringify(u);be(pi,`RPC '${e}' ${h} sending request:`,u),b.send(r,"POST",O,s,15)})}Oo(e,r,s){const u=al(),h=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=fn(),T=nn(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},O=this.longPollingOptions.timeoutSeconds;void 0!==O&&(b.longPollingTimeout=Math.round(1e3*O)),this.useFetchStreams&&(b.xmlHttpFactory=new Ui({})),this.Fo(b.initMessageHeaders,r,s),b.encodeInitMessageHeaders=!0;const H=h.join("");be(pi,`Creating RPC '${e}' stream ${u}: ${H}`,b);const K=g.createWebChannel(H,b);let oe=!1,Re=!1;const it=new Uf({lo:at=>{Re?be(pi,`Not sending because RPC '${e}' stream ${u} is closed:`,at):(oe||(be(pi,`Opening RPC '${e}' stream ${u} transport.`),K.open(),oe=!0),be(pi,`RPC '${e}' stream ${u} sending:`,at),K.send(at))},ho:()=>K.close()}),lt=(at,Vt,zt)=>{at.listen(Vt,wt=>{try{zt(wt)}catch(qt){setTimeout(()=>{throw qt},0)}})};return lt(K,oi.EventType.OPEN,()=>{Re||(be(pi,`RPC '${e}' stream ${u} transport opened.`),it.mo())}),lt(K,oi.EventType.CLOSE,()=>{Re||(Re=!0,be(pi,`RPC '${e}' stream ${u} transport closed`),it.po())}),lt(K,oi.EventType.ERROR,at=>{Re||(Re=!0,Zt(pi,`RPC '${e}' stream ${u} transport errored:`,at),it.po(new tt(Me.UNAVAILABLE,"The operation could not be completed")))}),lt(K,oi.EventType.MESSAGE,at=>{var Vt;if(!Re){const zt=at.data[0];bt(!!zt);const qt=zt.error||(null===(Vt=zt[0])||void 0===Vt?void 0:Vt.error);if(qt){be(pi,`RPC '${e}' stream ${u} received error:`,qt);const Tn=qt.status;let Mn=function(de){const Ie=yn[de];if(void 0!==Ie)return su(Ie)}(Tn),ye=qt.message;void 0===Mn&&(Mn=Me.INTERNAL,ye="Unknown error status: "+Tn+" with message "+qt.message),Re=!0,it.po(new tt(Mn,ye)),K.close()}else be(pi,`RPC '${e}' stream ${u} received:`,zt),it.yo(zt)}}),lt(T,Kt.STAT_EVENT,at=>{at.stat===Or.PROXY?be(pi,`RPC '${e}' stream ${u} detected buffering proxy`):at.stat===Or.NOPROXY&&be(pi,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{it.fo()},0),it}}function fh(){return typeof window<"u"?window:null}function cd(){return typeof document<"u"?document:null}function Zr(a){return new Pn(a,!0)}class ul{constructor(e,r,s=1e3,u=1.5,h=6e4){this.oi=e,this.timerId=r,this.No=s,this.Lo=u,this.Bo=h,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const r=Math.floor(this.ko+this.Uo()),s=Math.max(0,Date.now()-this.Qo),u=Math.max(0,r-s);u>0&&be("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.ko} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class Wi{constructor(e,r,s,u,h,g,T,b){this.oi=e,this.Go=s,this.zo=u,this.connection=h,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=T,this.listener=b,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ul(e,r)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,ce.Z)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,ce.Z)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,r){var s=this;return(0,ce.Z)(function*(){s.s_(),s.o_(),s.Yo.cancel(),s.jo++,4!==e?s.Yo.reset():r&&r.code===Me.RESOURCE_EXHAUSTED?(xn(r.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),s.Yo.Ko()):r&&r.code===Me.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.__(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Ao(r)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),r=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.jo===r&&this.u_(s,u)},s=>{e(()=>{const u=new tt(Me.UNKNOWN,"Fetching auth token failed: "+s.message);return this.c_(u)})})}u_(e,r){const s=this.a_(this.jo);this.stream=this.l_(e,r),this.stream.Po(()=>{s(()=>this.listener.Po())}),this.stream.To(()=>{s(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(u=>{s(()=>this.c_(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}e_(){var e=this;this.state=5,this.Yo.$o((0,ce.Z)(function*(){e.state=0,e.start()}))}c_(e){return be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return r=>{this.oi.enqueueAndForget(()=>this.jo===e?r():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Du extends Wi{constructor(e,r,s,u,h,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,u,g),this.serializer=h}l_(e,r){return this.connection.Oo("Listen",e,r)}onMessage(e){this.Yo.reset();const r=function ag(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(O=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===O?1:"REMOVE"===O?2:"CURRENT"===O?3:"RESET"===O?4:pt(),u=e.targetChange.targetIds||[],h=function(O,H){return O.useProto3Json?(bt(void 0===H||"string"==typeof H),Jn.fromBase64String(H||"")):(bt(void 0===H||H instanceof Buffer||H instanceof Uint8Array),Jn.fromUint8Array(H||new Uint8Array))}(a,e.targetChange.resumeToken),g=e.targetChange.cause,T=g&&function(O){const H=void 0===O.code?Me.UNKNOWN:su(O.code);return new tt(H,O.message||"")}(g);r=new N(s,u,h,T||null)}else if("documentChange"in e){const s=e.documentChange,u=Ns(a,s.document.name),h=lr(s.document.updateTime),g=s.document.createTime?lr(s.document.createTime):mt.min(),T=new br({mapValue:{fields:s.document.fields}}),b=nr.newFoundDocument(u,h,g,T);r=new v(s.targetIds||[],s.removedTargetIds||[],b.key,b)}else if("documentDelete"in e){const s=e.documentDelete,u=Ns(a,s.document),h=s.readTime?lr(s.readTime):mt.min(),g=nr.newNoDocument(u,h);r=new v([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,u=Ns(a,s.document);r=new v([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return pt();{const s=e.filter,{count:u=0,unchangedNames:h}=s,g=new jl(u,h);r=new S(s.targetId,g)}}var O;return r}(this.serializer,e),s=function(h){if(!("targetChange"in h))return mt.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?mt.min():g.readTime?lr(g.readTime):mt.min()}(e);return this.listener.h_(r,s)}P_(e){const r={};r.database=Wd(this.serializer),r.addTarget=function(h,g){let T;const b=g.target;if(T=Ws(b)?{documents:Hl(h,b)}:{query:au(h,b)._t},T.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){T.resumeToken=Qo(h,g.resumeToken);const O=ns(h,g.expectedCount);null!==O&&(T.expectedCount=O)}else if(g.snapshotVersion.compareTo(mt.min())>0){T.readTime=_s(h,g.snapshotVersion.toTimestamp());const O=ns(h,g.expectedCount);null!==O&&(T.expectedCount=O)}return T}(this.serializer,e);const s=function Yo(a,e){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.i_(r)}I_(e){const r={};r.database=Wd(this.serializer),r.removeTarget=e,this.i_(r)}}class Ri extends Wi{constructor(e,r,s,u,h,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,g),this.serializer=h,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,r){return this.connection.Oo("Write",e,r)}onMessage(e){if(bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const r=function Ju(a,e){return a&&a.length>0?(bt(void 0!==e),a.map(r=>function(u,h){let g=lr(u.updateTime?u.updateTime:h);return g.isEqual(mt.min())&&(g=lr(h)),new jd(g,u.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=lr(e.commitTime);return this.listener.A_(s,r)}return bt(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Wd(this.serializer),this.i_(e)}d_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>Do(this.serializer,s))};this.i_(r)}}class cl extends class{}{constructor(e,r,s,u){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.m_=!1}f_(){if(this.m_)throw new tt(Me.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,r,s,u){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.Co(e,bi(r,s),u,h,g)).catch(h=>{throw"FirebaseError"===h.name?(h.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new tt(Me.UNKNOWN,h.toString())})}xo(e,r,s,u,h){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,T])=>this.connection.xo(e,bi(r,s),u,g,T,h)).catch(g=>{throw"FirebaseError"===g.name?(g.code===Me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new tt(Me.UNKNOWN,g.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class ld{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(xn(r),this.y_=!1):be("OnlineStateTracker",r)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class dd{constructor(e,r,s,u,h){var g=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=h,this.O_.io(T=>{s.enqueueAndForget((0,ce.Z)(function*(){var b;Po(g)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(b=(0,ce.Z)(function*(H){const K=gt(H);K.M_.add(4),yield pc(K),K.N_.set("Unknown"),K.M_.delete(4),yield ll(K)}),function O(H){return b.apply(this,arguments)})(g))}))}),this.N_=new ld(s,u)}}function ll(a){return dl.apply(this,arguments)}function dl(){return(dl=(0,ce.Z)(function*(a){if(Po(a))for(const e of a.x_)yield e(!0)})).apply(this,arguments)}function pc(a){return to.apply(this,arguments)}function to(){return(to=(0,ce.Z)(function*(a){for(const e of a.x_)yield e(!1)})).apply(this,arguments)}function hl(a,e){const r=gt(a);r.F_.has(e.targetId)||(r.F_.set(e.targetId,e),gi(r)?gc(r):Mo(r).Xo()&&ph(r,e))}function Au(a,e){const r=gt(a),s=Mo(r);r.F_.delete(e),s.Xo()&&Bf(r,e),0===r.F_.size&&(s.Xo()?s.n_():Po(r)&&r.N_.set("Unknown"))}function ph(a,e){if(a.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Mo(a).P_(e)}function Bf(a,e){a.L_.xe(e),Mo(a).I_(e)}function gc(a){a.L_=new ne({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.F_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),Mo(a).start(),a.N_.w_()}function gi(a){return Po(a)&&!Mo(a).Zo()&&a.F_.size>0}function Po(a){return 0===gt(a).M_.size}function Ua(a){a.L_=void 0}function Sg(a){return no.apply(this,arguments)}function no(){return(no=(0,ce.Z)(function*(a){a.N_.set("Online")})).apply(this,arguments)}function mc(a){return fl.apply(this,arguments)}function fl(){return(fl=(0,ce.Z)(function*(a){a.F_.forEach((e,r)=>{ph(a,e)})})).apply(this,arguments)}function gh(a,e){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,ce.Z)(function*(a,e){Ua(a),gi(a)?(a.N_.D_(e),gc(a)):a.N_.set("Unknown")})).apply(this,arguments)}function _c(a,e,r){return hd.apply(this,arguments)}function hd(){return hd=(0,ce.Z)(function*(a,e,r){if(a.N_.set("Online"),e instanceof N&&2===e.state&&e.cause)try{yield(s=(0,ce.Z)(function*(h,g){const T=g.cause;for(const b of g.targetIds)h.F_.has(b)&&(yield h.remoteSyncer.rejectListen(b,T),h.F_.delete(b),h.L_.removeTarget(b))}),function u(h,g){return s.apply(this,arguments)})(a,e)}catch(s){be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield yc(a,s)}else if(e instanceof v?a.L_.Ke(e):e instanceof S?a.L_.He(e):a.L_.We(e),!r.isEqual(mt.min()))try{const s=yield ah(a.localStore);r.compareTo(s)>=0&&(yield function(h,g){const T=h.L_.rt(g);return T.targetChanges.forEach((b,O)=>{if(b.resumeToken.approximateByteSize()>0){const H=h.F_.get(O);H&&h.F_.set(O,H.withResumeToken(b.resumeToken,g))}}),T.targetMismatches.forEach((b,O)=>{const H=h.F_.get(b);if(!H)return;h.F_.set(b,H.withResumeToken(Jn.EMPTY_BYTE_STRING,H.snapshotVersion)),Bf(h,b);const K=new vs(H.target,b,O,H.sequenceNumber);ph(h,K)}),h.remoteSyncer.applyRemoteEvent(T)}(a,r))}catch(s){be("RemoteStore","Failed to raise snapshot:",s),yield yc(a,s)}var s}),hd.apply(this,arguments)}function yc(a,e,r){return vc.apply(this,arguments)}function vc(){return(vc=(0,ce.Z)(function*(a,e,r){if(!zr(e))throw e;a.M_.add(1),yield pc(a),a.N_.set("Offline"),r||(r=()=>ah(a.localStore)),a.asyncQueue.enqueueRetryable((0,ce.Z)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield r(),a.M_.delete(1),yield ll(a)}))})).apply(this,arguments)}function jf(a,e){return e().catch(r=>yc(a,r,e))}function m(a){return l.apply(this,arguments)}function l(){return(l=(0,ce.Z)(function*(a){const e=gt(a),r=xo(e);let s=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;d(e);)try{const u=yield uh(e.localStore,s);if(null===u){0===e.v_.length&&r.n_();break}s=u.batchId,y(e,u)}catch(u){yield yc(e,u)}M(e)&&B(e)})).apply(this,arguments)}function d(a){return Po(a)&&a.v_.length<10}function y(a,e){a.v_.push(e);const r=xo(a);r.Xo()&&r.E_&&r.d_(e.mutations)}function M(a){return Po(a)&&!xo(a).Zo()&&a.v_.length>0}function B(a){xo(a).start()}function ie(a){return ve.apply(this,arguments)}function ve(){return(ve=(0,ce.Z)(function*(a){xo(a).V_()})).apply(this,arguments)}function Ye(a){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,ce.Z)(function*(a){const e=xo(a);for(const r of a.v_)e.d_(r.mutations)})).apply(this,arguments)}function Ft(a,e,r){return xt.apply(this,arguments)}function xt(){return(xt=(0,ce.Z)(function*(a,e,r){const s=a.v_.shift(),u=Zu.from(s,e,r);yield jf(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield m(a)})).apply(this,arguments)}function Pr(a,e){return ri.apply(this,arguments)}function ri(){return ri=(0,ce.Z)(function*(a,e){var r;e&&xo(a).E_&&(yield(r=(0,ce.Z)(function*(u,h){if(Da(T=h.code)&&T!==Me.ABORTED){const g=u.v_.shift();xo(u).t_(),yield jf(u,()=>u.remoteSyncer.rejectFailedWrite(g.batchId,h)),yield m(u)}var T}),function s(u,h){return r.apply(this,arguments)})(a,e)),M(a)&&B(a)}),ri.apply(this,arguments)}function Ec(a,e){return pl.apply(this,arguments)}function pl(){return(pl=(0,ce.Z)(function*(a,e){const r=gt(a);r.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const s=Po(r);r.M_.add(3),yield pc(r),s&&r.N_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.M_.delete(3),yield ll(r)})).apply(this,arguments)}function gl(a,e){return mh.apply(this,arguments)}function mh(){return(mh=(0,ce.Z)(function*(a,e){const r=gt(a);e?(r.M_.delete(2),yield ll(r)):e||(r.M_.add(2),yield pc(r),r.N_.set("Unknown"))})).apply(this,arguments)}function Mo(a){return a.B_||(a.B_=function(r,s,u){const h=gt(r);return h.f_(),new Du(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(a.datastore,a.asyncQueue,{Po:Sg.bind(null,a),To:mc.bind(null,a),Ao:gh.bind(null,a),h_:_c.bind(null,a)}),a.x_.push(function(){var e=(0,ce.Z)(function*(r){r?(a.B_.t_(),gi(a)?gc(a):a.N_.set("Unknown")):(yield a.B_.stop(),Ua(a))});return function(r){return e.apply(this,arguments)}}())),a.B_}function xo(a){return a.k_||(a.k_=function(r,s,u){const h=gt(r);return h.f_(),new Ri(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,u)}(a.datastore,a.asyncQueue,{Po:()=>Promise.resolve(),To:ie.bind(null,a),Ao:Pr.bind(null,a),R_:Ye.bind(null,a),A_:Ft.bind(null,a)}),a.x_.push(function(){var e=(0,ce.Z)(function*(r){r?(a.k_.t_(),yield m(a)):(yield a.k_.stop(),a.v_.length>0&&(be("RemoteStore",`Stopping write stream with ${a.v_.length} pending writes`),a.v_=[]))});return function(r){return e.apply(this,arguments)}}())),a.k_}class ml{constructor(e,r,s,u,h){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=h,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,u,h){const g=Date.now()+s,T=new ml(e,r,g,u,h);return T.start(s),T}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tt(Me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ja(a,e){if(xn("AsyncQueue",`${e}: ${a}`),zr(a))return new tt(Me.UNAVAILABLE,`${e}: ${a}`);throw a}class na{constructor(e){this.comparator=e?(r,s)=>e(r,s)||vt.comparator(r.key,s.key):(r,s)=>vt.comparator(r.key,s.key),this.keyedMap=er(),this.sortedSet=new Gn(this.comparator)}static emptySet(e){return new na(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof na)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,h=s.getNext().key;if(!u.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new na;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class _l{constructor(){this.q_=new Gn(vt.comparator)}track(e){const r=e.doc.key,s=this.q_.get(r);s?0!==e.type&&3===s.type?this.q_=this.q_.insert(r,e):3===e.type&&1!==s.type?this.q_=this.q_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.q_=this.q_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.q_=this.q_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.q_=this.q_.remove(r):1===e.type&&2===s.type?this.q_=this.q_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.q_=this.q_.insert(r,{type:2,doc:e.doc}):pt():this.q_=this.q_.insert(r,e)}Q_(){const e=[];return this.q_.inorderTraversal((r,s)=>{e.push(s)}),e}}class Cu{constructor(e,r,s,u,h,g,T,b,O){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=T,this.excludesMetadataChanges=b,this.hasCachedResults=O}static fromInitialDocuments(e,r,s,u,h){const g=[];return r.forEach(T=>{g.push({type:0,doc:T})}),new Cu(e,r,na.emptySet(r),g,s,u,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&U(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==s[u].type||!r[u].doc.isEqual(s[u].doc))return!1;return!0}}class Ic{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class yl{constructor(){this.queries=new Cn(e=>P(e),U),this.onlineState="Unknown",this.z_=new Set}}function $f(a,e){return _h.apply(this,arguments)}function _h(){return(_h=(0,ce.Z)(function*(a,e){const r=gt(a);let s=3;const u=e.query;let h=r.queries.get(u);h?!h.W_()&&e.G_()&&(s=2):(h=new Ic,s=e.G_()?0:1);try{switch(s){case 0:h.K_=yield r.onListen(u,!0);break;case 1:h.K_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(g){const T=ja(g,`Initialization of query '${L(e.query)}' failed`);return void e.onError(T)}r.queries.set(u,h),h.U_.push(e),e.j_(r.onlineState),h.K_&&e.H_(h.K_)&&Rg(r)})).apply(this,arguments)}function fd(a,e){return Hf.apply(this,arguments)}function Hf(){return(Hf=(0,ce.Z)(function*(a,e){const r=gt(a),s=e.query;let u=3;const h=r.queries.get(s);if(h){const g=h.U_.indexOf(e);g>=0&&(h.U_.splice(g,1),0===h.U_.length?u=e.G_()?0:1:!h.W_()&&e.G_()&&(u=2))}switch(u){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function bg(a,e){const r=gt(a);let s=!1;for(const u of e){const g=r.queries.get(u.query);if(g){for(const T of g.U_)T.H_(u)&&(s=!0);g.K_=u}}s&&Rg(r)}function yh(a,e,r){const s=gt(a),u=s.queries.get(e);if(u)for(const h of u.U_)h.onError(r);s.queries.delete(e)}function Rg(a){a.z_.forEach(e=>{e.next()})}var zf,T_;(T_=zf||(zf={})).J_="default",T_.Cache="cache";class Pg{constructor(e,r,s){this.query=e,this.Y_=r,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=s||{}}H_(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new Cu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),r=!0):this.ta(e,this.onlineState)&&(this.na(e),r=!0),this.X_=e,r}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let r=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),r=!0),r}ta(e,r){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Cu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==zf.Cache}}class hv{constructor(e,r){this.ia=e,this.byteLength=r}sa(){return"metadata"in this.ia}}class Mg{constructor(e){this.serializer=e}Ps(e){return Ns(this.serializer,e)}Is(e){return e.metadata.exists?Kc(this.serializer,e.document,!1):nr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return lr(e)}}class D_{constructor(e,r,s){this.oa=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vh(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++r;const s=Ht.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}aa(e){const r=new Map,s=new Mg(this.serializer);for(const u of e)if(u.metadata.queries){const h=s.Ps(u.metadata.name);for(const g of u.metadata.queries){const T=(r.get(g)||tn()).add(h);r.set(g,T)}}return r}complete(){var e=this;return(0,ce.Z)(function*(){const r=yield function kf(a,e,r,s){return lh.apply(this,arguments)}(e.localStore,new Mg(e.serializer),e.documents,e.oa.id),s=e.aa(e.documents);for(const u of e.queries)yield od(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,ua:e.collectionGroups,ca:r}})()}}function vh(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class Gf{constructor(e){this.key=e}}class vl{constructor(e){this.key=e}}class A_{constructor(e,r){this.query=e,this.la=r,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=tn(),this.mutatedKeys=tn(),this.Ia=nt(e),this.Ta=new na(this.Ia)}get Ea(){return this.la}da(e,r){const s=r?r.Aa:new _l,u=r?r.Ta:this.Ta;let h=r?r.mutatedKeys:this.mutatedKeys,g=u,T=!1;const b="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,O="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((H,K)=>{const oe=u.get(H),Re=te(this.query,K)?K:null,it=!!oe&&this.mutatedKeys.has(oe.key),lt=!!Re&&(Re.hasLocalMutations||this.mutatedKeys.has(Re.key)&&Re.hasCommittedMutations);let at=!1;oe&&Re?oe.data.isEqual(Re.data)?it!==lt&&(s.track({type:3,doc:Re}),at=!0):this.Ra(oe,Re)||(s.track({type:2,doc:Re}),at=!0,(b&&this.Ia(Re,b)>0||O&&this.Ia(Re,O)<0)&&(T=!0)):!oe&&Re?(s.track({type:0,doc:Re}),at=!0):oe&&!Re&&(s.track({type:1,doc:oe}),at=!0,(b||O)&&(T=!0)),at&&(Re?(g=g.add(Re),h=lt?h.add(H):h.delete(H)):(g=g.delete(H),h=h.delete(H)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const H="F"===this.query.limitType?g.last():g.first();g=g.delete(H.key),h=h.delete(H.key),s.track({type:1,doc:H})}return{Ta:g,Aa:s,Xi:T,mutatedKeys:h}}Ra(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,u){const h=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const g=e.Aa.Q_();g.sort((H,K)=>function(Re,it){const lt=at=>{switch(at){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return lt(Re)-lt(it)}(H.type,K.type)||this.Ia(H.doc,K.doc)),this.Va(s),u=null!=u&&u;const T=r&&!u?this.ma():[],b=0===this.Pa.size&&this.current&&!u?1:0,O=b!==this.ha;return this.ha=b,0!==g.length||O?{snapshot:new Cu(this.query,e.Ta,h,g,e.mutatedKeys,0===b,O,!1,!!s&&s.resumeToken.approximateByteSize()>0),fa:T}:{fa:T}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new _l,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(r=>this.la=this.la.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.la=this.la.delete(r)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=tn(),this.Ta.forEach(s=>{this.ga(s.key)&&(this.Pa=this.Pa.add(s.key))});const r=[];return e.forEach(s=>{this.Pa.has(s)||r.push(new vl(s))}),this.Pa.forEach(s=>{e.has(s)||r.push(new Gf(s))}),r}pa(e){this.la=e.hs,this.Pa=tn();const r=this.da(e.documents);return this.applyChanges(r,!0)}ya(){return Cu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class fv{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class _I{constructor(e){this.key=e,this.wa=!1}}class pv{constructor(e,r,s,u,h,g){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.Sa={},this.ba=new Cn(T=>P(T),U),this.Da=new Map,this.Ca=new Set,this.va=new Gn(vt.comparator),this.Fa=new Map,this.Ma=new Xc,this.xa={},this.Oa=new Map,this.Na=yu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function xg(a,e){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ce.Z)(function*(a,e,r=!0){const s=Eh(a);let u;const h=s.ba.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),u=h.view.ya()):u=yield Wf(s,e,r,!0),u})).apply(this,arguments)}function pd(a,e){return gd.apply(this,arguments)}function gd(){return(gd=(0,ce.Z)(function*(a,e){const r=Eh(a);yield Wf(r,e,!0,!1)})).apply(this,arguments)}function Wf(a,e,r,s){return qf.apply(this,arguments)}function qf(){return(qf=(0,ce.Z)(function*(a,e,r,s){const u=yield nl(a.localStore,jr(e)),h=u.targetId,g=r?a.sharedClientState.addLocalQueryTarget(h):"not-current";let T;return s&&(T=yield Kf(a,e,h,"current"===g,u.resumeToken)),a.isPrimaryClient&&r&&hl(a.remoteStore,u),T})).apply(this,arguments)}function Kf(a,e,r,s,u){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,ce.Z)(function*(a,e,r,s,u){a.Ba=(K,oe,Re)=>{return(it=(0,ce.Z)(function*(at,Vt,zt,wt){let qt=Vt.view.da(zt);qt.Xi&&(qt=yield il(at.localStore,Vt.query,!1).then(({documents:se})=>Vt.view.da(se,qt)));const Tn=wt&&wt.targetChanges.get(Vt.targetId),Mn=wt&&null!=wt.targetMismatches.get(Vt.targetId),ye=Vt.view.applyChanges(qt,at.isPrimaryClient,Tn,Mn);return Il(at,Vt.targetId,ye.fa),ye.snapshot}),function lt(at,Vt,zt,wt){return it.apply(this,arguments)})(a,K,oe,Re);var it};const h=yield il(a.localStore,e,!0),g=new A_(e,h.hs),T=g.da(h.documents),b=C.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,u),O=g.applyChanges(T,a.isPrimaryClient,b);Il(a,r,O.fa);const H=new fv(e,r,g);return a.ba.set(e,H),a.Da.has(r)?a.Da.get(r).push(e):a.Da.set(r,[e]),O.snapshot}),Zf.apply(this,arguments)}function C_(a,e,r){return Og.apply(this,arguments)}function Og(){return(Og=(0,ce.Z)(function*(a,e,r){const s=gt(a),u=s.ba.get(e),h=s.Da.get(u.targetId);if(h.length>1)return s.Da.set(u.targetId,h.filter(g=>!U(g,e))),void s.ba.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(u.targetId),s.sharedClientState.isActiveQueryTarget(u.targetId)||(yield rl(s.localStore,u.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(u.targetId),r&&Au(s.remoteStore,u.targetId),wc(s,u.targetId)}).catch(Nn))):(wc(s,u.targetId),yield rl(s.localStore,u.targetId,!0))})).apply(this,arguments)}function gv(a,e){return kg.apply(this,arguments)}function kg(){return(kg=(0,ce.Z)(function*(a,e){const r=gt(a),s=r.ba.get(e),u=r.Da.get(s.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Au(r.remoteStore,s.targetId))})).apply(this,arguments)}function Lg(){return(Lg=(0,ce.Z)(function*(a,e,r){const s=Xf(a);try{const u=yield function(g,T){const b=gt(g),O=ft.now(),H=T.reduce((Re,it)=>Re.add(it.key),tn());let K,oe;return b.persistence.runTransaction("Locally write mutations","readwrite",Re=>{let it=un(),lt=tn();return b.os.getEntries(Re,H).next(at=>{it=at,it.forEach((Vt,zt)=>{zt.isValidDocument()||(lt=lt.add(Vt))})}).next(()=>b.localDocuments.getOverlayedDocuments(Re,it)).next(at=>{K=at;const Vt=[];for(const zt of T){const wt=Ef(zt,K.get(zt.key).overlayedDocument);null!=wt&&Vt.push(new wo(zt.key,wt,$u(wt.value.mapValue),wr.exists(!0)))}return b.mutationQueue.addMutationBatch(Re,O,Vt,T)}).next(at=>{oe=at;const Vt=at.applyToLocalDocumentSet(K,lt);return b.documentOverlayCache.saveOverlays(Re,at.batchId,Vt)})}).then(()=>({batchId:oe.batchId,changes:zn(K)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(g,T,b){let O=g.xa[g.currentUser.toKey()];O||(O=new Gn(We)),O=O.insert(T,b),g.xa[g.currentUser.toKey()]=O}(s,u.batchId,r),yield Ha(s,u.changes),yield m(s.remoteStore)}catch(u){const h=ja(u,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function Su(a,e){return El.apply(this,arguments)}function El(){return(El=(0,ce.Z)(function*(a,e){const r=gt(a);try{const s=yield function Tg(a,e){const r=gt(a),s=e.snapshotVersion;let u=r.ns;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const g=r.os.newChangeBuffer({trackRemovals:!0});u=r.ns;const T=[];e.targetChanges.forEach((H,K)=>{const oe=u.get(K);if(!oe)return;T.push(r.Qr.removeMatchingKeys(h,H.removedDocuments,K).next(()=>r.Qr.addMatchingKeys(h,H.addedDocuments,K)));let Re=oe.withSequenceNumber(h.currentSequenceNumber);var lt,at,Vt;null!==e.targetMismatches.get(K)?Re=Re.withResumeToken(Jn.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):H.resumeToken.approximateByteSize()>0&&(Re=Re.withResumeToken(H.resumeToken,s)),u=u.insert(K,Re),at=Re,Vt=H,(0===(lt=oe).resumeToken.approximateByteSize()||at.snapshotVersion.toMicroseconds()-lt.snapshotVersion.toMicroseconds()>=3e8||Vt.addedDocuments.size+Vt.modifiedDocuments.size+Vt.removedDocuments.size>0)&&T.push(r.Qr.updateTargetData(h,Re))});let b=un(),O=tn();if(e.documentUpdates.forEach(H=>{e.resolvedLimboDocuments.has(H)&&T.push(r.persistence.referenceDelegate.updateLimboDocument(h,H))}),T.push(Of(h,g,e.documentUpdates).next(H=>{b=H.cs,O=H.ls})),!s.isEqual(mt.min())){const H=r.Qr.getLastRemoteSnapshotVersion(h).next(K=>r.Qr.setTargetsMetadata(h,h.currentSequenceNumber,s));T.push(H)}return we.waitFor(T).next(()=>g.apply(h)).next(()=>r.localDocuments.getLocalViewOfDocuments(h,b,O)).next(()=>b)}).then(h=>(r.ns=u,h))}(r.localStore,e);e.targetChanges.forEach((u,h)=>{const g=r.Fa.get(h);g&&(bt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?g.wa=!0:u.modifiedDocuments.size>0?bt(g.wa):u.removedDocuments.size>0&&(bt(g.wa),g.wa=!1))}),yield Ha(r,s,e)}catch(s){yield Nn(s)}})).apply(this,arguments)}function S_(a,e,r){const s=gt(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const u=[];s.ba.forEach((h,g)=>{const T=g.view.j_(e);T.snapshot&&u.push(T.snapshot)}),function(g,T){const b=gt(g);b.onlineState=T;let O=!1;b.queries.forEach((H,K)=>{for(const oe of K.U_)oe.j_(T)&&(O=!0)}),O&&Rg(b)}(s.eventManager,e),u.length&&s.Sa.h_(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function yI(a,e,r){return b_.apply(this,arguments)}function b_(){return(b_=(0,ce.Z)(function*(a,e,r){const s=gt(a);s.sharedClientState.updateQueryState(e,"rejected",r);const u=s.Fa.get(e),h=u&&u.key;if(h){let g=new Gn(vt.comparator);g=g.insert(h,nr.newNoDocument(h,mt.min()));const T=tn().add(h),b=new w(mt.min(),new Map,new Gn(We),g,T);yield Su(s,b),s.va=s.va.remove(h),s.Fa.delete(e),Yf(s)}else yield rl(s.localStore,e,!1).then(()=>wc(s,e,r)).catch(Nn)})).apply(this,arguments)}function vI(a,e){return R_.apply(this,arguments)}function R_(){return(R_=(0,ce.Z)(function*(a,e){const r=gt(a),s=e.batch.batchId;try{const u=yield function Nf(a,e){const r=gt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),h=r.os.newChangeBuffer({trackRemovals:!0});return function(T,b,O,H){const K=O.batch,oe=K.keys();let Re=we.resolve();return oe.forEach(it=>{Re=Re.next(()=>H.getEntry(b,it)).next(lt=>{const at=O.docVersions.get(it);bt(null!==at),lt.version.compareTo(at)<0&&(K.applyToRemoteDocument(lt,O),lt.isValidDocument()&&(lt.setReadTime(O.commitVersion),H.addEntry(lt)))})}),Re.next(()=>T.mutationQueue.removeMutationBatch(b,K))}(r,s,e,h).next(()=>h.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(T){let b=tn();for(let O=0;O<T.mutationResults.length;++O)T.mutationResults[O].transformResults.length>0&&(b=b.add(T.batch.mutations[O].key));return b}(e))).next(()=>r.localDocuments.getDocuments(s,u))})}(r.localStore,e);Ug(r,s,null),Vg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield Ha(r,u)}catch(u){yield Nn(u)}})).apply(this,arguments)}function EI(a,e,r){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,ce.Z)(function*(a,e,r){const s=gt(a);try{const u=yield function(g,T){const b=gt(g);return b.persistence.runTransaction("Reject batch","readwrite-primary",O=>{let H;return b.mutationQueue.lookupMutationBatch(O,T).next(K=>(bt(null!==K),H=K.keys(),b.mutationQueue.removeMutationBatch(O,K))).next(()=>b.mutationQueue.performConsistencyCheck(O)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(O,H,T)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(O,H)).next(()=>b.localDocuments.getDocuments(O,H))})}(s.localStore,e);Ug(s,e,r),Vg(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield Ha(s,u)}catch(u){yield Nn(u)}})).apply(this,arguments)}function Fg(){return(Fg=(0,ce.Z)(function*(a,e){const r=gt(a);Po(r.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const T=gt(g);return T.persistence.runTransaction("Get highest unacknowledged batch id","readonly",b=>T.mutationQueue.getHighestUnacknowledgedBatchId(b))}(r.localStore);if(-1===s)return void e.resolve();const u=r.Oa.get(s)||[];u.push(e),r.Oa.set(s,u)}catch(s){const u=ja(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}})).apply(this,arguments)}function Vg(a,e){(a.Oa.get(e)||[]).forEach(r=>{r.resolve()}),a.Oa.delete(e)}function Ug(a,e,r){const s=gt(a);let u=s.xa[s.currentUser.toKey()];if(u){const h=u.get(e);h&&(r?h.reject(r):h.resolve(),u=u.remove(e)),s.xa[s.currentUser.toKey()]=u}}function wc(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Da.get(e))a.ba.delete(s),r&&a.Sa.ka(s,r);a.Da.delete(e),a.isPrimaryClient&&a.Ma.Vr(e).forEach(s=>{a.Ma.containsKey(s)||$a(a,s)})}function $a(a,e){a.Ca.delete(e.path.canonicalString());const r=a.va.get(e);null!==r&&(Au(a.remoteStore,r),a.va=a.va.remove(e),a.Fa.delete(r),Yf(a))}function Il(a,e,r){for(const s of r)s instanceof Gf?(a.Ma.addReference(s.key,e),P_(a,s)):s instanceof vl?(be("SyncEngine","Document no longer in limbo: "+s.key),a.Ma.removeReference(s.key,e),a.Ma.containsKey(s.key)||$a(a,s.key)):pt()}function P_(a,e){const r=e.key,s=r.path.canonicalString();a.va.get(r)||a.Ca.has(s)||(be("SyncEngine","New document in limbo: "+r),a.Ca.add(s),Yf(a))}function Yf(a){for(;a.Ca.size>0&&a.va.size<a.maxConcurrentLimboResolutions;){const e=a.Ca.values().next().value;a.Ca.delete(e);const r=new vt(Ht.fromString(e)),s=a.Na.next();a.Fa.set(s,new _I(r)),a.va=a.va.insert(r,s),hl(a.remoteStore,new vs(jr(qs(r.path)),s,"TargetPurposeLimboResolution",ui.oe))}}function Ha(a,e,r){return M_.apply(this,arguments)}function M_(){return M_=(0,ce.Z)(function*(a,e,r){const s=gt(a),u=[],h=[],g=[];var T;s.ba.isEmpty()||(s.ba.forEach((T,b)=>{g.push(s.Ba(b,e,r).then(O=>{var H;if((O||r)&&s.isPrimaryClient){const K=O?!O.fromCache:null===(H=r?.targetChanges.get(b.targetId))||void 0===H?void 0:H.current;s.sharedClientState.updateQueryState(b.targetId,K?"current":"not-current")}if(O){u.push(O);const K=el.Ki(b.targetId,O);h.push(K)}}))}),yield Promise.all(g),s.Sa.h_(u),yield(T=(0,ce.Z)(function*(O,H){const K=gt(O);try{yield K.persistence.runTransaction("notifyLocalViewChanges","readwrite",oe=>we.forEach(H,Re=>we.forEach(Re.qi,it=>K.persistence.referenceDelegate.addReference(oe,Re.targetId,it)).next(()=>we.forEach(Re.Qi,it=>K.persistence.referenceDelegate.removeReference(oe,Re.targetId,it)))))}catch(oe){if(!zr(oe))throw oe;be("LocalStore","Failed to update sequence numbers: "+oe)}for(const oe of H){const Re=oe.targetId;if(!oe.fromCache){const it=K.ns.get(Re),at=it.withLastLimboFreeSnapshotVersion(it.snapshotVersion);K.ns=K.ns.insert(Re,at)}}}),function b(O,H){return T.apply(this,arguments)})(s.localStore,h))}),M_.apply(this,arguments)}function II(a,e){return x_.apply(this,arguments)}function x_(){return(x_=(0,ce.Z)(function*(a,e){const r=gt(a);if(!r.currentUser.isEqual(e)){be("SyncEngine","User change. New user:",e.toKey());const s=yield tl(r.localStore,e);r.currentUser=e,(h=r).Oa.forEach(T=>{T.forEach(b=>{b.reject(new tt(Me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Oa.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Ha(r,s.us)}var h})).apply(this,arguments)}function Bg(a,e){const r=gt(a),s=r.Fa.get(e);if(s&&s.wa)return tn().add(s.key);{let u=tn();const h=r.Da.get(e);if(!h)return u;for(const g of h){const T=r.ba.get(g);u=u.unionWith(T.view.Ea)}return u}}function jg(a,e){return N_.apply(this,arguments)}function N_(){return(N_=(0,ce.Z)(function*(a,e){const r=gt(a),s=yield il(r.localStore,e.query,!0),u=e.view.pa(s);return r.isPrimaryClient&&Il(r,e.targetId,u.fa),u})).apply(this,arguments)}function wI(a,e){return Jf.apply(this,arguments)}function Jf(){return(Jf=(0,ce.Z)(function*(a,e){const r=gt(a);return Ag(r.localStore,e).then(s=>Ha(r,s))})).apply(this,arguments)}function yv(a,e,r,s){return $g.apply(this,arguments)}function $g(){return($g=(0,ce.Z)(function*(a,e,r,s){const u=gt(a),h=yield function(T,b){const O=gt(T),H=gt(O.mutationQueue);return O.persistence.runTransaction("Lookup mutation documents","readonly",K=>H.vn(K,b).next(oe=>oe?O.localDocuments.getDocuments(K,oe):we.resolve(null)))}(u.localStore,e);var b;null!==h?("pending"===r?yield m(u.remoteStore):"acknowledged"===r||"rejected"===r?(Ug(u,e,s||null),Vg(u,e),b=e,gt(gt(u.localStore).mutationQueue).Mn(b)):pt(),yield Ha(u,h)):be("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Hg(){return(Hg=(0,ce.Z)(function*(a,e){const r=gt(a);if(Eh(r),Xf(r),!0===e&&!0!==r.La){const s=r.sharedClientState.getAllActiveQueryTargets(),u=yield zg(r,s.toArray());r.La=!0,yield gl(r.remoteStore,!0);for(const h of u)hl(r.remoteStore,h)}else if(!1===e&&!1!==r.La){const s=[];let u=Promise.resolve();r.Da.forEach((h,g)=>{r.sharedClientState.isLocalQueryTarget(g)?s.push(g):u=u.then(()=>(wc(r,g),rl(r.localStore,g,!0))),Au(r.remoteStore,g)}),yield u,yield zg(r,s),function(g){const T=gt(g);T.Fa.forEach((b,O)=>{Au(T.remoteStore,O)}),T.Ma.mr(),T.Fa=new Map,T.va=new Gn(vt.comparator)}(r),r.La=!1,yield gl(r.remoteStore,!1)}})).apply(this,arguments)}function zg(a,e,r){return md.apply(this,arguments)}function md(){return(md=(0,ce.Z)(function*(a,e,r){const s=gt(a),u=[],h=[];for(const g of e){let T;const b=s.Da.get(g);if(b&&0!==b.length){T=yield nl(s.localStore,jr(b[0]));for(const O of b){const H=s.ba.get(O),K=yield jg(s,H);K.snapshot&&h.push(K.snapshot)}}else{const O=yield Dg(s.localStore,g);T=yield nl(s.localStore,O),yield Kf(s,O_(O),g,!1,T.resumeToken)}u.push(T)}return s.Sa.h_(h),u})).apply(this,arguments)}function O_(a){return Gu(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Gg(a){return r=gt(a).localStore,gt(gt(r).persistence).Bi();var r}function Ev(a,e,r,s){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,ce.Z)(function*(a,e,r,s){const u=gt(a);if(u.La)return void be("SyncEngine","Ignoring unexpected query state notification.");const h=u.Da.get(e);if(h&&h.length>0)switch(r){case"current":case"not-current":{const g=yield Ag(u.localStore,Fe(h[0])),T=w.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Jn.EMPTY_BYTE_STRING);yield Ha(u,g,T);break}case"rejected":yield rl(u.localStore,e,!0),wc(u,e,s);break;default:pt()}})).apply(this,arguments)}function Iv(a,e,r){return Wg.apply(this,arguments)}function Wg(){return(Wg=(0,ce.Z)(function*(a,e,r){const s=Eh(a);if(s.La){for(const u of e){if(s.Da.has(u)&&s.sharedClientState.isActiveQueryTarget(u)){be("SyncEngine","Adding an already active target "+u);continue}const h=yield Dg(s.localStore,u),g=yield nl(s.localStore,h);yield Kf(s,O_(h),g.targetId,!1,g.resumeToken),hl(s.remoteStore,g)}for(const u of r)s.Da.has(u)&&(yield rl(s.localStore,u,!1).then(()=>{Au(s.remoteStore,u),wc(s,u)}).catch(Nn))}})).apply(this,arguments)}function Eh(a){const e=gt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Su.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yI.bind(null,e),e.Sa.h_=bg.bind(null,e.eventManager),e.Sa.ka=yh.bind(null,e.eventManager),e}function Xf(a){const e=gt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EI.bind(null,e),e}class Ih{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,ce.Z)(function*(){r.serializer=Zr(e.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(e),r.persistence=r.createPersistence(e),yield r.persistence.start(),r.localStore=r.createLocalStore(e),r.gcScheduler=r.createGarbageCollectionScheduler(e,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(e,r.localStore)})()}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return Mf(this.persistence,new Tu,e.initialUser,this.serializer)}createPersistence(e){return new rd(id.Hr,this.serializer)}createSharedClientState(e){return new Lf}terminate(){var e=this;return(0,ce.Z)(function*(){var r,s;null===(r=e.gcScheduler)||void 0===r||r.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qg extends Ih{constructor(e,r,s){super(),this.Qa=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,ce.Z)(function*(){yield r().call(s,e),yield s.Qa.initialize(s,e),yield Xf(s.Qa.syncEngine),yield m(s.Qa.remoteStore),yield s.persistence.fi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Mf(this.persistence,new Tu,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,r){return new _g(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}createIndexBackfillerScheduler(e,r){const s=new Uu(r,this.persistence);return new Fl(e.asyncQueue,s)}createPersistence(e){const r=oh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new sd(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,fh(),cd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Lf}}class Kg extends qg{constructor(e,r){super(e,r,!1),this.Qa=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,ce.Z)(function*(){yield r().call(s,e);const u=s.Qa.syncEngine;s.sharedClientState instanceof Ro&&(s.sharedClientState.syncEngine={Zs:yv.bind(null,u),Xs:Ev.bind(null,u),eo:Iv.bind(null,u),Bi:Gg.bind(null,u),Ys:wI.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.fi(function(){var h=(0,ce.Z)(function*(g){yield function vv(a,e){return Hg.apply(this,arguments)}(s.Qa.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const r=fh();if(!Ro.D(r))throw new tt(Me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=oh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ro(r,e.asyncQueue,s,e.clientId,e.initialUser)}}class wh{initialize(e,r){var s=this;return(0,ce.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>S_(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=II.bind(null,s.syncEngine),yield gl(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yl}createDatastore(e){const r=Zr(e.databaseInfo.databaseId),s=new ud(e.databaseInfo);return new cl(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return s=this.localStore,u=this.datastore,h=e.asyncQueue,g=r=>S_(this.syncEngine,r,0),T=Vf.D()?new Vf:new Ff,new dd(s,u,h,g,T);var s,u,h,g,T}createSyncEngine(e,r){return function(u,h,g,T,b,O,H){const K=new pv(u,h,g,T,b,O);return H&&(K.La=!0),K}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){var e=this;return(0,ce.Z)(function*(){var r,s;yield(s=(0,ce.Z)(function*(h){const g=gt(h);be("RemoteStore","RemoteStore shutting down."),g.M_.add(5),yield pc(g),g.O_.shutdown(),g.N_.set("Unknown")}),function u(h){return s.apply(this,arguments)})(e.remoteStore),null===(r=e.datastore)||void 0===r||r.terminate()})()}}function Dv(a,e=10240){let r=0;return{read:()=>(0,ce.Z)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,ce.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Dc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):xn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class Th{constructor(e,r){this.Ua=e,this.serializer=r,this.metadata=new Un,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then(s=>{s&&s.sa()?this.metadata.resolve(s.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?.ia)}`))},s=>this.metadata.reject(s))}close(){return this.Ua.cancel()}getMetadata(){var e=this;return(0,ce.Z)(function*(){return e.metadata.promise})()}qa(){var e=this;return(0,ce.Z)(function*(){return yield e.getMetadata(),e.Ga()})()}Ga(){var e=this;return(0,ce.Z)(function*(){const r=yield e.za();if(null===r)return null;const s=e.Wa.decode(r),u=Number(s);isNaN(u)&&e.ja(`length string (${s}) is not valid number`);const h=yield e.Ha(u);return new hv(JSON.parse(h),r.length+u)})()}Ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}za(){var e=this;return(0,ce.Z)(function*(){for(;e.Ja()<0&&!(yield e.Ya()););if(0===e.buffer.length)return null;const r=e.Ja();r<0&&e.ja("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}Ha(e){var r=this;return(0,ce.Z)(function*(){for(;r.buffer.length<e;)(yield r.Ya())&&r.ja("Reached the end of bundle when more is expected.");const s=r.Wa.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){var e=this;return(0,ce.Z)(function*(){const r=yield e.Ua.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class k_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,ce.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new tt(Me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(u=(0,ce.Z)(function*(g,T){const b=gt(g),O={documents:T.map(Re=>mr(b.serializer,Re))},H=yield b.xo("BatchGetDocuments",b.serializer.databaseId,Ht.emptyPath(),O,T.length),K=new Map;H.forEach(Re=>{const it=function Ra(a,e){return"found"in e?function(s,u){bt(!!u.found);const h=Ns(s,u.found.name),g=lr(u.found.updateTime),T=u.found.createTime?lr(u.found.createTime):mt.min(),b=new br({mapValue:{fields:u.found.fields}});return nr.newFoundDocument(h,g,T,b)}(a,e):"missing"in e?function(s,u){bt(!!u.missing),bt(!!u.readTime);const h=Ns(s,u.missing),g=lr(u.readTime);return nr.newNoDocument(h,g)}(a,e):pt()}(b.serializer,Re);K.set(it.key.toString(),it)});const oe=[];return T.forEach(Re=>{const it=K.get(Re.toString());bt(!!it),oe.push(it)}),oe}),function h(g,T){return u.apply(this,arguments)})(r.datastore,e);var u;return s.forEach(u=>r.recordVersion(u)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new To(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ce.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,u)=>{const h=vt.fromPath(u);e.mutations.push(new ut(h,e.precondition(h)))}),yield(s=(0,ce.Z)(function*(h,g){const T=gt(h),b={writes:g.map(O=>Do(T.serializer,O))};yield T.Co("Commit",T.serializer.databaseId,Ht.emptyPath(),b)}),function u(h,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw pt();r=mt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new tt(Me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(mt.min())?wr.exists(!1):wr.updateTime(r):wr.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(mt.min()))throw new tt(Me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(r)}return wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class L_{constructor(e,r,s,u,h){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=u,this.deferred=h,this.Za=s.maxAttempts,this.Yo=new ul(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,ce.Z)(function*(){const r=new k_(e.datastore),s=e.tu(r);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(u)}).catch(h=>{e.nu(h)}))}).catch(u=>{e.nu(u)})}))}tu(e){try{const r=this.updateFunction(e);return!ho(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Da(r)}return!1}}class Zg{constructor(e,r,s,u){var h=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=An.UNAUTHENTICATED,this.clientId=je.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var g=(0,ce.Z)(function*(T){be("FirestoreClient","Received user=",T.uid),yield h.authCredentialListener(T),h.user=T});return function(T){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(s,g=>(be("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new tt(Me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const u=ja(s,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function Dh(a,e){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,ce.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ce.Z)(function*(h){s.isEqual(h)||(yield tl(e.localStore,h),s=h)});return function(h){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),Qg.apply(this,arguments)}function ep(a,e){return tp.apply(this,arguments)}function tp(){return(tp=(0,ce.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield F_(a);be("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>Ec(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,u)=>Ec(e.remoteStore,u)),a._onlineComponents=e})).apply(this,arguments)}function Ah(a){return"FirebaseError"===a.name?a.code===Me.FAILED_PRECONDITION||a.code===Me.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function F_(a){return Ch.apply(this,arguments)}function Ch(){return(Ch=(0,ce.Z)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dh(a,a._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!Ah(r))throw r;Zt("Error using user provided cache. Falling back to memory cache: "+r),yield Dh(a,new Ih)}}else be("FirestoreClient","Using default OfflineComponentProvider"),yield Dh(a,new Ih);return a._offlineComponents})).apply(this,arguments)}function np(a){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,ce.Z)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(be("FirestoreClient","Using user provided OnlineComponentProvider"),yield ep(a,a._uninitializedComponentsProvider._online)):(be("FirestoreClient","Using default OnlineComponentProvider"),yield ep(a,new wh))),a._onlineComponents})).apply(this,arguments)}function Yg(a){return F_(a).then(e=>e.persistence)}function wl(a){return F_(a).then(e=>e.localStore)}function Ac(a){return np(a).then(e=>e.remoteStore)}function Jg(a){return np(a).then(e=>e.syncEngine)}function bu(a){return Xg.apply(this,arguments)}function Xg(){return(Xg=(0,ce.Z)(function*(a){const e=yield np(a),r=e.eventManager;return r.onListen=xg.bind(null,e.syncEngine),r.onUnlisten=C_.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=pd.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=gv.bind(null,e.syncEngine),r})).apply(this,arguments)}function Tl(a,e,r={}){const s=new Un;return a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(h,g,T,b,O){const H=new Dc({next:oe=>{g.enqueueAndForget(()=>fd(h,K));const Re=oe.docs.has(T);!Re&&oe.fromCache?O.reject(new tt(Me.UNAVAILABLE,"Failed to get document because the client is offline.")):Re&&oe.fromCache&&b&&"server"===b.source?O.reject(new tt(Me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):O.resolve(oe)},error:oe=>O.reject(oe)}),K=new Pg(qs(T.path),H,{includeMetadataChanges:!0,ra:!0});return $f(h,K)}(yield bu(a),a.asyncQueue,e,r,s)})),s.promise}function V_(a,e,r={}){const s=new Un;return a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function(h,g,T,b,O){const H=new Dc({next:oe=>{g.enqueueAndForget(()=>fd(h,K)),oe.fromCache&&"server"===b.source?O.reject(new tt(Me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):O.resolve(oe)},error:oe=>O.reject(oe)}),K=new Pg(T,H,{includeMetadataChanges:!0,ra:!0});return $f(h,K)}(yield bu(a),a.asyncQueue,e,r,s)})),s.promise}function rm(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const B_=new Map;function sp(a,e,r){if(!r)throw new tt(Me.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function op(a,e,r,s){if(!0===e&&!0===s)throw new tt(Me.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Rv(a){if(!vt.isDocumentKey(a))throw new tt(Me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Pv(a){if(vt.isDocumentKey(a))throw new tt(Me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function ap(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":pt()}function Vn(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new tt(Me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ap(a);throw new tt(Me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function Mv(a,e){if(e<=0)throw new tt(Me.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class xv{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new tt(Me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tt(Me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}op("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=rm(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new tt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new tt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new tt(Me.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cc{constructor(e,r,s,u){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new tt(Me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tt(Me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new xi;switch(s.type){case"firstParty":return new G(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new tt(Me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=B_.get(r);s&&(be("ComponentProvider","Removing Datastore"),B_.delete(r),s.terminate())}(this),Promise.resolve()}}class Pi{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class Tr{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class Is extends Pi{constructor(e,r,s){super(e,r,qs(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new vt(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function up(a,e,...r){if(a=(0,Nt.m9)(a),sp("collection","path",e),a instanceof Cc){const s=Ht.fromString(e,...r);return Pv(s),new Is(a,null,s)}{if(!(a instanceof Tr||a instanceof Is))throw new tt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Ht.fromString(e,...r));return Pv(s),new Is(a.firestore,null,s)}}function Sc(a,e,...r){if(a=(0,Nt.m9)(a),1===arguments.length&&(e=je.newId()),sp("doc","path",e),a instanceof Cc){const s=Ht.fromString(e,...r);return Rv(s),new Tr(a,null,new vt(s))}{if(!(a instanceof Tr||a instanceof Is))throw new tt(Me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Ht.fromString(e,...r));return Rv(s),new Tr(a.firestore,a instanceof Is?a.converter:null,new vt(s))}}function bh(a,e){return a=(0,Nt.m9)(a),e=(0,Nt.m9)(e),(a instanceof Tr||a instanceof Is)&&(e instanceof Tr||e instanceof Is)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function bc(a,e){return a=(0,Nt.m9)(a),e=(0,Nt.m9)(e),a instanceof Pi&&e instanceof Pi&&a.firestore===e.firestore&&U(a._query,e._query)&&a.converter===e.converter}class sm{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ul(this,"async_queue_retry"),this.hu=()=>{const r=cd();r&&be("AsyncQueue","Visibility state changed to "+r.visibilityState),this.Yo.Wo()};const e=cd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const r=cd();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const r=new Un;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,ce.Z)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(r){if(!zr(r))throw r;be("AsyncQueue","Operation failed with retryable error: "+r)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const r=this.iu.then(()=>(this.uu=!0,e().catch(s=>{throw this.au=s,this.uu=!1,xn("INTERNAL UNHANDLED ERROR: ",function(g){let T=g.message||"";return g.stack&&(T=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),T}(s)),s}).then(s=>(this.uu=!1,s))));return this.iu=r,r}enqueueAfterDelay(e,r,s){this.Pu(),this.lu.indexOf(e)>-1&&(r=0);const u=ml.createAndSchedule(this,e,r,s,h=>this.Eu(h));return this._u.push(u),u}Pu(){this.au&&pt()}verifyOperationInProgress(){}du(){var e=this;return(0,ce.Z)(function*(){let r;do{r=e.iu,yield r}while(r!==e.iu)})()}Au(e){for(const r of this._u)if(r.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this._u)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const r=this._u.indexOf(e);this._u.splice(r,1)}}function Rh(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const u=r;for(const h of["next","error","complete"])if(h in u&&"function"==typeof u[h])return!0;return!1}(a)}class cp{constructor(){this._progressObserver={},this._taskCompletionResolver=new Un,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends Cc{constructor(e,r,s,u){super(e,r,s,u),this.type="firestore",this._queue=new sm,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$_(this),this._firestoreClient.terminate()}}function xr(a){return a._firestoreClient||$_(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function $_(a){var e,r,s;const u=a._freezeSettings(),h=(b=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new zs(a._databaseId,b,a._persistenceKey,(H=u).host,H.ssl,H.experimentalForceLongPolling,H.experimentalAutoDetectLongPolling,rm(H.experimentalLongPollingOptions),H.useFetchStreams));var b,H;a._firestoreClient=new Zg(a._authCredentials,a._appCheckCredentials,a._queue,h),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(s=u.localCache)&&void 0!==s&&s._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function am(a,e,r){const s=new Un;return a.asyncQueue.enqueue((0,ce.Z)(function*(){try{yield Dh(a,r),yield ep(a,e),s.resolve()}catch(u){const h=u;if(!Ah(h))throw h;Zt("Error enabling indexeddb cache. Falling back to memory cache: "+h),s.reject(h)}})).then(()=>s.promise)}function lm(a){if(a._initialized||a._terminated)throw new tt(Me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ga{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ga(Jn.fromBase64String(e))}catch(r){throw new tt(Me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ga(Jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Wa{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new tt(Me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rc{constructor(e){this._methodName=e}}class dm{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new tt(Me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new tt(Me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}const Vv=/^__.*__$/;class hp{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new wo(e,this.data,this.fieldMask,r,this.fieldTransforms):new ts(e,this.data,r,this.fieldTransforms)}}class H_{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new wo(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Al(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}class Pc{constructor(e,r,s,u,h,g){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,void 0===h&&this.mu(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Pc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.gu({path:s,yu:!1});return u.wu(e),u}Su(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),u=this.gu({path:s,yu:!1});return u.mu(),u}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Oh(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(Al(this.fu)&&Vv.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class Uv{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||Zr(e)}Fu(e,r,s,u=!1){return new Pc({fu:e,methodName:r,vu:s,path:Bn.emptyPath(),yu:!1,Cu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mc(a){const e=a._freezeSettings(),r=Zr(a._databaseId);return new Uv(a._databaseId,!!e.ignoreUndefinedProperties,r)}function fp(a,e,r,s,u,h={}){const g=a.Fu(h.merge||h.mergeFields?2:0,e,r,u);_p("Data must be an object, but it was:",g,s);const T=hm(s,g);let b,O;if(h.merge)b=new Ur(g.fieldMask),O=g.fieldTransforms;else if(h.mergeFields){const H=[];for(const K of h.mergeFields){const oe=Nh(e,K,r);if(!g.contains(oe))throw new tt(Me.INVALID_ARGUMENT,`Field '${oe}' is specified in your field mask but missing from your input data.`);pm(H,oe)||H.push(oe)}b=new Ur(H),O=g.fieldTransforms.filter(K=>b.covers(K.field))}else b=null,O=g.fieldTransforms;return new hp(new br(T),b,O)}class Ph extends Rc{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ph}}function z_(a,e,r){return new Pc({fu:3,vu:e.settings.vu,methodName:a._methodName,yu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class pp extends Rc{_toFieldTransform(e){return new Io(e.path,new Qs)}isEqual(e){return e instanceof pp}}class gp extends Rc{constructor(e,r){super(e),this.Mu=r}_toFieldTransform(e){const r=z_(this,e,!0),s=this.Mu.map(h=>Cl(h,r)),u=new ni(s);return new Io(e.path,u)}isEqual(e){return e instanceof gp&&(0,Nt.vZ)(this.Mu,e.Mu)}}class Mh extends Rc{constructor(e,r){super(e),this.Mu=r}_toFieldTransform(e){const r=z_(this,e,!0),s=this.Mu.map(h=>Cl(h,r)),u=new Eo(s);return new Io(e.path,u)}isEqual(e){return e instanceof Mh&&(0,Nt.vZ)(this.Mu,e.Mu)}}class G_ extends Rc{constructor(e,r){super(e),this.xu=r}_toFieldTransform(e){const r=new ms(e.serializer,qu(e.serializer,this.xu));return new Io(e.path,r)}isEqual(e){return e instanceof G_&&this.xu===e.xu}}function xh(a,e,r,s){const u=a.Fu(1,e,r);_p("Data must be an object, but it was:",u,s);const h=[],g=br.empty();vi(s,(b,O)=>{const H=fm(e,b,r);O=(0,Nt.m9)(O);const K=u.Su(H);if(O instanceof Ph)h.push(H);else{const oe=Cl(O,K);null!=oe&&(h.push(H),g.set(H,oe))}});const T=new Ur(h);return new H_(g,T,u.fieldTransforms)}function mp(a,e,r,s,u,h){const g=a.Fu(1,e,r),T=[Nh(e,s,r)],b=[u];if(h.length%2!=0)throw new tt(Me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let oe=0;oe<h.length;oe+=2)T.push(Nh(e,h[oe])),b.push(h[oe+1]);const O=[],H=br.empty();for(let oe=T.length-1;oe>=0;--oe)if(!pm(O,T[oe])){const Re=T[oe];let it=b[oe];it=(0,Nt.m9)(it);const lt=g.Su(Re);if(it instanceof Ph)O.push(Re);else{const at=Cl(it,lt);null!=at&&(O.push(Re),H.set(Re,at))}}const K=new Ur(O);return new H_(H,K,g.fieldTransforms)}function W_(a,e,r,s=!1){return Cl(r,a.Fu(s?4:3,e))}function Cl(a,e){if(q_(a=(0,Nt.m9)(a)))return _p("Unsupported field value:",e,a),hm(a,e);if(a instanceof Rc)return function(s,u){if(!Al(u.fu))throw u.Du(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Du(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(u);h&&u.fieldTransforms.push(h)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(s,u){const h=[];let g=0;for(const T of s){let b=Cl(T,u.bu(g));null==b&&(b={nullValue:"NULL_VALUE"}),h.push(b),g++}return{arrayValue:{values:h}}}(a,e)}return function(s,u){if(null===(s=(0,Nt.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return qu(u.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const h=ft.fromDate(s);return{timestampValue:_s(u.serializer,h)}}if(s instanceof ft){const h=new ft(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:_s(u.serializer,h)}}if(s instanceof dm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ga)return{bytesValue:Qo(u.serializer,s._byteString)};if(s instanceof Tr){const h=u.databaseId,g=s.firestore._databaseId;if(!g.isEqual(h))throw u.Du(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Sa(s.firestore._databaseId||u.databaseId,s._key.path)}}throw u.Du(`Unsupported field value: ${ap(s)}`)}(a,e)}function hm(a,e){const r={};return js(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(a,(s,u)=>{const h=Cl(u,e.pu(s));null!=h&&(r[s]=h)}),{mapValue:{fields:r}}}function q_(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof ft||a instanceof dm||a instanceof Ga||a instanceof Tr||a instanceof Rc)}function _p(a,e,r){if(!q_(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const s=ap(r);throw e.Du("an object"===s?a+" a custom object":a+" "+s)}var u}function Nh(a,e,r){if((e=(0,Nt.m9)(e))instanceof Wa)return e._internalPath;if("string"==typeof e)return fm(a,e);throw Oh("Field path arguments must be of type string or ",a,!1,void 0,r)}const Bv=new RegExp("[~\\*/\\[\\]]");function fm(a,e,r){if(e.search(Bv)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Wa(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function Oh(a,e,r,s,u){const h=s&&!s.isEmpty(),g=void 0!==u;let T=`Function ${e}() called with invalid data`;r&&(T+=" (via `toFirestore()`)"),T+=". ";let b="";return(h||g)&&(b+=" (found",h&&(b+=` in field ${s}`),g&&(b+=` in document ${u}`),b+=")"),new tt(Me.INVALID_ARGUMENT,T+a+b)}function pm(a,e){return a.some(r=>r.isEqual(e))}class ws{constructor(e,r,s,u,h){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=u,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new K_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class K_ extends ws{data(){return super.data()}}function gm(a,e){return"string"==typeof e?fm(a,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}function yp(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new tt(Me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qa{}class Sl extends qa{}function xc(a,e,...r){let s=[];e instanceof qa&&s.push(e),s=s.concat(r),function(h){const g=h.filter(b=>b instanceof Nc).length,T=h.filter(b=>b instanceof vp).length;if(g>1||g>0&&T>0)throw new tt(Me.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const u of s)a=u._apply(a);return a}class vp extends Sl{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new vp(e,r,s)}_apply(e){const r=this._parse(e);return Y_(e._query,r),new Pi(e.firestore,e.converter,iu(e._query,r))}_parse(e){const r=Mc(e.firestore);return function(h,g,T,b,O,H,K){let oe;if(O.isKeyField()){if("array-contains"===H||"array-contains-any"===H)throw new tt(Me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${H}' queries on documentId().`);if("in"===H||"not-in"===H){Q_(K,H);const Re=[];for(const it of K)Re.push(Em(b,h,it));oe={arrayValue:{values:Re}}}else oe=Em(b,h,K)}else"in"!==H&&"not-in"!==H&&"array-contains-any"!==H||Q_(K,H),oe=W_(T,"where",K,"in"===H||"not-in"===H);return Rn.create(O,H,oe)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}class Nc extends qa{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Nc(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:In.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(u,h){let g=u;const T=h.getFlattenedFilters();for(const b of T)Y_(g,b),g=iu(g,b)}(e._query,r),new Pi(e.firestore,e.converter,iu(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mm extends Sl{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new mm(e,r)}_apply(e){const r=function(u,h,g){if(null!==u.startAt)throw new tt(Me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new tt(Me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new go(h,g)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(u,h){const g=u.explicitOrderBy.concat([h]);return new ps(u.path,u.collectionGroup,g,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,r))}}class ii extends Sl{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new ii(e,r,s)}_apply(e){return new Pi(e.firestore,e.converter,D(e._query,this._limit,this._limitType))}}class Ep extends Sl{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Ep(e,r,s)}_apply(e){const r=vm(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(h=r,new ps((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,h,u.endAt)));var u,h}}class kh extends Sl{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new kh(e,r,s)}_apply(e){const r=vm(e,this.type,this._docOrFields,this._inclusive);return new Pi(e.firestore,e.converter,(h=r,new ps((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,h)));var u,h}}function vm(a,e,r,s){if(r[0]=(0,Nt.m9)(r[0]),r[0]instanceof ws)return function(h,g,T,b,O){if(!b)throw new tt(Me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${T}().`);const H=[];for(const K of Ks(h))if(K.field.isKeyField())H.push(Gi(g,b.key));else{const oe=b.data.field(K.field);if(Yi(oe))throw new tt(Me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+K.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===oe){const Re=K.field.canonicalString();throw new tt(Me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Re}' (used as the orderBy) does not exist.`)}H.push(oe)}return new Ps(H,O)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const u=Mc(a.firestore);return function(g,T,b,O,H,K){const oe=g.explicitOrderBy;if(H.length>oe.length)throw new tt(Me.INVALID_ARGUMENT,`Too many arguments provided to ${O}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Re=[];for(let it=0;it<H.length;it++){const lt=H[it];if(oe[it].field.isKeyField()){if("string"!=typeof lt)throw new tt(Me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${O}(), but got a ${typeof lt}`);if(!Ia(g)&&-1!==lt.indexOf("/"))throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${O}() must be a plain document ID, but '${lt}' contains a slash.`);const at=g.path.child(Ht.fromString(lt));if(!vt.isDocumentKey(at))throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${O}() must result in a valid document path, but '${at}' is not because it contains an odd number of segments.`);const Vt=new vt(at);Re.push(Gi(T,Vt))}else{const at=W_(b,O,lt);Re.push(at)}}return new Ps(Re,K)}(a._query,a.firestore._databaseId,u,e,r,s)}}function Em(a,e,r){if("string"==typeof(r=(0,Nt.m9)(r))){if(""===r)throw new tt(Me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ia(e)&&-1!==r.indexOf("/"))throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child(Ht.fromString(r));if(!vt.isDocumentKey(s))throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Gi(a,new vt(s))}if(r instanceof Tr)return Gi(a,r._key);throw new tt(Me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ap(r)}.`)}function Q_(a,e){if(!Array.isArray(a)||0===a.length)throw new tt(Me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Y_(a,e){const r=function(u,h){for(const g of u)for(const T of g.getFlattenedFilters())if(h.indexOf(T.op)>=0)return T.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new tt(Me.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class Ip{convertValue(e,r="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw pt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return vi(e,(u,h)=>{s[u]=this.convertValue(h,r)}),s}convertGeoPoint(e){return new dm(jt(e.latitude),jt(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=ar(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(ci(e));default:return null}}convertTimestamp(e){const r=Ii(e);return new ft(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=Ht.fromString(e);bt(cg(s));const u=new qr(s.get(1),s.get(3)),h=new vt(s.popFirst(5));return u.isEqual(r)||xn(`Document ${h} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function Pu(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class Mu extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,r)}}class xu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ro extends ws{constructor(e,r,s,u,h,g){super(e,r,s,u,g),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Oc extends ro{data(e={}){return super.data(e)}}class Nu{constructor(e,r,s,u){this._firestore=e,this._userDataWriter=r,this._snapshot=u,this.metadata=new xu(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Oc(this._firestore,this._userDataWriter,s.key,s,new xu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new tt(Me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,h){if(u._snapshot.oldDocs.isEmpty()){let g=0;return u._snapshot.docChanges.map(T=>({type:"added",doc:new Oc(u._firestore,u._userDataWriter,T.doc.key,T.doc,new xu(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:g++}))}{let g=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(T=>h||3!==T.type).map(T=>{const b=new Oc(u._firestore,u._userDataWriter,T.doc.key,T.doc,new xu(u._snapshot.mutatedKeys.has(T.doc.key),u._snapshot.fromCache),u.query.converter);let O=-1,H=-1;return 0!==T.type&&(O=g.indexOf(T.doc.key),g=g.delete(T.doc.key)),1!==T.type&&(g=g.add(T.doc),H=g.indexOf(T.doc.key)),{type:X_(T.type),doc:b,oldIndex:O,newIndex:H}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function X_(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function ey(a,e){return a instanceof ro&&e instanceof ro?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof Nu&&e instanceof Nu&&a._firestore===e._firestore&&bc(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}class kc extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ga(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,r)}}function Jv(a,e,r){a=Vn(a,Tr);const s=Vn(a.firestore,dr),u=Pu(a.converter,e,r);return bl(s,[fp(Mc(s),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,wr.none())])}function Im(a,e,r,...s){a=Vn(a,Tr);const u=Vn(a.firestore,dr),h=Mc(u);let g;return g="string"==typeof(e=(0,Nt.m9)(e))||e instanceof Wa?mp(h,"updateDoc",a._key,e,r,s):xh(h,"updateDoc",a._key,e),bl(u,[g.toMutation(a._key,wr.exists(!0))])}function Fh(a,...e){var r,s,u;a=(0,Nt.m9)(a);let h={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||Rh(e[g])||(h=e[g],g++);const T={includeMetadataChanges:h.includeMetadataChanges,source:h.source};if(Rh(e[g])){const K=e[g];e[g]=null===(r=K.next)||void 0===r?void 0:r.bind(K),e[g+1]=null===(s=K.error)||void 0===s?void 0:s.bind(K),e[g+2]=null===(u=K.complete)||void 0===u?void 0:u.bind(K)}let b,O,H;if(a instanceof Tr)O=Vn(a.firestore,dr),H=qs(a._key.path),b={next:K=>{e[g]&&e[g](wm(O,a,K))},error:e[g+1],complete:e[g+2]};else{const K=Vn(a,Pi);O=Vn(K.firestore,dr),H=K._query;const oe=new kc(O);b={next:Re=>{e[g]&&e[g](new Nu(O,oe,K,Re))},error:e[g+1],complete:e[g+2]},yp(a._query)}return function(oe,Re,it,lt){const at=new Dc(lt),Vt=new Pg(Re,at,it);return oe.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return $f(yield bu(oe),Vt)})),()=>{at.$a(),oe.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return fd(yield bu(oe),Vt)}))}}(xr(O),H,T,b)}function bl(a,e){return function(s,u){const h=new Un;return s.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function mv(a,e,r){return Lg.apply(this,arguments)}(yield Jg(s),u,h)})),h.promise}(xr(a),e)}function wm(a,e,r){const s=r.docs.get(e._key),u=new kc(a);return new ro(a,u,e._key,s,new xu(r.hasPendingWrites,r.fromCache),e.converter)}const Am={maxAttempts:5};class wp{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Mc(e)}set(e,r,s){this._verifyNotCommitted();const u=Ou(e,this._firestore),h=Pu(u.converter,r,s),g=fp(this._dataReader,"WriteBatch.set",u._key,h,null!==u.converter,s);return this._mutations.push(g.toMutation(u._key,wr.none())),this}update(e,r,s,...u){this._verifyNotCommitted();const h=Ou(e,this._firestore);let g;return g="string"==typeof(r=(0,Nt.m9)(r))||r instanceof Wa?mp(this._dataReader,"WriteBatch.update",h._key,r,s,u):xh(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(g.toMutation(h._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Ou(e,this._firestore);return this._mutations=this._mutations.concat(new To(r._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tt(Me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ou(a,e){if((a=(0,Nt.m9)(a)).firestore!==e)throw new tt(Me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class Cm extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=Mc(r)}get(r){const s=Ou(r,this._firestore),u=new Mu(this._firestore);return this._transaction.lookup([s._key]).then(h=>{if(!h||1!==h.length)return pt();const g=h[0];if(g.isFoundDocument())return new ws(this._firestore,u,g.key,g,s.converter);if(g.isNoDocument())return new ws(this._firestore,u,s._key,null,s.converter);throw pt()})}set(r,s,u){const h=Ou(r,this._firestore),g=Pu(h.converter,s,u),T=fp(this._dataReader,"Transaction.set",h._key,g,null!==h.converter,u);return this._transaction.set(h._key,T),this}update(r,s,u,...h){const g=Ou(r,this._firestore);let T;return T="string"==typeof(s=(0,Nt.m9)(s))||s instanceof Wa?mp(this._dataReader,"Transaction.update",g._key,s,u,h):xh(this._dataReader,"Transaction.update",g._key,s),this._transaction.update(g._key,T),this}delete(r){const s=Ou(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Ou(e,this._firestore),s=new kc(this._firestore);return super.get(e).then(u=>new ro(this._firestore,s,r._key,u._document,new xu(!1,!1),r.converter))}}function Rm(a,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new tt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return e}function Dp(){if(typeof Uint8Array>"u")throw new tt("unimplemented","Uint8Arrays are not available in this environment.")}function py(){if(!function $s(){return typeof atob<"u"}())throw new tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,r=!0){Wt=yt.SDK_VERSION,(0,yt._registerComponent)(new Lt.wA("firestore",(s,{instanceIdentifier:u,options:h})=>{const g=s.getProvider("app").getImmediate(),T=new dr(new Bi(s.getProvider("auth-internal")),new V(s.getProvider("app-check-internal")),function(O,H){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new tt(Me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(O.options.projectId,H)}(g,u),g);return h=Object.assign({useFetchStreams:r},h),T._setSettings(h),T},"PUBLIC").setMultipleInstances(!0)),(0,yt.registerVersion)(kn,"4.6.4",e),(0,yt.registerVersion)(kn,"4.6.4","esm2017")}();class Bh{constructor(e){this._delegate=e}static fromBase64String(e){return py(),new Bh(Ga.fromBase64String(e))}static fromUint8Array(e){return Dp(),new Bh(Ga.fromUint8Array(e))}toBase64(){return py(),this._delegate.toBase64()}toUint8Array(){return Dp(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Pm(a){return function cE(a,e){if("object"!=typeof a||null===a)return!1;const r=a;for(const s of e)if(s in r&&"function"==typeof r[s])return!0;return!1}(a,["next","error","complete"])}class lE{enableIndexedDbPersistence(e,r){return function Nv(a,e){lm(a=Vn(a,dr));const r=xr(a);if(r._uninitializedComponentsProvider)throw new tt(Me.FAILED_PRECONDITION,"SDK cache is already specified.");Zt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=a._freezeSettings(),u=new wh;return am(r,u,new qg(u,s.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function om(a){lm(a=Vn(a,dr));const e=xr(a);if(e._uninitializedComponentsProvider)throw new tt(Me.FAILED_PRECONDITION,"SDK cache is already specified.");Zt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),s=new wh;return am(e,s,new Kg(s,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ov(a){if(a._initialized&&!a._terminated)throw new tt(Me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Un;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ce.Z)(function*(){try{yield(r=(0,ce.Z)(function*(u){if(!on.D())return Promise.resolve();const h=u+"main";yield on.delete(h)}),function s(u){return r.apply(this,arguments)})(oh(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class ra{constructor(e,r,s){this._delegate=r,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof qr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Zt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,s={}){!function j_(a,e,r,s={}){var u;const h=(a=Vn(a,Cc))._getSettings(),g=`${e}:${r}`;if("firestore.googleapis.com"!==h.host&&h.host!==g&&Zt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},h),{host:g,ssl:!1})),s.mockUserToken){let T,b;if("string"==typeof s.mockUserToken)T=s.mockUserToken,b=An.MOCK_USER;else{T=(0,Nt.Sg)(s.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const O=s.mockUserToken.sub||s.mockUserToken.user_id;if(!O)throw new tt(Me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new An(O)}a._authCredentials=new Cs(new us(T,b))}}(this._delegate,e,r,s)}enableNetwork(){return function AI(a){return function em(a){return a.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield Yg(a),r=yield Ac(a);return e.setNetworkEnabled(!0),function(u){const h=gt(u);return h.M_.delete(0),ll(h)}(r)}))}(xr(a=Vn(a,dr)))}(this._delegate)}disableNetwork(){return function Lv(a){return function ip(a){return a.asyncQueue.enqueue((0,ce.Z)(function*(){const e=yield Yg(a),r=yield Ac(a);return e.setNetworkEnabled(!1),(s=(0,ce.Z)(function*(h){const g=gt(h);g.M_.add(0),yield pc(g),g.N_.set("Offline")}),function u(h){return s.apply(this,arguments)})(r);var s}))}(xr(a=Vn(a,dr)))}(this._delegate)}enablePersistence(e){let r=!1,s=!1;return e&&(r=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,op("synchronizeTabs",r,"experimentalForceOwningTab",s)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kv(a){return function(r){const s=new Un;return r.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return function _v(a,e){return Fg.apply(this,arguments)}(yield Jg(r),s)})),s.promise}(xr(a=Vn(a,dr)))}(this._delegate)}onSnapshotsInSync(e){return function ry(a,e){return function U_(a,e){const r=new Dc(e);return a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return u=yield bu(a),h=r,gt(u).z_.add(h),void h.next();var u,h})),()=>{r.$a(),a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return u=yield bu(a),h=r,void gt(u).z_.delete(h);var u,h}))}}(xr(a=Vn(a,dr)),Rh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Fs(this,up(this._delegate,e))}catch(r){throw Li(r,"collection()","Firestore.collection()")}}doc(e){try{return new io(this,Sc(this._delegate,e))}catch(r){throw Li(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function im(a,e){if(a=Vn(a,Cc),sp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new tt(Me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pi(a,null,(s=e,new ps(Ht.emptyPath(),s)));var s}(this._delegate,e))}catch(r){throw Li(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function tE(a,e,r){a=Vn(a,dr);const s=Object.assign(Object.assign({},Am),r);return function(h){if(h.maxAttempts<1)throw new tt(Me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(h,g,T){const b=new Un;return h.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){const O=yield function rp(a){return np(a).then(e=>e.datastore)}(h);new L_(h.asyncQueue,O,T,g,b).Xa()})),b.promise}(xr(a),u=>e(new Cm(a,u)),s)}(this._delegate,r=>e(new Mm(this,r)))}batch(){return xr(this._delegate),new gy(new wp(this._delegate,e=>bl(this._delegate,e)))}loadBundle(e){return function cm(a,e){const r=xr(a=Vn(a,dr)),s=new cp;return function _d(a,e,r,s){const u=function(g,T){let b;return b="string"==typeof g?If().encode(g):g,H=function(H,K){if(H instanceof Uint8Array)return Dv(H,K);if(H instanceof ArrayBuffer)return Dv(new Uint8Array(H),K);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(b),new Th(H,T);var H}(r,Zr(e));a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){!function wv(a,e,r){const s=gt(a);var u;(u=(0,ce.Z)(function*(g,T,b){try{const O=yield T.getMetadata();if(yield function(it,lt){const at=gt(it),Vt=lr(lt.createTime);return at.persistence.runTransaction("hasNewerBundle","readonly",zt=>at.$r.getBundleMetadata(zt,lt.id)).then(zt=>!!zt&&zt.createTime.compareTo(Vt)>=0)}(g.localStore,O))return yield T.close(),b._completeWith({taskState:"Success",documentsLoaded:(it=O).totalDocuments,bytesLoaded:it.totalBytes,totalDocuments:it.totalDocuments,totalBytes:it.totalBytes}),Promise.resolve(new Set);b._updateProgress(vh(O));const H=new D_(O,g.localStore,T.serializer);let K=yield T.qa();for(;K;){const Re=yield H._a(K);Re&&b._updateProgress(Re),K=yield T.qa()}const oe=yield H.complete();return yield Ha(g,oe.ca,void 0),yield function(it,lt){const at=gt(it);return at.persistence.runTransaction("Save bundle","readwrite",Vt=>at.$r.saveBundleMetadata(Vt,lt))}(g.localStore,O),b._completeWith(oe.progress),Promise.resolve(oe.ua)}catch(O){return Zt("SyncEngine",`Loading bundle failed with ${O}`),b._failWith(O),Promise.resolve(new Set)}var it}),function h(g,T,b){return u.apply(this,arguments)})(s,e,r).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield Jg(a),u,s)}))}(r,a._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function Fv(a,e){return function Cv(a,e){return a.asyncQueue.enqueue((0,ce.Z)(function*(){return function(s,u){const h=gt(s);return h.persistence.runTransaction("Get named query","readonly",g=>h.$r.getNamedQuery(g,u))}(yield wl(a),e)}))}(xr(a=Vn(a,dr)),e).then(r=>r?new Pi(a,null,r.query):null)}(this._delegate,e).then(r=>r?new rs(this,r):null)}}class vd extends Ip{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bh(new Ga(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return io.forKey(r,this.firestore,null)}}class Mm{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new vd(e)}get(e){const r=Rl(e);return this._delegate.get(r).then(s=>new Ed(this._firestore,new ro(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,r.converter)))}set(e,r,s){const u=Rl(e);return s?(Rm("Transaction.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const h=Rl(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,s,...u),this}delete(e){const r=Rl(e);return this._delegate.delete(r),this}}class gy{constructor(e){this._delegate=e}set(e,r,s){const u=Rl(e);return s?(Rm("WriteBatch.set",s),this._delegate.set(u,r,s)):this._delegate.set(u,r),this}update(e,r,s,...u){const h=Rl(e);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,s,...u),this}delete(e){const r=Rl(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Lc{constructor(e,r,s){this._firestore=e,this._userDataWriter=r,this._delegate=s}fromFirestore(e,r){const s=new Oc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Id(this._firestore,s),r??{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const s=Lc.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let h=u.get(r);return h||(h=new Lc(e,new vd(e),r),u.set(r,h)),h}}Lc.INSTANCES=new WeakMap;class io{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new vd(e)}static forPath(e,r,s){if(e.length%2!=0)throw new tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new io(r,new Tr(r._delegate,s,new vt(e)))}static forKey(e,r,s){return new io(r,new Tr(r._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Fs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Fs(this.firestore,up(this._delegate,e))}catch(r){throw Li(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Tr&&bh(this._delegate,e)}set(e,r){r=Rm("DocumentReference.set",r);try{return r?Jv(this._delegate,e,r):Jv(this._delegate,e)}catch(s){throw Li(s,"setDoc()","DocumentReference.set()")}}update(e,r,...s){try{return 1===arguments.length?Im(this._delegate,e):Im(this._delegate,e,r,...s)}catch(u){throw Li(u,"updateDoc()","DocumentReference.update()")}}delete(){return function ny(a){return bl(Vn(a.firestore,dr),[new To(a._key,wr.none())])}(this._delegate)}onSnapshot(...e){const r=Ap(e),s=hE(e,u=>new Ed(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Fh(this._delegate,r,s)}get(e){let r;return r="cache"===e?.source?function Qv(a){a=Vn(a,Tr);const e=Vn(a.firestore,dr),r=xr(e),s=new kc(e);return function za(a,e){const r=new Un;return a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(s=(0,ce.Z)(function*(h,g,T){try{const b=yield function(H,K){const oe=gt(H);return oe.persistence.runTransaction("read document","readonly",Re=>oe.localDocuments.getDocument(Re,K))}(h,g);b.isFoundDocument()?T.resolve(b):b.isNoDocument()?T.resolve(null):T.reject(new tt(Me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const O=ja(b,`Failed to get document '${g} from cache`);T.reject(O)}}),function u(h,g,T){return s.apply(this,arguments)})(yield wl(a),e,r);var s})),r.promise}(r,a._key).then(u=>new ro(e,s,a._key,u,new xu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===e?.source?function ty(a){a=Vn(a,Tr);const e=Vn(a.firestore,dr);return Tl(xr(e),a._key,{source:"server"}).then(r=>wm(e,a,r))}(this._delegate):function Zv(a){a=Vn(a,Tr);const e=Vn(a.firestore,dr);return Tl(xr(e),a._key).then(r=>wm(e,a,r))}(this._delegate),r.then(s=>new Ed(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new io(this.firestore,this._delegate.withConverter(e?Lc.getInstance(this.firestore,e):null))}}function Li(a,e,r){return a.message=a.message.replace(e,r),a}function Ap(a){for(const e of a)if("object"==typeof e&&!Pm(e))return e;return{}}function hE(a,e){var r,s;let u;return u=Pm(a[0])?a[0]:Pm(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:h=>{u.next&&u.next(e(h))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class Ed{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new io(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return ey(this._delegate,e._delegate)}}class Id extends Ed{data(e){const r=this._delegate.data(e);return this._delegate._converter||function yr(a,e){a||pt()}(void 0!==r),r}}class rs{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new vd(e)}where(e,r,s){try{return new rs(this.firestore,xc(this._delegate,function jv(a,e,r){const s=e,u=gm("where",a);return vp._create(u,s,r)}(e,r,s)))}catch(u){throw Li(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new rs(this.firestore,xc(this._delegate,function SI(a,e="asc"){const r=e,s=gm("orderBy",a);return mm._create(s,r)}(e,r)))}catch(s){throw Li(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,xc(this._delegate,function Hv(a){return Mv("limit",a),ii._create("limit",a,"F")}(e)))}catch(r){throw Li(r,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,xc(this._delegate,function _m(a){return Mv("limitToLast",a),ii._create("limitToLast",a,"L")}(e)))}catch(r){throw Li(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,xc(this._delegate,function zv(...a){return Ep._create("startAt",a,!0)}(...e)))}catch(r){throw Li(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,xc(this._delegate,function ym(...a){return Ep._create("startAfter",a,!1)}(...e)))}catch(r){throw Li(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,xc(this._delegate,function Z_(...a){return kh._create("endBefore",a,!1)}(...e)))}catch(r){throw Li(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,xc(this._delegate,function Gv(...a){return kh._create("endAt",a,!0)}(...e)))}catch(r){throw Li(r,"endAt()","Query.endAt()")}}isEqual(e){return bc(this._delegate,e._delegate)}get(e){let r;return r="cache"===e?.source?function Yv(a){a=Vn(a,Pi);const e=Vn(a.firestore,dr),r=xr(e),s=new kc(e);return function tm(a,e){const r=new Un;return a.asyncQueue.enqueueAndForget((0,ce.Z)(function*(){return(s=(0,ce.Z)(function*(h,g,T){try{const b=yield il(h,g,!0),O=new A_(g,b.hs),H=O.da(b.documents),K=O.applyChanges(H,!1);T.resolve(K.snapshot)}catch(b){const O=ja(b,`Failed to execute query '${g} against cache`);T.reject(O)}}),function u(h,g,T){return s.apply(this,arguments)})(yield wl(a),e,r);var s})),r.promise}(r,a._query).then(u=>new Nu(e,s,a,u))}(this._delegate):"server"===e?.source?function PI(a){a=Vn(a,Pi);const e=Vn(a.firestore,dr),r=xr(e),s=new kc(e);return V_(r,a._query,{source:"server"}).then(u=>new Nu(e,s,a,u))}(this._delegate):function RI(a){a=Vn(a,Pi);const e=Vn(a.firestore,dr),r=xr(e),s=new kc(e);return yp(a._query),V_(r,a._query).then(u=>new Nu(e,s,a,u))}(this._delegate),r.then(s=>new jh(this.firestore,new Nu(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const r=Ap(e),s=hE(e,u=>new jh(this.firestore,new Nu(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Fh(this._delegate,r,s)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Lc.getInstance(this.firestore,e):null))}}class my{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Id(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jh{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Id(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new my(this._firestore,r))}forEach(e,r){this._delegate.forEach(s=>{e.call(r,new Id(this._firestore,s))})}isEqual(e){return ey(this._delegate,e._delegate)}}class Fs extends rs{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new io(this.firestore,e):null}doc(e){try{return new io(this.firestore,void 0===e?Sc(this._delegate):Sc(this._delegate,e))}catch(r){throw Li(r,"doc()","CollectionReference.doc()")}}add(e){return function MI(a,e){const r=Vn(a.firestore,dr),s=Sc(a),u=Pu(a.converter,e);return bl(r,[fp(Mc(a.firestore),"addDoc",s._key,u,null!==a.converter,{}).toMutation(s._key,wr.exists(!1))]).then(()=>s)}(this._delegate,e).then(r=>new io(this.firestore,r))}isEqual(e){return bh(this._delegate,e._delegate)}withConverter(e){return new Fs(this.firestore,this._delegate.withConverter(e?Lc.getInstance(this.firestore,e):null))}}function Rl(a){return Vn(a,Tr)}class xm{constructor(...e){this._delegate=new Wa(...e)}static documentId(){return new xm(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,Nt.m9)(e))instanceof Wa&&this._delegate._internalPath.isEqual(e._internalPath)}}class ku{constructor(e){this._delegate=e}static serverTimestamp(){const e=function rE(){return new pp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ku(e)}static delete(){const e=function nE(){return new Ph("deleteField")}();return e._methodName="FieldValue.delete",new ku(e)}static arrayUnion(...e){const r=function cy(...a){return new gp("arrayUnion",a)}(...e);return r._methodName="FieldValue.arrayUnion",new ku(r)}static arrayRemove(...e){const r=function iE(...a){return new Mh("arrayRemove",a)}(...e);return r._methodName="FieldValue.arrayRemove",new ku(r)}static increment(e){const r=function sE(a){return new G_("increment",a)}(e);return r._methodName="FieldValue.increment",new ku(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const fE={Firestore:ra,GeoPoint:dm,Timestamp:ft,Blob:Bh,Transaction:Mm,WriteBatch:gy,DocumentReference:io,DocumentSnapshot:Ed,Query:rs,QueryDocumentSnapshot:Id,QuerySnapshot:jh,CollectionReference:Fs,FieldPath:xm,FieldValue:ku,setLogLevel:function dE(a){!function $r(a){cn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};function wd(a,e){return function Cp(a,e=Yt.z){return new Ne.y(r=>{let s;return null!=e?e.schedule(()=>{s=a.onSnapshot({includeMetadataChanges:!0},r)}):s=a.onSnapshot({includeMetadataChanges:!0},r),()=>{s?.()}})}(a,e)}function Td(a,e){return wd(a,e).pipe((0,Ue.U)(r=>({payload:r,type:"query"})))}!function pE(a){(function _y(a,e){a.INTERNAL.registerComponent(new Lt.wA("firestore-compat",r=>{const s=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},fE)))})(a,(e,r)=>new ra(e,r,new lE)),a.registerVersion("@firebase/firestore-compat","0.3.33")}(Qe.Z);class gE{ref;afs;constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const s=this.ref.collection(e),{ref:u,query:h}=wy(s,r);return new Lm(u,h,this.afs)}snapshotChanges(){return function yy(a,e){return wd(a,e).pipe((0,sn.O)(void 0),$e(),(0,Ue.U)(r=>{const[s,u]=r;return u.exists?s?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ue.U)(({payload:r})=>e.idField?{...r.data(),[e.idField]:r.id}:r.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe(Q.iC)}}function Sp(a,e){return Td(a,e).pipe((0,sn.O)(void 0),$e(),(0,Ue.U)(r=>{const[s,u]=r,h=u.payload.docChanges(),g=h.map(T=>({type:T.type,payload:T}));return s&&JSON.stringify(s.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((T,b)=>{const O=h.find(K=>K.doc.ref.isEqual(T.ref)),H=s?.payload.docs.find(K=>K.ref.isEqual(T.ref));O&&JSON.stringify(O.doc.metadata)===JSON.stringify(T.metadata)||!O&&H&&JSON.stringify(H.metadata)===JSON.stringify(T.metadata)||g.push({type:"modified",payload:{oldIndex:b,newIndex:b,type:"modified",doc:T}})}),g}))}function Nm(a,e,r){return Sp(a,r).pipe((0,He.R)((s,u)=>function vy(a,e,r){return e.forEach(s=>{r.indexOf(s.type)>-1&&(a=function mE(a,e){switch(e.type){case"added":if(!a[e.newIndex]||!a[e.newIndex].doc.ref.isEqual(e.doc.ref))return Om(a,e.newIndex,0,e);break;case"modified":if(null==a[e.oldIndex]||a[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=a.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return Om(a,e.newIndex,1,e)}break;case"removed":if(a[e.oldIndex]&&a[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Om(a,e.oldIndex,1)}return a}(a,s))}),a}(s,u.map(h=>h.payload),e),[]),(0,ot.x)(),(0,Ue.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Om(a,e,r,...s){const u=a.slice();return u.splice(e,r,...s),u}function km(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class Lm{ref;query;afs;constructor(e,r,s){this.ref=e,this.query=r,this.afs=s}stateChanges(e){let r=Sp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,Ue.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),r.pipe((0,sn.O)(void 0),$e(),(0,ze.h)(([s,u])=>u.length>0||!s),(0,Ue.U)(([,s])=>s),Q.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,He.R)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=km(e);return Nm(this.query,r,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(e={}){return Td(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ue.U)(r=>r.payload.docs.map(s=>e.idField?{...s.data(),[e.idField]:s.id}:s.data())),Q.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(Q.iC)}add(e){return this.ref.add(e)}doc(e){return new gE(this.ref.doc(e),this.afs)}}class $h{query;afs;constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Sp(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ue.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)),(0,ze.h)(r=>r.length>0),Q.iC):Sp(this.query,this.afs.schedulers.outsideAngular).pipe(Q.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,He.R)((r,s)=>[...r,...s],[]))}snapshotChanges(e){const r=km(e);return Nm(this.query,r,this.afs.schedulers.outsideAngular).pipe(Q.iC)}valueChanges(e={}){return Td(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ue.U)(s=>s.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),Q.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(Q.iC)}}const _E=new Y.OlP("angularfire2.enableFirestorePersistence"),Ey=new Y.OlP("angularfire2.firestore.persistenceSettings"),Iy=new Y.OlP("angularfire2.firestore.settings"),yE=new Y.OlP("angularfire2.firestore.use-emulator");function wy(a,e=(r=>r)){return{query:e(a),ref:a}}let Hh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,s,u,h,g,T,b,O,H,K,oe,Re,it,lt,at,Vt,zt){this.schedulers=b;const wt=(0,Z.on)(r,T,s),qt=H;K&&On(wt,T,oe,it,lt,at,Re,Vt),[this.firestore,this.persistenceEnabled$]=(0,Z.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const Tn=T.runOutsideAngular(()=>wt.firestore());if(h&&Tn.settings(h),qt&&Tn.useEmulator(...qt),u&&!(0,E.PM)(g)){const Mn=()=>{try{return(0,De.D)(Tn.enablePersistence(O||void 0).then(()=>!0,()=>!1))}catch(ye){return typeof console<"u"&&console.warn(ye),(0,me.of)(!1)}};return[Tn,T.runOutsideAngular(Mn)]}return[Tn,(0,me.of)(!1)]},[h,qt,u])}collection(r,s){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:g}=wy(u,s),T=this.schedulers.ngZone.run(()=>h);return new Lm(T,g,this)}collectionGroup(r,s){const u=s||(g=>g),h=this.firestore.collectionGroup(r);return new $h(u(h),this)}doc(r){let s;s="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>s);return new gE(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(s){return new(s||a)(Y.LFG(Z.Dh),Y.LFG(Z.xv,8),Y.LFG(_E,8),Y.LFG(Iy,8),Y.LFG(Y.Lbi),Y.LFG(Y.R0b),Y.LFG(Q.HU),Y.LFG(Ey,8),Y.LFG(yE,8),Y.LFG(_r,8),Y.LFG(Ze,8),Y.LFG(dt,8),Y.LFG(Pt,8),Y.LFG(Oe,8),Y.LFG(Xt,8),Y.LFG(Zn,8),Y.LFG(Q.Rf,8))};static \u0275prov=Y.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})()},7217:(St,Pe,F)=>{F.d(Pe,{Dh:()=>Ne,GT:()=>ae,cc:()=>Be,hO:()=>Ue,on:()=>X,pX:()=>he,xv:()=>De});var E=F(5879),Y=F(8326),Q=F(7142);const Z=["ngOnDestroy"],he=(st,It,_t,ge={})=>new Proxy(st,{get:(ze,pe)=>_t.runOutsideAngular(()=>{if(st[pe])return ge?.spy?.get&&ge.spy.get(pe,st[pe]),st[pe];if(Z.indexOf(pe)>-1)return()=>{};const et=It.toPromise().then(Ze=>{const dt=Ze?.[pe];return"function"==typeof dt?dt.bind(Ze):dt?.then?dt.then(Pt=>_t.run(()=>Pt)):_t.run(()=>dt)});return new Proxy(()=>{},{get:(Ze,dt)=>et[dt],apply:(Ze,dt,Pt)=>et.then(Oe=>{const Xt=Oe?.(...Pt);return ge?.spy?.apply&&ge.spy.apply(pe,Pt,Xt),Xt})})})}),ae=(st,It)=>{It.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(ge=>{Object.defineProperty(st.prototype,ge,Object.getOwnPropertyDescriptor(_t.prototype||_t,ge))})})};class me{constructor(It){return It}}const Ne=new E.OlP("angularfire2.app.options"),De=new E.OlP("angularfire2.app.name");function X(st,It,_t){const ze="object"==typeof _t&&_t||{};ze.name=ze.name||"string"==typeof _t&&_t||"[DEFAULT]";const et=Q.Z.apps.filter(Ze=>Ze&&Ze.name===ze.name)[0]||It.runOutsideAngular(()=>Q.Z.initializeApp(st,ze));try{if(JSON.stringify(st)!==JSON.stringify(et.options)){const Ze=!!module.hot;re("error",`${et.name} Firebase App already initialized with different options${Ze?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new me(et)}const re=(st,...It)=>{(0,E.X6Q)()&&typeof console<"u"&&console[st](...It)},ue={provide:me,useFactory:X,deps:[Ne,E.R0b,[new E.FiY,De]]};let Ue=(()=>{class st{static initializeApp(_t,ge){return{ngModule:st,providers:[{provide:Ne,useValue:_t},{provide:De,useValue:ge}]}}constructor(_t){Q.Z.registerVersion("angularfire",Y.q4.full,"core"),Q.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),Q.Z.registerVersion("angular",E.q4F.full,_t.toString())}static \u0275fac=function(ge){return new(ge||st)(E.LFG(E.Lbi))};static \u0275mod=E.oAB({type:st});static \u0275inj=E.cJS({providers:[ue]})}return st})();function Be(st,It,_t,ge,ze){const[,pe,et]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===st)||[];if(pe)return function Xe(st,It){try{return st.toString()===It.toString()}catch{return st===It}}(ze,et)||(Ge("error",`${It} was already initialized on the ${_t} Firebase App with different settings.${Ke?" You may need to reload as Firebase is not HMR aware.":""}`),Ge("warn",{is:ze,was:et})),pe;{const Ze=ge();return globalThis.\u0275AngularfireInstanceCache.push([st,Ze,ze]),Ze}}const Ke=typeof module<"u"&&!!module.hot,Ge=(st,...It)=>{(0,E.X6Q)()&&typeof console<"u"&&console[st](...It)};globalThis.\u0275AngularfireInstanceCache||=[]},8326:(St,Pe,F)=>{F.d(Pe,{q4:()=>Xe,iC:()=>Zn,HU:()=>et,Rf:()=>It});var E=F(5879),Y=F(534);(0,Y.registerVersion)("firebase","10.12.3","app");var he=F(1954),me=F(2631);const De=new class Ne extends me.v{}(class ae extends he.o{constructor(sn,_e){super(sn,_e),this.scheduler=sn,this.work=_e}schedule(sn,_e=0){return _e>0?super.schedule(sn,_e):(this.delay=_e,this.state=sn,this.scheduler.flush(this),this)}execute(sn,_e){return _e>0||this.closed?super.execute(sn,_e):this._execute(sn,_e)}requestAsyncId(sn,_e,Ae=0){return null!=Ae&&Ae>0||null==Ae&&this.delay>0?super.requestAsyncId(sn,_e,Ae):(sn.flush(this),0)}});var re=F(6321),ue=F(9397),Ue=F(5137),Be=F(3093);const Xe=new E.GfV("ANGULARFIRE2_VERSION");class It{constructor(){return((Yt,sn)=>{const _e=(0,Y.getApps)(),Ae=[];return _e.forEach($e=>{$e.container.getProvider(Yt).instances.forEach(ot=>{Ae.includes(ot)||Ae.push(ot)})}),Ae})(_t)}}const _t="app-check";function ge(){}class ze{zone;delegate;constructor(sn,_e=De){this.zone=sn,this.delegate=_e}now(){return this.delegate.now()}schedule(sn,_e,Ae){const $e=this.zone;return this.delegate.schedule(function(ot){$e.runGuarded(()=>{sn.apply(this,[ot])})},_e,Ae)}}class pe{zone;task=null;constructor(sn){this.zone=sn}call(sn,_e){const Ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ge,{},ge,ge)),_e.pipe((0,ue.b)({next:Ae,complete:Ae,error:Ae})).subscribe(sn).add(Ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let et=(()=>{class Yt{ngZone;outsideAngular;insideAngular;constructor(_e){this.ngZone=_e,this.outsideAngular=_e.runOutsideAngular(()=>new ze(Zone.current)),this.insideAngular=_e.run(()=>new ze(Zone.current,re.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Ae){return new(Ae||Yt)(E.LFG(E.R0b))};static \u0275prov=E.Yz7({token:Yt,factory:Yt.\u0275fac,providedIn:"root"})}return Yt})();function Zn(Yt){return function On(Yt){return function(_e){return(_e=_e.lift(new pe(Yt.ngZone))).pipe((0,Ue.R)(Yt.outsideAngular),(0,Be.Q)(Yt.insideAngular))}}(function Ze(){const Yt=globalThis.\u0275AngularFireScheduler;if(!Yt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Yt}())(Yt)}},6593:(St,Pe,F)=>{F.d(Pe,{Dx:()=>Yr,b2:()=>bn,q6:()=>Gt});var E=F(5879),Y=F(6814);class Q extends Y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Z extends Q{static makeCurrent(){(0,Y.HT)(new Z)}onAndCancel(j,V,q){return j.addEventListener(V,q),()=>{j.removeEventListener(V,q)}}dispatchEvent(j,V){j.dispatchEvent(V)}remove(j){j.parentNode&&j.parentNode.removeChild(j)}createElement(j,V){return(V=V||this.getDefaultDocument()).createElement(j)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(j){return j.nodeType===Node.ELEMENT_NODE}isShadowRoot(j){return j instanceof DocumentFragment}getGlobalEventTarget(j,V){return"window"===V?window:"document"===V?j:"body"===V?j.body:null}getBaseHref(j){const V=function ae(){return he=he||document.querySelector("base"),he?he.getAttribute("href"):null}();return null==V?null:function Ne(G){me=me||document.createElement("a"),me.setAttribute("href",G);const j=me.pathname;return"/"===j.charAt(0)?j:`/${j}`}(V)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(j){return(0,Y.Mx)(document.cookie,j)}}let me,he=null,X=(()=>{class G{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(q){return new(q||G)};static#t=this.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac})}return G})();const re=new E.OlP("EventManagerPlugins");let ue=(()=>{class G{constructor(V,q){this._zone=q,this._eventNameToPlugin=new Map,V.forEach(ee=>{ee.manager=this}),this._plugins=V.slice().reverse()}addEventListener(V,q,ee){return this._findPluginFor(q).addEventListener(V,q,ee)}getZone(){return this._zone}_findPluginFor(V){let q=this._eventNameToPlugin.get(V);if(q)return q;if(q=this._plugins.find(je=>je.supports(V)),!q)throw new E.vHH(5101,!1);return this._eventNameToPlugin.set(V,q),q}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(re),E.LFG(E.R0b))};static#t=this.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac})}return G})();class Ue{constructor(j){this._doc=j}}const Be="ng-app-id";let Xe=(()=>{class G{constructor(V,q,ee,je={}){this.doc=V,this.appId=q,this.nonce=ee,this.platformId=je,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Y.PM)(je),this.resetHostNodes()}addStyles(V){for(const q of V)1===this.changeUsageCount(q,1)&&this.onStyleAdded(q)}removeStyles(V){for(const q of V)this.changeUsageCount(q,-1)<=0&&this.onStyleRemoved(q)}ngOnDestroy(){const V=this.styleNodesInDOM;V&&(V.forEach(q=>q.remove()),V.clear());for(const q of this.getAllStyles())this.onStyleRemoved(q);this.resetHostNodes()}addHost(V){this.hostNodes.add(V);for(const q of this.getAllStyles())this.addStyleToHost(V,q)}removeHost(V){this.hostNodes.delete(V)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(V){for(const q of this.hostNodes)this.addStyleToHost(q,V)}onStyleRemoved(V){const q=this.styleRef;q.get(V)?.elements?.forEach(ee=>ee.remove()),q.delete(V)}collectServerRenderedStyles(){const V=this.doc.head?.querySelectorAll(`style[${Be}="${this.appId}"]`);if(V?.length){const q=new Map;return V.forEach(ee=>{null!=ee.textContent&&q.set(ee.textContent,ee)}),q}return null}changeUsageCount(V,q){const ee=this.styleRef;if(ee.has(V)){const je=ee.get(V);return je.usage+=q,je.usage}return ee.set(V,{usage:q,elements:[]}),q}getStyleElement(V,q){const ee=this.styleNodesInDOM,je=ee?.get(q);if(je?.parentNode===V)return ee.delete(q),je.removeAttribute(Be),je;{const We=this.doc.createElement("style");return this.nonce&&We.setAttribute("nonce",this.nonce),We.textContent=q,this.platformIsServer&&We.setAttribute(Be,this.appId),We}}addStyleToHost(V,q){const ee=this.getStyleElement(V,q);V.appendChild(ee);const je=this.styleRef,We=je.get(q)?.elements;We?We.push(ee):je.set(q,{elements:[ee],usage:1})}resetHostNodes(){const V=this.hostNodes;V.clear(),V.add(this.doc.head)}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(Y.K0),E.LFG(E.AFp),E.LFG(E.Ojb,8),E.LFG(E.Lbi))};static#t=this.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac})}return G})();const Ke={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ge=/%COMP%/g,ze=new E.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Ze(G,j){return j.map(V=>V.replace(Ge,G))}let dt=(()=>{class G{constructor(V,q,ee,je,We,Et,ln,ft=null){this.eventManager=V,this.sharedStylesHost=q,this.appId=ee,this.removeStylesOnCompDestroy=je,this.doc=We,this.platformId=Et,this.ngZone=ln,this.nonce=ft,this.rendererByCompId=new Map,this.platformIsServer=(0,Y.PM)(Et),this.defaultRenderer=new Pt(V,We,ln,this.platformIsServer)}createRenderer(V,q){if(!V||!q)return this.defaultRenderer;this.platformIsServer&&q.encapsulation===E.ifc.ShadowDom&&(q={...q,encapsulation:E.ifc.Emulated});const ee=this.getOrCreateRenderer(V,q);return ee instanceof rr?ee.applyToHost(V):ee instanceof _r&&ee.applyStyles(),ee}getOrCreateRenderer(V,q){const ee=this.rendererByCompId;let je=ee.get(q.id);if(!je){const We=this.doc,Et=this.ngZone,ln=this.eventManager,ft=this.sharedStylesHost,mt=this.removeStylesOnCompDestroy,Bt=this.platformIsServer;switch(q.encapsulation){case E.ifc.Emulated:je=new rr(ln,ft,q,this.appId,mt,We,Et,Bt);break;case E.ifc.ShadowDom:return new On(ln,ft,V,q,We,Et,this.nonce,Bt);default:je=new _r(ln,ft,q,mt,We,Et,Bt)}ee.set(q.id,je)}return je}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(ue),E.LFG(Xe),E.LFG(E.AFp),E.LFG(ze),E.LFG(Y.K0),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(E.Ojb))};static#t=this.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac})}return G})();class Pt{constructor(j,V,q,ee){this.eventManager=j,this.doc=V,this.ngZone=q,this.platformIsServer=ee,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(j,V){return V?this.doc.createElementNS(Ke[V]||V,j):this.doc.createElement(j)}createComment(j){return this.doc.createComment(j)}createText(j){return this.doc.createTextNode(j)}appendChild(j,V){(Zn(j)?j.content:j).appendChild(V)}insertBefore(j,V,q){j&&(Zn(j)?j.content:j).insertBefore(V,q)}removeChild(j,V){j&&j.removeChild(V)}selectRootElement(j,V){let q="string"==typeof j?this.doc.querySelector(j):j;if(!q)throw new E.vHH(-5104,!1);return V||(q.textContent=""),q}parentNode(j){return j.parentNode}nextSibling(j){return j.nextSibling}setAttribute(j,V,q,ee){if(ee){V=ee+":"+V;const je=Ke[ee];je?j.setAttributeNS(je,V,q):j.setAttribute(V,q)}else j.setAttribute(V,q)}removeAttribute(j,V,q){if(q){const ee=Ke[q];ee?j.removeAttributeNS(ee,V):j.removeAttribute(`${q}:${V}`)}else j.removeAttribute(V)}addClass(j,V){j.classList.add(V)}removeClass(j,V){j.classList.remove(V)}setStyle(j,V,q,ee){ee&(E.JOm.DashCase|E.JOm.Important)?j.style.setProperty(V,q,ee&E.JOm.Important?"important":""):j.style[V]=q}removeStyle(j,V,q){q&E.JOm.DashCase?j.style.removeProperty(V):j.style[V]=""}setProperty(j,V,q){j[V]=q}setValue(j,V){j.nodeValue=V}listen(j,V,q){if("string"==typeof j&&!(j=(0,Y.q)().getGlobalEventTarget(this.doc,j)))throw new Error(`Unsupported event target ${j} for event ${V}`);return this.eventManager.addEventListener(j,V,this.decoratePreventDefault(q))}decoratePreventDefault(j){return V=>{if("__ngUnwrap__"===V)return j;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>j(V)):j(V))&&V.preventDefault()}}}function Zn(G){return"TEMPLATE"===G.tagName&&void 0!==G.content}class On extends Pt{constructor(j,V,q,ee,je,We,Et,ln){super(j,je,We,ln),this.sharedStylesHost=V,this.hostEl=q,this.shadowRoot=q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const ft=Ze(ee.id,ee.styles);for(const mt of ft){const Bt=document.createElement("style");Et&&Bt.setAttribute("nonce",Et),Bt.textContent=mt,this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(j){return j===this.hostEl?this.shadowRoot:j}appendChild(j,V){return super.appendChild(this.nodeOrShadowRoot(j),V)}insertBefore(j,V,q){return super.insertBefore(this.nodeOrShadowRoot(j),V,q)}removeChild(j,V){return super.removeChild(this.nodeOrShadowRoot(j),V)}parentNode(j){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(j)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class _r extends Pt{constructor(j,V,q,ee,je,We,Et,ln){super(j,je,We,Et),this.sharedStylesHost=V,this.removeStylesOnCompDestroy=ee,this.styles=ln?Ze(ln,q.styles):q.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class rr extends _r{constructor(j,V,q,ee,je,We,Et,ln){const ft=ee+"-"+q.id;super(j,V,q,je,We,Et,ln,ft),this.contentAttr=function pe(G){return"_ngcontent-%COMP%".replace(Ge,G)}(ft),this.hostAttr=function et(G){return"_nghost-%COMP%".replace(Ge,G)}(ft)}applyToHost(j){this.applyStyles(),this.setAttribute(j,this.hostAttr,"")}createElement(j,V){const q=super.createElement(j,V);return super.setAttribute(q,this.contentAttr,""),q}}let Yt=(()=>{class G extends Ue{constructor(V){super(V)}supports(V){return!0}addEventListener(V,q,ee){return V.addEventListener(q,ee,!1),()=>this.removeEventListener(V,q,ee)}removeEventListener(V,q,ee){return V.removeEventListener(q,ee)}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(Y.K0))};static#t=this.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac})}return G})();const sn=["alt","control","meta","shift"],_e={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ae={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let $e=(()=>{class G extends Ue{constructor(V){super(V)}supports(V){return null!=G.parseEventName(V)}addEventListener(V,q,ee){const je=G.parseEventName(q),We=G.eventCallback(je.fullKey,ee,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Y.q)().onAndCancel(V,je.domEventName,We))}static parseEventName(V){const q=V.toLowerCase().split("."),ee=q.shift();if(0===q.length||"keydown"!==ee&&"keyup"!==ee)return null;const je=G._normalizeKey(q.pop());let We="",Et=q.indexOf("code");if(Et>-1&&(q.splice(Et,1),We="code."),sn.forEach(ft=>{const mt=q.indexOf(ft);mt>-1&&(q.splice(mt,1),We+=ft+".")}),We+=je,0!=q.length||0===je.length)return null;const ln={};return ln.domEventName=ee,ln.fullKey=We,ln}static matchEventFullKeyCode(V,q){let ee=_e[V.key]||V.key,je="";return q.indexOf("code.")>-1&&(ee=V.code,je="code."),!(null==ee||!ee)&&(ee=ee.toLowerCase()," "===ee?ee="space":"."===ee&&(ee="dot"),sn.forEach(We=>{We!==ee&&(0,Ae[We])(V)&&(je+=We+".")}),je+=ee,je===q)}static eventCallback(V,q,ee){return je=>{G.matchEventFullKeyCode(je,V)&&ee.runGuarded(()=>q(je))}}static _normalizeKey(V){return"esc"===V?"escape":V}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(Y.K0))};static#t=this.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac})}return G})();const Gt=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:Y.bD},{provide:E.g9A,useValue:function yt(){Z.makeCurrent()},multi:!0},{provide:Y.K0,useFactory:function kt(){return(0,E.RDi)(document),document},deps:[]}]),mi=new E.OlP(""),gn=[{provide:E.rWj,useClass:class De{addToWindow(j){E.dqk.getAngularTestability=(q,ee=!0)=>{const je=j.findTestabilityInTree(q,ee);if(null==je)throw new E.vHH(5103,!1);return je},E.dqk.getAllAngularTestabilities=()=>j.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>j.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(q=>{const ee=E.dqk.getAllAngularTestabilities();let je=ee.length,We=!1;const Et=function(ln){We=We||ln,je--,0==je&&q(We)};ee.forEach(ln=>{ln.whenStable(Et)})})}findTestabilityInTree(j,V,q){return null==V?null:j.getTestability(V)??(q?(0,Y.q)().isShadowRoot(V)?this.findTestabilityInTree(j,V.host,!0):this.findTestabilityInTree(j,V.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],Fn=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function Lt(){return new E.qLn},deps:[]},{provide:re,useClass:Yt,multi:!0,deps:[Y.K0,E.R0b,E.Lbi]},{provide:re,useClass:$e,multi:!0,deps:[Y.K0]},dt,Xe,ue,{provide:E.FYo,useExisting:dt},{provide:Y.JF,useClass:X,deps:[]},[]];let bn=(()=>{class G{constructor(V){}static withServerTransition(V){return{ngModule:G,providers:[{provide:E.AFp,useValue:V.appId}]}}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(mi,12))};static#t=this.\u0275mod=E.oAB({type:G});static#n=this.\u0275inj=E.cJS({providers:[...Fn,...gn],imports:[Y.ez,E.hGG]})}return G})(),Yr=(()=>{class G{constructor(V){this._doc=V}getTitle(){return this._doc.title}setTitle(V){this._doc.title=V||""}static#e=this.\u0275fac=function(q){return new(q||G)(E.LFG(Y.K0))};static#t=this.\u0275prov=E.Yz7({token:G,factory:function(q){let ee=null;return ee=q?new q:function oi(){return new Yr((0,E.LFG)(Y.K0))}(),ee},providedIn:"root"})}return G})();typeof window<"u"&&window},8948:(St,Pe,F)=>{F.d(Pe,{gz:()=>Qi,F0:()=>Si,rH:()=>Zs,Od:()=>ti,Bz:()=>Qu,lC:()=>Wr});var E=F(5879),Y=F(5592),Q=F(4674),he=F(2459),ae=F(2096),me=F(5619),Ne=F(2572),De=F(6973),X=F(5211),re=F(4829);function ue(w){return new Y.y(C=>{(0,re.Xf)(w()).subscribe(C)})}var Ue=F(8407);function Be(w,C){const v=(0,Q.m)(w)?w:()=>w,S=N=>N.error(v());return new Y.y(C?N=>C.schedule(S,0,N):S)}var Xe=F(6232),Ke=F(7394),Ge=F(9360),st=F(8251);function It(){return(0,Ge.e)((w,C)=>{let v=null;w._refCount++;const S=(0,st.x)(C,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(v=null);const N=w._connection,z=v;v=null,N&&(!z||N===z)&&N.unsubscribe(),C.unsubscribe()});w.subscribe(S),S.closed||(v=w.connect())})}class _t extends Y.y{constructor(C,v){super(),this.source=C,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,Ge.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,C?.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new Ke.w0;const v=this.getSubject();C.add(this.source.subscribe((0,st.x)(v,void 0,()=>{this._teardown(),v.complete()},S=>{this._teardown(),v.error(S)},()=>this._teardown()))),C.closed&&(this._connection=null,C=Ke.w0.EMPTY)}return C}refCount(){return It()(this)}}var ge=F(8645),ze=F(6814),pe=F(7398),et=F(4664),Ze=F(8180),dt=F(7921),Pt=F(2181),Oe=F(1631),Xt=F(1374);function Zn(w,C){return(0,Q.m)(C)?(0,Oe.z)(w,C,1):(0,Oe.z)(w,1)}var On=F(9397),_r=F(6306),rr=F(6699),Yt=F(3572);function sn(w){return w<=0?()=>Xe.E:(0,Ge.e)((C,v)=>{let S=[];C.subscribe((0,st.x)(v,N=>{S.push(N),w<S.length&&S.shift()},()=>{for(const N of S)v.next(N);v.complete()},void 0,()=>{S=null}))})}var _e=F(3026),Ae=F(2737),He=F(975);function ot(w){return(0,Ge.e)((C,v)=>{try{C.subscribe(v)}finally{v.add(w)}})}var Qe=F(9773),ce=F(7537),yt=F(6593);const Lt="primary",kt=Symbol("RouteTitle");class Nt{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v[0]:v}return null}getAll(C){if(this.has(C)){const v=this.params[C];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Gt(w){return new Nt(w)}function mi(w,C,v){const S=v.path.split("/");if(S.length>w.length||"full"===v.pathMatch&&(C.hasChildren()||S.length<w.length))return null;const N={};for(let z=0;z<S.length;z++){const ne=S[z],Ve=w[z];if(ne.startsWith(":"))N[ne.substring(1)]=Ve;else if(ne!==Ve.path)return null}return{consumed:w.slice(0,S.length),posParams:N}}function Fn(w,C){const v=w?Object.keys(w):void 0,S=C?Object.keys(C):void 0;if(!v||!S||v.length!=S.length)return!1;let N;for(let z=0;z<v.length;z++)if(N=v[z],!bn(w[N],C[N]))return!1;return!0}function bn(w,C){if(Array.isArray(w)&&Array.isArray(C)){if(w.length!==C.length)return!1;const v=[...w].sort(),S=[...C].sort();return v.every((N,z)=>S[z]===N)}return w===C}function Wn(w){return w.length>0?w[w.length-1]:null}function hr(w){return function Z(w){return!!w&&(w instanceof Y.y||(0,Q.m)(w.lift)&&(0,Q.m)(w.subscribe))}(w)?w:(0,E.QGY)(w)?(0,he.D)(Promise.resolve(w)):(0,ae.of)(w)}const Ui={exact:function Or(w,C,v){if(!$r(w.segments,C.segments)||!kn(w.segments,C.segments,v)||w.numberOfChildren!==C.numberOfChildren)return!1;for(const S in C.children)if(!w.children[S]||!Or(w.children[S],C.children[S],v))return!1;return!0},subset:nn},oi={exact:function Nr(w,C){return Fn(w,C)},subset:function Kt(w,C){return Object.keys(C).length<=Object.keys(w).length&&Object.keys(C).every(v=>bn(w[v],C[v]))},ignored:()=>!0};function Yr(w,C,v){return Ui[v.paths](w.root,C.root,v.matrixParams)&&oi[v.queryParams](w.queryParams,C.queryParams)&&!("exact"===v.fragment&&w.fragment!==C.fragment)}function nn(w,C,v){return fn(w,C,C.segments,v)}function fn(w,C,v,S){if(w.segments.length>v.length){const N=w.segments.slice(0,v.length);return!(!$r(N,v)||C.hasChildren()||!kn(N,v,S))}if(w.segments.length===v.length){if(!$r(w.segments,v)||!kn(w.segments,v,S))return!1;for(const N in C.children)if(!w.children[N]||!nn(w.children[N],C.children[N],S))return!1;return!0}{const N=v.slice(0,w.segments.length),z=v.slice(w.segments.length);return!!($r(w.segments,N)&&kn(w.segments,N,S)&&w.children[Lt])&&fn(w.children[Lt],C,z,S)}}function kn(w,C,v){return C.every((S,N)=>oi[v](w[N].parameters,S.parameters))}class An{constructor(C=new Wt([],{}),v={},S=null){this.root=C,this.queryParams=v,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gt(this.queryParams)),this._queryParamMap}toString(){return as.serialize(this)}}class Wt{constructor(C,v){this.segments=C,this.children=v,this.parent=null,Object.values(v).forEach(S=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pt(this)}}class cn{constructor(C,v){this.path=C,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Gt(this.parameters)),this._parameterMap}toString(){return xi(this)}}function $r(w,C){return w.length===C.length&&w.every((v,S)=>v.path===C[S].path)}let xn=(()=>{class w{static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:function(){return new Zt},providedIn:"root"})}return w})();class Zt{parse(C){const v=new Et(C);return new An(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(C){const v=`/${bt(C.root,!0)}`,S=function Bi(w){const C=Object.keys(w).map(v=>{const S=w[v];return Array.isArray(S)?S.map(N=>`${gt(v)}=${gt(N)}`).join("&"):`${gt(v)}=${gt(S)}`}).filter(v=>!!v);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${v}${S}${"string"==typeof C.fragment?`#${function Me(w){return encodeURI(w)}(C.fragment)}`:""}`}}const as=new Zt;function pt(w){return w.segments.map(C=>xi(C)).join("/")}function bt(w,C){if(!w.hasChildren())return pt(w);if(C){const v=w.children[Lt]?bt(w.children[Lt],!1):"",S=[];return Object.entries(w.children).forEach(([N,z])=>{N!==Lt&&S.push(`${N}:${bt(z,!1)}`)}),S.length>0?`${v}(${S.join("//")})`:v}{const v=function be(w,C){let v=[];return Object.entries(w.children).forEach(([S,N])=>{S===Lt&&(v=v.concat(C(N,S)))}),Object.entries(w.children).forEach(([S,N])=>{S!==Lt&&(v=v.concat(C(N,S)))}),v}(w,(S,N)=>N===Lt?[bt(w.children[Lt],!1)]:[`${N}:${bt(S,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Lt]?`${pt(w)}/${v[0]}`:`${pt(w)}/(${v.join("//")})`}}function yr(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gt(w){return yr(w).replace(/%3B/gi,";")}function tt(w){return yr(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Un(w){return decodeURIComponent(w)}function us(w){return Un(w.replace(/\+/g,"%20"))}function xi(w){return`${tt(w.path)}${function Cs(w){return Object.keys(w).map(C=>`;${tt(C)}=${tt(w[C])}`).join("")}(w.parameters)}`}const Ss=/^[^\/()?;#]+/;function G(w){const C=w.match(Ss);return C?C[0]:""}const j=/^[^\/()?;=#]+/,q=/^[^=?&#]+/,je=/^[^&#]+/;class Et{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(C.length>0||Object.keys(v).length>0)&&(S[Lt]=new Wt(C,v)),S}parseSegment(){const C=G(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(C),new cn(Un(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const v=function V(w){const C=w.match(j);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let S="";if(this.consumeOptional("=")){const N=G(this.remaining);N&&(S=N,this.capture(S))}C[Un(v)]=Un(S)}parseQueryParam(C){const v=function ee(w){const C=w.match(q);return C?C[0]:""}(this.remaining);if(!v)return;this.capture(v);let S="";if(this.consumeOptional("=")){const ne=function We(w){const C=w.match(je);return C?C[0]:""}(this.remaining);ne&&(S=ne,this.capture(S))}const N=us(v),z=us(S);if(C.hasOwnProperty(N)){let ne=C[N];Array.isArray(ne)||(ne=[ne],C[N]=ne),ne.push(z)}else C[N]=z}parseParens(C){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=G(this.remaining),N=this.remaining[S.length];if("/"!==N&&")"!==N&&";"!==N)throw new E.vHH(4010,!1);let z;S.indexOf(":")>-1?(z=S.slice(0,S.indexOf(":")),this.capture(z),this.capture(":")):C&&(z=Lt);const ne=this.parseChildren();v[z]=1===Object.keys(ne).length?ne[Lt]:new Wt([],ne),this.consumeOptional("//")}return v}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new E.vHH(4011,!1)}}function ln(w){return w.segments.length>0?new Wt([],{[Lt]:w}):w}function ft(w){const C={};for(const S of Object.keys(w.children)){const z=ft(w.children[S]);if(S===Lt&&0===z.segments.length&&z.hasChildren())for(const[ne,Ve]of Object.entries(z.children))C[ne]=Ve;else(z.segments.length>0||z.hasChildren())&&(C[S]=z)}return function mt(w){if(1===w.numberOfChildren&&w.children[Lt]){const C=w.children[Lt];return new Wt(w.segments.concat(C.segments),C.children)}return w}(new Wt(w.segments,C))}function Bt(w){return w instanceof An}function Ki(w){let C;const N=ln(function v(z){const ne={};for(const xe of z.children){const Rt=v(xe);ne[xe.outlet]=Rt}const Ve=new Wt(z.url,ne);return z===w&&(C=Ve),Ve}(w.root));return C??N}function Bn(w,C,v,S){let N=w;for(;N.parent;)N=N.parent;if(0===C.length)return ai(N,N,N,v,S);const z=function rn(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Jr(!0,0,w);let C=0,v=!1;const S=w.reduce((N,z,ne)=>{if("object"==typeof z&&null!=z){if(z.outlets){const Ve={};return Object.entries(z.outlets).forEach(([xe,Rt])=>{Ve[xe]="string"==typeof Rt?Rt.split("/"):Rt}),[...N,{outlets:Ve}]}if(z.segmentPath)return[...N,z.segmentPath]}return"string"!=typeof z?[...N,z]:0===ne?(z.split("/").forEach((Ve,xe)=>{0==xe&&"."===Ve||(0==xe&&""===Ve?v=!0:".."===Ve?C++:""!=Ve&&N.push(Ve))}),N):[...N,z]},[]);return new Jr(v,C,S)}(C);if(z.toRoot())return ai(N,N,new Wt([],{}),v,S);const ne=function Ee(w,C,v){if(w.isAbsolute)return new Le(C,!0,0);if(!v)return new Le(C,!1,NaN);if(null===v.parent)return new Le(v,!0,0);const S=vt(w.commands[0])?0:1;return function Je(w,C,v){let S=w,N=C,z=v;for(;z>N;){if(z-=N,S=S.parent,!S)throw new E.vHH(4005,!1);N=S.segments.length}return new Le(S,!1,N-z)}(v,v.segments.length-1+S,w.numberOfDoubleDots)}(z,N,w),Ve=ne.processChildren?$t(ne.segmentGroup,ne.index,z.commands):Ot(ne.segmentGroup,ne.index,z.commands);return ai(N,ne.segmentGroup,Ve,v,S)}function vt(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function ir(w){return"object"==typeof w&&null!=w&&w.outlets}function ai(w,C,v,S,N){let ne,z={};S&&Object.entries(S).forEach(([xe,Rt])=>{z[xe]=Array.isArray(Rt)?Rt.map(wn=>`${wn}`):`${Rt}`}),ne=w===C?v:kr(w,C,v);const Ve=ln(ft(ne));return new An(Ve,z,N)}function kr(w,C,v){const S={};return Object.entries(w.children).forEach(([N,z])=>{S[N]=z===C?v:kr(z,C,v)}),new Wt(w.segments,S)}class Jr{constructor(C,v,S){if(this.isAbsolute=C,this.numberOfDoubleDots=v,this.commands=S,C&&S.length>0&&vt(S[0]))throw new E.vHH(4003,!1);const N=S.find(ir);if(N&&N!==Wn(S))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Le{constructor(C,v,S){this.segmentGroup=C,this.processChildren=v,this.index=S}}function Ot(w,C,v){if(w||(w=new Wt([],{})),0===w.segments.length&&w.hasChildren())return $t(w,C,v);const S=function pn(w,C,v){let S=0,N=C;const z={match:!1,pathIndex:0,commandIndex:0};for(;N<w.segments.length;){if(S>=v.length)return z;const ne=w.segments[N],Ve=v[S];if(ir(Ve))break;const xe=`${Ve}`,Rt=S<v.length-1?v[S+1]:null;if(N>0&&void 0===xe)break;if(xe&&Rt&&"object"==typeof Rt&&void 0===Rt.outlets){if(!we(xe,Rt,ne))return z;S+=2}else{if(!we(xe,{},ne))return z;S++}N++}return{match:!0,pathIndex:N,commandIndex:S}}(w,C,v),N=v.slice(S.commandIndex);if(S.match&&S.pathIndex<w.segments.length){const z=new Wt(w.segments.slice(0,S.pathIndex),{});return z.children[Lt]=new Wt(w.segments.slice(S.pathIndex),w.children),$t(z,0,N)}return S.match&&0===N.length?new Wt(w.segments,{}):S.match&&!w.hasChildren()?qn(w,C,v):S.match?$t(w,0,N):qn(w,C,v)}function $t(w,C,v){if(0===v.length)return new Wt(w.segments,{});{const S=function At(w){return ir(w[0])?w[0].outlets:{[Lt]:w}}(v),N={};if(Object.keys(S).some(z=>z!==Lt)&&w.children[Lt]&&1===w.numberOfChildren&&0===w.children[Lt].segments.length){const z=$t(w.children[Lt],C,v);return new Wt(w.segments,z.children)}return Object.entries(S).forEach(([z,ne])=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(N[z]=Ot(w.children[z],C,ne))}),Object.entries(w.children).forEach(([z,ne])=>{void 0===S[z]&&(N[z]=ne)}),new Wt(w.segments,N)}}function qn(w,C,v){const S=w.segments.slice(0,C);let N=0;for(;N<v.length;){const z=v[N];if(ir(z)){const xe=Nn(z.outlets);return new Wt(S,xe)}if(0===N&&vt(v[0])){S.push(new cn(w.segments[C].path,Lr(v[0]))),N++;continue}const ne=ir(z)?z.outlets[Lt]:`${z}`,Ve=N<v.length-1?v[N+1]:null;ne&&Ve&&vt(Ve)?(S.push(new cn(ne,Lr(Ve))),N+=2):(S.push(new cn(ne,{})),N++)}return new Wt(S,{})}function Nn(w){const C={};return Object.entries(w).forEach(([v,S])=>{"string"==typeof S&&(S=[S]),null!==S&&(C[v]=qn(new Wt([],{}),0,S))}),C}function Lr(w){const C={};return Object.entries(w).forEach(([v,S])=>C[v]=`${S}`),C}function we(w,C,v){return w==v.path&&Fn(C,v.parameters)}const Hr="imperative";class on{constructor(C,v){this.id=C,this.url=v}}class co extends on{constructor(C,v,S="imperative",N=null){super(C,v),this.type=0,this.navigationTrigger=S,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _i extends on{constructor(C,v,S){super(C,v),this.urlAfterRedirects=S,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zi extends on{constructor(C,v,S,N){super(C,v),this.reason=S,this.code=N,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zr extends on{constructor(C,v,S,N){super(C,v),this.reason=S,this.code=N,this.type=16}}class lo extends on{constructor(C,v,S,N){super(C,v),this.error=S,this.target=N,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sr extends on{constructor(C,v,S,N){super(C,v),this.urlAfterRedirects=S,this.state=N,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vu extends on{constructor(C,v,S,N){super(C,v),this.urlAfterRedirects=S,this.state=N,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uo extends on{constructor(C,v,S,N,z){super(C,v),this.urlAfterRedirects=S,this.state=N,this.shouldActivate=z,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Fl extends on{constructor(C,v,S,N){super(C,v),this.urlAfterRedirects=S,this.state=N,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uu extends on{constructor(C,v,S,N){super(C,v),this.urlAfterRedirects=S,this.state=N,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ui{constructor(C){this.route=C,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ho{constructor(C){this.route=C,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cs{constructor(C){this.snapshot=C,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bo{constructor(C){this.snapshot=C,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qn{constructor(C){this.snapshot=C,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $c{constructor(C){this.snapshot=C,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fo{constructor(C,v,S){this.routerEvent=C,this.position=v,this.anchor=S,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ni{}class aa{constructor(C){this.url=C}}class jo{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $o,this.attachRef=null}}let $o=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(v,S){const N=this.getOrCreateContext(v);N.outlet=S,this.contexts.set(v,N)}onChildOutletDestroyed(v){const S=this.getContext(v);S&&(S.outlet=null,S.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let S=this.getContext(v);return S||(S=new jo,this.contexts.set(v,S)),S}getContext(v){return this.contexts.get(v)||null}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class ca{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const v=this.pathFromRoot(C);return v.length>1?v[v.length-2]:null}children(C){const v=la(C,this._root);return v?v.children.map(S=>S.value):[]}firstChild(C){const v=la(C,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(C){const v=ls(C,this._root);return v.length<2?[]:v[v.length-2].children.map(N=>N.value).filter(N=>N!==C)}pathFromRoot(C){return ls(C,this._root).map(v=>v.value)}}function la(w,C){if(w===C.value)return C;for(const v of C.children){const S=la(w,v);if(S)return S}return null}function ls(w,C){if(w===C.value)return[C];for(const v of C.children){const S=ls(w,v);if(S.length)return S.unshift(C),S}return[]}class hn{constructor(C,v){this.value=C,this.children=v}toString(){return`TreeNode(${this.value})`}}function sr(w){const C={};return w&&w.children.forEach(v=>C[v.value.outlet]=v),C}class Gr extends ca{constructor(C,v){super(C),this.snapshot=v,Yn(this,C)}toString(){return this.snapshot.toString()}}function ds(w,C){const v=function yi(w,C){const ne=new da([],{},{},"",{},Lt,C,null,{});return new Ho("",new hn(ne,[]))}(0,C),S=new me.X([new cn("",{})]),N=new me.X({}),z=new me.X({}),ne=new me.X({}),Ve=new me.X(""),xe=new Qi(S,N,ne,Ve,z,Lt,C,v.root);return xe.snapshot=v.root,new Gr(new hn(xe,[]),v)}class Qi{constructor(C,v,S,N,z,ne,Ve,xe){this.urlSubject=C,this.paramsSubject=v,this.queryParamsSubject=S,this.fragmentSubject=N,this.dataSubject=z,this.outlet=ne,this.component=Ve,this._futureSnapshot=xe,this.title=this.dataSubject?.pipe((0,pe.U)(Rt=>Rt[kt]))??(0,ae.of)(void 0),this.url=C,this.params=v,this.queryParams=S,this.fragment=N,this.data=z}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pe.U)(C=>Gt(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pe.U)(C=>Gt(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xa(w,C="emptyOnly"){const v=w.pathFromRoot;let S=0;if("always"!==C)for(S=v.length-1;S>=1;){const N=v[S],z=v[S-1];if(N.routeConfig&&""===N.routeConfig.path)S--;else{if(z.component)break;S--}}return function po(w){return w.reduce((C,v)=>({params:{...C.params,...v.params},data:{...C.data,...v.data},resolve:{...v.data,...C.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(S))}class da{get title(){return this.data?.[kt]}constructor(C,v,S,N,z,ne,Ve,xe,Rt){this.url=C,this.params=v,this.queryParams=S,this.fragment=N,this.data=z,this.outlet=ne,this.component=Ve,this.routeConfig=xe,this._resolve=Rt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ho extends ca{constructor(C,v){super(v),this.url=C,Yn(this,v)}toString(){return Dt(this._root)}}function Yn(w,C){C.value._routerState=w,C.children.forEach(v=>Yn(w,v))}function Dt(w){const C=w.children.length>0?` { ${w.children.map(Dt).join(", ")} } `:"";return`${w.value}${C}`}function an(w){if(w.snapshot){const C=w.snapshot,v=w._futureSnapshot;w.snapshot=v,Fn(C.queryParams,v.queryParams)||w.queryParamsSubject.next(v.queryParams),C.fragment!==v.fragment&&w.fragmentSubject.next(v.fragment),Fn(C.params,v.params)||w.paramsSubject.next(v.params),function gn(w,C){if(w.length!==C.length)return!1;for(let v=0;v<w.length;++v)if(!Fn(w[v],C[v]))return!1;return!0}(C.url,v.url)||w.urlSubject.next(v.url),Fn(C.data,v.data)||w.dataSubject.next(v.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function $n(w,C){const v=Fn(w.params,C.params)&&function Cr(w,C){return $r(w,C)&&w.every((v,S)=>Fn(v.parameters,C[S].parameters))}(w.url,C.url);return v&&!(!w.parent!=!C.parent)&&(!w.parent||$n(w.parent,C.parent))}let Wr=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)($o),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb),this.inputBinder=(0,E.f3M)(Fr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:S,previousValue:N}=v.name;if(S)return;this.isTrackedInParentContexts(N)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(N)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,S){this.activated=v,this._activatedRoute=S,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,S){if(this.isActivated)throw new E.vHH(4013,!1);this._activatedRoute=v;const N=this.location,ne=v.snapshot.component,Ve=this.parentContexts.getOrCreateContext(this.name).children,xe=new Bs(v,Ve,N.injector);this.activated=N.createComponent(ne,{index:N.length,injector:xe,environmentInjector:S??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275dir=E.lG2({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]})}return w})();class Bs{constructor(C,v,S){this.route=C,this.childContexts=v,this.parent=S}get(C,v){return C===Qi?this.route:C===$o?this.childContexts:this.parent.get(C,v)}}const Fr=new E.OlP("");let ji=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:S}=v,N=(0,Ne.a)([S.queryParams,S.params,S.data]).pipe((0,et.w)(([z,ne,Ve],xe)=>(Ve={...z,...ne,...Ve},0===xe?(0,ae.of)(Ve):Promise.resolve(Ve)))).subscribe(z=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==S||null===S.component)return void this.unsubscribeFromRouteData(v);const ne=(0,E.qFp)(S.component);if(ne)for(const{templateName:Ve}of ne.inputs)v.activatedComponentRef.setInput(Ve,z[Ve]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,N)}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac})}return w})();function Xr(w,C,v){if(v&&w.shouldReuseRoute(C.value,v.value.snapshot)){const S=v.value;S._futureSnapshot=C.value;const N=function vi(w,C,v){return C.children.map(S=>{for(const N of v.children)if(w.shouldReuseRoute(S.value,N.value.snapshot))return Xr(w,S,N);return Xr(w,S)})}(w,C,v);return new hn(S,N)}{if(w.shouldAttach(C.value)){const z=w.retrieve(C.value);if(null!==z){const ne=z.route;return ne.value._futureSnapshot=C.value,ne.children=C.children.map(Ve=>Xr(w,Ve)),ne}}const S=function en(w){return new Qi(new me.X(w.url),new me.X(w.params),new me.X(w.queryParams),new me.X(w.fragment),new me.X(w.data),w.outlet,w.component,w)}(C.value),N=C.children.map(z=>Xr(w,z));return new hn(S,N)}}const js="ngNavigationCancelingError";function Gn(w,C){const{redirectTo:v,navigationBehaviorOptions:S}=Bt(C)?{redirectTo:C,navigationBehaviorOptions:void 0}:C,N=Ei(!1,0,C);return N.url=v,N.navigationBehaviorOptions=S,N}function Ei(w,C,v){const S=new Error("NavigationCancelingError: "+(w||""));return S[js]=!0,S.cancellationCode=C,v&&(S.url=v),S}function Ln(w){return w&&w[js]}let bs=(()=>{class w{static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275cmp=E.Xpm({type:w,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(S,N){1&S&&E._UZ(0,"router-outlet")},dependencies:[Wr],encapsulation:2})}return w})();function Yi(w){const C=w.children&&w.children.map(Yi),v=C?{...w,children:C}:{...w};return!v.component&&!v.loadComponent&&(C||v.loadChildren)&&v.outlet&&v.outlet!==Lt&&(v.component=bs),v}function ar(w){return w.outlet||Lt}function zs(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let C=w.parent;C;C=C.parent){const v=C.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Ir{constructor(C,v,S,N,z){this.routeReuseStrategy=C,this.futureState=v,this.currState=S,this.forwardEvent=N,this.inputBindingEnabled=z}activate(C){const v=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,S,C),an(this.futureState.root),this.activateChildRoutes(v,S,C)}deactivateChildRoutes(C,v,S){const N=sr(v);C.children.forEach(z=>{const ne=z.value.outlet;this.deactivateRoutes(z,N[ne],S),delete N[ne]}),Object.values(N).forEach(z=>{this.deactivateRouteAndItsChildren(z,S)})}deactivateRoutes(C,v,S){const N=C.value,z=v?v.value:null;if(N===z)if(N.component){const ne=S.getContext(N.outlet);ne&&this.deactivateChildRoutes(C,v,ne.children)}else this.deactivateChildRoutes(C,v,S);else z&&this.deactivateRouteAndItsChildren(v,S)}deactivateRouteAndItsChildren(C,v){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,v):this.deactivateRouteAndOutlet(C,v)}detachAndStoreRouteSubtree(C,v){const S=v.getContext(C.value.outlet),N=S&&C.value.component?S.children:v,z=sr(C);for(const ne of Object.keys(z))this.deactivateRouteAndItsChildren(z[ne],N);if(S&&S.outlet){const ne=S.outlet.detach(),Ve=S.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:ne,route:C,contexts:Ve})}}deactivateRouteAndOutlet(C,v){const S=v.getContext(C.value.outlet),N=S&&C.value.component?S.children:v,z=sr(C);for(const ne of Object.keys(z))this.deactivateRouteAndItsChildren(z[ne],N);S&&(S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated()),S.attachRef=null,S.route=null)}activateChildRoutes(C,v,S){const N=sr(v);C.children.forEach(z=>{this.activateRoutes(z,N[z.value.outlet],S),this.forwardEvent(new $c(z.value.snapshot))}),C.children.length&&this.forwardEvent(new Bo(C.value.snapshot))}activateRoutes(C,v,S){const N=C.value,z=v?v.value:null;if(an(N),N===z)if(N.component){const ne=S.getOrCreateContext(N.outlet);this.activateChildRoutes(C,v,ne.children)}else this.activateChildRoutes(C,v,S);else if(N.component){const ne=S.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const Ve=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),ne.children.onOutletReAttached(Ve.contexts),ne.attachRef=Ve.componentRef,ne.route=Ve.route.value,ne.outlet&&ne.outlet.attach(Ve.componentRef,Ve.route.value),an(Ve.route.value),this.activateChildRoutes(C,null,ne.children)}else{const Ve=zs(N.snapshot);ne.attachRef=null,ne.route=N,ne.injector=Ve,ne.outlet&&ne.outlet.activateWith(N,ne.injector),this.activateChildRoutes(C,null,ne.children)}}else this.activateChildRoutes(C,null,S)}}class ei{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class Hn{constructor(C,v){this.component=C,this.route=v}}function ur(w,C,v){const S=w._root;return Ti(S,C?C._root:null,v,[S.value])}function wi(w,C){const v=Symbol(),S=C.get(w,v);return S===v?"function"!=typeof w||(0,E.Z0I)(w)?C.get(w):w:S}function Ti(w,C,v,S,N={canDeactivateChecks:[],canActivateChecks:[]}){const z=sr(C);return w.children.forEach(ne=>{(function Di(w,C,v,S,N={canDeactivateChecks:[],canActivateChecks:[]}){const z=w.value,ne=C?C.value:null,Ve=v?v.getContext(w.value.outlet):null;if(ne&&z.routeConfig===ne.routeConfig){const xe=function zi(w,C,v){if("function"==typeof v)return v(w,C);switch(v){case"pathParamsChange":return!$r(w.url,C.url);case"pathParamsOrQueryParamsChange":return!$r(w.url,C.url)||!Fn(w.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$n(w,C)||!Fn(w.queryParams,C.queryParams);default:return!$n(w,C)}}(ne,z,z.routeConfig.runGuardsAndResolvers);xe?N.canActivateChecks.push(new ei(S)):(z.data=ne.data,z._resolvedData=ne._resolvedData),Ti(w,C,z.component?Ve?Ve.children:null:v,S,N),xe&&Ve&&Ve.outlet&&Ve.outlet.isActivated&&N.canDeactivateChecks.push(new Hn(Ve.outlet.component,ne))}else ne&&Gi(C,Ve,N),N.canActivateChecks.push(new ei(S)),Ti(w,null,z.component?Ve?Ve.children:null:v,S,N)})(ne,z[ne.value.outlet],v,S.concat([ne.value]),N),delete z[ne.value.outlet]}),Object.entries(z).forEach(([ne,Ve])=>Gi(Ve,v.getContext(ne),N)),N}function Gi(w,C,v){const S=sr(w),N=w.value;Object.entries(S).forEach(([z,ne])=>{Gi(ne,N.component?C?C.children.getContext(z):null:C,v)}),v.canDeactivateChecks.push(new Hn(N.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,N))}function hs(w){return"function"==typeof w}function ju(w){return w instanceof De.K||"EmptyError"===w?.name}const ga=Symbol("INITIAL_VALUE");function br(){return(0,et.w)(w=>(0,Ne.a)(w.map(C=>C.pipe((0,Ze.q)(1),(0,dt.O)(ga)))).pipe((0,pe.U)(C=>{for(const v of C)if(!0!==v){if(v===ga)return ga;if(!1===v||v instanceof An)return v}return!0}),(0,Pt.h)(C=>C!==ga),(0,Ze.q)(1)))}function In(w){return(0,Ue.z)((0,On.b)(C=>{if(Bt(C))throw Gn(0,C)}),(0,pe.U)(C=>!0===C))}class Ji{constructor(C){this.segmentGroup=C||null}}class ya{constructor(C){this.urlTree=C}}function fr(w){return Be(new Ji(w))}function Xi(w){return Be(new ya(w))}class Hu{constructor(C,v){this.urlSerializer=C,this.urlTree=v}noMatchError(C){return new E.vHH(4002,!1)}lineralizeSegments(C,v){let S=[],N=v.root;for(;;){if(S=S.concat(N.segments),0===N.numberOfChildren)return(0,ae.of)(S);if(N.numberOfChildren>1||!N.children[Lt])return Be(new E.vHH(4e3,!1));N=N.children[Lt]}}applyRedirectCommands(C,v,S){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),C,S)}applyRedirectCreateUrlTree(C,v,S,N){const z=this.createSegmentGroup(C,v.root,S,N);return new An(z,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(C,v){const S={};return Object.entries(C).forEach(([N,z])=>{if("string"==typeof z&&z.startsWith(":")){const Ve=z.substring(1);S[N]=v[Ve]}else S[N]=z}),S}createSegmentGroup(C,v,S,N){const z=this.createSegments(C,v.segments,S,N);let ne={};return Object.entries(v.children).forEach(([Ve,xe])=>{ne[Ve]=this.createSegmentGroup(C,xe,S,N)}),new Wt(z,ne)}createSegments(C,v,S,N){return v.map(z=>z.path.startsWith(":")?this.findPosParam(C,z,N):this.findOrReturn(z,S))}findPosParam(C,v,S){const N=S[v.path.substring(1)];if(!N)throw new E.vHH(4001,!1);return N}findOrReturn(C,v){let S=0;for(const N of v){if(N.path===C.path)return v.splice(S),N;S++}return C}}const mo={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gs(w,C,v,S,N){const z=_o(w,C,v);return z.matched?(S=function or(w,C){return w.providers&&!w._injector&&(w._injector=(0,E.MMx)(w.providers,C,`Route: ${w.path}`)),w._injector??C}(C,S),function Br(w,C,v,S){const N=C.canMatch;if(!N||0===N.length)return(0,ae.of)(!0);const z=N.map(ne=>{const Ve=wi(ne,w);return hr(function Vl(w){return w&&hs(w.canMatch)}(Ve)?Ve.canMatch(C,v):w.runInContext(()=>Ve(C,v)))});return(0,ae.of)(z).pipe(br(),In())}(S,C,v).pipe((0,pe.U)(ne=>!0===ne?z:{...mo}))):(0,ae.of)(z)}function _o(w,C,v){if(""===C.path)return"full"===C.pathMatch&&(w.hasChildren()||v.length>0)?{...mo}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const N=(C.matcher||mi)(v,w,C);if(!N)return{...mo};const z={};Object.entries(N.posParams??{}).forEach(([Ve,xe])=>{z[Ve]=xe.path});const ne=N.consumed.length>0?{...z,...N.consumed[N.consumed.length-1].parameters}:z;return{matched:!0,consumedSegments:N.consumed,remainingSegments:v.slice(N.consumed.length),parameters:ne,positionalParamSegments:N.posParams??{}}}function zo(w,C,v,S){return v.length>0&&function ru(w,C,v){return v.some(S=>yo(w,C,S)&&ar(S)!==Lt)}(w,v,S)?{segmentGroup:new Wt(C,Wo(S,new Wt(v,w.children))),slicedSegments:[]}:0===v.length&&function zc(w,C,v){return v.some(S=>yo(w,C,S))}(w,v,S)?{segmentGroup:new Wt(w.segments,Go(w,0,v,S,w.children)),slicedSegments:v}:{segmentGroup:new Wt(w.segments,w.children),slicedSegments:v}}function Go(w,C,v,S,N){const z={};for(const ne of S)if(yo(w,v,ne)&&!N[ar(ne)]){const Ve=new Wt([],{});z[ar(ne)]=Ve}return{...N,...z}}function Wo(w,C){const v={};v[Lt]=C;for(const S of w)if(""===S.path&&ar(S)!==Lt){const N=new Wt([],{});v[ar(S)]=N}return v}function yo(w,C,v){return(!(w.hasChildren()||C.length>0)||"full"!==v.pathMatch)&&""===v.path}class Ws{constructor(C,v,S,N,z,ne,Ve){this.injector=C,this.configLoader=v,this.rootComponentType=S,this.config=N,this.urlTree=z,this.paramsInheritanceStrategy=ne,this.urlSerializer=Ve,this.allowRedirects=!0,this.applyRedirects=new Hu(this.urlSerializer,this.urlTree)}noMatchError(C){return new E.vHH(4002,!1)}recognize(){const C=zo(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,C,Lt).pipe((0,_r.K)(v=>{if(v instanceof ya)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof Ji?this.noMatchError(v):v}),(0,pe.U)(v=>{const S=new da([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,{}),N=new hn(S,v),z=new Ho("",N),ne=function Ht(w,C,v=null,S=null){return Bn(Ki(w),C,v,S)}(S,[],this.urlTree.queryParams,this.urlTree.fragment);return ne.queryParams=this.urlTree.queryParams,z.url=this.urlSerializer.serialize(ne),this.inheritParamsAndData(z._root),{state:z,tree:ne}}))}match(C){return this.processSegmentGroup(this.injector,this.config,C.root,Lt).pipe((0,_r.K)(S=>{throw S instanceof Ji?this.noMatchError(S):S}))}inheritParamsAndData(C){const v=C.value,S=Xa(v,this.paramsInheritanceStrategy);v.params=Object.freeze(S.params),v.data=Object.freeze(S.data),C.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(C,v,S,N){return 0===S.segments.length&&S.hasChildren()?this.processChildren(C,v,S):this.processSegment(C,v,S,S.segments,N,!0)}processChildren(C,v,S){const N=[];for(const z of Object.keys(S.children))"primary"===z?N.unshift(z):N.push(z);return(0,he.D)(N).pipe(Zn(z=>{const ne=S.children[z],Ve=function ci(w,C){const v=w.filter(S=>ar(S)===C);return v.push(...w.filter(S=>ar(S)!==C)),v}(v,z);return this.processSegmentGroup(C,Ve,ne,z)}),(0,rr.R)((z,ne)=>(z.push(...ne),z)),(0,Yt.d)(null),function $e(w,C){const v=arguments.length>=2;return S=>S.pipe(w?(0,Pt.h)((N,z)=>w(N,z,S)):Ae.y,sn(1),v?(0,Yt.d)(C):(0,_e.T)(()=>new De.K))}(),(0,Oe.z)(z=>{if(null===z)return fr(S);const ne=Gc(z);return function Ea(w){w.sort((C,v)=>C.value.outlet===Lt?-1:v.value.outlet===Lt?1:C.value.outlet.localeCompare(v.value.outlet))}(ne),(0,ae.of)(ne)}))}processSegment(C,v,S,N,z,ne){return(0,he.D)(v).pipe(Zn(Ve=>this.processSegmentAgainstRoute(Ve._injector??C,v,Ve,S,N,z,ne).pipe((0,_r.K)(xe=>{if(xe instanceof Ji)return(0,ae.of)(null);throw xe}))),(0,Xt.P)(Ve=>!!Ve),(0,_r.K)(Ve=>{if(ju(Ve))return function Ai(w,C,v){return 0===C.length&&!w.children[v]}(S,N,z)?(0,ae.of)([]):fr(S);throw Ve}))}processSegmentAgainstRoute(C,v,S,N,z,ne,Ve){return function qo(w,C,v,S){return!!(ar(w)===S||S!==Lt&&yo(C,v,w))&&("**"===w.path||_o(C,w,v).matched)}(S,N,z,ne)?void 0===S.redirectTo?this.matchSegmentAgainstRoute(C,N,S,z,ne,Ve):Ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,N,v,S,z,ne):fr(N):fr(N)}expandSegmentAgainstRouteUsingRedirect(C,v,S,N,z,ne){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,S,N,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(C,v,S,N,z,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,v,S,N){const z=this.applyRedirects.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?Xi(z):this.applyRedirects.lineralizeSegments(S,z).pipe((0,Oe.z)(ne=>{const Ve=new Wt(ne,{});return this.processSegment(C,v,Ve,ne,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,v,S,N,z,ne){const{matched:Ve,consumedSegments:xe,remainingSegments:Rt,positionalParamSegments:wn}=_o(v,N,z);if(!Ve)return fr(v);const gr=this.applyRedirects.applyRedirectCommands(xe,N.redirectTo,wn);return N.redirectTo.startsWith("/")?Xi(gr):this.applyRedirects.lineralizeSegments(N,gr).pipe((0,Oe.z)(Pn=>this.processSegment(C,S,v,Pn.concat(Rt),ne,!1)))}matchSegmentAgainstRoute(C,v,S,N,z,ne){let Ve;if("**"===S.path){const xe=N.length>0?Wn(N).parameters:{},Rt=new da(N,xe,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Gu(S),ar(S),S.component??S._loadedComponent??null,S,qs(S));Ve=(0,ae.of)({snapshot:Rt,consumedSegments:[],remainingSegments:[]}),v.children={}}else Ve=Gs(v,S,N,C).pipe((0,pe.U)(({matched:xe,consumedSegments:Rt,remainingSegments:wn,parameters:gr})=>xe?{snapshot:new da(Rt,gr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Gu(S),ar(S),S.component??S._loadedComponent??null,S,qs(S)),consumedSegments:Rt,remainingSegments:wn}:null));return Ve.pipe((0,et.w)(xe=>null===xe?fr(v):this.getChildConfig(C=S._injector??C,S,N).pipe((0,et.w)(({routes:Rt})=>{const wn=S._loadedInjector??C,{snapshot:gr,consumedSegments:Pn,remainingSegments:ns}=xe,{segmentGroup:_s,slicedSegments:Qo}=zo(v,Pn,ns,Rt);if(0===Qo.length&&_s.hasChildren())return this.processChildren(wn,Rt,_s).pipe((0,pe.U)(lr=>null===lr?null:[new hn(gr,lr)]));if(0===Rt.length&&0===Qo.length)return(0,ae.of)([new hn(gr,[])]);const ou=ar(S)===z;return this.processSegment(wn,Rt,_s,Qo,ou?Lt:z,!0).pipe((0,pe.U)(lr=>[new hn(gr,lr)]))}))))}getChildConfig(C,v,S){return v.children?(0,ae.of)({routes:v.children,injector:C}):v.loadChildren?void 0!==v._loadedRoutes?(0,ae.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function Rn(w,C,v,S){const N=C.canLoad;if(void 0===N||0===N.length)return(0,ae.of)(!0);const z=N.map(ne=>{const Ve=wi(ne,w);return hr(function tu(w){return w&&hs(w.canLoad)}(Ve)?Ve.canLoad(C,v):w.runInContext(()=>Ve(C,v)))});return(0,ae.of)(z).pipe(br(),In())}(C,v,S).pipe((0,Oe.z)(N=>N?this.configLoader.loadChildren(C,v).pipe((0,On.b)(z=>{v._loadedRoutes=z.routes,v._loadedInjector=z.injector})):function va(w){return Be(Ei(!1,3))}())):(0,ae.of)({routes:[],injector:C})}}function zu(w){const C=w.value.routeConfig;return C&&""===C.path}function Gc(w){const C=[],v=new Set;for(const S of w){if(!zu(S)){C.push(S);continue}const N=C.find(z=>S.value.routeConfig===z.value.routeConfig);void 0!==N?(N.children.push(...S.children),v.add(N)):C.push(S)}for(const S of v){const N=Gc(S.children);C.push(new hn(S.value,N))}return C.filter(S=>!v.has(S))}function Gu(w){return w.data||{}}function qs(w){return w.resolve||{}}function iu(w){return"string"==typeof w.title||null===w.title}function D(w){return(0,et.w)(C=>{const v=w(C);return v?(0,he.D)(v).pipe((0,pe.U)(()=>C)):(0,ae.of)(C)})}const U=new E.OlP("ROUTES");let P=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,E.f3M)(E.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,ae.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const S=hr(v.loadComponent()).pipe((0,pe.U)(Fe),(0,On.b)(z=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=z}),ot(()=>{this.componentLoaders.delete(v)})),N=new _t(S,()=>new ge.x).pipe(It());return this.componentLoaders.set(v,N),N}loadChildren(v,S){if(this.childrenLoaders.get(S))return this.childrenLoaders.get(S);if(S._loadedRoutes)return(0,ae.of)({routes:S._loadedRoutes,injector:S._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(S);const z=function L(w,C,v,S){return hr(w.loadChildren()).pipe((0,pe.U)(Fe),(0,Oe.z)(N=>N instanceof E.YKP||Array.isArray(N)?(0,ae.of)(N):(0,he.D)(C.compileModuleAsync(N))),(0,pe.U)(N=>{S&&S(w);let z,ne,Ve=!1;return Array.isArray(N)?(ne=N,!0):(z=N.create(v).injector,ne=z.get(U,[],{optional:!0,self:!0}).flat()),{routes:ne.map(Yi),injector:z}}))}(S,this.compiler,v,this.onLoadEndListener).pipe(ot(()=>{this.childrenLoaders.delete(S)})),ne=new _t(z,()=>new ge.x).pipe(It());return this.childrenLoaders.set(S,ne),ne}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Fe(w){return function te(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let nt=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ge.x,this.transitionAbortSubject=new ge.x,this.configLoader=(0,E.f3M)(P),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(xn),this.rootContexts=(0,E.f3M)($o),this.inputBindingEnabled=null!==(0,E.f3M)(Fr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ae.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=N=>this.events.next(new ho(N)),this.configLoader.onLoadStartListener=N=>this.events.next(new ui(N))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const S=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:S})}setupNavigations(v,S,N){return this.transitions=new me.X({id:0,currentUrlTree:S,currentRawUrl:S,currentBrowserUrl:S,extractedUrl:v.urlHandlingStrategy.extract(S),urlAfterRedirects:v.urlHandlingStrategy.extract(S),rawUrl:S,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hr,restoredState:null,currentSnapshot:N.snapshot,targetSnapshot:null,currentRouterState:N,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Pt.h)(z=>0!==z.id),(0,pe.U)(z=>({...z,extractedUrl:v.urlHandlingStrategy.extract(z.rawUrl)})),(0,et.w)(z=>{this.currentTransition=z;let ne=!1,Ve=!1;return(0,ae.of)(z).pipe((0,On.b)(xe=>{this.currentNavigation={id:xe.id,initialUrl:xe.rawUrl,extractedUrl:xe.extractedUrl,trigger:xe.source,extras:xe.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,et.w)(xe=>{const Rt=xe.currentBrowserUrl.toString(),wn=!v.navigated||xe.extractedUrl.toString()!==Rt||Rt!==xe.currentUrlTree.toString();if(!wn&&"reload"!==(xe.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const Pn="";return this.events.next(new zr(xe.id,this.urlSerializer.serialize(xe.rawUrl),Pn,0)),xe.resolve(null),Xe.E}if(v.urlHandlingStrategy.shouldProcessUrl(xe.rawUrl))return(0,ae.of)(xe).pipe((0,et.w)(Pn=>{const ns=this.transitions?.getValue();return this.events.next(new co(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),Pn.source,Pn.restoredState)),ns!==this.transitions?.getValue()?Xe.E:Promise.resolve(Pn)}),function Wu(w,C,v,S,N,z){return(0,Oe.z)(ne=>function fs(w,C,v,S,N,z,ne="emptyOnly"){return new Ws(w,C,v,S,N,ne,z).recognize()}(w,C,v,S,ne.extractedUrl,N,z).pipe((0,pe.U)(({state:Ve,tree:xe})=>({...ne,targetSnapshot:Ve,urlAfterRedirects:xe}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,On.b)(Pn=>{z.targetSnapshot=Pn.targetSnapshot,z.urlAfterRedirects=Pn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Pn.urlAfterRedirects};const ns=new Sr(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),this.urlSerializer.serialize(Pn.urlAfterRedirects),Pn.targetSnapshot);this.events.next(ns)}));if(wn&&v.urlHandlingStrategy.shouldProcessUrl(xe.currentRawUrl)){const{id:Pn,extractedUrl:ns,source:_s,restoredState:Qo,extras:ou}=xe,lr=new co(Pn,this.urlSerializer.serialize(ns),_s,Qo);this.events.next(lr);const Sa=ds(0,this.rootComponentType).snapshot;return this.currentTransition=z={...xe,targetSnapshot:Sa,urlAfterRedirects:ns,extras:{...ou,skipLocationChange:!1,replaceUrl:!1}},(0,ae.of)(z)}{const Pn="";return this.events.next(new zr(xe.id,this.urlSerializer.serialize(xe.extractedUrl),Pn,1)),xe.resolve(null),Xe.E}}),(0,On.b)(xe=>{const Rt=new Vu(xe.id,this.urlSerializer.serialize(xe.extractedUrl),this.urlSerializer.serialize(xe.urlAfterRedirects),xe.targetSnapshot);this.events.next(Rt)}),(0,pe.U)(xe=>(this.currentTransition=z={...xe,guards:ur(xe.targetSnapshot,xe.currentSnapshot,this.rootContexts)},z)),function $u(w,C){return(0,Oe.z)(v=>{const{targetSnapshot:S,currentSnapshot:N,guards:{canActivateChecks:z,canDeactivateChecks:ne}}=v;return 0===ne.length&&0===z.length?(0,ae.of)({...v,guardsResult:!0}):function nr(w,C,v,S){return(0,he.D)(w).pipe((0,Oe.z)(N=>function nu(w,C,v,S,N){const z=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!z||0===z.length)return(0,ae.of)(!0);const ne=z.map(Ve=>{const xe=zs(C)??N,Rt=wi(Ve,xe);return hr(function pa(w){return w&&hs(w.canDeactivate)}(Rt)?Rt.canDeactivate(w,C,v,S):xe.runInContext(()=>Rt(w,C,v,S))).pipe((0,Xt.P)())});return(0,ae.of)(ne).pipe(br())}(N.component,N.route,v,C,S)),(0,Xt.P)(N=>!0!==N,!0))}(ne,S,N,w).pipe((0,Oe.z)(Ve=>Ve&&function ha(w){return"boolean"==typeof w}(Ve)?function Ps(w,C,v,S){return(0,he.D)(C).pipe(Zn(N=>(0,X.z)(function _a(w,C){return null!==w&&C&&C(new cs(w)),(0,ae.of)(!0)}(N.route.parent,S),function ma(w,C){return null!==w&&C&&C(new Qn(w)),(0,ae.of)(!0)}(N.route,S),function Hc(w,C,v){const S=C[C.length-1],z=C.slice(0,C.length-1).reverse().map(ne=>function Hi(w){const C=w.routeConfig?w.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:w,guards:C}:null}(ne)).filter(ne=>null!==ne).map(ne=>ue(()=>{const Ve=ne.guards.map(xe=>{const Rt=zs(ne.node)??v,wn=wi(xe,Rt);return hr(function li(w){return w&&hs(w.canActivateChild)}(wn)?wn.canActivateChild(S,w):Rt.runInContext(()=>wn(S,w))).pipe((0,Xt.P)())});return(0,ae.of)(Ve).pipe(br())}));return(0,ae.of)(z).pipe(br())}(w,N.path,v),function go(w,C,v){const S=C.routeConfig?C.routeConfig.canActivate:null;if(!S||0===S.length)return(0,ae.of)(!0);const N=S.map(z=>ue(()=>{const ne=zs(C)??v,Ve=wi(z,ne);return hr(function fa(w){return w&&hs(w.canActivate)}(Ve)?Ve.canActivate(C,w):ne.runInContext(()=>Ve(C,w))).pipe((0,Xt.P)())}));return(0,ae.of)(N).pipe(br())}(w,N.route,v))),(0,Xt.P)(N=>!0!==N,!0))}(S,z,w,C):(0,ae.of)(Ve)),(0,pe.U)(Ve=>({...v,guardsResult:Ve})))})}(this.environmentInjector,xe=>this.events.next(xe)),(0,On.b)(xe=>{if(z.guardsResult=xe.guardsResult,Bt(xe.guardsResult))throw Gn(0,xe.guardsResult);const Rt=new Uo(xe.id,this.urlSerializer.serialize(xe.extractedUrl),this.urlSerializer.serialize(xe.urlAfterRedirects),xe.targetSnapshot,!!xe.guardsResult);this.events.next(Rt)}),(0,Pt.h)(xe=>!!xe.guardsResult||(this.cancelNavigationTransition(xe,"",3),!1)),D(xe=>{if(xe.guards.canActivateChecks.length)return(0,ae.of)(xe).pipe((0,On.b)(Rt=>{const wn=new Fl(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(wn)}),(0,et.w)(Rt=>{let wn=!1;return(0,ae.of)(Rt).pipe(function Ia(w,C){return(0,Oe.z)(v=>{const{targetSnapshot:S,guards:{canActivateChecks:N}}=v;if(!N.length)return(0,ae.of)(v);let z=0;return(0,he.D)(N).pipe(Zn(ne=>function Ks(w,C,v,S){const N=w.routeConfig,z=w._resolve;return void 0!==N?.title&&!iu(N)&&(z[kt]=N.title),function jr(w,C,v,S){const N=function Ul(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}(w);if(0===N.length)return(0,ae.of)({});const z={};return(0,he.D)(N).pipe((0,Oe.z)(ne=>function vo(w,C,v,S){const N=zs(C)??S,z=wi(w,N);return hr(z.resolve?z.resolve(C,v):N.runInContext(()=>z(C,v)))}(w[ne],C,v,S).pipe((0,Xt.P)(),(0,On.b)(Ve=>{z[ne]=Ve}))),sn(1),(0,He.h)(z),(0,_r.K)(ne=>ju(ne)?Xe.E:Be(ne)))}(z,w,C,S).pipe((0,pe.U)(ne=>(w._resolvedData=ne,w.data=Xa(w,v).resolve,N&&iu(N)&&(w.data[kt]=N.title),null)))}(ne.route,S,w,C)),(0,On.b)(()=>z++),sn(1),(0,Oe.z)(ne=>z===N.length?(0,ae.of)(v):Xe.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,On.b)({next:()=>wn=!0,complete:()=>{wn||this.cancelNavigationTransition(Rt,"",2)}}))}),(0,On.b)(Rt=>{const wn=new Uu(Rt.id,this.urlSerializer.serialize(Rt.extractedUrl),this.urlSerializer.serialize(Rt.urlAfterRedirects),Rt.targetSnapshot);this.events.next(wn)}))}),D(xe=>{const Rt=wn=>{const gr=[];wn.routeConfig?.loadComponent&&!wn.routeConfig._loadedComponent&&gr.push(this.configLoader.loadComponent(wn.routeConfig).pipe((0,On.b)(Pn=>{wn.component=Pn}),(0,pe.U)(()=>{})));for(const Pn of wn.children)gr.push(...Rt(Pn));return gr};return(0,Ne.a)(Rt(xe.targetSnapshot.root)).pipe((0,Yt.d)(),(0,Ze.q)(1))}),D(()=>this.afterPreactivation()),(0,pe.U)(xe=>{const Rt=function En(w,C,v){const S=Xr(w,C._root,v?v._root:void 0);return new Gr(S,C)}(v.routeReuseStrategy,xe.targetSnapshot,xe.currentRouterState);return this.currentTransition=z={...xe,targetRouterState:Rt},z}),(0,On.b)(()=>{this.events.next(new Ni)}),((w,C,v,S)=>(0,pe.U)(N=>(new Ir(C,N.targetRouterState,N.currentRouterState,v,S).activate(w),N)))(this.rootContexts,v.routeReuseStrategy,xe=>this.events.next(xe),this.inputBindingEnabled),(0,Ze.q)(1),(0,On.b)({next:xe=>{ne=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new _i(xe.id,this.urlSerializer.serialize(xe.extractedUrl),this.urlSerializer.serialize(xe.urlAfterRedirects))),v.titleStrategy?.updateTitle(xe.targetRouterState.snapshot),xe.resolve(!0)},complete:()=>{ne=!0}}),(0,Qe.R)(this.transitionAbortSubject.pipe((0,On.b)(xe=>{throw xe}))),ot(()=>{ne||Ve||this.cancelNavigationTransition(z,"",1),this.currentNavigation?.id===z.id&&(this.currentNavigation=null)}),(0,_r.K)(xe=>{if(Ve=!0,Ln(xe))this.events.next(new Zi(z.id,this.urlSerializer.serialize(z.extractedUrl),xe.message,xe.cancellationCode)),function dn(w){return Ln(w)&&Bt(w.url)}(xe)?this.events.next(new aa(xe.url)):z.resolve(!1);else{this.events.next(new lo(z.id,this.urlSerializer.serialize(z.extractedUrl),xe,z.targetSnapshot??void 0));try{z.resolve(v.errorHandler(xe))}catch(Rt){z.reject(Rt)}}return Xe.E}))}))}cancelNavigationTransition(v,S,N){const z=new Zi(v.id,this.urlSerializer.serialize(v.extractedUrl),S,N);this.events.next(z),v.resolve(!1)}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Ut(w){return w!==Hr}let Cn=(()=>{class w{buildTitle(v){let S,N=v.root;for(;void 0!==N;)S=this.getResolvedTitleForRoute(N)??S,N=N.children.find(z=>z.outlet===Lt);return S}getResolvedTitleForRoute(v){return v.data[kt]}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:function(){return(0,E.f3M)(Xn)},providedIn:"root"})}return w})(),Xn=(()=>{class w extends Cn{constructor(v){super(),this.title=v}updateTitle(v){const S=this.buildTitle(v);void 0!==S&&this.title.setTitle(S)}static#e=this.\u0275fac=function(S){return new(S||w)(E.LFG(yt.Dx))};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),un=(()=>{class w{static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:function(){return(0,E.f3M)(er)},providedIn:"root"})}return w})();class mn{shouldDetach(C){return!1}store(C,v){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,v){return C.routeConfig===v.routeConfig}}let er=(()=>{class w extends mn{static#e=this.\u0275fac=function(){let v;return function(N){return(v||(v=E.n5z(w)))(N||w)}}();static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const zn=new E.OlP("",{providedIn:"root",factory:()=>({})});let Kn=(()=>{class w{static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:function(){return(0,E.f3M)(es)},providedIn:"root"})}return w})(),es=(()=>{class w{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,S){return v}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var pr=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(pr||{});function Ms(w,C){w.events.pipe((0,Pt.h)(v=>v instanceof _i||v instanceof Zi||v instanceof lo||v instanceof zr),(0,pe.U)(v=>v instanceof _i||v instanceof zr?pr.COMPLETE:v instanceof Zi&&(0===v.code||1===v.code)?pr.REDIRECTING:pr.FAILED),(0,Pt.h)(v=>v!==pr.REDIRECTING),(0,Ze.q)(1)).subscribe(()=>{C()})}function Ci(w){throw w}function tn(w,C,v){return C.parse("/")}const Kr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gs={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Si=(()=>{class w{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this._events=new ge.x,this.options=(0,E.f3M)(zn,{optional:!0})||{},this.pendingTasks=(0,E.f3M)(E.HDt),this.errorHandler=this.options.errorHandler||Ci,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||tn,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(Kn),this.routeReuseStrategy=(0,E.f3M)(un),this.titleStrategy=(0,E.f3M)(Cn),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,E.f3M)(U,{optional:!0})?.flat()??[],this.navigationTransitions=(0,E.f3M)(nt),this.urlSerializer=(0,E.f3M)(xn),this.location=(0,E.f3M)(ze.Ye),this.componentInputBindingEnabled=!!(0,E.f3M)(Fr,{optional:!0}),this.eventsSubscription=new Ke.w0,this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new An,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ds(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(S=>{try{const{currentTransition:N}=this.navigationTransitions;if(null===N)return void(qu(S)&&this._events.next(S));if(S instanceof co)Ut(N.source)&&(this.browserUrlTree=N.extractedUrl);else if(S instanceof zr)this.rawUrlTree=N.rawUrl;else if(S instanceof Sr){if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(z,N)}this.browserUrlTree=N.urlAfterRedirects}}else if(S instanceof Ni)this.currentUrlTree=N.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl),this.routerState=N.targetRouterState,"deferred"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,N),this.browserUrlTree=N.urlAfterRedirects);else if(S instanceof Zi)0!==S.code&&1!==S.code&&(this.navigated=!0),(3===S.code||2===S.code)&&this.restoreHistory(N);else if(S instanceof aa){const z=this.urlHandlingStrategy.merge(S.url,N.currentRawUrl),ne={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ut(N.source)};this.scheduleNavigation(z,Hr,null,ne,{resolve:N.resolve,reject:N.reject,promise:N.promise})}S instanceof lo&&this.restoreHistory(N,!0),S instanceof _i&&(this.navigated=!0),qu(S)&&this._events.next(S)}catch(N){this.navigationTransitions.transitionAbortSubject.next(N)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hr,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const S="popstate"===v.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,S,v.state)},0)}))}navigateToSyncWithBrowser(v,S,N){const z={replaceUrl:!0},ne=N?.navigationId?N:null;if(N){const xe={...N};delete xe.navigationId,delete xe.\u0275routerPageId,0!==Object.keys(xe).length&&(z.state=xe)}const Ve=this.parseUrl(v);this.scheduleNavigation(Ve,S,ne,z)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(Yi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,S={}){const{relativeTo:N,queryParams:z,fragment:ne,queryParamsHandling:Ve,preserveFragment:xe}=S,Rt=xe?this.currentUrlTree.fragment:ne;let gr,wn=null;switch(Ve){case"merge":wn={...this.currentUrlTree.queryParams,...z};break;case"preserve":wn=this.currentUrlTree.queryParams;break;default:wn=z||null}null!==wn&&(wn=this.removeEmptyProps(wn));try{gr=Ki(N?N.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),gr=this.currentUrlTree.root}return Bn(gr,v,wn,Rt??null)}navigateByUrl(v,S={skipLocationChange:!1}){const N=Bt(v)?v:this.parseUrl(v),z=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(z,Hr,null,S)}navigate(v,S={skipLocationChange:!1}){return function cr(w){for(let C=0;C<w.length;C++)if(null==w[C])throw new E.vHH(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,S),S)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let S;try{S=this.urlSerializer.parse(v)}catch(N){S=this.malformedUriErrorHandler(N,this.urlSerializer,v)}return S}isActive(v,S){let N;if(N=!0===S?{...Kr}:!1===S?{...gs}:S,Bt(v))return Yr(this.currentUrlTree,v,N);const z=this.parseUrl(v);return Yr(this.currentUrlTree,z,N)}removeEmptyProps(v){return Object.keys(v).reduce((S,N)=>{const z=v[N];return null!=z&&(S[N]=z),S},{})}scheduleNavigation(v,S,N,z,ne){if(this.disposed)return Promise.resolve(!1);let Ve,xe,Rt;ne?(Ve=ne.resolve,xe=ne.reject,Rt=ne.promise):Rt=new Promise((gr,Pn)=>{Ve=gr,xe=Pn});const wn=this.pendingTasks.add();return Ms(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(wn))}),this.navigationTransitions.handleNavigationRequest({source:S,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:z,resolve:Ve,reject:xe,promise:Rt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Rt.catch(gr=>Promise.reject(gr))}setBrowserUrl(v,S){const N=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(N)||S.extras.replaceUrl){const ne={...S.extras.state,...this.generateNgRouterState(S.id,this.browserPageId)};this.location.replaceState(N,"",ne)}else{const z={...S.extras.state,...this.generateNgRouterState(S.id,this.browserPageId+1)};this.location.go(N,"",z)}}restoreHistory(v,S=!1){if("computed"===this.canceledNavigationResolution){const z=this.currentPageId-this.browserPageId;0!==z?this.location.historyGo(z):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===z&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,S){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:S}:{navigationId:v}}static#e=this.\u0275fac=function(S){return new(S||w)};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function qu(w){return!(w instanceof Ni||w instanceof aa)}let Zs=(()=>{class w{constructor(v,S,N,z,ne,Ve){this.router=v,this.route=S,this.tabIndexAttribute=N,this.renderer=z,this.el=ne,this.locationStrategy=Ve,this.href=null,this.commands=null,this.onChanges=new ge.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const xe=ne.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===xe||"area"===xe,this.isAnchorElement?this.subscription=v.events.subscribe(Rt=>{Rt instanceof _i&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",v)}ngOnChanges(v){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(v,S,N,z,ne){return!!(null===this.urlTree||this.isAnchorElement&&(0!==v||S||N||z||ne||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const v=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",v)}applyAttributeValue(v,S){const N=this.renderer,z=this.el.nativeElement;null!==S?N.setAttribute(z,v,S):N.removeAttribute(z,v)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(S){return new(S||w)(E.Y36(Si),E.Y36(Qi),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(ze.S$))};static#t=this.\u0275dir=E.lG2({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(S,N){1&S&&E.NdJ("click",function(ne){return N.onClick(ne.button,ne.ctrlKey,ne.shiftKey,ne.altKey,ne.metaKey)}),2&S&&E.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",E.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",E.VuI],replaceUrl:["replaceUrl","replaceUrl",E.VuI],routerLink:"routerLink"},standalone:!0,features:[E.Xq5,E.TTD]})}return w})(),ti=(()=>{class w{get isActive(){return this._isActive}constructor(v,S,N,z,ne){this.router=v,this.element=S,this.renderer=N,this.cdr=z,this.link=ne,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new E.vpe,this.routerEventsSubscription=v.events.subscribe(Ve=>{Ve instanceof _i&&this.update()})}ngAfterContentInit(){(0,ae.of)(this.links.changes,(0,ae.of)(null)).pipe((0,ce.J)()).subscribe(v=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const v=[...this.links.toArray(),this.link].filter(S=>!!S).map(S=>S.onChanges);this.linkInputChangesSubscription=(0,he.D)(v).pipe((0,ce.J)()).subscribe(S=>{this._isActive!==this.isLinkActive(this.router)(S)&&this.update()})}set routerLinkActive(v){const S=Array.isArray(v)?v:v.split(" ");this.classes=S.filter(N=>!!N)}ngOnChanges(v){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const v=this.hasActiveLinks();this._isActive!==v&&(this._isActive=v,this.cdr.markForCheck(),this.classes.forEach(S=>{v?this.renderer.addClass(this.element.nativeElement,S):this.renderer.removeClass(this.element.nativeElement,S)}),v&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(v))})}isLinkActive(v){const S=function Vd(w){return!!w.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return N=>!!N.urlTree&&v.isActive(N.urlTree,S)}hasActiveLinks(){const v=this.isLinkActive(this.router);return this.link&&v(this.link)||this.links.some(v)}static#e=this.\u0275fac=function(S){return new(S||w)(E.Y36(Si),E.Y36(E.SBq),E.Y36(E.Qsj),E.Y36(E.sBO),E.Y36(Zs,8))};static#t=this.\u0275dir=E.lG2({type:w,selectors:[["","routerLinkActive",""]],contentQueries:function(S,N,z){if(1&S&&E.Suo(z,Zs,5),2&S){let ne;E.iGM(ne=E.CRH())&&(N.links=ne)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[E.TTD]})}return w})();class Ku{}let Ud=(()=>{class w{constructor(v,S,N,z,ne){this.router=v,this.injector=N,this.preloadingStrategy=z,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pt.h)(v=>v instanceof _i),Zn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,S){const N=[];for(const z of S){z.providers&&!z._injector&&(z._injector=(0,E.MMx)(z.providers,v,`Route: ${z.path}`));const ne=z._injector??v,Ve=z._loadedInjector??ne;(z.loadChildren&&!z._loadedRoutes&&void 0===z.canLoad||z.loadComponent&&!z._loadedComponent)&&N.push(this.preloadConfig(ne,z)),(z.children||z._loadedRoutes)&&N.push(this.processRoutes(Ve,z.children??z._loadedRoutes))}return(0,he.D)(N).pipe((0,ce.J)())}preloadConfig(v,S){return this.preloadingStrategy.preload(S,()=>{let N;N=S.loadChildren&&void 0===S.canLoad?this.loader.loadChildren(v,S):(0,ae.of)(null);const z=N.pipe((0,Oe.z)(ne=>null===ne?(0,ae.of)(void 0):(S._loadedRoutes=ne.routes,S._loadedInjector=ne.injector,this.processRoutes(ne.injector??v,ne.routes))));if(S.loadComponent&&!S._loadedComponent){const ne=this.loader.loadComponent(S);return(0,he.D)([z,ne]).pipe((0,ce.J)())}return z})}static#e=this.\u0275fac=function(S){return new(S||w)(E.LFG(Si),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Ku),E.LFG(P))};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Eo=new E.OlP("");let Bl=(()=>{class w{constructor(v,S,N,z,ne={}){this.urlSerializer=v,this.transitions=S,this.viewportScroller=N,this.zone=z,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof co?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof _i?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof zr&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof fo&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,S){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new fo(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(S){E.$Z()};static#t=this.\u0275prov=E.Yz7({token:w,factory:w.\u0275fac})}return w})();function hi(w,C){return{\u0275kind:w,\u0275providers:C}}function Jt(){const w=(0,E.f3M)(E.zs3);return C=>{const v=w.get(E.z2F);if(C!==v.components[0])return;const S=w.get(Si),N=w.get(Ta);1===w.get(Wc)&&S.initialNavigation(),w.get(Zo,null,E.XFs.Optional)?.setUpPreloading(),w.get(Eo,null,E.XFs.Optional)?.init(),S.resetRootComponentType(v.componentTypes[0]),N.closed||(N.next(),N.complete(),N.unsubscribe())}}const Ta=new E.OlP("",{factory:()=>new ge.x}),Wc=new E.OlP("",{providedIn:"root",factory:()=>1}),Zo=new E.OlP("");function ts(w){return hi(0,[{provide:Zo,useExisting:Ud},{provide:Ku,useExisting:w}])}const ut=new E.OlP("ROUTER_FORROOT_GUARD"),_n=[ze.Ye,{provide:xn,useClass:Zt},Si,$o,{provide:Qi,useFactory:function wa(w){return w.routerState.root},deps:[Si]},P,[]];function Zu(){return new E.PXZ("Router",Si)}let Qu=(()=>{class w{constructor(v){}static forRoot(v,S){return{ngModule:w,providers:[_n,[],{provide:U,multi:!0,useValue:v},{provide:ut,useFactory:vn,deps:[[Si,new E.FiY,new E.tp0]]},{provide:zn,useValue:S||{}},S?.useHash?{provide:ze.S$,useClass:ze.Do}:{provide:ze.S$,useClass:ze.b0},{provide:Eo,useFactory:()=>{const w=(0,E.f3M)(ze.EM),C=(0,E.f3M)(E.R0b),v=(0,E.f3M)(zn),S=(0,E.f3M)(nt),N=(0,E.f3M)(xn);return v.scrollOffset&&w.setOffset(v.scrollOffset),new Bl(N,S,w,C,v)}},S?.preloadingStrategy?ts(S.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:Zu},S?.initialNavigation?Da(S):[],S?.bindToComponentInputs?hi(8,[ji,{provide:Fr,useExisting:ji}]).\u0275providers:[],[{provide:su,useFactory:Jt},{provide:E.tb,multi:!0,useExisting:su}]]}}static forChild(v){return{ngModule:w,providers:[{provide:U,multi:!0,useValue:v}]}}static#e=this.\u0275fac=function(S){return new(S||w)(E.LFG(ut,8))};static#t=this.\u0275mod=E.oAB({type:w});static#n=this.\u0275inj=E.cJS({})}return w})();function vn(w){return"guarded"}function Da(w){return["disabled"===w.initialNavigation?hi(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const C=(0,E.f3M)(Si);return()=>{C.setUpLocationChangeListener()}}},{provide:Wc,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?hi(2,[{provide:Wc,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:C=>{const v=C.get(ze.V_,Promise.resolve());return()=>v.then(()=>new Promise(S=>{const N=C.get(Si),z=C.get(Ta);Ms(N,()=>{S(!0)}),C.get(nt).afterPreactivation=()=>(S(!0),z.closed?(0,ae.of)(void 0):z),N.initialNavigation()}))}}]).\u0275providers:[]]}const su=new E.OlP("")},3106:(St,Pe,F)=>{F.d(Pe,{Z:()=>Xe});var E=F(9058),Y=F(4537),Q=F(534),Z=F(7879);class he{constructor(Ge,st){this._delegate=Ge,this.firebase=st,(0,Q._addComponent)(Ge,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Q.deleteApp)(this._delegate)))}_getService(Ge,st=Q._DEFAULT_ENTRY_NAME){var It;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(Ge);return!_t.isInitialized()&&"EXPLICIT"===(null===(It=_t.getComponent())||void 0===It?void 0:It.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:st})}_removeServiceInstance(Ge,st=Q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(st)}_addComponent(Ge){(0,Q._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,Q._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),X=function De(){const Ke=function Ne(Ke){const Ge={},st={__esModule:!0,initializeApp:function ge(Ze,dt={}){const Pt=Q.initializeApp(Ze,dt);if((0,E.r3)(Ge,Pt.name))return Ge[Pt.name];const Oe=new Ke(Pt,st);return Ge[Pt.name]=Oe,Oe},app:_t,registerVersion:Q.registerVersion,setLogLevel:Q.setLogLevel,onLog:Q.onLog,apps:null,SDK_VERSION:Q.SDK_VERSION,INTERNAL:{registerComponent:function pe(Ze){const dt=Ze.name,Pt=dt.replace("-compat","");if(Q._registerComponent(Ze)&&"PUBLIC"===Ze.type){const Oe=(Xt=_t())=>{if("function"!=typeof Xt[Pt])throw me.create("invalid-app-argument",{appName:dt});return Xt[Pt]()};void 0!==Ze.serviceProps&&(0,E.ZB)(Oe,Ze.serviceProps),st[Pt]=Oe,Ke.prototype[Pt]=function(...Xt){return this._getService.bind(this,dt).apply(this,Ze.multipleInstances?Xt:[])}}return"PUBLIC"===Ze.type?st[Pt]:null},removeApp:function It(Ze){delete Ge[Ze]},useAsService:function et(Ze,dt){return"serverAuth"===dt?null:dt},modularAPIs:Q}};function _t(Ze){if(!(0,E.r3)(Ge,Ze=Ze||Q._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:Ze});return Ge[Ze]}return st.default=st,Object.defineProperty(st,"apps",{get:function ze(){return Object.keys(Ge).map(Ze=>Ge[Ze])}}),_t.App=Ke,st}(he);return Ke.INTERNAL=Object.assign(Object.assign({},Ke.INTERNAL),{createFirebaseNamespace:De,extendNamespace:function Ge(st){(0,E.ZB)(Ke,st)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),Ke}(),re=new Z.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=X;!function Be(Ke){(0,Q.registerVersion)("@firebase/app-compat","0.2.36",Ke)}()},534:(St,Pe,F)=>{F.r(Pe),F.d(Pe,{FirebaseError:()=>Z.ZR,SDK_VERSION:()=>tt,_DEFAULT_ENTRY_NAME:()=>nn,_addComponent:()=>cn,_addOrOverwriteComponent:()=>Cr,_apps:()=>kn,_clearComponents:()=>pt,_components:()=>Wt,_getProvider:()=>be,_isFirebaseApp:()=>Zt,_isFirebaseServerApp:()=>as,_registerComponent:()=>$r,_removeServiceInstance:()=>xn,_serverApps:()=>An,deleteApp:()=>Bi,getApp:()=>xi,getApps:()=>Cs,initializeApp:()=>Un,initializeServerApp:()=>us,onLog:()=>j,registerVersion:()=>G,setLogLevel:()=>V});var E=F(5861),Y=F(4537),Q=F(7879),Z=F(9058);const he=(Le,Ee)=>Ee.some(Je=>Le instanceof Je);let ae,me;const X=new WeakMap,re=new WeakMap,ue=new WeakMap,Ue=new WeakMap,Be=new WeakMap;let Ge={get(Le,Ee,Je){if(Le instanceof IDBTransaction){if("done"===Ee)return re.get(Le);if("objectStoreNames"===Ee)return Le.objectStoreNames||ue.get(Le);if("store"===Ee)return Je.objectStoreNames[1]?void 0:Je.objectStore(Je.objectStoreNames[0])}return ge(Le[Ee])},set:(Le,Ee,Je)=>(Le[Ee]=Je,!0),has:(Le,Ee)=>Le instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in Le};function _t(Le){return"function"==typeof Le?function It(Le){return Le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function De(){return me||(me=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Le)?function(...Ee){return Le.apply(ze(this),Ee),ge(X.get(this))}:function(...Ee){return ge(Le.apply(ze(this),Ee))}:function(Ee,...Je){const At=Le.call(ze(this),Ee,...Je);return ue.set(At,Ee.sort?Ee.sort():[Ee]),ge(At)}}(Le):(Le instanceof IDBTransaction&&function Ke(Le){if(re.has(Le))return;const Ee=new Promise((Je,At)=>{const Ot=()=>{Le.removeEventListener("complete",$t),Le.removeEventListener("error",pn),Le.removeEventListener("abort",pn)},$t=()=>{Je(),Ot()},pn=()=>{At(Le.error||new DOMException("AbortError","AbortError")),Ot()};Le.addEventListener("complete",$t),Le.addEventListener("error",pn),Le.addEventListener("abort",pn)});re.set(Le,Ee)}(Le),he(Le,function Ne(){return ae||(ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Le,Ge):Le)}function ge(Le){if(Le instanceof IDBRequest)return function Xe(Le){const Ee=new Promise((Je,At)=>{const Ot=()=>{Le.removeEventListener("success",$t),Le.removeEventListener("error",pn)},$t=()=>{Je(ge(Le.result)),Ot()},pn=()=>{At(Le.error),Ot()};Le.addEventListener("success",$t),Le.addEventListener("error",pn)});return Ee.then(Je=>{Je instanceof IDBCursor&&X.set(Je,Le)}).catch(()=>{}),Be.set(Ee,Le),Ee}(Le);if(Ue.has(Le))return Ue.get(Le);const Ee=_t(Le);return Ee!==Le&&(Ue.set(Le,Ee),Be.set(Ee,Le)),Ee}const ze=Le=>Be.get(Le),Ze=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],Pt=new Map;function Oe(Le,Ee){if(!(Le instanceof IDBDatabase)||Ee in Le||"string"!=typeof Ee)return;if(Pt.get(Ee))return Pt.get(Ee);const Je=Ee.replace(/FromIndex$/,""),At=Ee!==Je,Ot=dt.includes(Je);if(!(Je in(At?IDBIndex:IDBObjectStore).prototype)||!Ot&&!Ze.includes(Je))return;const $t=function(){var pn=(0,E.Z)(function*(qn,...Nn){const Lr=this.transaction(qn,Ot?"readwrite":"readonly");let we=Lr.store;return At&&(we=we.index(Nn.shift())),(yield Promise.all([we[Je](...Nn),Ot&&Lr.done]))[0]});return function(Nn){return pn.apply(this,arguments)}}();return Pt.set(Ee,$t),$t}!function st(Le){Ge=Le(Ge)}(Le=>({...Le,get:(Ee,Je,At)=>Oe(Ee,Je)||Le.get(Ee,Je,At),has:(Ee,Je)=>!!Oe(Ee,Je)||Le.has(Ee,Je)}));class Xt{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function Zn(Le){const Ee=Le.getComponent();return"VERSION"===Ee?.type}(Je)){const At=Je.getImmediate();return`${At.library}/${At.version}`}return null}).filter(Je=>Je).join(" ")}}const On="@firebase/app",_r="0.10.6",rr=new Q.Yd("@firebase/app"),nn="[DEFAULT]",fn={[On]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},kn=new Map,An=new Map,Wt=new Map;function cn(Le,Ee){try{Le.container.addComponent(Ee)}catch(Je){rr.debug(`Component ${Ee.name} failed to register with FirebaseApp ${Le.name}`,Je)}}function Cr(Le,Ee){Le.container.addOrOverwriteComponent(Ee)}function $r(Le){const Ee=Le.name;if(Wt.has(Ee))return rr.debug(`There were multiple attempts to register component ${Ee}.`),!1;Wt.set(Ee,Le);for(const Je of kn.values())cn(Je,Le);for(const Je of An.values())cn(Je,Le);return!0}function be(Le,Ee){const Je=Le.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Le.container.getProvider(Ee)}function xn(Le,Ee,Je=nn){be(Le,Ee).clearInstance(Je)}function Zt(Le){return void 0!==Le.options}function as(Le){return void 0!==Le.settings}function pt(){Wt.clear()}const yr=new Z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class gt{constructor(Ee,Je,At){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}class Me extends gt{constructor(Ee,Je,At,Ot){const $t=void 0!==Je.automaticDataCollectionEnabled&&Je.automaticDataCollectionEnabled,pn={name:At,automaticDataCollectionEnabled:$t};super(void 0!==Ee.apiKey?Ee:Ee.options,pn,Ot),this._serverConfig=Object.assign({automaticDataCollectionEnabled:$t},Je),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Je.releaseOnDeref=void 0,G(On,_r,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ee){this.isDeleted||(this._refCount++,void 0!==Ee&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ee,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Bi(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw yr.create("server-app-deleted")}}const tt="10.12.3";function Un(Le,Ee={}){let Je=Le;"object"!=typeof Ee&&(Ee={name:Ee});const At=Object.assign({name:nn,automaticDataCollectionEnabled:!1},Ee),Ot=At.name;if("string"!=typeof Ot||!Ot)throw yr.create("bad-app-name",{appName:String(Ot)});if(Je||(Je=(0,Z.aH)()),!Je)throw yr.create("no-options");const $t=kn.get(Ot);if($t){if((0,Z.vZ)(Je,$t.options)&&(0,Z.vZ)(At,$t.config))return $t;throw yr.create("duplicate-app",{appName:Ot})}const pn=new Y.H0(Ot);for(const Nn of Wt.values())pn.addComponent(Nn);const qn=new gt(Je,At,pn);return kn.set(Ot,qn),qn}function us(Le,Ee){if((0,Z.jU)()&&!(0,Z.n2)())throw yr.create("invalid-server-app-environment");let Je;void 0===Ee.automaticDataCollectionEnabled&&(Ee.automaticDataCollectionEnabled=!1),Je=Zt(Le)?Le.options:Le;const At=Object.assign(Object.assign({},Ee),Je);if(void 0!==At.releaseOnDeref&&delete At.releaseOnDeref,void 0!==Ee.releaseOnDeref&&typeof FinalizationRegistry>"u")throw yr.create("finalization-registry-not-supported",{});const $t=""+(Lr=JSON.stringify(At),[...Lr].reduce((we,Hr)=>Math.imul(31,we)+Hr.charCodeAt(0)|0,0)),pn=An.get($t);var Lr;if(pn)return pn.incRefCount(Ee.releaseOnDeref),pn;const qn=new Y.H0($t);for(const Lr of Wt.values())qn.addComponent(Lr);const Nn=new Me(Je,Ee,$t,qn);return An.set($t,Nn),Nn}function xi(Le=nn){const Ee=kn.get(Le);if(!Ee&&Le===nn&&(0,Z.aH)())return Un();if(!Ee)throw yr.create("no-app",{appName:Le});return Ee}function Cs(){return Array.from(kn.values())}function Bi(Le){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,E.Z)(function*(Le){let Ee=!1;const Je=Le.name;kn.has(Je)?(Ee=!0,kn.delete(Je)):An.has(Je)&&Le.decRefCount()<=0&&(An.delete(Je),Ee=!0),Ee&&(yield Promise.all(Le.container.getProviders().map(At=>At.delete())),Le.isDeleted=!0)})).apply(this,arguments)}function G(Le,Ee,Je){var At;let Ot=null!==(At=fn[Le])&&void 0!==At?At:Le;Je&&(Ot+=`-${Je}`);const $t=Ot.match(/\s|\//),pn=Ee.match(/\s|\//);if($t||pn){const qn=[`Unable to register library "${Ot}" with version "${Ee}":`];return $t&&qn.push(`library name "${Ot}" contains illegal characters (whitespace or "/")`),$t&&pn&&qn.push("and"),pn&&qn.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void rr.warn(qn.join(" "))}$r(new Y.wA(`${Ot}-version`,()=>({library:Ot,version:Ee}),"VERSION"))}function j(Le,Ee){if(null!==Le&&"function"!=typeof Le)throw yr.create("invalid-log-argument");(0,Q.Am)(Le,Ee)}function V(Le){(0,Q.Ub)(Le)}const q="firebase-heartbeat-database",ee=1,je="firebase-heartbeat-store";let We=null;function Et(){return We||(We=function pe(Le,Ee,{blocked:Je,upgrade:At,blocking:Ot,terminated:$t}={}){const pn=indexedDB.open(Le,Ee),qn=ge(pn);return At&&pn.addEventListener("upgradeneeded",Nn=>{At(ge(pn.result),Nn.oldVersion,Nn.newVersion,ge(pn.transaction),Nn)}),Je&&pn.addEventListener("blocked",Nn=>Je(Nn.oldVersion,Nn.newVersion,Nn)),qn.then(Nn=>{$t&&Nn.addEventListener("close",()=>$t()),Ot&&Nn.addEventListener("versionchange",Lr=>Ot(Lr.oldVersion,Lr.newVersion,Lr))}).catch(()=>{}),qn}(q,ee,{upgrade:(Le,Ee)=>{if(0===Ee)try{Le.createObjectStore(je)}catch(Je){console.warn(Je)}}}).catch(Le=>{throw yr.create("idb-open",{originalErrorMessage:Le.message})})),We}function ft(){return(ft=(0,E.Z)(function*(Le){try{const Je=(yield Et()).transaction(je),At=yield Je.objectStore(je).get(Ht(Le));return yield Je.done,At}catch(Ee){if(Ee instanceof Z.ZR)rr.warn(Ee.message);else{const Je=yr.create("idb-get",{originalErrorMessage:Ee?.message});rr.warn(Je.message)}}})).apply(this,arguments)}function mt(Le,Ee){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,E.Z)(function*(Le,Ee){try{const At=(yield Et()).transaction(je,"readwrite");yield At.objectStore(je).put(Ee,Ht(Le)),yield At.done}catch(Je){if(Je instanceof Z.ZR)rr.warn(Je.message);else{const At=yr.create("idb-set",{originalErrorMessage:Je?.message});rr.warn(At.message)}}})).apply(this,arguments)}function Ht(Le){return`${Le.name}!${Le.options.appId}`}class vt{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new kr(Je),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var Ee=this;return(0,E.Z)(function*(){var Je,At;const $t=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pn=ir();if((null!=(null===(Je=Ee._heartbeatsCache)||void 0===Je?void 0:Je.heartbeats)||(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise,null!=(null===(At=Ee._heartbeatsCache)||void 0===At?void 0:At.heartbeats)))&&Ee._heartbeatsCache.lastSentHeartbeatDate!==pn&&!Ee._heartbeatsCache.heartbeats.some(qn=>qn.date===pn))return Ee._heartbeatsCache.heartbeats.push({date:pn,agent:$t}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(qn=>{const Nn=new Date(qn.date).valueOf();return Date.now()-Nn<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,E.Z)(function*(){var Je;if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null==(null===(Je=Ee._heartbeatsCache)||void 0===Je?void 0:Je.heartbeats)||0===Ee._heartbeatsCache.heartbeats.length)return"";const At=ir(),{heartbeatsToSend:Ot,unsentEntries:$t}=function ai(Le,Ee=1024){const Je=[];let At=Le.slice();for(const Ot of Le){const $t=Je.find(pn=>pn.agent===Ot.agent);if($t){if($t.dates.push(Ot.date),Jr(Je)>Ee){$t.dates.pop();break}}else if(Je.push({agent:Ot.agent,dates:[Ot.date]}),Jr(Je)>Ee){Je.pop();break}At=At.slice(1)}return{heartbeatsToSend:Je,unsentEntries:At}}(Ee._heartbeatsCache.heartbeats),pn=(0,Z.L)(JSON.stringify({version:2,heartbeats:Ot}));return Ee._heartbeatsCache.lastSentHeartbeatDate=At,$t.length>0?(Ee._heartbeatsCache.heartbeats=$t,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),pn})()}}function ir(){return(new Date).toISOString().substring(0,10)}class kr{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Z.hl)()&&(0,Z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,E.Z)(function*(){if(yield Ee._canUseIndexedDBPromise){const At=yield function ln(Le){return ft.apply(this,arguments)}(Ee.app);return At?.heartbeats?At:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ee){var Je=this;return(0,E.Z)(function*(){var At;if(yield Je._canUseIndexedDBPromise){const $t=yield Je.read();return mt(Je.app,{lastSentHeartbeatDate:null!==(At=Ee.lastSentHeartbeatDate)&&void 0!==At?At:$t.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var Je=this;return(0,E.Z)(function*(){var At;if(yield Je._canUseIndexedDBPromise){const $t=yield Je.read();return mt(Je.app,{lastSentHeartbeatDate:null!==(At=Ee.lastSentHeartbeatDate)&&void 0!==At?At:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...Ee.heartbeats]})}})()}}function Jr(Le){return(0,Z.L)(JSON.stringify({version:2,heartbeats:Le})).length}!function rn(Le){$r(new Y.wA("platform-logger",Ee=>new Xt(Ee),"PRIVATE")),$r(new Y.wA("heartbeat",Ee=>new vt(Ee),"PRIVATE")),G(On,_r,Le),G(On,_r,"esm2017"),G("fire-js","")}("")},4537:(St,Pe,F)=>{F.d(Pe,{H0:()=>Ne,wA:()=>Q});var E=F(5861),Y=F(9058);class Q{constructor(X,re,ue){this.name=X,this.instanceFactory=re,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(X){return this.instantiationMode=X,this}setMultipleInstances(X){return this.multipleInstances=X,this}setServiceProps(X){return this.serviceProps=X,this}setInstanceCreatedCallback(X){return this.onInstanceCreated=X,this}}const Z="[DEFAULT]";class he{constructor(X,re){this.name=X,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(X){const re=this.normalizeInstanceIdentifier(X);if(!this.instancesDeferred.has(re)){const ue=new Y.BH;if(this.instancesDeferred.set(re,ue),this.isInitialized(re)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:re});Ue&&ue.resolve(Ue)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(X){var re;const ue=this.normalizeInstanceIdentifier(X?.identifier),Ue=null!==(re=X?.optional)&&void 0!==re&&re;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Be){if(Ue)return null;throw Be}}getComponent(){return this.component}setComponent(X){if(X.name!==this.name)throw Error(`Mismatching Component ${X.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=X,this.shouldAutoInitialize()){if(function me(De){return"EAGER"===De.instantiationMode}(X))try{this.getOrInitializeService({instanceIdentifier:Z})}catch{}for(const[re,ue]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(re);try{const Be=this.getOrInitializeService({instanceIdentifier:Ue});ue.resolve(Be)}catch{}}}}clearInstance(X=Z){this.instancesDeferred.delete(X),this.instancesOptions.delete(X),this.instances.delete(X)}delete(){var X=this;return(0,E.Z)(function*(){const re=Array.from(X.instances.values());yield Promise.all([...re.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...re.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(X=Z){return this.instances.has(X)}getOptions(X=Z){return this.instancesOptions.get(X)||{}}initialize(X={}){const{options:re={}}=X,ue=this.normalizeInstanceIdentifier(X.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:ue,options:re});for(const[Be,Xe]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Be)&&Xe.resolve(Ue);return Ue}onInit(X,re){var ue;const Ue=this.normalizeInstanceIdentifier(re),Be=null!==(ue=this.onInitCallbacks.get(Ue))&&void 0!==ue?ue:new Set;Be.add(X),this.onInitCallbacks.set(Ue,Be);const Xe=this.instances.get(Ue);return Xe&&X(Xe,Ue),()=>{Be.delete(X)}}invokeOnInitCallbacks(X,re){const ue=this.onInitCallbacks.get(re);if(ue)for(const Ue of ue)try{Ue(X,re)}catch{}}getOrInitializeService({instanceIdentifier:X,options:re={}}){let ue=this.instances.get(X);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(De=X,De===Z?void 0:De),options:re}),this.instances.set(X,ue),this.instancesOptions.set(X,re),this.invokeOnInitCallbacks(ue,X),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,X,ue)}catch{}var De;return ue||null}normalizeInstanceIdentifier(X=Z){return this.component?this.component.multipleInstances?X:Z:X}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ne{constructor(X){this.name=X,this.providers=new Map}addComponent(X){const re=this.getProvider(X.name);if(re.isComponentSet())throw new Error(`Component ${X.name} has already been registered with ${this.name}`);re.setComponent(X)}addOrOverwriteComponent(X){this.getProvider(X.name).isComponentSet()&&this.providers.delete(X.name),this.addComponent(X)}getProvider(X){if(this.providers.has(X))return this.providers.get(X);const re=new he(X,this);return this.providers.set(X,re),re}getProviders(){return Array.from(this.providers.values())}}},7879:(St,Pe,F)=>{F.d(Pe,{Am:()=>De,Ub:()=>Ne,Yd:()=>me,in:()=>Y});const E=[];var Y=function(X){return X[X.DEBUG=0]="DEBUG",X[X.VERBOSE=1]="VERBOSE",X[X.INFO=2]="INFO",X[X.WARN=3]="WARN",X[X.ERROR=4]="ERROR",X[X.SILENT=5]="SILENT",X}(Y||{});const Q={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Z=Y.INFO,he={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ae=(X,re,...ue)=>{if(re<X.logLevel)return;const Ue=(new Date).toISOString(),Be=he[re];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[Be](`[${Ue}]  ${X.name}:`,...ue)};class me{constructor(re){this.name=re,this._logLevel=Z,this._logHandler=ae,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in Y))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?Q[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...re),this._logHandler(this,Y.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...re),this._logHandler(this,Y.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...re),this._logHandler(this,Y.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...re),this._logHandler(this,Y.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...re),this._logHandler(this,Y.ERROR,...re)}}function Ne(X){E.forEach(re=>{re.setLogLevel(X)})}function De(X,re){for(const ue of E){let Ue=null;re&&re.level&&(Ue=Q[re.level]),ue.userLogHandler=null===X?null:(Be,Xe,...Ke)=>{const Ge=Ke.map(st=>{if(null==st)return null;if("string"==typeof st)return st;if("number"==typeof st||"boolean"==typeof st)return st.toString();if(st instanceof Error)return st.message;try{return JSON.stringify(st)}catch{return null}}).filter(st=>st).join(" ");Xe>=(Ue??Be.logLevel)&&X({level:Y[Xe].toLowerCase(),message:Ge,args:Ke,type:Be.name})}}}},7142:(St,Pe,F)=>{F.d(Pe,{Z:()=>E.Z});var E=F(3106);E.Z.registerVersion("firebase","10.12.3","app-compat")},4325:(St,Pe,F)=>{F.r(Pe);var E=F(5861),Y=F(3106),Q=F(534),Z=F(9058),he=F(7879),ae=F(7582),me=F(4537);const De={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Xe=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ke=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new Z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),It=new he.Yd("@firebase/auth");function ge(m,...l){It.logLevel<=he.in.ERROR&&It.error(`Auth (${Q.SDK_VERSION}): ${m}`,...l)}function ze(m,...l){throw Pt(m,...l)}function pe(m,...l){return Pt(m,...l)}function et(m,l,d){const y=Object.assign(Object.assign({},Ke()),{[l]:d});return new Z.LL("auth","Firebase",y).create(l,{appName:m.name})}function Ze(m){return et(m,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dt(m,l,d){if(!(l instanceof d))throw d.name!==l.constructor.name&&ze(m,"argument-error"),et(m,"argument-error",`Type of ${l.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pt(m,...l){if("string"!=typeof m){const d=l[0],y=[...l.slice(1)];return y[0]&&(y[0].appName=m.name),m._errorFactory.create(d,...y)}return Ge.create(m,...l)}function Oe(m,l,...d){if(!m)throw Pt(l,...d)}function Xt(m){const l="INTERNAL ASSERTION FAILED: "+m;throw ge(l),new Error(l)}function Zn(m,l){m||Xt(l)}function On(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function _r(){return"http:"===rr()||"https:"===rr()}function rr(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class _e{constructor(l,d){this.shortDelay=l,this.longDelay=d,Zn(d>l,"Short delay should be less than long delay!"),this.isMobile=(0,Z.uI)()||(0,Z.b$)()}get(){return function Yt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_r()||(0,Z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(m,l){Zn(m.emulator,"Emulator should always be set here");const{url:d}=m.emulator;return l?`${d}${l.startsWith("/")?l.slice(1):l}`:d}class $e{static initialize(l,d,y){this.fetchImpl=l,d&&(this.headersImpl=d),y&&(this.responseImpl=y)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ot=new _e(3e4,6e4);function Qe(m,l){return m.tenantId&&!l.tenantId?Object.assign(Object.assign({},l),{tenantId:m.tenantId}):l}function ce(m,l,d,y){return yt.apply(this,arguments)}function yt(){return(yt=(0,E.Z)(function*(m,l,d,y,M={}){return Lt(m,M,(0,E.Z)(function*(){let B={},ie={};y&&("GET"===l?ie=y:B={body:JSON.stringify(y)});const ve=(0,Z.xO)(Object.assign({key:m.config.apiKey},ie)).slice(1),Ye=yield m._getAdditionalHeaders();return Ye["Content-Type"]="application/json",m.languageCode&&(Ye["X-Firebase-Locale"]=m.languageCode),$e.fetch()(mi(m,m.config.apiHost,d,ve),Object.assign({method:l,headers:Ye,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function Lt(m,l,d){return kt.apply(this,arguments)}function kt(){return(kt=(0,E.Z)(function*(m,l,d){m._canInitEmulator=!1;const y=Object.assign(Object.assign({},He),l);try{const M=new Fn(m),B=yield Promise.race([d(),M.promise]);M.clearNetworkTimeout();const ie=yield B.json();if("needConfirmation"in ie)throw bn(m,"account-exists-with-different-credential",ie);if(B.ok&&!("errorMessage"in ie))return ie;{const ve=B.ok?ie.errorMessage:ie.error.message,[Ye,Tt]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw bn(m,"credential-already-in-use",ie);if("EMAIL_EXISTS"===Ye)throw bn(m,"email-already-in-use",ie);if("USER_DISABLED"===Ye)throw bn(m,"user-disabled",ie);const Ft=y[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(Tt)throw et(m,Ft,Tt);ze(m,Ft)}}catch(M){if(M instanceof Z.ZR)throw M;ze(m,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function Nt(m,l,d,y){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,E.Z)(function*(m,l,d,y,M={}){const B=yield ce(m,l,d,y,M);return"mfaPendingCredential"in B&&ze(m,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function mi(m,l,d,y){const M=`${l}${d}?${y}`;return m.config.emulator?Ae(m.config,M):`${m.config.apiScheme}://${M}`}function gn(m){switch(m){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fn{constructor(l){this.auth=l,this.timer=null,this.promise=new Promise((d,y)=>{this.timer=setTimeout(()=>y(pe(this.auth,"network-request-failed")),ot.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bn(m,l,d){const y={appName:m.name};d.email&&(y.email=d.email),d.phoneNumber&&(y.phoneNumber=d.phoneNumber);const M=pe(m,l,y);return M.customData._tokenResponse=d,M}function Wn(m){return void 0!==m&&void 0!==m.getResponse}function hr(m){return void 0!==m&&void 0!==m.enterprise}class Ui{constructor(l){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===l.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=l.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=l.recaptchaEnforcementState}getProviderEnforcementState(l){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===l)return gn(d.enforcementState);return null}isProviderEnabled(l){return"ENFORCE"===this.getProviderEnforcementState(l)||"AUDIT"===this.getProviderEnforcementState(l)}}function Yr(){return(Yr=(0,E.Z)(function*(m){return(yield ce(m,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nr(m,l){return Or.apply(this,arguments)}function Or(){return(Or=(0,E.Z)(function*(m,l){return ce(m,"GET","/v2/recaptchaConfig",Qe(m,l))})).apply(this,arguments)}function nn(){return(nn=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:delete",l)})).apply(this,arguments)}function kn(){return(kn=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function An(m,l){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:lookup",l)})).apply(this,arguments)}function cn(m){if(m)try{const l=new Date(Number(m));if(!isNaN(l.getTime()))return l.toUTCString()}catch{}}function be(){return(be=(0,E.Z)(function*(m,l=!1){const d=(0,Z.m9)(m),y=yield d.getIdToken(l),M=Zt(y);Oe(M&&M.exp&&M.auth_time&&M.iat,d.auth,"internal-error");const B="object"==typeof M.firebase?M.firebase:void 0,ie=B?.sign_in_provider;return{claims:M,token:y,authTime:cn(xn(M.auth_time)),issuedAtTime:cn(xn(M.iat)),expirationTime:cn(xn(M.exp)),signInProvider:ie||null,signInSecondFactor:B?.sign_in_second_factor||null}})).apply(this,arguments)}function xn(m){return 1e3*Number(m)}function Zt(m){const[l,d,y]=m.split(".");if(void 0===l||void 0===d||void 0===y)return ge("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,Z.tV)(d);return M?JSON.parse(M):(ge("Failed to decode base64 JWT payload"),null)}catch(M){return ge("Caught error parsing JWT payload as JSON",M?.toString()),null}}function as(m){const l=Zt(m);return Oe(l,"internal-error"),Oe(typeof l.exp<"u","internal-error"),Oe(typeof l.iat<"u","internal-error"),Number(l.exp)-Number(l.iat)}function pt(m,l){return bt.apply(this,arguments)}function bt(){return(bt=(0,E.Z)(function*(m,l,d=!1){if(d)return l;try{return yield l}catch(y){throw y instanceof Z.ZR&&function yr({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(y)&&m.auth.currentUser===m&&(yield m.auth.signOut()),y}})).apply(this,arguments)}class gt{constructor(l){this.user=l,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(l){var d;if(l){const y=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),y}{this.errorBackoff=3e4;const M=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(l=!1){var d=this;if(!this.isRunning)return;const y=this.getInterval(l);this.timerId=setTimeout((0,E.Z)(function*(){yield d.iteration()}),y)}iteration(){var l=this;return(0,E.Z)(function*(){try{yield l.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&l.schedule(!0))}l.schedule()})()}}class Me{constructor(l,d){this.createdAt=l,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=cn(this.lastLoginAt),this.creationTime=cn(this.createdAt)}_copy(l){this.createdAt=l.createdAt,this.lastLoginAt=l.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function tt(m){return Un.apply(this,arguments)}function Un(){return(Un=(0,E.Z)(function*(m){var l;const d=m.auth,y=yield m.getIdToken(),M=yield pt(m,An(d,{idToken:y}));Oe(M?.users.length,d,"internal-error");const B=M.users[0];m._notifyReloadListener(B);const ie=null!==(l=B.providerUserInfo)&&void 0!==l&&l.length?Bi(B.providerUserInfo):[],ve=function Cs(m,l){return[...m.filter(y=>!l.some(M=>M.providerId===y.providerId)),...l]}(m.providerData,ie),Ft=!!m.isAnonymous&&!(m.email&&B.passwordHash||ve?.length),xt={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:ve,metadata:new Me(B.createdAt,B.lastLoginAt),isAnonymous:Ft};Object.assign(m,xt)})).apply(this,arguments)}function xi(){return(xi=(0,E.Z)(function*(m){const l=(0,Z.m9)(m);yield tt(l),yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)})).apply(this,arguments)}function Bi(m){return m.map(l=>{var{providerId:d}=l,y=(0,ae._T)(l,["providerId"]);return{providerId:d,uid:y.rawId||"",displayName:y.displayName||null,email:y.email||null,phoneNumber:y.phoneNumber||null,photoURL:y.photoUrl||null}})}function G(){return(G=(0,E.Z)(function*(m,l){const d=yield Lt(m,{},(0,E.Z)(function*(){const y=(0,Z.xO)({grant_type:"refresh_token",refresh_token:l}).slice(1),{tokenApiHost:M,apiKey:B}=m.config,ie=mi(m,M,"/v1/token",`key=${B}`),ve=yield m._getAdditionalHeaders();return ve["Content-Type"]="application/x-www-form-urlencoded",$e.fetch()(ie,{method:"POST",headers:ve,body:y})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function V(){return(V=(0,E.Z)(function*(m,l){return ce(m,"POST","/v2/accounts:revokeToken",Qe(m,l))})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(l){Oe(l.idToken,"internal-error"),Oe(typeof l.idToken<"u","internal-error"),Oe(typeof l.refreshToken<"u","internal-error");const d="expiresIn"in l&&typeof l.expiresIn<"u"?Number(l.expiresIn):as(l.idToken);this.updateTokensAndExpiration(l.idToken,l.refreshToken,d)}updateFromIdToken(l){Oe(0!==l.length,"internal-error");const d=as(l);this.updateTokensAndExpiration(l,null,d)}getToken(l,d=!1){var y=this;return(0,E.Z)(function*(){return d||!y.accessToken||y.isExpired?(Oe(y.refreshToken,l,"user-token-expired"),y.refreshToken?(yield y.refresh(l,y.refreshToken),y.accessToken):null):y.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(l,d){var y=this;return(0,E.Z)(function*(){const{accessToken:M,refreshToken:B,expiresIn:ie}=yield function Ss(m,l){return G.apply(this,arguments)}(l,d);y.updateTokensAndExpiration(M,B,Number(ie))})()}updateTokensAndExpiration(l,d,y){this.refreshToken=d||null,this.accessToken=l||null,this.expirationTime=Date.now()+1e3*y}static fromJSON(l,d){const{refreshToken:y,accessToken:M,expirationTime:B}=d,ie=new q;return y&&(Oe("string"==typeof y,"internal-error",{appName:l}),ie.refreshToken=y),M&&(Oe("string"==typeof M,"internal-error",{appName:l}),ie.accessToken=M),B&&(Oe("number"==typeof B,"internal-error",{appName:l}),ie.expirationTime=B),ie}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(l){this.accessToken=l.accessToken,this.refreshToken=l.refreshToken,this.expirationTime=l.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return Xt("not implemented")}}function ee(m,l){Oe("string"==typeof m||typeof m>"u","internal-error",{appName:l})}class je{constructor(l){var{uid:d,auth:y,stsTokenManager:M}=l,B=(0,ae._T)(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=y,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new Me(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(l){var d=this;return(0,E.Z)(function*(){const y=yield pt(d,d.stsTokenManager.getToken(d.auth,l));return Oe(y,d.auth,"internal-error"),d.accessToken!==y&&(d.accessToken=y,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),y})()}getIdTokenResult(l){return function $r(m){return be.apply(this,arguments)}(this,l)}reload(){return function us(m){return xi.apply(this,arguments)}(this)}_assign(l){this!==l&&(Oe(this.uid===l.uid,this.auth,"internal-error"),this.displayName=l.displayName,this.photoURL=l.photoURL,this.email=l.email,this.emailVerified=l.emailVerified,this.phoneNumber=l.phoneNumber,this.isAnonymous=l.isAnonymous,this.tenantId=l.tenantId,this.providerData=l.providerData.map(d=>Object.assign({},d)),this.metadata._copy(l.metadata),this.stsTokenManager._assign(l.stsTokenManager))}_clone(l){const d=new je(Object.assign(Object.assign({},this),{auth:l,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(l){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=l,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(l){this.reloadListener?this.reloadListener(l):this.reloadUserInfo=l}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(l,d=!1){var y=this;return(0,E.Z)(function*(){let M=!1;l.idToken&&l.idToken!==y.stsTokenManager.accessToken&&(y.stsTokenManager.updateFromServerResponse(l),M=!0),d&&(yield tt(y)),yield y.auth._persistUserIfCurrent(y),M&&y.auth._notifyListenersIfCurrent(y)})()}delete(){var l=this;return(0,E.Z)(function*(){if((0,Q._isFirebaseServerApp)(l.auth.app))return Promise.reject(Ze(l.auth));const d=yield l.getIdToken();return yield pt(l,function Kt(m,l){return nn.apply(this,arguments)}(l.auth,{idToken:d})),l.stsTokenManager.clearRefreshToken(),l.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(l=>Object.assign({},l)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(l,d){var y,M,B,ie,ve,Ye,Tt,Ft;const xt=null!==(y=d.displayName)&&void 0!==y?y:void 0,Pr=null!==(M=d.email)&&void 0!==M?M:void 0,ri=null!==(B=d.phoneNumber)&&void 0!==B?B:void 0,Ec=null!==(ie=d.photoURL)&&void 0!==ie?ie:void 0,pl=null!==(ve=d.tenantId)&&void 0!==ve?ve:void 0,gl=null!==(Ye=d._redirectEventId)&&void 0!==Ye?Ye:void 0,mh=null!==(Tt=d.createdAt)&&void 0!==Tt?Tt:void 0,Mo=null!==(Ft=d.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:xo,emailVerified:ml,isAnonymous:ja,providerData:na,stsTokenManager:_l}=d;Oe(xo&&_l,l,"internal-error");const Cu=q.fromJSON(this.name,_l);Oe("string"==typeof xo,l,"internal-error"),ee(xt,l.name),ee(Pr,l.name),Oe("boolean"==typeof ml,l,"internal-error"),Oe("boolean"==typeof ja,l,"internal-error"),ee(ri,l.name),ee(Ec,l.name),ee(pl,l.name),ee(gl,l.name),ee(mh,l.name),ee(Mo,l.name);const Ic=new je({uid:xo,auth:l,email:Pr,emailVerified:ml,displayName:xt,isAnonymous:ja,photoURL:Ec,phoneNumber:ri,tenantId:pl,stsTokenManager:Cu,createdAt:mh,lastLoginAt:Mo});return na&&Array.isArray(na)&&(Ic.providerData=na.map(yl=>Object.assign({},yl))),gl&&(Ic._redirectEventId=gl),Ic}static _fromIdTokenResponse(l,d,y=!1){return(0,E.Z)(function*(){const M=new q;M.updateFromServerResponse(d);const B=new je({uid:d.localId,auth:l,stsTokenManager:M,isAnonymous:y});return yield tt(B),B})()}static _fromGetAccountInfoResponse(l,d,y){return(0,E.Z)(function*(){const M=d.users[0];Oe(void 0!==M.localId,"internal-error");const B=void 0!==M.providerUserInfo?Bi(M.providerUserInfo):[],ie=!(M.email&&M.passwordHash||B?.length),ve=new q;ve.updateFromIdToken(y);const Ye=new je({uid:M.localId,auth:l,stsTokenManager:ve,isAnonymous:ie}),Tt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:B,metadata:new Me(M.createdAt,M.lastLoginAt),isAnonymous:!(M.email&&M.passwordHash||B?.length)};return Object.assign(Ye,Tt),Ye})()}}const We=new Map;function Et(m){Zn(m instanceof Function,"Expected a class definition");let l=We.get(m);return l?(Zn(l instanceof m,"Instance stored in cache mismatched with class"),l):(l=new m,We.set(m,l),l)}const ft=(()=>{class m{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(d,y){var M=this;return(0,E.Z)(function*(){M.storage[d]=y})()}_get(d){var y=this;return(0,E.Z)(function*(){const M=y.storage[d];return void 0===M?null:M})()}_remove(d){var y=this;return(0,E.Z)(function*(){delete y.storage[d]})()}_addListener(d,y){}_removeListener(d,y){}}return m.type="NONE",m})();function mt(m,l,d){return`firebase:${m}:${l}:${d}`}class Bt{constructor(l,d,y){this.persistence=l,this.auth=d,this.userKey=y;const{config:M,name:B}=this.auth;this.fullUserKey=mt(this.userKey,M.apiKey,B),this.fullPersistenceKey=mt("persistence",M.apiKey,B),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(l){return this.persistence._set(this.fullUserKey,l.toJSON())}getCurrentUser(){var l=this;return(0,E.Z)(function*(){const d=yield l.persistence._get(l.fullUserKey);return d?je._fromJSON(l.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(l){var d=this;return(0,E.Z)(function*(){if(d.persistence===l)return;const y=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=l,y?d.setCurrentUser(y):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(l,d,y="authUser"){return(0,E.Z)(function*(){if(!d.length)return new Bt(Et(ft),l,y);const M=(yield Promise.all(d.map(function(){var Tt=(0,E.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return Tt.apply(this,arguments)}}()))).filter(Tt=>Tt);let B=M[0]||Et(ft);const ie=mt(y,l.config.apiKey,l.name);let ve=null;for(const Tt of d)try{const Ft=yield Tt._get(ie);if(Ft){const xt=je._fromJSON(l,Ft);Tt!==B&&(ve=xt),B=Tt;break}}catch{}const Ye=M.filter(Tt=>Tt._shouldAllowMigration);return B._shouldAllowMigration&&Ye.length?(B=Ye[0],ve&&(yield B._set(ie,ve.toJSON())),yield Promise.all(d.map(function(){var Tt=(0,E.Z)(function*(Ft){if(Ft!==B)try{yield Ft._remove(ie)}catch{}});return function(Ft){return Tt.apply(this,arguments)}}())),new Bt(B,l,y)):new Bt(B,l,y)})()}}function Ht(m){const l=m.toLowerCase();if(l.includes("opera/")||l.includes("opr/")||l.includes("opios/"))return"Opera";if(ir(l))return"IEMobile";if(l.includes("msie")||l.includes("trident/"))return"IE";if(l.includes("edge/"))return"Edge";if(Ki(l))return"Firefox";if(l.includes("silk/"))return"Silk";if(kr(l))return"Blackberry";if(Jr(l))return"Webos";if(Bn(l))return"Safari";if((l.includes("chrome/")||vt(l))&&!l.includes("edge/"))return"Chrome";if(ai(l))return"Android";{const y=m.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===y?.length)return y[1]}return"Other"}function Ki(m=(0,Z.z$)()){return/firefox\//i.test(m)}function Bn(m=(0,Z.z$)()){const l=m.toLowerCase();return l.includes("safari/")&&!l.includes("chrome/")&&!l.includes("crios/")&&!l.includes("android")}function vt(m=(0,Z.z$)()){return/crios\//i.test(m)}function ir(m=(0,Z.z$)()){return/iemobile/i.test(m)}function ai(m=(0,Z.z$)()){return/android/i.test(m)}function kr(m=(0,Z.z$)()){return/blackberry/i.test(m)}function Jr(m=(0,Z.z$)()){return/webos/i.test(m)}function rn(m=(0,Z.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function At(m=(0,Z.z$)()){return rn(m)||ai(m)||Jr(m)||kr(m)||/windows phone/i.test(m)||ir(m)}function $t(m,l=[]){let d;switch(m){case"Browser":d=Ht((0,Z.z$)());break;case"Worker":d=`${Ht((0,Z.z$)())}-${m}`;break;default:d=m}const y=l.length?l.join(","):"FirebaseCore-web";return`${d}/JsCore/${Q.SDK_VERSION}/${y}`}class pn{constructor(l){this.auth=l,this.queue=[]}pushCallback(l,d){const y=B=>new Promise((ie,ve)=>{try{ie(l(B))}catch(Ye){ve(Ye)}});y.onAbort=d,this.queue.push(y);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(l){var d=this;return(0,E.Z)(function*(){if(d.auth.currentUser===l)return;const y=[];try{for(const M of d.queue)yield M(l),M.onAbort&&y.push(M.onAbort)}catch(M){y.reverse();for(const B of y)try{B()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}function Nn(){return(Nn=(0,E.Z)(function*(m,l={}){return ce(m,"GET","/v2/passwordPolicy",Qe(m,l))})).apply(this,arguments)}class we{constructor(l){var d,y,M,B;const ie=l.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=ie.minPasswordLength)&&void 0!==d?d:6,ie.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ie.maxPasswordLength),void 0!==ie.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ie.containsLowercaseCharacter),void 0!==ie.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ie.containsUppercaseCharacter),void 0!==ie.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ie.containsNumericCharacter),void 0!==ie.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ie.containsNonAlphanumericCharacter),this.enforcementState=l.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(M=null===(y=l.allowedNonAlphanumericCharacters)||void 0===y?void 0:y.join(""))&&void 0!==M?M:"",this.forceUpgradeOnSignin=null!==(B=l.forceUpgradeOnSignin)&&void 0!==B&&B,this.schemaVersion=l.schemaVersion}validatePassword(l){var d,y,M,B,ie,ve;const Ye={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(l,Ye),this.validatePasswordCharacterOptions(l,Ye),Ye.isValid&&(Ye.isValid=null===(d=Ye.meetsMinPasswordLength)||void 0===d||d),Ye.isValid&&(Ye.isValid=null===(y=Ye.meetsMaxPasswordLength)||void 0===y||y),Ye.isValid&&(Ye.isValid=null===(M=Ye.containsLowercaseLetter)||void 0===M||M),Ye.isValid&&(Ye.isValid=null===(B=Ye.containsUppercaseLetter)||void 0===B||B),Ye.isValid&&(Ye.isValid=null===(ie=Ye.containsNumericCharacter)||void 0===ie||ie),Ye.isValid&&(Ye.isValid=null===(ve=Ye.containsNonAlphanumericCharacter)||void 0===ve||ve),Ye}validatePasswordLengthOptions(l,d){const y=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;y&&(d.meetsMinPasswordLength=l.length>=y),M&&(d.meetsMaxPasswordLength=l.length<=M)}validatePasswordCharacterOptions(l,d){let y;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let M=0;M<l.length;M++)y=l.charAt(M),this.updatePasswordCharacterOptionsStatuses(d,y>="a"&&y<="z",y>="A"&&y<="Z",y>="0"&&y<="9",this.allowedNonAlphanumericCharacters.includes(y))}updatePasswordCharacterOptionsStatuses(l,d,y,M,B){this.customStrengthOptions.containsLowercaseLetter&&(l.containsLowercaseLetter||(l.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(l.containsUppercaseLetter||(l.containsUppercaseLetter=y)),this.customStrengthOptions.containsNumericCharacter&&(l.containsNumericCharacter||(l.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(l.containsNonAlphanumericCharacter||(l.containsNonAlphanumericCharacter=B))}}class Hr{constructor(l,d,y,M){this.app=l,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new co(this),this.idTokenSubscription=new co(this),this.beforeStateQueue=new pn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=l.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(l,d){var y=this;return d&&(this._popupRedirectResolver=Et(d)),this._initializationPromise=this.queue((0,E.Z)(function*(){var M,B;if(!y._deleted&&(y.persistenceManager=yield Bt.create(y,l),!y._deleted)){if(null!==(M=y._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield y._popupRedirectResolver._initialize(y)}catch{}yield y.initializeCurrentUser(d),y.lastNotifiedUid=(null===(B=y.currentUser)||void 0===B?void 0:B.uid)||null,!y._deleted&&(y._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var l=this;return(0,E.Z)(function*(){if(l._deleted)return;const d=yield l.assertedPersistence.getCurrentUser();if(l.currentUser||d){if(l.currentUser&&d&&l.currentUser.uid===d.uid)return l._currentUser._assign(d),void(yield l.currentUser.getIdToken());yield l._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(l){var d=this;return(0,E.Z)(function*(){try{const y=yield An(d,{idToken:l}),M=yield je._fromGetAccountInfoResponse(d,y,l);yield d.directlySetCurrentUser(M)}catch(y){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",y),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(l){var d=this;return(0,E.Z)(function*(){var y;if((0,Q._isFirebaseServerApp)(d.app)){const ve=d.app.settings.authIdToken;return ve?new Promise(Ye=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(ve).then(Ye,Ye))}):d.directlySetCurrentUser(null)}const M=yield d.assertedPersistence.getCurrentUser();let B=M,ie=!1;if(l&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const ve=null===(y=d.redirectUser)||void 0===y?void 0:y._redirectEventId,Ye=B?._redirectEventId,Tt=yield d.tryRedirectSignIn(l);(!ve||ve===Ye)&&Tt?.user&&(B=Tt.user,ie=!0)}if(!B)return d.directlySetCurrentUser(null);if(!B._redirectEventId){if(ie)try{yield d.beforeStateQueue.runMiddleware(B)}catch(ve){B=M,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(ve))}return B?d.reloadAndSetCurrentUserOrClear(B):d.directlySetCurrentUser(null)}return Oe(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===B._redirectEventId?d.directlySetCurrentUser(B):d.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(l){var d=this;return(0,E.Z)(function*(){let y=null;try{y=yield d._popupRedirectResolver._completeRedirectFn(d,l,!0)}catch{yield d._setRedirectUser(null)}return y})()}reloadAndSetCurrentUserOrClear(l){var d=this;return(0,E.Z)(function*(){try{yield tt(l)}catch(y){if("auth/network-request-failed"!==y?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(l)})()}useDeviceLanguage(){this.languageCode=function sn(){if(typeof navigator>"u")return null;const m=navigator;return m.languages&&m.languages[0]||m.language||null}()}_delete(){var l=this;return(0,E.Z)(function*(){l._deleted=!0})()}updateCurrentUser(l){var d=this;return(0,E.Z)(function*(){if((0,Q._isFirebaseServerApp)(d.app))return Promise.reject(Ze(d));const y=l?(0,Z.m9)(l):null;return y&&Oe(y.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(y&&y._clone(d))})()}_updateCurrentUser(l,d=!1){var y=this;return(0,E.Z)(function*(){if(!y._deleted)return l&&Oe(y.tenantId===l.tenantId,y,"tenant-id-mismatch"),d||(yield y.beforeStateQueue.runMiddleware(l)),y.queue((0,E.Z)(function*(){yield y.directlySetCurrentUser(l),y.notifyAuthListeners()}))})()}signOut(){var l=this;return(0,E.Z)(function*(){return(0,Q._isFirebaseServerApp)(l.app)?Promise.reject(Ze(l)):(yield l.beforeStateQueue.runMiddleware(null),(l.redirectPersistenceManager||l._popupRedirectResolver)&&(yield l._setRedirectUser(null)),l._updateCurrentUser(null,!0))})()}setPersistence(l){var d=this;return(0,Q._isFirebaseServerApp)(this.app)?Promise.reject(Ze(this)):this.queue((0,E.Z)(function*(){yield d.assertedPersistence.setPersistence(Et(l))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(l){var d=this;return(0,E.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const y=d._getPasswordPolicyInternal();return y.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):y.validatePassword(l)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var l=this;return(0,E.Z)(function*(){const d=yield function qn(m){return Nn.apply(this,arguments)}(l),y=new we(d);null===l.tenantId?l._projectPasswordPolicy=y:l._tenantPasswordPolicies[l.tenantId]=y})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(l){this._errorFactory=new Z.LL("auth","Firebase",l())}onAuthStateChanged(l,d,y){return this.registerStateListener(this.authStateSubscription,l,d,y)}beforeAuthStateChanged(l,d){return this.beforeStateQueue.pushCallback(l,d)}onIdTokenChanged(l,d,y){return this.registerStateListener(this.idTokenSubscription,l,d,y)}authStateReady(){return new Promise((l,d)=>{if(this.currentUser)l();else{const y=this.onAuthStateChanged(()=>{y(),l()},d)}})}revokeAccessToken(l){var d=this;return(0,E.Z)(function*(){if(d.currentUser){const y=yield d.currentUser.getIdToken(),M={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:l,idToken:y};null!=d.tenantId&&(M.tenantId=d.tenantId),yield function j(m,l){return V.apply(this,arguments)}(d,M)}})()}toJSON(){var l;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(l=this._currentUser)||void 0===l?void 0:l.toJSON()}}_setRedirectUser(l,d){var y=this;return(0,E.Z)(function*(){const M=yield y.getOrInitRedirectPersistenceManager(d);return null===l?M.removeCurrentUser():M.setCurrentUser(l)})()}getOrInitRedirectPersistenceManager(l){var d=this;return(0,E.Z)(function*(){if(!d.redirectPersistenceManager){const y=l&&Et(l)||d._popupRedirectResolver;Oe(y,d,"argument-error"),d.redirectPersistenceManager=yield Bt.create(d,[Et(y._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(l){var d=this;return(0,E.Z)(function*(){var y,M;return d._isInitialized&&(yield d.queue((0,E.Z)(function*(){}))),(null===(y=d._currentUser)||void 0===y?void 0:y._redirectEventId)===l?d._currentUser:(null===(M=d.redirectUser)||void 0===M?void 0:M._redirectEventId)===l?d.redirectUser:null})()}_persistUserIfCurrent(l){var d=this;return(0,E.Z)(function*(){if(l===d.currentUser)return d.queue((0,E.Z)(function*(){return d.directlySetCurrentUser(l)}))})()}_notifyListenersIfCurrent(l){l===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var l,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const y=null!==(d=null===(l=this.currentUser)||void 0===l?void 0:l.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==y&&(this.lastNotifiedUid=y,this.authStateSubscription.next(this.currentUser))}registerStateListener(l,d,y,M){if(this._deleted)return()=>{};const B="function"==typeof d?d:d.next.bind(d);let ie=!1;const ve=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(ve,this,"internal-error"),ve.then(()=>{ie||B(this.currentUser)}),"function"==typeof d){const Ye=l.addObserver(d,y,M);return()=>{ie=!0,Ye()}}{const Ye=l.addObserver(d);return()=>{ie=!0,Ye()}}}directlySetCurrentUser(l){var d=this;return(0,E.Z)(function*(){d.currentUser&&d.currentUser!==l&&d._currentUser._stopProactiveRefresh(),l&&d.isProactiveRefreshEnabled&&l._startProactiveRefresh(),d.currentUser=l,l?yield d.assertedPersistence.setCurrentUser(l):yield d.assertedPersistence.removeCurrentUser()})()}queue(l){return this.operations=this.operations.then(l,l),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(l){!l||this.frameworks.includes(l)||(this.frameworks.push(l),this.frameworks.sort(),this.clientVersion=$t(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var l=this;return(0,E.Z)(function*(){var d;const y={"X-Client-Version":l.clientVersion};l.app.options.appId&&(y["X-Firebase-gmpid"]=l.app.options.appId);const M=yield null===(d=l.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();M&&(y["X-Firebase-Client"]=M);const B=yield l._getAppCheckToken();return B&&(y["X-Firebase-AppCheck"]=B),y})()}_getAppCheckToken(){var l=this;return(0,E.Z)(function*(){var d;const y=yield null===(d=l.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return y?.error&&function _t(m,...l){It.logLevel<=he.in.WARN&&It.warn(`Auth (${Q.SDK_VERSION}): ${m}`,...l)}(`Error while retrieving App Check token: ${y.error}`),y?.token})()}}function on(m){return(0,Z.m9)(m)}class co{constructor(l){this.auth=l,this.observer=null,this.addObserver=(0,Z.ne)(d=>this.observer=d)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let _i={loadJS:()=>(0,E.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zr(m){return _i.loadJS(m)}function Uo(m){return`__${m}${Math.floor(1e6*Math.random())}`}class ui{constructor(l){this.type="recaptcha-enterprise",this.auth=on(l)}verify(l="verify",d=!1){var y=this;return(0,E.Z)(function*(){function B(){return B=(0,E.Z)(function*(ve){if(!d){if(null==ve.tenantId&&null!=ve._agentRecaptchaConfig)return ve._agentRecaptchaConfig.siteKey;if(null!=ve.tenantId&&void 0!==ve._tenantRecaptchaConfigs[ve.tenantId])return ve._tenantRecaptchaConfigs[ve.tenantId].siteKey}return new Promise(function(){var Ye=(0,E.Z)(function*(Tt,Ft){Nr(ve,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(xt=>{if(void 0!==xt.recaptchaKey){const Pr=new Ui(xt);return null==ve.tenantId?ve._agentRecaptchaConfig=Pr:ve._tenantRecaptchaConfigs[ve.tenantId]=Pr,Tt(Pr.siteKey)}Ft(new Error("recaptcha Enterprise site key undefined"))}).catch(xt=>{Ft(xt)})});return function(Tt,Ft){return Ye.apply(this,arguments)}}())}),B.apply(this,arguments)}function ie(ve,Ye,Tt){const Ft=window.grecaptcha;hr(Ft)?Ft.enterprise.ready(()=>{Ft.enterprise.execute(ve,{action:l}).then(xt=>{Ye(xt)}).catch(()=>{Ye("NO_RECAPTCHA")})}):Tt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ve,Ye)=>{(function M(ve){return B.apply(this,arguments)})(y.auth).then(Tt=>{if(!d&&hr(window.grecaptcha))ie(Tt,ve,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));let Ft=function Sr(){return _i.recaptchaEnterpriseScript}();0!==Ft.length&&(Ft+=Tt),zr(Ft).then(()=>{ie(Tt,ve,Ye)}).catch(xt=>{Ye(xt)})}}).catch(Tt=>{Ye(Tt)})})})()}}function ho(m,l,d){return cs.apply(this,arguments)}function cs(){return(cs=(0,E.Z)(function*(m,l,d,y=!1){const M=new ui(m);let B;try{B=yield M.verify(d)}catch{B=yield M.verify(d,!0)}const ie=Object.assign({},l);return Object.assign(ie,y?{captchaResp:B}:{captchaResponse:B}),Object.assign(ie,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ie,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ie})).apply(this,arguments)}function Bo(m,l,d,y){return Qn.apply(this,arguments)}function Qn(){return Qn=(0,E.Z)(function*(m,l,d,y){var M;if(null!==(M=m._getRecaptchaConfig())&&void 0!==M&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const B=yield ho(m,l,d,"getOobCode"===d);return y(m,B)}return y(m,l).catch(function(){var B=(0,E.Z)(function*(ie){if("auth/missing-recaptcha-token"===ie.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ve=yield ho(m,l,d,"getOobCode"===d);return y(m,ve)}return Promise.reject(ie)});return function(ie){return B.apply(this,arguments)}}())}),Qn.apply(this,arguments)}function jo(m){const l=m.indexOf(":");return l<0?"":m.substr(0,l+1)}function ca(m){if(!m)return null;const l=Number(m);return isNaN(l)?null:l}class ls{constructor(l,d){this.providerId=l,this.signInMethod=d}toJSON(){return Xt("not implemented")}_getIdTokenResponse(l){return Xt("not implemented")}_linkToIdToken(l,d){return Xt("not implemented")}_getReauthenticationResolver(l){return Xt("not implemented")}}function hn(m,l){return sr.apply(this,arguments)}function sr(){return(sr=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:resetPassword",Qe(m,l))})).apply(this,arguments)}function ds(){return(ds=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function yi(m,l){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:signUp",l)})).apply(this,arguments)}function po(){return(po=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:update",Qe(m,l))})).apply(this,arguments)}function da(m,l){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithPassword",Qe(m,l))})).apply(this,arguments)}function Yn(m,l){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:sendOobCode",Qe(m,l))})).apply(this,arguments)}function $n(){return($n=(0,E.Z)(function*(m,l){return Yn(m,l)})).apply(this,arguments)}function Wr(m,l){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,E.Z)(function*(m,l){return Yn(m,l)})).apply(this,arguments)}function Fr(m,l){return ji.apply(this,arguments)}function ji(){return(ji=(0,E.Z)(function*(m,l){return Yn(m,l)})).apply(this,arguments)}function Xr(){return(Xr=(0,E.Z)(function*(m,l){return Yn(m,l)})).apply(this,arguments)}function en(){return(en=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithEmailLink",Qe(m,l))})).apply(this,arguments)}function Gn(){return(Gn=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithEmailLink",Qe(m,l))})).apply(this,arguments)}class Ei extends ls{constructor(l,d,y,M=null){super("password",y),this._email=l,this._password=d,this._tenantId=M}static _fromEmailAndPassword(l,d){return new Ei(l,d,"password")}static _fromEmailAndCode(l,d,y=null){return new Ei(l,d,"emailLink",y)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(l){var d=this;return(0,E.Z)(function*(){switch(d.signInMethod){case"password":return Bo(l,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",da);case"emailLink":return function vi(m,l){return en.apply(this,arguments)}(l,{email:d._email,oobCode:d._password});default:ze(l,"internal-error")}})()}_linkToIdToken(l,d){var y=this;return(0,E.Z)(function*(){switch(y.signInMethod){case"password":return Bo(l,{idToken:d,returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yi);case"emailLink":return function js(m,l){return Gn.apply(this,arguments)}(l,{idToken:d,email:y._email,oobCode:y._password});default:ze(l,"internal-error")}})()}_getReauthenticationResolver(l){return this._getIdTokenResponse(l)}}function dn(m,l){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithIdp",Qe(m,l))})).apply(this,arguments)}class or extends ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(l){const d=new or(l.providerId,l.signInMethod);return l.idToken||l.accessToken?(l.idToken&&(d.idToken=l.idToken),l.accessToken&&(d.accessToken=l.accessToken),l.nonce&&!l.pendingToken&&(d.nonce=l.nonce),l.pendingToken&&(d.pendingToken=l.pendingToken)):l.oauthToken&&l.oauthTokenSecret?(d.accessToken=l.oauthToken,d.secret=l.oauthTokenSecret):ze("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M}=d,B=(0,ae._T)(d,["providerId","signInMethod"]);if(!y||!M)return null;const ie=new or(y,M);return ie.idToken=B.idToken||void 0,ie.accessToken=B.accessToken||void 0,ie.secret=B.secret,ie.nonce=B.nonce,ie.pendingToken=B.pendingToken||null,ie}_getIdTokenResponse(l){return dn(l,this.buildRequest())}_linkToIdToken(l,d){const y=this.buildRequest();return y.idToken=d,dn(l,y)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,dn(l,d)}buildRequest(){const l={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)l.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),l.postBody=(0,Z.xO)(d)}return l}}function eu(){return(eu=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:sendVerificationCode",Qe(m,l))})).apply(this,arguments)}function Jn(){return(Jn=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithPhoneNumber",Qe(m,l))})).apply(this,arguments)}function Ii(){return(Ii=(0,E.Z)(function*(m,l){const d=yield Nt(m,"POST","/v1/accounts:signInWithPhoneNumber",Qe(m,l));if(d.temporaryProof)throw bn(m,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const jt={USER_NOT_FOUND:"user-not-found"};function Yi(){return(Yi=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithPhoneNumber",Qe(m,Object.assign(Object.assign({},l),{operation:"REAUTH"})),jt)})).apply(this,arguments)}class ar extends ls{constructor(l){super("phone","phone"),this.params=l}static _fromVerification(l,d){return new ar({verificationId:l,verificationCode:d})}static _fromTokenResponse(l,d){return new ar({phoneNumber:l,temporaryProof:d})}_getIdTokenResponse(l){return function $s(m,l){return Jn.apply(this,arguments)}(l,this._makeVerificationRequest())}_linkToIdToken(l,d){return function Hs(m,l){return Ii.apply(this,arguments)}(l,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(l){return function Rs(m,l){return Yi.apply(this,arguments)}(l,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:l,phoneNumber:d,verificationId:y,verificationCode:M}=this.params;return l&&d?{temporaryProof:l,phoneNumber:d}:{sessionInfo:y,code:M}}toJSON(){const l={providerId:this.providerId};return this.params.phoneNumber&&(l.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(l.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(l.verificationCode=this.params.verificationCode),this.params.verificationId&&(l.verificationId=this.params.verificationId),l}static fromJSON(l){"string"==typeof l&&(l=JSON.parse(l));const{verificationId:d,verificationCode:y,phoneNumber:M,temporaryProof:B}=l;return y||d||M||B?new ar({verificationId:d,verificationCode:y,phoneNumber:M,temporaryProof:B}):null}}class qr{constructor(l){var d,y,M,B,ie,ve;const Ye=(0,Z.zd)((0,Z.pd)(l)),Tt=null!==(d=Ye.apiKey)&&void 0!==d?d:null,Ft=null!==(y=Ye.oobCode)&&void 0!==y?y:null,xt=function ci(m){switch(m){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ye.mode)&&void 0!==M?M:null);Oe(Tt&&Ft&&xt,"argument-error"),this.apiKey=Tt,this.operation=xt,this.code=Ft,this.continueUrl=null!==(B=Ye.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(ie=Ye.languageCode)&&void 0!==ie?ie:null,this.tenantId=null!==(ve=Ye.tenantId)&&void 0!==ve?ve:null}static parseLink(l){const d=function zs(m){const l=(0,Z.zd)((0,Z.pd)(m)).link,d=l?(0,Z.zd)((0,Z.pd)(l)).deep_link_id:null,y=(0,Z.zd)((0,Z.pd)(m)).deep_link_id;return(y?(0,Z.zd)((0,Z.pd)(y)).link:null)||y||d||l||m}(l);try{return new qr(d)}catch{return null}}}let Ir=(()=>{class m{constructor(){this.providerId=m.PROVIDER_ID}static credential(d,y){return Ei._fromEmailAndPassword(d,y)}static credentialWithLink(d,y){const M=qr.parseLink(y);return Oe(M,"argument-error"),Ei._fromEmailAndCode(d,M.code,M.tenantId)}}return m.PROVIDER_ID="password",m.EMAIL_PASSWORD_SIGN_IN_METHOD="password",m.EMAIL_LINK_SIGN_IN_METHOD="emailLink",m})();class ei{constructor(l){this.providerId=l,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(l){this.defaultLanguageCode=l}setCustomParameters(l){return this.customParameters=l,this}getCustomParameters(){return this.customParameters}}class Hn extends ei{constructor(){super(...arguments),this.scopes=[]}addScope(l){return this.scopes.includes(l)||this.scopes.push(l),this}getScopes(){return[...this.scopes]}}class ur extends Hn{static credentialFromJSON(l){const d="string"==typeof l?JSON.parse(l):l;return Oe("providerId"in d&&"signInMethod"in d,"argument-error"),or._fromParams(d)}credential(l){return this._credential(Object.assign(Object.assign({},l),{nonce:l.rawNonce}))}_credential(l){return Oe(l.idToken||l.accessToken,"argument-error"),or._fromParams(Object.assign(Object.assign({},l),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(l){return ur.oauthCredentialFromTaggedObject(l)}static credentialFromError(l){return ur.oauthCredentialFromTaggedObject(l.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:d,oauthAccessToken:y,oauthTokenSecret:M,pendingToken:B,nonce:ie,providerId:ve}=l;if(!y&&!M&&!d&&!B||!ve)return null;try{return new ur(ve)._credential({idToken:d,accessToken:y,nonce:ie,pendingToken:B})}catch{return null}}}let Hi=(()=>{class m extends Hn{constructor(){super("facebook.com")}static credential(d){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return m.credentialFromTaggedObject(d)}static credentialFromError(d){return m.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return m.credential(d.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),wi=(()=>{class m extends Hn{constructor(){super("google.com"),this.addScope("profile")}static credential(d,y){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:y})}static credentialFromResult(d){return m.credentialFromTaggedObject(d)}static credentialFromError(d){return m.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:y,oauthAccessToken:M}=d;if(!y&&!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Ti=(()=>{class m extends Hn{constructor(){super("github.com")}static credential(d){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return m.credentialFromTaggedObject(d)}static credentialFromError(d){return m.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return m.credential(d.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class zi extends ls{constructor(l,d){super(l,l),this.pendingToken=d}_getIdTokenResponse(l){return dn(l,this.buildRequest())}_linkToIdToken(l,d){const y=this.buildRequest();return y.idToken=d,dn(l,y)}_getReauthenticationResolver(l){const d=this.buildRequest();return d.autoCreate=!1,dn(l,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(l){const d="string"==typeof l?JSON.parse(l):l,{providerId:y,signInMethod:M,pendingToken:B}=d;return y&&M&&B&&y===M?new zi(y,B):null}static _create(l,d){return new zi(l,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hs extends ei{constructor(l){Oe(l.startsWith("saml."),"argument-error"),super(l)}static credentialFromResult(l){return hs.samlCredentialFromTaggedObject(l)}static credentialFromError(l){return hs.samlCredentialFromTaggedObject(l.customData||{})}static credentialFromJSON(l){const d=zi.fromJSON(l);return Oe(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{pendingToken:d,providerId:y}=l;if(!d||!y)return null;try{return zi._create(y,d)}catch{return null}}}let ha=(()=>{class m extends Hn{constructor(){super("twitter.com")}static credential(d,y){return or._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:y})}static credentialFromResult(d){return m.credentialFromTaggedObject(d)}static credentialFromError(d){return m.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:y,oauthTokenSecret:M}=d;if(!y||!M)return null;try{return m.credential(y,M)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();function tu(m,l){return fa.apply(this,arguments)}function fa(){return(fa=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signUp",Qe(m,l))})).apply(this,arguments)}class li{constructor(l){this.user=l.user,this.providerId=l.providerId,this._tokenResponse=l._tokenResponse,this.operationType=l.operationType}static _fromIdTokenResponse(l,d,y,M=!1){return(0,E.Z)(function*(){const B=yield je._fromIdTokenResponse(l,y,M),ie=pa(y);return new li({user:B,providerId:ie,_tokenResponse:y,operationType:d})})()}static _forOperation(l,d,y){return(0,E.Z)(function*(){yield l._updateTokensIfNecessary(y,!0);const M=pa(y);return new li({user:l,providerId:M,_tokenResponse:y,operationType:d})})()}}function pa(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}function vr(){return(vr=(0,E.Z)(function*(m){var l;if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const d=on(m);if(yield d._initializationPromise,null!==(l=d.currentUser)&&void 0!==l&&l.isAnonymous)return new li({user:d.currentUser,providerId:null,operationType:"signIn"});const y=yield tu(d,{returnSecureToken:!0}),M=yield li._fromIdTokenResponse(d,"signIn",y,!0);return yield d._updateCurrentUser(M.user),M})).apply(this,arguments)}class Bu extends Z.ZR{constructor(l,d,y,M){var B;super(d.code,d.message),this.operationType=y,this.user=M,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:l.name,tenantId:null!==(B=l.tenantId)&&void 0!==B?B:void 0,_serverResponse:d.customData._serverResponse,operationType:y}}static _fromErrorAndOperation(l,d,y,M){return new Bu(l,d,y,M)}}function ju(m,l,d,y){return("reauthenticate"===l?d._getReauthenticationResolver(m):d._getIdTokenResponse(m)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?Bu._fromErrorAndOperation(m,B,l,y):B})}function ga(m){return new Set(m.map(({providerId:l})=>l).filter(l=>!!l))}function $u(){return $u=(0,E.Z)(function*(m,l){const d=(0,Z.m9)(m);yield ma(!0,d,l);const{providerUserInfo:y}=yield function fn(m,l){return kn.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[l]}),M=ga(y||[]);return d.providerData=d.providerData.filter(B=>M.has(B.providerId)),M.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),$u.apply(this,arguments)}function nr(m,l){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,E.Z)(function*(m,l,d=!1){const y=yield pt(m,l._linkToIdToken(m.auth,yield m.getIdToken()),d);return li._forOperation(m,"link",y)})).apply(this,arguments)}function ma(m,l,d){return _a.apply(this,arguments)}function _a(){return(_a=(0,E.Z)(function*(m,l,d){yield tt(l);const M=!1===m?"provider-already-linked":"no-such-provider";Oe(ga(l.providerData).has(d)===m,l.auth,M)})).apply(this,arguments)}function go(m,l){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,E.Z)(function*(m,l,d=!1){const{auth:y}=m;if((0,Q._isFirebaseServerApp)(y.app))return Promise.reject(Ze(y));const M="reauthenticate";try{const B=yield pt(m,ju(y,M,l,m),d);Oe(B.idToken,y,"internal-error");const ie=Zt(B.idToken);Oe(ie,y,"internal-error");const{sub:ve}=ie;return Oe(m.uid===ve,y,"user-mismatch"),li._forOperation(m,M,B)}catch(B){throw"auth/user-not-found"===B?.code&&ze(y,"user-mismatch"),B}})).apply(this,arguments)}function nu(m,l){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,E.Z)(function*(m,l,d=!1){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const y="signIn",M=yield ju(m,y,l),B=yield li._fromIdTokenResponse(m,y,M);return d||(yield m._updateCurrentUser(B.user)),B})).apply(this,arguments)}function In(m,l){return Br.apply(this,arguments)}function Br(){return(Br=(0,E.Z)(function*(m,l){return nu(on(m),l)})).apply(this,arguments)}function Ji(m,l){return ya.apply(this,arguments)}function ya(){return(ya=(0,E.Z)(function*(m,l){const d=(0,Z.m9)(m);return yield ma(!1,d,l.providerId),nr(d,l)})).apply(this,arguments)}function fr(m,l){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,E.Z)(function*(m,l){return go((0,Z.m9)(m),l)})).apply(this,arguments)}function va(){return(va=(0,E.Z)(function*(m,l){return Nt(m,"POST","/v1/accounts:signInWithCustomToken",Qe(m,l))})).apply(this,arguments)}function mo(){return mo=(0,E.Z)(function*(m,l){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const d=on(m),y=yield function di(m,l){return va.apply(this,arguments)}(d,{token:l,returnSecureToken:!0}),M=yield li._fromIdTokenResponse(d,"signIn",y);return yield d._updateCurrentUser(M.user),M}),mo.apply(this,arguments)}class Gs{constructor(l,d){this.factorId=l,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(l,d){return"phoneInfo"in d?_o._fromServerResponse(l,d):"totpInfo"in d?zo._fromServerResponse(l,d):ze(l,"internal-error")}}class _o extends Gs{constructor(l){super("phone",l),this.phoneNumber=l.phoneInfo}static _fromServerResponse(l,d){return new _o(d)}}class zo extends Gs{constructor(l){super("totp",l)}static _fromServerResponse(l,d){return new zo(d)}}function Go(m,l,d){var y;Oe((null===(y=d.url)||void 0===y?void 0:y.length)>0,m,"invalid-continue-uri"),Oe(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),l.continueUrl=d.url,l.dynamicLinkDomain=d.dynamicLinkDomain,l.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(Oe(d.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),l.iOSBundleId=d.iOS.bundleId),d.android&&(Oe(d.android.packageName.length>0,m,"missing-android-pkg-name"),l.androidInstallApp=d.android.installApp,l.androidMinimumVersionCode=d.android.minimumVersion,l.androidPackageName=d.android.packageName)}function Wo(m){return ru.apply(this,arguments)}function ru(){return(ru=(0,E.Z)(function*(m){const l=on(m);l._getPasswordPolicyInternal()&&(yield l._updatePasswordPolicy())})).apply(this,arguments)}function yo(){return(yo=(0,E.Z)(function*(m,l,d){const y=on(m),M={requestType:"PASSWORD_RESET",email:l,clientType:"CLIENT_TYPE_WEB"};d&&Go(y,M,d),yield Bo(y,M,"getOobCode",Wr)})).apply(this,arguments)}function Ai(){return Ai=(0,E.Z)(function*(m,l,d){yield hn((0,Z.m9)(m),{oobCode:l,newPassword:d}).catch(function(){var y=(0,E.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Wo(m),M});return function(M){return y.apply(this,arguments)}}())}),Ai.apply(this,arguments)}function Ws(){return Ws=(0,E.Z)(function*(m,l){yield function Xa(m,l){return po.apply(this,arguments)}((0,Z.m9)(m),{oobCode:l})}),Ws.apply(this,arguments)}function Ea(m,l){return zu.apply(this,arguments)}function zu(){return(zu=(0,E.Z)(function*(m,l){const d=(0,Z.m9)(m),y=yield hn(d,{oobCode:l}),M=y.requestType;switch(Oe(M,d,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(y.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(y.mfaInfo,d,"internal-error");default:Oe(y.email,d,"internal-error")}let B=null;return y.mfaInfo&&(B=Gs._fromServerResponse(on(d),y.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.newEmail:y.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===y.requestType?y.email:y.newEmail)||null,multiFactorInfo:B},operation:M}})).apply(this,arguments)}function ps(){return(ps=(0,E.Z)(function*(m,l){const{data:d}=yield Ea((0,Z.m9)(m),l);return d.email})).apply(this,arguments)}function qs(){return(qs=(0,E.Z)(function*(m,l,d){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const y=on(m),ie=yield Bo(y,{returnSecureToken:!0,email:l,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tu).catch(Ye=>{throw"auth/password-does-not-meet-requirements"===Ye.code&&Wo(m),Ye}),ve=yield li._fromIdTokenResponse(y,"signIn",ie);return yield y._updateCurrentUser(ve.user),ve})).apply(this,arguments)}function Ks(){return(Ks=(0,E.Z)(function*(m,l,d){const y=on(m),M={requestType:"EMAIL_SIGNIN",email:l,clientType:"CLIENT_TYPE_WEB"};(function B(ie,ve){Oe(ve.handleCodeInApp,y,"argument-error"),ve&&Go(y,ie,ve)})(M,d),yield Bo(y,M,"getOobCode",Fr)})).apply(this,arguments)}function vo(){return(vo=(0,E.Z)(function*(m,l,d){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const y=(0,Z.m9)(m),M=Ir.credentialWithLink(l,d||On());return Oe(M._tenantId===(y.tenantId||null),y,"tenant-id-mismatch"),In(y,M)})).apply(this,arguments)}function D(){return(D=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:createAuthUri",Qe(m,l))})).apply(this,arguments)}function P(){return P=(0,E.Z)(function*(m,l){const y={identifier:l,continueUri:_r()?On():"http://localhost"},{signinMethods:M}=yield function iu(m,l){return D.apply(this,arguments)}((0,Z.m9)(m),y);return M||[]}),P.apply(this,arguments)}function te(){return te=(0,E.Z)(function*(m,l){const d=(0,Z.m9)(m),M={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};l&&Go(d.auth,M,l);const{email:B}=yield function an(m,l){return $n.apply(this,arguments)}(d.auth,M);B!==m.email&&(yield m.reload())}),te.apply(this,arguments)}function nt(){return nt=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:l};d&&Go(y.auth,B,d);const{email:ie}=yield function En(m,l){return Xr.apply(this,arguments)}(y.auth,B);ie!==m.email&&(yield m.reload())}),nt.apply(this,arguments)}function Cn(){return(Cn=(0,E.Z)(function*(m,l){return ce(m,"POST","/v1/accounts:update",l)})).apply(this,arguments)}function un(){return un=(0,E.Z)(function*(m,{displayName:l,photoURL:d}){if(void 0===l&&void 0===d)return;const y=(0,Z.m9)(m),B={idToken:yield y.getIdToken(),displayName:l,photoUrl:d,returnSecureToken:!0},ie=yield pt(y,function Ut(m,l){return Cn.apply(this,arguments)}(y.auth,B));y.displayName=ie.displayName||null,y.photoURL=ie.photoUrl||null;const ve=y.providerData.find(({providerId:Ye})=>"password"===Ye);ve&&(ve.displayName=y.displayName,ve.photoURL=y.photoURL),yield y._updateTokensIfNecessary(ie)}),un.apply(this,arguments)}function zn(m,l,d){return Kn.apply(this,arguments)}function Kn(){return Kn=(0,E.Z)(function*(m,l,d){const{auth:y}=m,B={idToken:yield m.getIdToken(),returnSecureToken:!0};l&&(B.email=l),d&&(B.password=d);const ie=yield pt(m,function Gr(m,l){return ds.apply(this,arguments)}(y,B));yield m._updateTokensIfNecessary(ie,!0)}),Kn.apply(this,arguments)}class pr{constructor(l,d,y={}){this.isNewUser=l,this.providerId=d,this.profile=y}}class Ms extends pr{constructor(l,d,y,M){super(l,d,y),this.username=M}}class Ci extends pr{constructor(l,d){super(l,"facebook.com",d)}}class tn extends Ms{constructor(l,d){super(l,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Kr extends pr{constructor(l,d){super(l,"google.com",d)}}class gs extends Ms{constructor(l,d,y){super(l,"twitter.com",d,y)}}function Si(m){const{user:l,_tokenResponse:d}=m;return l.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function es(m){var l,d;if(!m)return null;const{providerId:y}=m,M=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},B=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!y&&m?.idToken){const ie=null===(d=null===(l=Zt(m.idToken))||void 0===l?void 0:l.firebase)||void 0===d?void 0:d.sign_in_provider;if(ie)return new pr(B,"anonymous"!==ie&&"custom"!==ie?ie:null)}if(!y)return null;switch(y){case"facebook.com":return new Ci(B,M);case"github.com":return new tn(B,M);case"google.com":return new Kr(B,M);case"twitter.com":return new gs(B,M,m.screenName||null);case"custom":case"anonymous":return new pr(B,null);default:return new pr(B,y,M)}}(d)}class hi{constructor(l,d,y){this.type=l,this.credential=d,this.user=y}static _fromIdtoken(l,d){return new hi("enroll",l,d)}static _fromMfaPendingCredential(l){return new hi("signin",l)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(l){var d,y;if(l?.multiFactorSession){if(null!==(d=l.multiFactorSession)&&void 0!==d&&d.pendingCredential)return hi._fromMfaPendingCredential(l.multiFactorSession.pendingCredential);if(null!==(y=l.multiFactorSession)&&void 0!==y&&y.idToken)return hi._fromIdtoken(l.multiFactorSession.idToken)}return null}}class Io{constructor(l,d,y){this.session=l,this.hints=d,this.signInResolver=y}static _fromError(l,d){const y=on(l),M=d.customData._serverResponse,B=(M.mfaInfo||[]).map(ve=>Gs._fromServerResponse(y,ve));Oe(M.mfaPendingCredential,y,"internal-error");const ie=hi._fromMfaPendingCredential(M.mfaPendingCredential);return new Io(ie,B,function(){var ve=(0,E.Z)(function*(Ye){const Tt=yield Ye._process(y,ie);delete M.mfaInfo,delete M.mfaPendingCredential;const Ft=Object.assign(Object.assign({},M),{idToken:Tt.idToken,refreshToken:Tt.refreshToken});switch(d.operationType){case"signIn":const xt=yield li._fromIdTokenResponse(y,d.operationType,Ft);return yield y._updateCurrentUser(xt.user),xt;case"reauthenticate":return Oe(d.user,y,"internal-error"),li._forOperation(d.user,d.operationType,Ft);default:ze(y,"internal-error")}});return function(Ye){return ve.apply(this,arguments)}}())}resolveSignIn(l){var d=this;return(0,E.Z)(function*(){return d.signInResolver(l)})()}}class qc{constructor(l){this.user=l,this.enrolledFactors=[],l._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(y=>Gs._fromServerResponse(l.auth,y)))})}static _fromUser(l){return new qc(l)}getSession(){var l=this;return(0,E.Z)(function*(){return hi._fromIdtoken(yield l.user.getIdToken(),l.user)})()}enroll(l,d){var y=this;return(0,E.Z)(function*(){const M=l,B=yield y.getSession(),ie=yield pt(y.user,M._process(y.user.auth,B,d));return yield y.user._updateTokensIfNecessary(ie),y.user.reload()})()}unenroll(l){var d=this;return(0,E.Z)(function*(){const y="string"==typeof l?l:l.uid,M=yield d.user.getIdToken();try{const B=yield pt(d.user,function Wc(m,l){return ce(m,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(m,l))}(d.user.auth,{idToken:M,mfaEnrollmentId:y}));d.enrolledFactors=d.enrolledFactors.filter(({uid:ie})=>ie!==y),yield d.user._updateTokensIfNecessary(B),yield d.user.reload()}catch(B){throw B}})()}}const Ko=new WeakMap,Zo="__sak";class ts{constructor(l,d){this.storageRetriever=l,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Zo,"1"),this.storage.removeItem(Zo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(l,d){return this.storage.setItem(l,JSON.stringify(d)),Promise.resolve()}_get(l){const d=this.storage.getItem(l);return Promise.resolve(d?JSON.parse(d):null)}_remove(l){return this.storage.removeItem(l),Promise.resolve()}get storage(){return this.storageRetriever()}}const To=(()=>{class m extends ts{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,y)=>this.onStorageEvent(d,y),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wo(){const m=(0,Z.z$)();return Bn(m)||rn(m)}()&&function Ot(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=At(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const y of Object.keys(this.listeners)){const M=this.storage.getItem(y),B=this.localCache[y];M!==B&&d(y,B,M)}}onStorageEvent(d,y=!1){if(!d.key)return void this.forAllChangedKeys((ve,Ye,Tt)=>{this.notifyListeners(ve,Tt)});const M=d.key;if(y?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(M);if(d.newValue!==ve)null!==d.newValue?this.storage.setItem(M,d.newValue):this.storage.removeItem(M);else if(this.localCache[M]===d.newValue&&!y)return}const B=()=>{const ve=this.storage.getItem(M);!y&&this.localCache[M]===ve||this.notifyListeners(M,ve)},ie=this.storage.getItem(M);!function Je(){return(0,Z.w1)()&&10===document.documentMode}()||ie===d.newValue||d.newValue===d.oldValue?B():setTimeout(B,10)}notifyListeners(d,y){this.localCache[d]=y;const M=this.listeners[d];if(M)for(const B of Array.from(M))B(y&&JSON.parse(y))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,y,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:y,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,y){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(y)}_removeListener(d,y){this.listeners[d]&&(this.listeners[d].delete(y),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,y){var M=()=>super._set,B=this;return(0,E.Z)(function*(){yield M().call(B,d,y),B.localCache[d]=JSON.stringify(y)})()}_get(d){var y=()=>super._get,M=this;return(0,E.Z)(function*(){const B=yield y().call(M,d);return M.localCache[d]=JSON.stringify(B),B})()}_remove(d){var y=()=>super._remove,M=this;return(0,E.Z)(function*(){yield y().call(M,d),delete M.localCache[d]})()}}return m.type="LOCAL",m})(),_n=(()=>{class m extends ts{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,y){}_removeListener(d,y){}}return m.type="SESSION",m})();let Qu=(()=>{class m{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const y=this.receivers.find(B=>B.isListeningto(d));if(y)return y;const M=new m(d);return this.receivers.push(M),M}isListeningto(d){return this.eventTarget===d}handleEvent(d){var y=this;return(0,E.Z)(function*(){const M=d,{eventId:B,eventType:ie,data:ve}=M.data,Ye=y.handlersMap[ie];if(!Ye?.size)return;M.ports[0].postMessage({status:"ack",eventId:B,eventType:ie});const Tt=Array.from(Ye).map(function(){var xt=(0,E.Z)(function*(Pr){return Pr(M.origin,ve)});return function(Pr){return xt.apply(this,arguments)}}()),Ft=yield function Zu(m){return Promise.all(m.map(function(){var l=(0,E.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(y){return{fulfilled:!1,reason:y}}});return function(d){return l.apply(this,arguments)}}()))}(Tt);M.ports[0].postMessage({status:"done",eventId:B,eventType:ie,response:Ft})})()}_subscribe(d,y){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(y)}_unsubscribe(d,y){this.handlersMap[d]&&y&&this.handlersMap[d].delete(y),(!y||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return m.receivers=[],m})();function Rr(m="",l=10){let d="";for(let y=0;y<l;y++)d+=Math.floor(10*Math.random());return m+d}class jl{constructor(l){this.target=l,this.handlers=new Set}removeMessageHandler(l){l.messageChannel&&(l.messageChannel.port1.removeEventListener("message",l.onMessage),l.messageChannel.port1.close()),this.handlers.delete(l)}_send(l,d,y=50){var M=this;return(0,E.Z)(function*(){const B=typeof MessageChannel<"u"?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let ie,ve;return new Promise((Ye,Tt)=>{const Ft=Rr("",20);B.port1.start();const xt=setTimeout(()=>{Tt(new Error("unsupported_event"))},y);ve={messageChannel:B,onMessage(Pr){const ri=Pr;if(ri.data.eventId===Ft)switch(ri.data.status){case"ack":clearTimeout(xt),ie=setTimeout(()=>{Tt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ie),Ye(ri.data.response);break;default:clearTimeout(xt),clearTimeout(ie),Tt(new Error("invalid_response"))}}},M.handlers.add(ve),B.port1.addEventListener("message",ve.onMessage),M.target.postMessage({eventType:l,eventId:Ft,data:d},[B.port2])}).finally(()=>{ve&&M.removeMessageHandler(ve)})})()}}function yn(){return window}function Da(){return typeof yn().WorkerGlobalScope<"u"&&"function"==typeof yn().importScripts}function Aa(){return(Aa=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fi="firebaseLocalStorageDb",Ca="firebaseLocalStorage",xs="fbase_key";class w{constructor(l){this.request=l}toPromise(){return new Promise((l,d)=>{this.request.addEventListener("success",()=>{l(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function C(m,l){return m.transaction([Ca],l?"readwrite":"readonly").objectStore(Ca)}function S(){const m=indexedDB.open(fi,1);return new Promise((l,d)=>{m.addEventListener("error",()=>{d(m.error)}),m.addEventListener("upgradeneeded",()=>{const y=m.result;try{y.createObjectStore(Ca,{keyPath:xs})}catch(M){d(M)}}),m.addEventListener("success",(0,E.Z)(function*(){const y=m.result;y.objectStoreNames.contains(Ca)?l(y):(y.close(),yield function v(){const m=indexedDB.deleteDatabase(fi);return new w(m).toPromise()}(),l(yield S()))}))})}function N(m,l,d){return z.apply(this,arguments)}function z(){return(z=(0,E.Z)(function*(m,l,d){const y=C(m,!0).put({[xs]:l,value:d});return new w(y).toPromise()})).apply(this,arguments)}function Ve(){return(Ve=(0,E.Z)(function*(m,l){const d=C(m,!1).get(l),y=yield new w(d).toPromise();return void 0===y?null:y.value})).apply(this,arguments)}function xe(m,l){const d=C(m,!0).delete(l);return new w(d).toPromise()}const Pn=(()=>{class m{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,E.Z)(function*(){return d.db||(d.db=yield S()),d.db})()}_withRetries(d){var y=this;return(0,E.Z)(function*(){let M=0;for(;;)try{const B=yield y._openDb();return yield d(B)}catch(B){if(M++>3)throw B;y.db&&(y.db.close(),y.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,E.Z)(function*(){return Da()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,E.Z)(function*(){d.receiver=Qu._getInstance(function Gd(){return Da()?self:null}()),d.receiver._subscribe("keyChanged",function(){var y=(0,E.Z)(function*(M,B){return{keyProcessed:(yield d._poll()).includes(B.key)}});return function(M,B){return y.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var y=(0,E.Z)(function*(M,B){return["keyChanged"]});return function(M,B){return y.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,E.Z)(function*(){var y,M;if(d.activeServiceWorker=yield function su(){return Aa.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new jl(d.activeServiceWorker);const B=yield d.sender._send("ping",{},800);B&&null!==(y=B[0])&&void 0!==y&&y.fulfilled&&null!==(M=B[0])&&void 0!==M&&M.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var y=this;return(0,E.Z)(function*(){if(y.sender&&y.activeServiceWorker&&function If(){var m;return(null===(m=navigator?.serviceWorker)||void 0===m?void 0:m.controller)||null}()===y.activeServiceWorker)try{yield y.sender._send("keyChanged",{key:d},y.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const d=yield S();return yield N(d,Zo,"1"),yield xe(d,Zo),!0}catch{}return!1})()}_withPendingWrite(d){var y=this;return(0,E.Z)(function*(){y.pendingWrites++;try{yield d()}finally{y.pendingWrites--}})()}_set(d,y){var M=this;return(0,E.Z)(function*(){return M._withPendingWrite((0,E.Z)(function*(){return yield M._withRetries(B=>N(B,d,y)),M.localCache[d]=y,M.notifyServiceWorker(d)}))})()}_get(d){var y=this;return(0,E.Z)(function*(){const M=yield y._withRetries(B=>function ne(m,l){return Ve.apply(this,arguments)}(B,d));return y.localCache[d]=M,M})()}_remove(d){var y=this;return(0,E.Z)(function*(){return y._withPendingWrite((0,E.Z)(function*(){return yield y._withRetries(M=>xe(M,d)),delete y.localCache[d],y.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,E.Z)(function*(){const y=yield d._withRetries(ie=>{const ve=C(ie,!1).getAll();return new w(ve).toPromise()});if(!y)return[];if(0!==d.pendingWrites)return[];const M=[],B=new Set;if(0!==y.length)for(const{fbase_key:ie,value:ve}of y)B.add(ie),JSON.stringify(d.localCache[ie])!==JSON.stringify(ve)&&(d.notifyListeners(ie,ve),M.push(ie));for(const ie of Object.keys(d.localCache))d.localCache[ie]&&!B.has(ie)&&(d.notifyListeners(ie,null),M.push(ie));return M})()}notifyListeners(d,y){this.localCache[d]=y;const M=this.listeners[d];if(M)for(const B of Array.from(M))B(y)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,y){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(y)}_removeListener(d,y){this.listeners[d]&&(this.listeners[d].delete(y),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return m.type="LOCAL",m})(),Sa=1e12;class bi{constructor(l){this.auth=l,this.counter=Sa,this._widgets=new Map}render(l,d){const y=this.counter;return this._widgets.set(y,new ba(l,this.auth.name,d||{})),this.counter++,y}reset(l){var d;const y=l||Sa;null===(d=this._widgets.get(y))||void 0===d||d.delete(),this._widgets.delete(y)}getResponse(l){var d;return(null===(d=this._widgets.get(l||Sa))||void 0===d?void 0:d.getResponse())||""}execute(l){var d=this;return(0,E.Z)(function*(){var y;return null===(y=d._widgets.get(l||Sa))||void 0===y||y.execute(),""})()}}class ba{constructor(l,d,y){this.params=y,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof l?document.getElementById(l):l;Oe(M,"argument-error",{appName:d}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function mr(m){const l=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<m;y++)l.push(d.charAt(Math.floor(62*Math.random())));return l.join("")}(50);const{callback:l,"expired-callback":d}=this.params;if(l)try{l(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ns=Uo("rcb"),wf=new _e(3e4,6e4);class Tf{constructor(){var l;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(l=yn().grecaptcha)||void 0===l||!l.render)}load(l,d=""){return Oe(function Wd(m){return m.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(m)}(d),l,"argument-error"),this.shouldResolveImmediately(d)&&Wn(yn().grecaptcha)?Promise.resolve(yn().grecaptcha):new Promise((y,M)=>{const B=yn().setTimeout(()=>{M(pe(l,"network-request-failed"))},wf.get());yn()[Ns]=()=>{yn().clearTimeout(B),delete yn()[Ns];const ve=yn().grecaptcha;if(!ve||!Wn(ve))return void M(pe(l,"internal-error"));const Ye=ve.render;ve.render=(Tt,Ft)=>{const xt=Ye(Tt,Ft);return this.counter++,xt},this.hostLanguage=d,y(ve)},zr(`${function lo(){return _i.recaptchaV2Script}()}?${(0,Z.xO)({onload:Ns,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(B),M(pe(l,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(l){var d;return!(null===(d=yn().grecaptcha)||void 0===d||!d.render)&&(l===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class qd{load(l){return(0,E.Z)(function*(){return new bi(l)})()}clearedOneInstance(){}}const $l="recaptcha",Kc={theme:"light",type:"image"};class Ra{constructor(l,d,y=Object.assign({},Kc)){this.parameters=y,this.type=$l,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=on(l),this.isInvisible="invisible"===this.parameters.size,Oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof d?document.getElementById(d):d;Oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qd:new Tf,this.validateStartingState()}verify(){var l=this;return(0,E.Z)(function*(){l.assertNotDestroyed();const d=yield l.render(),y=l.getAssertedRecaptcha();return y.getResponse(d)||new Promise(B=>{const ie=ve=>{ve&&(l.tokenChangeListeners.delete(ie),B(ve))};l.tokenChangeListeners.add(ie),l.isInvisible&&y.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(l){return Promise.reject(l)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(l=>{throw this.renderPromise=null,l})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(l=>{this.container.removeChild(l)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(l){return d=>{if(this.tokenChangeListeners.forEach(y=>y(d)),"function"==typeof l)l(d);else if("string"==typeof l){const y=yn()[l];"function"==typeof y&&y(d)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var l=this;return(0,E.Z)(function*(){if(yield l.init(),!l.widgetId){let d=l.container;if(!l.isInvisible){const y=document.createElement("div");d.appendChild(y),d=y}l.widgetId=l.getAssertedRecaptcha().render(d,l.parameters)}return l.widgetId})()}init(){var l=this;return(0,E.Z)(function*(){Oe(_r()&&!Da(),l.auth,"internal-error"),yield function ag(){let m=null;return new Promise(l=>{"complete"!==document.readyState?(m=()=>l(),window.addEventListener("load",m)):l()}).catch(l=>{throw m&&window.removeEventListener("load",m),l})}(),l.recaptcha=yield l._recaptchaLoader.load(l.auth,l.auth.languageCode||void 0);const d=yield function oi(m){return Yr.apply(this,arguments)}(l.auth);Oe(d,l.auth,"internal-error"),l.parameters.sitekey=d})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Do{constructor(l,d){this.verificationId=l,this.onConfirmation=d}confirm(l){const d=ar._fromVerification(this.verificationId,l);return this.onConfirmation(d)}}function Ju(){return(Ju=(0,E.Z)(function*(m,l,d){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const y=on(m),M=yield Yo(y,l,(0,Z.m9)(d));return new Do(M,B=>In(y,B))})).apply(this,arguments)}function au(){return(au=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m);yield ma(!1,y,"phone");const M=yield Yo(y.auth,l,(0,Z.m9)(d));return new Do(M,B=>Ji(y,B))})).apply(this,arguments)}function zl(){return(zl=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m);if((0,Q._isFirebaseServerApp)(y.auth.app))return Promise.reject(Ze(y.auth));const M=yield Yo(y.auth,l,(0,Z.m9)(d));return new Do(M,B=>fr(y,B))})).apply(this,arguments)}function Yo(m,l,d){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,E.Z)(function*(m,l,d){var y;const M=yield d.verify();try{let B;if(Oe("string"==typeof M,m,"argument-error"),Oe(d.type===$l,m,"argument-error"),B="string"==typeof l?{phoneNumber:l}:l,"session"in B){const ie=B.session;if("phoneNumber"in B)return Oe("enroll"===ie.type,m,"internal-error"),(yield function jd(m,l){return ce(m,"POST","/v2/accounts/mfaEnrollment:start",Qe(m,l))}(m,{idToken:ie.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{Oe("signin"===ie.type,m,"internal-error");const ve=(null===(y=B.multiFactorHint)||void 0===y?void 0:y.uid)||B.multiFactorUid;return Oe(ve,m,"missing-multi-factor-info"),(yield function ns(m,l){return ce(m,"POST","/v2/accounts/mfaSignIn:start",Qe(m,l))}(m,{mfaPendingCredential:ie.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ie}=yield function Ur(m,l){return eu.apply(this,arguments)}(m,{phoneNumber:B.phoneNumber,recaptchaToken:M});return ie}}finally{d._reset()}}),Pa.apply(this,arguments)}function Df(){return(Df=(0,E.Z)(function*(m,l){const d=(0,Z.m9)(m);if((0,Q._isFirebaseServerApp)(d.auth.app))return Promise.reject(Ze(d.auth));yield nr(d,l)})).apply(this,arguments)}let uu=(()=>{class m{constructor(d){this.providerId=m.PROVIDER_ID,this.auth=on(d)}verifyPhoneNumber(d,y){return Yo(this.auth,d,(0,Z.m9)(y))}static credential(d,y){return ar._fromVerification(d,y)}static credentialFromResult(d){return m.credentialFromTaggedObject(d)}static credentialFromError(d){return m.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:y,temporaryProof:M}=d;return y&&M?ar._fromTokenResponse(y,M):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function ys(m,l){return l?Et(l):(Oe(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Ma extends ls{constructor(l){super("custom","custom"),this.params=l}_getIdTokenResponse(l){return dn(l,this._buildIdpRequest())}_linkToIdToken(l,d){return dn(l,this._buildIdpRequest(d))}_getReauthenticationResolver(l){return dn(l,this._buildIdpRequest())}_buildIdpRequest(l){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return l&&(d.idToken=l),d}}function Af(m){return nu(m.auth,new Ma(m),m.bypassAuthState)}function I_(m){const{auth:l,user:d}=m;return Oe(d,l,"internal-error"),go(d,new Ma(m),m.bypassAuthState)}function cg(m){return vs.apply(this,arguments)}function vs(){return(vs=(0,E.Z)(function*(m){const{auth:l,user:d}=m;return Oe(d,l,"internal-error"),nr(d,new Ma(m),m.bypassAuthState)})).apply(this,arguments)}class cu{constructor(l,d,y,M,B=!1){this.auth=l,this.resolver=y,this.user=M,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var l=this;return new Promise(function(){var d=(0,E.Z)(function*(y,M){l.pendingPromise={resolve:y,reject:M};try{l.eventManager=yield l.resolver._initialize(l.auth),yield l.onExecution(),l.eventManager.registerConsumer(l)}catch(B){l.reject(B)}});return function(y,M){return d.apply(this,arguments)}}())}onAuthEvent(l){var d=this;return(0,E.Z)(function*(){const{urlResponse:y,sessionId:M,postBody:B,tenantId:ie,error:ve,type:Ye}=l;if(ve)return void d.reject(ve);const Tt={auth:d.auth,requestUri:y,sessionId:M,tenantId:ie||void 0,postBody:B||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Ye)(Tt))}catch(Ft){d.reject(Ft)}})()}onError(l){this.reject(l)}getIdpTask(l){switch(l){case"signInViaPopup":case"signInViaRedirect":return Af;case"linkViaPopup":case"linkViaRedirect":return cg;case"reauthViaPopup":case"reauthViaRedirect":return I_;default:ze(this.auth,"internal-error")}}resolve(l){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(l),this.unregisterAndCleanUp()}reject(l){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(l),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lg=new _e(2e3,1e4);function xa(){return(xa=(0,E.Z)(function*(m,l,d){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(pe(m,"operation-not-supported-in-this-environment"));const y=on(m);dt(m,l,ei);const M=ys(y,d);return new Gl(y,"signInViaPopup",l,M).executeNotNull()})).apply(this,arguments)}function Na(){return(Na=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m);if((0,Q._isFirebaseServerApp)(y.auth.app))return Promise.reject(pe(y.auth,"operation-not-supported-in-this-environment"));dt(y.auth,l,ei);const M=ys(y.auth,d);return new Gl(y.auth,"reauthViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}function ka(){return(ka=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m);dt(y.auth,l,ei);const M=ys(y.auth,d);return new Gl(y.auth,"linkViaPopup",l,M,y).executeNotNull()})).apply(this,arguments)}let Gl=(()=>{class m extends cu{constructor(d,y,M,B,ie){super(d,y,B,ie),this.provider=M,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var d=this;return(0,E.Z)(function*(){const y=yield d.execute();return Oe(y,d.auth,"internal-error"),y})()}onExecution(){var d=this;return(0,E.Z)(function*(){Zn(1===d.filter.length,"Popup operations only handle one event");const y=Rr();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],y),d.authWindow.associatedEvent=y,d.resolver._originValidation(d.auth).catch(M=>{d.reject(M)}),d.resolver._isIframeWebStorageSupported(d.auth,M=>{M||d.reject(pe(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const d=()=>{var y,M;this.pollId=null!==(M=null===(y=this.authWindow)||void 0===y?void 0:y.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,lg.get())};d()}}return m.currentPopupAction=null,m})();const Os="pendingRedirect",lu=new Map;class Zc extends cu{constructor(l,d,y=!1){super(l,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,y),this.eventId=null}execute(){var l=()=>super.execute,d=this;return(0,E.Z)(function*(){let y=lu.get(d.auth._key());if(!y){try{const B=(yield function Wl(m,l){return ql.apply(this,arguments)}(d.resolver,d.auth))?yield l().call(d):null;y=()=>Promise.resolve(B)}catch(M){y=()=>Promise.reject(M)}lu.set(d.auth._key(),y)}return d.bypassAuthState||lu.set(d.auth._key(),()=>Promise.resolve(null)),y()})()}onAuthEvent(l){var d=()=>super.onAuthEvent,y=this;return(0,E.Z)(function*(){if("signInViaRedirect"===l.type)return d().call(y,l);if("unknown"!==l.type){if(l.eventId){const M=yield y.auth._redirectUserForId(l.eventId);if(M)return y.user=M,d().call(y,l);y.resolve(null)}}else y.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function ql(){return(ql=(0,E.Z)(function*(m,l){const d=Zd(l),y=Jo(m);if(!(yield y._isAvailable()))return!1;const M="true"===(yield y._get(d));return yield y._remove(d),M})).apply(this,arguments)}function du(m,l){return ec.apply(this,arguments)}function ec(){return(ec=(0,E.Z)(function*(m,l){return Jo(m)._set(Zd(l),"true")})).apply(this,arguments)}function La(m,l){lu.set(m._key(),l)}function Jo(m){return Et(m._redirectPersistence)}function Zd(m){return mt(Os,m.config.apiKey,m.name)}function Qd(m,l,d){return function dg(m,l,d){return tc.apply(this,arguments)}(m,l,d)}function tc(){return(tc=(0,E.Z)(function*(m,l,d){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const y=on(m);dt(m,l,ei),yield y._initializationPromise;const M=ys(y,d);return yield du(M,y),M._openRedirect(y,l,"signInViaRedirect")})).apply(this,arguments)}function hu(m,l,d){return function Qc(m,l,d){return Co.apply(this,arguments)}(m,l,d)}function Co(){return(Co=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m);if(dt(y.auth,l,ei),(0,Q._isFirebaseServerApp)(y.auth.app))return Promise.reject(Ze(y.auth));yield y.auth._initializationPromise;const M=ys(y.auth,d);yield du(M,y.auth);const B=yield Jd(y);return M._openRedirect(y.auth,l,"reauthViaRedirect",B)})).apply(this,arguments)}function Xo(m,l,d){return function nc(m,l,d){return Zl.apply(this,arguments)}(m,l,d)}function Zl(){return(Zl=(0,E.Z)(function*(m,l,d){const y=(0,Z.m9)(m);dt(y.auth,l,ei),yield y.auth._initializationPromise;const M=ys(y.auth,d);yield ma(!1,y,l.providerId),yield du(M,y.auth);const B=yield Jd(y);return M._openRedirect(y.auth,l,"linkViaRedirect",B)})).apply(this,arguments)}function Yd(){return(Yd=(0,E.Z)(function*(m,l){return yield on(m)._initializationPromise,fu(m,l,!1)})).apply(this,arguments)}function fu(m,l){return pu.apply(this,arguments)}function pu(){return(pu=(0,E.Z)(function*(m,l,d=!1){if((0,Q._isFirebaseServerApp)(m.app))return Promise.reject(Ze(m));const y=on(m),M=ys(y,l),ie=yield new Zc(y,M,d).execute();return ie&&!d&&(delete ie.user._redirectEventId,yield y._persistUserIfCurrent(ie.user),yield y._setRedirectUser(null,l)),ie})).apply(this,arguments)}function Jd(m){return rc.apply(this,arguments)}function rc(){return(rc=(0,E.Z)(function*(m){const l=Rr(`${m.uid}:::`);return m._redirectEventId=l,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),l})).apply(this,arguments)}class Fa{constructor(l){this.auth=l,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(l){this.consumers.add(l),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,l)&&(this.sendToConsumer(this.queuedRedirectEvent,l),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(l){this.consumers.delete(l)}onEvent(l){if(this.hasEventBeenHandled(l))return!1;let d=!1;return this.consumers.forEach(y=>{this.isEventForConsumer(l,y)&&(d=!0,this.sendToConsumer(l,y),this.saveEventToCache(l))}),this.hasHandledPotentialRedirect||!function Ql(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gu(m);default:return!1}}(l)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=l,d=!0)),d}sendToConsumer(l,d){var y;if(l.error&&!gu(l)){const M=(null===(y=l.error.code)||void 0===y?void 0:y.split("auth/")[1])||"internal-error";d.onError(pe(this.auth,M))}else d.onAuthEvent(l)}isEventForConsumer(l,d){const y=null===d.eventId||!!l.eventId&&l.eventId===d.eventId;return d.filter.includes(l.type)&&y}hasEventBeenHandled(l){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(So(l))}saveEventToCache(l){this.cachedEventUids.add(So(l)),this.lastProcessedEventTime=Date.now()}}function So(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(l=>l).join("-")}function gu({type:m,error:l}){return"unknown"===m&&"auth/no-auth-event"===l?.code}function mu(m){return Va.apply(this,arguments)}function Va(){return(Va=(0,E.Z)(function*(m,l={}){return ce(m,"GET","/v1/projects",l)})).apply(this,arguments)}const hg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ic=/^https?/;function _u(){return(_u=(0,E.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:l}=yield mu(m);for(const d of l)try{if(fg(d))return}catch{}ze(m,"unauthorized-domain")})).apply(this,arguments)}function fg(m){const l=On(),{protocol:d,hostname:y}=new URL(l);if(m.startsWith("chrome-extension://")){const ie=new URL(m);return""===ie.hostname&&""===y?"chrome-extension:"===d&&m.replace("chrome-extension://","")===l.replace("chrome-extension://",""):"chrome-extension:"===d&&ie.hostname===y}if(!ic.test(d))return!1;if(hg.test(m))return y===m;const M=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(y)}const pg=new _e(3e4,6e4);function ki(){const m=yn().___jsl;if(m?.H)for(const l of Object.keys(m.H))if(m.H[l].r=m.H[l].r||[],m.H[l].L=m.H[l].L||[],m.H[l].r=[...m.H[l].L],m.CP)for(let d=0;d<m.CP.length;d++)m.CP[d]=null}let ks=null;const Cf=new _e(5e3,15e3),Er="__/auth/iframe",sc="emulator/auth/iframe",oc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ls(m){const l=m.config;Oe(l.authDomain,m,"auth-domain-config-required");const d=l.emulator?Ae(l,sc):`https://${m.config.authDomain}/${Er}`,y={apiKey:l.apiKey,appName:m.name,v:Q.SDK_VERSION},M=yu.get(m.config.apiHost);M&&(y.eid=M);const B=m._getFrameworks();return B.length&&(y.fw=B.join(",")),`${d}?${(0,Z.xO)(y).slice(1)}`}function Jc(){return Jc=(0,E.Z)(function*(m){const l=yield function Jl(m){return ks=ks||function gg(m){return new Promise((l,d)=>{var y,M,B;function ie(){ki(),gapi.load("gapi.iframes",{callback:()=>{l(gapi.iframes.getContext())},ontimeout:()=>{ki(),d(pe(m,"network-request-failed"))},timeout:pg.get()})}if(null!==(M=null===(y=yn().gapi)||void 0===y?void 0:y.iframes)&&void 0!==M&&M.Iframe)l(gapi.iframes.getContext());else{if(null===(B=yn().gapi)||void 0===B||!B.load){const ve=Uo("iframefcb");return yn()[ve]=()=>{gapi.load?ie():d(pe(m,"network-request-failed"))},zr(`${function Vu(){return _i.gapiScript}()}?onload=${ve}`).catch(Ye=>d(Ye))}ie()}}).catch(l=>{throw ks=null,l})}(m),ks}(m),d=yn().gapi;return Oe(d,m,"internal-error"),l.open({where:document.body,url:Ls(m),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oc,dontclear:!0},y=>new Promise(function(){var M=(0,E.Z)(function*(B,ie){yield y.restyle({setHideOnLeave:!1});const ve=pe(m,"network-request-failed"),Ye=yn().setTimeout(()=>{ie(ve)},Cf.get());function Tt(){yn().clearTimeout(Ye),B(y)}y.ping(Tt).then(Tt,()=>{ie(ve)})});return function(B,ie){return M.apply(this,arguments)}}()))}),Jc.apply(this,arguments)}const Xs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sf{constructor(l){this.window=l,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const vu="__/auth/handler",w_="emulator/auth/handler",Xd=encodeURIComponent("fac");function eh(m,l,d,y,M,B){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,E.Z)(function*(m,l,d,y,M,B){Oe(m.config.authDomain,m,"auth-domain-config-required"),Oe(m.config.apiKey,m,"invalid-api-key");const ie={apiKey:m.config.apiKey,appName:m.name,authType:d,redirectUrl:y,v:Q.SDK_VERSION,eventId:M};if(l instanceof ei){l.setDefaultLanguage(m.languageCode),ie.providerId=l.providerId||"",(0,Z.xb)(l.getCustomParameters())||(ie.customParameters=JSON.stringify(l.getCustomParameters()));for(const[Ft,xt]of Object.entries(B||{}))ie[Ft]=xt}if(l instanceof Hn){const Ft=l.getScopes().filter(xt=>""!==xt);Ft.length>0&&(ie.scopes=Ft.join(","))}m.tenantId&&(ie.tid=m.tenantId);const ve=ie;for(const Ft of Object.keys(ve))void 0===ve[Ft]&&delete ve[Ft];const Ye=yield m._getAppCheckToken(),Tt=Ye?`#${Xd}=${encodeURIComponent(Ye)}`:"";return`${function Eu({config:m}){return m.emulator?Ae(m,w_):`https://${m.authDomain}/${vu}`}(m)}?${(0,Z.xO)(ve).slice(1)}${Tt}`})).apply(this,arguments)}const Iu="webStorageSupport",th=class bf{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_n,this._completeRedirectFn=fu,this._overrideRedirectResult=La}_openPopup(l,d,y,M){var B=this;return(0,E.Z)(function*(){var ie;Zn(null===(ie=B.eventManagers[l._key()])||void 0===ie?void 0:ie.manager,"_initialize() not called before _openPopup()");const ve=yield eh(l,d,y,On(),M);return function Es(m,l,d,y=500,M=600){const B=Math.max((window.screen.availHeight-M)/2,0).toString(),ie=Math.max((window.screen.availWidth-y)/2,0).toString();let ve="";const Ye=Object.assign(Object.assign({},Xs),{width:y.toString(),height:M.toString(),top:B,left:ie}),Tt=(0,Z.z$)().toLowerCase();d&&(ve=vt(Tt)?"_blank":d),Ki(Tt)&&(l=l||"http://localhost",Ye.scrollbars="yes");const Ft=Object.entries(Ye).reduce((Pr,[ri,Ec])=>`${Pr}${ri}=${Ec},`,"");if(function Ee(m=(0,Z.z$)()){var l;return rn(m)&&!(null===(l=window.navigator)||void 0===l||!l.standalone)}(Tt)&&"_self"!==ve)return function uc(m,l){const d=document.createElement("a");d.href=m,d.target=l;const y=document.createEvent("MouseEvent");y.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(y)}(l||"",ve),new Sf(null);const xt=window.open(l||"",ve,Ft);Oe(xt,m,"popup-blocked");try{xt.focus()}catch{}return new Sf(xt)}(l,ve,Rr())})()}_openRedirect(l,d,y,M){var B=this;return(0,E.Z)(function*(){return yield B._originValidation(l),function vn(m){yn().location.href=m}(yield eh(l,d,y,On(),M)),new Promise(()=>{})})()}_initialize(l){const d=l._key();if(this.eventManagers[d]){const{manager:M,promise:B}=this.eventManagers[d];return M?Promise.resolve(M):(Zn(B,"If manager is not set, promise should be"),B)}const y=this.initAndGetManager(l);return this.eventManagers[d]={promise:y},y.catch(()=>{delete this.eventManagers[d]}),y}initAndGetManager(l){var d=this;return(0,E.Z)(function*(){const y=yield function Js(m){return Jc.apply(this,arguments)}(l),M=new Fa(l);return y.register("authEvent",B=>(Oe(B?.authEvent,l,"invalid-auth-event"),{status:M.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[l._key()]={manager:M},d.iframes[l._key()]=y,M})()}_isIframeWebStorageSupported(l,d){this.iframes[l._key()].send(Iu,{type:Iu},M=>{var B;const ie=null===(B=M?.[0])||void 0===B?void 0:B[Iu];void 0!==ie&&d(!!ie),ze(l,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function Yl(m){return _u.apply(this,arguments)}(l)),this.originValidationPromises[d]}get _shouldInitProactively(){return At()||Bn()||rn()}};class nh{constructor(l){this.factorId=l}_process(l,d,y){switch(d.type){case"enroll":return this._finalizeEnroll(l,d.credential,y);case"signin":return this._finalizeSignIn(l,d.credential);default:return Xt("unexpected MultiFactorSessionType")}}}class wu extends nh{constructor(l){super("phone"),this.credential=l}static _fromCredential(l){return new wu(l)}_finalizeEnroll(l,d,y){return function wr(m,l){return ce(m,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(m,l))}(l,{idToken:d,displayName:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(l,d){return function _s(m,l){return ce(m,"POST","/v2/accounts/mfaSignIn:finalize",Qe(m,l))}(l,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let vg=(()=>{class m{constructor(){}static assertion(d){return wu._fromCredential(d)}}return m.FACTOR_ID="phone",m})();var ih="@firebase/auth";class nd{constructor(l){this.auth=l,this.internalListeners=new Map}getUid(){var l;return this.assertAuthConfigured(),(null===(l=this.auth.currentUser)||void 0===l?void 0:l.uid)||null}getToken(l){var d=this;return(0,E.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(l)}:null})()}addAuthTokenListener(l){if(this.assertAuthConfigured(),this.internalListeners.has(l))return;const d=this.auth.onIdTokenChanged(y=>{l(y?.stsTokenManager.accessToken||null)});this.internalListeners.set(l,d),this.updateProactiveRefresh()}removeAuthTokenListener(l){this.assertAuthConfigured();const d=this.internalListeners.get(l);d&&(this.internalListeners.delete(l),d(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function eo(){return window}(0,Z.Pz)("authIdTokenMaxAge"),function Zi(m){_i=m}({loadJS:m=>new Promise((l,d)=>{const y=document.createElement("script");y.setAttribute("src",m),y.onload=l,y.onerror=M=>{const B=pe("internal-error");B.customData=M,d(B)},y.type="text/javascript",y.charset="UTF-8",function sd(){var m,l;return null!==(l=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==l?l:document}().appendChild(y)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Eg(m){(0,Q._registerComponent)(new me.wA("auth",(l,{options:d})=>{const y=l.getProvider("app").getImmediate(),M=l.getProvider("heartbeat"),B=l.getProvider("app-check-internal"),{apiKey:ie,authDomain:ve}=y.options;Oe(ie&&!ie.includes(":"),"invalid-api-key",{appName:y.name});const Ye={apiKey:ie,authDomain:ve,clientPlatform:m,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$t(m)},Tt=new Hr(y,M,B,Ye);return function aa(m,l){const d=l?.persistence||[],y=(Array.isArray(d)?d:[d]).map(Et);l?.errorMap&&m._updateErrorMap(l.errorMap),m._initializeWithPersistence(y,l?.popupRedirectResolver)}(Tt,d),Tt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((l,d,y)=>{l.getProvider("auth-internal").initialize()})),(0,Q._registerComponent)(new me.wA("auth-internal",l=>{const d=on(l.getProvider("auth").getImmediate());return new nd(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)(ih,"1.7.5",function rd(m){switch(m){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(m)),(0,Q.registerVersion)(ih,"1.7.5","esm2017")}("Browser");function el(){return el=(0,E.Z)(function*(m,l,d){var y;const{BuildInfo:M}=eo();Zn(l.sessionId,"AuthEvent did not contain a session ID");const B=yield function Nf(m){return ah.apply(this,arguments)}(l.sessionId),ie={};return rn()?ie.ibi=M.packageName:ai()?ie.apn=M.packageName:ze(m,"operation-not-supported-in-this-environment"),M.displayName&&(ie.appDisplayName=M.displayName),ie.sessionId=B,eh(m,d,l.type,void 0,null!==(y=l.eventId)&&void 0!==y?y:void 0,ie)}),el.apply(this,arguments)}function Tu(){return(Tu=(0,E.Z)(function*(m){const{BuildInfo:l}=eo(),d={};rn()?d.iosBundleId=l.packageName:ai()?d.androidPackageName=l.packageName:ze(m,"operation-not-supported-in-this-environment"),yield mu(m,d)})).apply(this,arguments)}function tl(){return(tl=(0,E.Z)(function*(m,l,d){const{cordova:y}=eo();let M=()=>{};try{yield new Promise((B,ie)=>{let ve=null;function Ye(){var xt;B();const Pr=null===(xt=y.plugins.browsertab)||void 0===xt?void 0:xt.close;"function"==typeof Pr&&Pr(),"function"==typeof d?.close&&d.close()}function Tt(){ve||(ve=window.setTimeout(()=>{ie(pe(m,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&Tt()}l.addPassiveListener(Ye),document.addEventListener("resume",Tt,!1),ai()&&document.addEventListener("visibilitychange",Ft,!1),M=()=>{l.removePassiveListener(Ye),document.removeEventListener("resume",Tt,!1),document.removeEventListener("visibilitychange",Ft,!1),ve&&window.clearTimeout(ve)}})}finally{M()}})).apply(this,arguments)}function ah(){return(ah=(0,E.Z)(function*(m){const l=function Tg(m){if(Zn(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const l=new ArrayBuffer(m.length),d=new Uint8Array(l);for(let y=0;y<m.length;y++)d[y]=m.charCodeAt(y);return d}(m),d=yield crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class uh extends Fa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(l=>{this.resolveInialized=l})}addPassiveListener(l){this.passiveListeners.add(l)}removePassiveListener(l){this.passiveListeners.delete(l)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(l){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(l)),super.onEvent(l)}initialized(){var l=this;return(0,E.Z)(function*(){yield l.initPromise})()}}function lc(m){return il.apply(this,arguments)}function il(){return(il=(0,E.Z)(function*(m){const l=yield ch()._get(kf(m));return l&&(yield ch()._remove(kf(m))),l})).apply(this,arguments)}function Ag(){const m=[];for(let d=0;d<20;d++){const y=Math.floor(62*Math.random());m.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(y))}return m.join("")}function ch(){return Et(To)}function kf(m){return mt("authEvent",m.config.apiKey,m.name)}function ta(m){if(!m?.includes("?"))return{};const[l,...d]=m.split("?");return(0,Z.zd)(d.join("?"))}const ad=class hh{constructor(){this._redirectPersistence=_n,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=fu,this._overrideRedirectResult=La}_initialize(l){var d=this;return(0,E.Z)(function*(){const y=l._key();let M=d.eventManagers.get(y);return M||(M=new uh(l),d.eventManagers.set(y,M),d.attachCallbackListeners(l,M)),M})()}_openPopup(l){ze(l,"operation-not-supported-in-this-environment")}_openRedirect(l,d,y,M){var B=this;return(0,E.Z)(function*(){!function xf(m){var l,d,y,M,B,ie,ve,Ye,Tt,Ft;const xt=eo();Oe("function"==typeof(null===(l=xt?.universalLinks)||void 0===l?void 0:l.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oe(typeof(null===(d=xt?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oe("function"==typeof(null===(B=null===(M=null===(y=xt?.cordova)||void 0===y?void 0:y.plugins)||void 0===M?void 0:M.browsertab)||void 0===B?void 0:B.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(Ye=null===(ve=null===(ie=xt?.cordova)||void 0===ie?void 0:ie.plugins)||void 0===ve?void 0:ve.browsertab)||void 0===Ye?void 0:Ye.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(Ft=null===(Tt=xt?.cordova)||void 0===Tt?void 0:Tt.InAppBrowser)||void 0===Ft?void 0:Ft.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(l);const ie=yield B._initialize(l);yield ie.initialized(),ie.resetRedirect(),function Kl(){lu.clear()}(),yield B._originValidation(l);const ve=function nl(m,l,d=null){return{type:l,eventId:d,urlResponse:null,sessionId:Ag(),postBody:null,tenantId:m.tenantId,error:pe(m,"no-auth-event")}}(l,y,M);yield function rl(m,l){return ch()._set(kf(m),l)}(l,ve);const Ye=yield function oh(m,l,d){return el.apply(this,arguments)}(l,ve,d),Tt=yield function Pf(m){const{cordova:l}=eo();return new Promise(d=>{l.plugins.browsertab.isAvailable(y=>{let M=null;y?l.plugins.browsertab.openUrl(m):M=l.InAppBrowser.open(m,function Le(m=(0,Z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),d(M)})})}(Ye);return function Mf(m,l,d){return tl.apply(this,arguments)}(l,ie,Tt)})()}_isIframeWebStorageSupported(l,d){throw new Error("Method not implemented.")}_originValidation(l){const d=l._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function wg(m){return Tu.apply(this,arguments)}(l)),this.originValidationPromises[d]}attachCallbackListeners(l,d){const{universalLinks:y,handleOpenURL:M,BuildInfo:B}=eo(),ie=setTimeout((0,E.Z)(function*(){yield lc(l),d.onEvent(bo())}),500),ve=function(){var Ft=(0,E.Z)(function*(xt){clearTimeout(ie);const Pr=yield lc(l);let ri=null;Pr&&xt?.url&&(ri=function Dg(m,l){var d,y;const M=function od(m){const l=ta(m),d=l.link?decodeURIComponent(l.link):void 0,y=ta(d).link,M=l.deep_link_id?decodeURIComponent(l.deep_link_id):void 0;return ta(M).link||M||y||d||m}(l);if(M.includes("/__/auth/callback")){const B=ta(M),ie=B.firebaseError?function lh(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(B.firebaseError)):null,ve=null===(y=null===(d=ie?.code)||void 0===d?void 0:d.split("auth/"))||void 0===y?void 0:y[1],Ye=ve?pe(ve):null;return Ye?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:Ye,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:M,postBody:null}}return null}(Pr,xt.url)),d.onEvent(ri||bo())});return function(Pr){return Ft.apply(this,arguments)}}();typeof y<"u"&&"function"==typeof y.subscribe&&y.subscribe(null,ve);const Ye=M,Tt=`${B.packageName.toLowerCase()}://`;eo().handleOpenURL=function(){var Ft=(0,E.Z)(function*(xt){if(xt.toLowerCase().startsWith(Tt)&&ve({url:xt}),"function"==typeof Ye)try{Ye(xt)}catch(Pr){console.error(Pr)}});return function(xt){return Ft.apply(this,arguments)}}()}};function bo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pe("no-auth-event")}}function Ro(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function Ff(m=(0,Z.z$)()){return!("file:"!==Ro()&&"ionic:"!==Ro()&&"capacitor:"!==Ro()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}function Uf(){try{const m=self.localStorage,l=Rr();if(m)return m.setItem(l,"1"),m.removeItem(l),!function Cg(m=(0,Z.z$)()){return function ol(){return(0,Z.w1)()&&11===document?.documentMode}()||function al(m=(0,Z.z$)()){return/Edge\/\d+/.test(m)}(m)}()||(0,Z.hl)()}catch{return pi()&&(0,Z.hl)()}return!1}function pi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ud(){return(function Lf(){return"http:"===Ro()||"https:"===Ro()}()||(0,Z.ru)()||Ff())&&!function Vf(){return(0,Z.b$)()||(0,Z.UG)()}()&&Uf()&&!pi()}function fh(){return Ff()&&typeof document<"u"}function Zr(){return(Zr=(0,E.Z)(function*(){return!!fh()&&new Promise(m=>{const l=setTimeout(()=>{m(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(l),m(!0)})})})).apply(this,arguments)}const Wi={LOCAL:"local",NONE:"none",SESSION:"session"},Du=Oe,Ri="persistence";function ld(m){return dd.apply(this,arguments)}function dd(){return(dd=(0,E.Z)(function*(m){yield m._initializationPromise;const l=dl(),d=mt(Ri,m.config.apiKey,m.name);l&&l.setItem(d,m._getPersistence())})).apply(this,arguments)}function dl(){var m;try{return(null===(m=function ul(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}const pc=Oe;class to{constructor(){this.browserResolver=Et(th),this.cordovaResolver=Et(ad),this.underlyingResolver=null,this._redirectPersistence=_n,this._completeRedirectFn=fu,this._overrideRedirectResult=La}_initialize(l){var d=this;return(0,E.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(l)})()}_openPopup(l,d,y,M){var B=this;return(0,E.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openPopup(l,d,y,M)})()}_openRedirect(l,d,y,M){var B=this;return(0,E.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openRedirect(l,d,y,M)})()}_isIframeWebStorageSupported(l,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(l,d)}_originValidation(l){return this.assertedUnderlyingResolver._originValidation(l)}get _shouldInitProactively(){return fh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var l=this;return(0,E.Z)(function*(){if(l.underlyingResolver)return;const d=yield function cd(){return Zr.apply(this,arguments)}();l.underlyingResolver=d?l.cordovaResolver:l.browserResolver})()}}function hl(m){return m.unwrap()}function ph(m){return gc(m)}function gc(m){const{_tokenResponse:l}=m instanceof Z.ZR?m.customData:m;if(!l)return null;if(!(m instanceof Z.ZR)&&"temporaryProof"in l&&"phoneNumber"in l)return uu.credentialFromResult(m);const d=l.providerId;if(!d||d===De.PASSWORD)return null;let y;switch(d){case De.GOOGLE:y=wi;break;case De.FACEBOOK:y=Hi;break;case De.GITHUB:y=Ti;break;case De.TWITTER:y=ha;break;default:const{oauthIdToken:M,oauthAccessToken:B,oauthTokenSecret:ie,pendingToken:ve,nonce:Ye}=l;return B||ie||M||ve?ve?d.startsWith("saml.")?zi._create(d,ve):or._fromParams({providerId:d,signInMethod:d,pendingToken:ve,idToken:M,accessToken:B}):new ur(d).credential({idToken:M,accessToken:B,rawNonce:Ye}):null}return m instanceof Z.ZR?y.credentialFromError(m):y.credentialFromResult(m)}function gi(m,l){return l.catch(d=>{throw d instanceof Z.ZR&&function Bf(m,l){var d;const y=null===(d=l.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===l?.code)l.resolver=new Sg(m,function Bd(m,l){var d;const y=(0,Z.m9)(m),M=l;return Oe(l.customData.operationType,y,"argument-error"),Oe(null===(d=M.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,y,"argument-error"),Io._fromError(y,M)}(m,l));else if(y){const M=gc(l),B=l;M&&(B.credential=M,B.tenantId=y.tenantId||void 0,B.email=y.email||void 0,B.phoneNumber=y.phoneNumber||void 0)}}(m,d),d}).then(d=>{const M=d.user;return{operationType:d.operationType,credential:ph(d),additionalUserInfo:Si(d),user:no.getOrCreate(M)}})}function Po(m,l){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,E.Z)(function*(m,l){const d=yield l;return{verificationId:d.verificationId,confirm:y=>gi(m,d.confirm(y))}})).apply(this,arguments)}class Sg{constructor(l,d){this.resolver=d,this.auth=function Au(m){return m.wrapped()}(l)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(l){return gi(hl(this.auth),this.resolver.resolveSignIn(l))}}class no{constructor(l){this._delegate=l,this.multiFactor=function Ef(m){const l=(0,Z.m9)(m);return Ko.has(l)||Ko.set(l,qc._fromUser(l)),Ko.get(l)}(l)}static getOrCreate(l){return no.USER_MAP.has(l)||no.USER_MAP.set(l,new no(l)),no.USER_MAP.get(l)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(l){return this._delegate.getIdTokenResult(l)}getIdToken(l){return this._delegate.getIdToken(l)}linkAndRetrieveDataWithCredential(l){return this.linkWithCredential(l)}linkWithCredential(l){var d=this;return(0,E.Z)(function*(){return gi(d.auth,Ji(d._delegate,l))})()}linkWithPhoneNumber(l,d){var y=this;return(0,E.Z)(function*(){return Po(y.auth,function Hl(m,l,d){return au.apply(this,arguments)}(y._delegate,l,d))})()}linkWithPopup(l){var d=this;return(0,E.Z)(function*(){return gi(d.auth,function Oa(m,l,d){return ka.apply(this,arguments)}(d._delegate,l,to))})()}linkWithRedirect(l){var d=this;return(0,E.Z)(function*(){return yield ld(on(d.auth)),Xo(d._delegate,l,to)})()}reauthenticateAndRetrieveDataWithCredential(l){return this.reauthenticateWithCredential(l)}reauthenticateWithCredential(l){var d=this;return(0,E.Z)(function*(){return gi(d.auth,fr(d._delegate,l))})()}reauthenticateWithPhoneNumber(l,d){return Po(this.auth,function Kd(m,l,d){return zl.apply(this,arguments)}(this._delegate,l,d))}reauthenticateWithPopup(l){return gi(this.auth,function Ao(m,l,d){return Na.apply(this,arguments)}(this._delegate,l,to))}reauthenticateWithRedirect(l){var d=this;return(0,E.Z)(function*(){return yield ld(on(d.auth)),hu(d._delegate,l,to)})()}sendEmailVerification(l){return function L(m,l){return te.apply(this,arguments)}(this._delegate,l)}unlink(l){var d=this;return(0,E.Z)(function*(){return yield function br(m,l){return $u.apply(this,arguments)}(d._delegate,l),d})()}updateEmail(l){return function mn(m,l){const d=(0,Z.m9)(m);return(0,Q._isFirebaseServerApp)(d.auth.app)?Promise.reject(Ze(d.auth)):zn(d,l,null)}(this._delegate,l)}updatePassword(l){return function er(m,l){return zn((0,Z.m9)(m),null,l)}(this._delegate,l)}updatePhoneNumber(l){return function ug(m,l){return Df.apply(this,arguments)}(this._delegate,l)}updateProfile(l){return function Xn(m,l){return un.apply(this,arguments)}(this._delegate,l)}verifyBeforeUpdateEmail(l,d){return function Fe(m,l,d){return nt.apply(this,arguments)}(this._delegate,l,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}no.USER_MAP=new WeakMap;const mc=Oe;let fl=(()=>{class m{constructor(d,y){if(this.app=d,y.isInitialized())return this._delegate=y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=d.options;mc(M,"invalid-api-key",{appName:d.name}),mc(M,"invalid-api-key",{appName:d.name});const B=typeof window<"u"?to:void 0;this._delegate=y.initialize({options:{persistence:Ba(M,d.name),popupRedirectResolver:B}}),this._delegate._updateErrorMap(Xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?no.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,y){!function ua(m,l,d){const y=on(m);Oe(y._canInitEmulator,y,"emulator-config-failed"),Oe(/^https?:\/\//.test(l),y,"invalid-emulator-scheme");const M=!!d?.disableWarnings,B=jo(l),{host:ie,port:ve}=function $o(m){const l=jo(m),d=/(\/\/)?([^?#/]+)/.exec(m.substr(l.length));if(!d)return{host:"",port:null};const y=d[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(y);if(M){const B=M[1];return{host:B,port:ca(y.substr(B.length+1))}}{const[B,ie]=y.split(":");return{host:B,port:ca(ie)}}}(l);y.config.emulator={url:`${B}//${ie}${null===ve?"":`:${ve}`}/`},y.settings.appVerificationDisabledForTesting=!0,y.emulatorConfig=Object.freeze({host:ie,port:ve,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function la(){function m(){const l=document.createElement("p"),d=l.style;l.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",l.classList.add("firebase-emulator-warning"),document.body.appendChild(l)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",m):m())}()}(this._delegate,d,y)}applyActionCode(d){return function fs(m,l){return Ws.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return Ea(this._delegate,d)}confirmPasswordReset(d,y){return function qo(m,l,d){return Ai.apply(this,arguments)}(this._delegate,d,y)}createUserWithEmailAndPassword(d,y){var M=this;return(0,E.Z)(function*(){return gi(M._delegate,function Gu(m,l,d){return qs.apply(this,arguments)}(M._delegate,d,y))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function U(m,l){return P.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function jr(m,l){const d=qr.parseLink(l);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,E.Z)(function*(){mc(ud(),d._delegate,"operation-not-supported-in-this-environment");const y=yield function Oi(m,l){return Yd.apply(this,arguments)}(d._delegate,to);return y?gi(d._delegate,Promise.resolve(y)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function dc(m,l){on(m)._logFramework(l)}(this._delegate,d)}onAuthStateChanged(d,y,M){const{next:B,error:ie,complete:ve}=gh(d,y,M);return this._delegate.onAuthStateChanged(B,ie,ve)}onIdTokenChanged(d,y,M){const{next:B,error:ie,complete:ve}=gh(d,y,M);return this._delegate.onIdTokenChanged(B,ie,ve)}sendSignInLinkToEmail(d,y){return function Ia(m,l,d){return Ks.apply(this,arguments)}(this._delegate,d,y)}sendPasswordResetEmail(d,y){return function zc(m,l,d){return yo.apply(this,arguments)}(this._delegate,d,y||void 0)}setPersistence(d){var y=this;return(0,E.Z)(function*(){let M;switch(function cl(m,l){Du(Object.values(Wi).includes(l),m,"invalid-persistence-type"),(0,Z.b$)()?Du(l!==Wi.SESSION,m,"unsupported-persistence-type"):(0,Z.UG)()?Du(l===Wi.NONE,m,"unsupported-persistence-type"):pi()?Du(l===Wi.NONE||l===Wi.LOCAL&&(0,Z.hl)(),m,"unsupported-persistence-type"):Du(l===Wi.NONE||Uf(),m,"unsupported-persistence-type")}(y._delegate,d),d){case Wi.SESSION:M=_n;break;case Wi.LOCAL:M=(yield Et(Pn)._isAvailable())?Pn:To;break;case Wi.NONE:M=ft;break;default:return ze("argument-error",{appName:y._delegate.name})}return y._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return gi(this._delegate,function Vl(m){return vr.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return gi(this._delegate,In(this._delegate,d))}signInWithCustomToken(d){return gi(this._delegate,function Hu(m,l){return mo.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,y){return gi(this._delegate,function Wu(m,l,d){return(0,Q._isFirebaseServerApp)(m.app)?Promise.reject(Ze(m)):In((0,Z.m9)(m),Ir.credential(l,d)).catch(function(){var y=(0,E.Z)(function*(M){throw"auth/password-does-not-meet-requirements"===M.code&&Wo(m),M});return function(M){return y.apply(this,arguments)}}())}(this._delegate,d,y))}signInWithEmailLink(d,y){return gi(this._delegate,function Ul(m,l,d){return vo.apply(this,arguments)}(this._delegate,d,y))}signInWithPhoneNumber(d,y){return Po(this._delegate,function Yu(m,l,d){return Ju.apply(this,arguments)}(this._delegate,d,y))}signInWithPopup(d){var y=this;return(0,E.Z)(function*(){return mc(ud(),y._delegate,"operation-not-supported-in-this-environment"),gi(y._delegate,function Xu(m,l,d){return xa.apply(this,arguments)}(y._delegate,d,to))})()}signInWithRedirect(d){var y=this;return(0,E.Z)(function*(){return mc(ud(),y._delegate,"operation-not-supported-in-this-environment"),yield ld(y._delegate),Qd(y._delegate,d,to)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function Gc(m,l){return ps.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return m.Persistence=Wi,m})();function gh(m,l,d){let y=m;"function"!=typeof m&&({next:y,error:l,complete:d}=m);const M=y;return{next:ie=>M(ie&&no.getOrCreate(ie)),error:l,complete:d}}function Ba(m,l){const d=function ll(m,l){const d=dl();if(!d)return[];const y=mt(Ri,m,l);switch(d.getItem(y)){case Wi.NONE:return[ft];case Wi.LOCAL:return[Pn,_n];case Wi.SESSION:return[_n];default:return[]}}(m,l);if(typeof self<"u"&&!d.includes(Pn)&&d.push(Pn),typeof window<"u")for(const y of[To,_n])d.includes(y)||d.push(y);return d.includes(ft)||d.push(ft),d}class _c{constructor(){this.providerId="phone",this._delegate=new uu(hl(Y.Z.auth()))}static credential(l,d){return uu.credential(l,d)}verifyPhoneNumber(l,d){return this._delegate.verifyPhoneNumber(l,d)}unwrap(){return this._delegate}}_c.PHONE_SIGN_IN_METHOD=uu.PHONE_SIGN_IN_METHOD,_c.PROVIDER_ID=uu.PROVIDER_ID;const hd=Oe;class yc{constructor(l,d,y=Y.Z.app()){var M;hd(null===(M=y.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:y.name}),this._delegate=new Ra(y.auth(),l,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function jf(m){m.INTERNAL.registerComponent(new me.wA("auth-compat",l=>{const d=l.getProvider("app-compat").getImmediate(),y=l.getProvider("auth");return new fl(d,y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ir,FacebookAuthProvider:Hi,GithubAuthProvider:Ti,GoogleAuthProvider:wi,OAuthProvider:ur,SAMLAuthProvider:hs,PhoneAuthProvider:_c,PhoneMultiFactorGenerator:vg,RecaptchaVerifier:yc,TwitterAuthProvider:ha,Auth:fl,AuthCredential:ls,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),m.registerVersion("@firebase/auth-compat","0.5.10")}(Y.Z)},5861:(St,Pe,F)=>{function E(Q,Z,he,ae,me,Ne,De){try{var X=Q[Ne](De),re=X.value}catch(ue){return void he(ue)}X.done?Z(re):Promise.resolve(re).then(ae,me)}function Y(Q){return function(){var Z=this,he=arguments;return new Promise(function(ae,me){var Ne=Q.apply(Z,he);function De(re){E(Ne,ae,me,De,X,"next",re)}function X(re){E(Ne,ae,me,De,X,"throw",re)}De(void 0)})}}F.d(Pe,{Z:()=>Y})},7582:(St,Pe,F)=>{function Z(_e,Ae){var $e={};for(var He in _e)Object.prototype.hasOwnProperty.call(_e,He)&&Ae.indexOf(He)<0&&($e[He]=_e[He]);if(null!=_e&&"function"==typeof Object.getOwnPropertySymbols){var ot=0;for(He=Object.getOwnPropertySymbols(_e);ot<He.length;ot++)Ae.indexOf(He[ot])<0&&Object.prototype.propertyIsEnumerable.call(_e,He[ot])&&($e[He[ot]]=_e[He[ot]])}return $e}function ue(_e,Ae,$e,He){return new($e||($e=Promise))(function(Qe,ce){function yt(Nt){try{kt(He.next(Nt))}catch(Gt){ce(Gt)}}function Lt(Nt){try{kt(He.throw(Nt))}catch(Gt){ce(Gt)}}function kt(Nt){Nt.done?Qe(Nt.value):function ot(Qe){return Qe instanceof $e?Qe:new $e(function(ce){ce(Qe)})}(Nt.value).then(yt,Lt)}kt((He=He.apply(_e,Ae||[])).next())})}function ge(_e){return this instanceof ge?(this.v=_e,this):new ge(_e)}function ze(_e,Ae,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,He=$e.apply(_e,Ae||[]),Qe=[];return ot={},yt("next"),yt("throw"),yt("return",function ce(gn){return function(Fn){return Promise.resolve(Fn).then(gn,Gt)}}),ot[Symbol.asyncIterator]=function(){return this},ot;function yt(gn,Fn){He[gn]&&(ot[gn]=function(bn){return new Promise(function(Wn,hr){Qe.push([gn,bn,Wn,hr])>1||Lt(gn,bn)})},Fn&&(ot[gn]=Fn(ot[gn])))}function Lt(gn,Fn){try{!function kt(gn){gn.value instanceof ge?Promise.resolve(gn.value.v).then(Nt,Gt):mi(Qe[0][2],gn)}(He[gn](Fn))}catch(bn){mi(Qe[0][3],bn)}}function Nt(gn){Lt("next",gn)}function Gt(gn){Lt("throw",gn)}function mi(gn,Fn){gn(Fn),Qe.shift(),Qe.length&&Lt(Qe[0][0],Qe[0][1])}}function et(_e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Ae=_e[Symbol.asyncIterator];return Ae?Ae.call(_e):(_e=function Ke(_e){var Ae="function"==typeof Symbol&&Symbol.iterator,$e=Ae&&_e[Ae],He=0;if($e)return $e.call(_e);if(_e&&"number"==typeof _e.length)return{next:function(){return _e&&He>=_e.length&&(_e=void 0),{value:_e&&_e[He++],done:!_e}}};throw new TypeError(Ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(_e),$e={},He("next"),He("throw"),He("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function He(Qe){$e[Qe]=_e[Qe]&&function(ce){return new Promise(function(yt,Lt){!function ot(Qe,ce,yt,Lt){Promise.resolve(Lt).then(function(kt){Qe({value:kt,done:yt})},ce)}(yt,Lt,(ce=_e[Qe](ce)).done,ce.value)})}}}F.d(Pe,{FC:()=>ze,KL:()=>et,_T:()=>Z,mG:()=>ue,qq:()=>ge}),"function"==typeof SuppressedError&&SuppressedError}},St=>{St(St.s=7908)}]);